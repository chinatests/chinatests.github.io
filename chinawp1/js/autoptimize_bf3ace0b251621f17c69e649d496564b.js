;
/*!
 * modernizr v3.6.0
 * Build https://modernizr.com/download?-cssfilters-flexbox-flexboxlegacy-touchevents-setclasses-dontmin
 *
 * Copyright (c)
 *  Faruk Ates
 *  Paul Irish
 *  Alex Sexton
 *  Ryan Seddon
 *  Patrick Kettner
 *  Stu Cox
 *  Richard Herrera

 * MIT License
 */
(function(window,document,undefined){var classes=[];var tests=[];var ModernizrProto={_version:'3.6.0',_config:{'classPrefix':'','enableClasses':true,'enableJSClass':true,'usePrefixes':true},_q:[],on:function(test,cb){var self=this;setTimeout(function(){cb(self[test]);},0);},addTest:function(name,fn,options){tests.push({name:name,fn:fn,options:options});},addAsyncTest:function(fn){tests.push({name:null,fn:fn});}};var Modernizr=function(){};Modernizr.prototype=ModernizrProto;Modernizr=new Modernizr();function is(obj,type){return typeof obj===type;};function testRunner(){var featureNames;var feature;var aliasIdx;var result;var nameIdx;var featureName;var featureNameSplit;for(var featureIdx in tests){if(tests.hasOwnProperty(featureIdx)){featureNames=[];feature=tests[featureIdx];if(feature.name){featureNames.push(feature.name.toLowerCase());if(feature.options&&feature.options.aliases&&feature.options.aliases.length){for(aliasIdx=0;aliasIdx<feature.options.aliases.length;aliasIdx++){featureNames.push(feature.options.aliases[aliasIdx].toLowerCase());}}}
result=is(feature.fn,'function')?feature.fn():feature.fn;for(nameIdx=0;nameIdx<featureNames.length;nameIdx++){featureName=featureNames[nameIdx];featureNameSplit=featureName.split('.');if(featureNameSplit.length===1){Modernizr[featureNameSplit[0]]=result;}else{if(Modernizr[featureNameSplit[0]]&&!(Modernizr[featureNameSplit[0]]instanceof Boolean)){Modernizr[featureNameSplit[0]]=new Boolean(Modernizr[featureNameSplit[0]]);}
Modernizr[featureNameSplit[0]][featureNameSplit[1]]=result;}
classes.push((result?'':'no-')+featureNameSplit.join('-'));}}}};var prefixes=(ModernizrProto._config.usePrefixes?' -webkit- -moz- -o- -ms- '.split(' '):['','']);ModernizrProto._prefixes=prefixes;
/*!
{
  "name": "CSS Supports",
  "property": "supports",
  "caniuse": "css-featurequeries",
  "tags": ["css"],
  "builderAliases": ["css_supports"],
  "notes": [{
    "name": "W3 Spec",
    "href": "http://dev.w3.org/csswg/css3-conditional/#at-supports"
  },{
    "name": "Related Github Issue",
    "href": "https://github.com/Modernizr/Modernizr/issues/648"
  },{
    "name": "W3 Info",
    "href": "http://dev.w3.org/csswg/css3-conditional/#the-csssupportsrule-interface"
  }]
}
!*/
var newSyntax='CSS'in window&&'supports'in window.CSS;var oldSyntax='supportsCSS'in window;Modernizr.addTest('supports',newSyntax||oldSyntax);var docElement=document.documentElement;var isSVG=docElement.nodeName.toLowerCase()==='svg';function setClasses(classes){var className=docElement.className;var classPrefix=Modernizr._config.classPrefix||'';if(isSVG){className=className.baseVal;}
if(Modernizr._config.enableJSClass){var reJS=new RegExp('(^|\\s)'+classPrefix+'no-js(\\s|$)');className=className.replace(reJS,'$1'+classPrefix+'js$2');}
if(Modernizr._config.enableClasses){className+=' '+classPrefix+classes.join(' '+classPrefix);if(isSVG){docElement.className.baseVal=className;}else{docElement.className=className;}}};function createElement(){if(typeof document.createElement!=='function'){return document.createElement(arguments[0]);}else if(isSVG){return document.createElementNS.call(document,'http://www.w3.org/2000/svg',arguments[0]);}else{return document.createElement.apply(document,arguments);}};function getBody(){var body=document.body;if(!body){body=createElement(isSVG?'svg':'body');body.fake=true;}
return body;};function injectElementWithStyles(rule,callback,nodes,testnames){var mod='modernizr';var style;var ret;var node;var docOverflow;var div=createElement('div');var body=getBody();if(parseInt(nodes,10)){while(nodes--){node=createElement('div');node.id=testnames?testnames[nodes]:mod+(nodes+1);div.appendChild(node);}}
style=createElement('style');style.type='text/css';style.id='s'+mod;(!body.fake?div:body).appendChild(style);body.appendChild(div);if(style.styleSheet){style.styleSheet.cssText=rule;}else{style.appendChild(document.createTextNode(rule));}
div.id=mod;if(body.fake){body.style.background='';body.style.overflow='hidden';docOverflow=docElement.style.overflow;docElement.style.overflow='hidden';docElement.appendChild(body);}
ret=callback(div,rule);if(body.fake){body.parentNode.removeChild(body);docElement.style.overflow=docOverflow;docElement.offsetHeight;}else{div.parentNode.removeChild(div);}
return!!ret;};var testStyles=ModernizrProto.testStyles=injectElementWithStyles;
/*!
{
  "name": "Touch Events",
  "property": "touchevents",
  "caniuse" : "touch",
  "tags": ["media", "attribute"],
  "notes": [{
    "name": "Touch Events spec",
    "href": "https://www.w3.org/TR/2013/WD-touch-events-20130124/"
  }],
  "warnings": [
    "Indicates if the browser supports the Touch Events spec, and does not necessarily reflect a touchscreen device"
  ],
  "knownBugs": [
    "False-positive on some configurations of Nokia N900",
    "False-positive on some BlackBerry 6.0 builds – https://github.com/Modernizr/Modernizr/issues/372#issuecomment-3112695"
  ]
}
!*/
Modernizr.addTest('touchevents',function(){var bool;if(('ontouchstart'in window)||window.DocumentTouch&&document instanceof DocumentTouch){bool=true;}else{var query=['@media (',prefixes.join('touch-enabled),('),'heartz',')','{#modernizr{top:9px;position:absolute}}'].join('');testStyles(query,function(node){bool=node.offsetTop===9;});}
return bool;});var omPrefixes='Moz O ms Webkit';var cssomPrefixes=(ModernizrProto._config.usePrefixes?omPrefixes.split(' '):[]);ModernizrProto._cssomPrefixes=cssomPrefixes;var domPrefixes=(ModernizrProto._config.usePrefixes?omPrefixes.toLowerCase().split(' '):[]);ModernizrProto._domPrefixes=domPrefixes;function contains(str,substr){return!!~(''+str).indexOf(substr);};function cssToDOM(name){return name.replace(/([a-z])-([a-z])/g,function(str,m1,m2){return m1+m2.toUpperCase();}).replace(/^-/,'');};function fnBind(fn,that){return function(){return fn.apply(that,arguments);};};function testDOMProps(props,obj,elem){var item;for(var i in props){if(props[i]in obj){if(elem===false){return props[i];}
item=obj[props[i]];if(is(item,'function')){return fnBind(item,elem||obj);}
return item;}}
return false;};var modElem={elem:createElement('modernizr')};Modernizr._q.push(function(){delete modElem.elem;});var mStyle={style:modElem.elem.style};Modernizr._q.unshift(function(){delete mStyle.style;});function domToCSS(name){return name.replace(/([A-Z])/g,function(str,m1){return'-'+m1.toLowerCase();}).replace(/^ms-/,'-ms-');};function computedStyle(elem,pseudo,prop){var result;if('getComputedStyle'in window){result=getComputedStyle.call(window,elem,pseudo);var console=window.console;if(result!==null){if(prop){result=result.getPropertyValue(prop);}}else{if(console){var method=console.error?'error':'log';console[method].call(console,'getComputedStyle returning null, its possible modernizr test results are inaccurate');}}}else{result=!pseudo&&elem.currentStyle&&elem.currentStyle[prop];}
return result;};function nativeTestProps(props,value){var i=props.length;if('CSS'in window&&'supports'in window.CSS){while(i--){if(window.CSS.supports(domToCSS(props[i]),value)){return true;}}
return false;}
else if('CSSSupportsRule'in window){var conditionText=[];while(i--){conditionText.push('('+domToCSS(props[i])+':'+value+')');}
conditionText=conditionText.join(' or ');return injectElementWithStyles('@supports ('+conditionText+') { #modernizr { position: absolute; } }',function(node){return computedStyle(node,null,'position')=='absolute';});}
return undefined;};function testProps(props,prefixed,value,skipValueTest){skipValueTest=is(skipValueTest,'undefined')?false:skipValueTest;if(!is(value,'undefined')){var result=nativeTestProps(props,value);if(!is(result,'undefined')){return result;}}
var afterInit,i,propsLength,prop,before;var elems=['modernizr','tspan','samp'];while(!mStyle.style&&elems.length){afterInit=true;mStyle.modElem=createElement(elems.shift());mStyle.style=mStyle.modElem.style;}
function cleanElems(){if(afterInit){delete mStyle.style;delete mStyle.modElem;}}
propsLength=props.length;for(i=0;i<propsLength;i++){prop=props[i];before=mStyle.style[prop];if(contains(prop,'-')){prop=cssToDOM(prop);}
if(mStyle.style[prop]!==undefined){if(!skipValueTest&&!is(value,'undefined')){try{mStyle.style[prop]=value;}catch(e){}
if(mStyle.style[prop]!=before){cleanElems();return prefixed=='pfx'?prop:true;}}
else{cleanElems();return prefixed=='pfx'?prop:true;}}}
cleanElems();return false;};function testPropsAll(prop,prefixed,elem,value,skipValueTest){var ucProp=prop.charAt(0).toUpperCase()+prop.slice(1),props=(prop+' '+cssomPrefixes.join(ucProp+' ')+ucProp).split(' ');if(is(prefixed,'string')||is(prefixed,'undefined')){return testProps(props,prefixed,value,skipValueTest);}else{props=(prop+' '+(domPrefixes).join(ucProp+' ')+ucProp).split(' ');return testDOMProps(props,prefixed,elem);}}
ModernizrProto.testAllProps=testPropsAll;function testAllProps(prop,value,skipValueTest){return testPropsAll(prop,undefined,undefined,value,skipValueTest);}
ModernizrProto.testAllProps=testAllProps;
/*!
{
  "name": "CSS Filters",
  "property": "cssfilters",
  "caniuse": "css-filters",
  "polyfills": ["polyfilter"],
  "tags": ["css"],
  "builderAliases": ["css_filters"],
  "notes": [{
    "name": "MDN article on CSS filters",
    "href": "https://developer.mozilla.org/en-US/docs/Web/CSS/filter"
  }]
}
!*/
Modernizr.addTest('cssfilters',function(){if(Modernizr.supports){return testAllProps('filter','blur(2px)');}else{var el=createElement('a');el.style.cssText=prefixes.join('filter:blur(2px); ');return!!el.style.length&&((document.documentMode===undefined||document.documentMode>9));}});
/*!
{
  "name": "Flexbox",
  "property": "flexbox",
  "caniuse": "flexbox",
  "tags": ["css"],
  "notes": [{
    "name": "The _new_ flexbox",
    "href": "http://dev.w3.org/csswg/css3-flexbox"
  }],
  "warnings": [
    "A `true` result for this detect does not imply that the `flex-wrap` property is supported; see the `flexwrap` detect."
  ]
}
!*/
Modernizr.addTest('flexbox',testAllProps('flexBasis','1px',true));
/*!
{
  "name": "Flexbox (legacy)",
  "property": "flexboxlegacy",
  "tags": ["css"],
  "polyfills": ["flexie"],
  "notes": [{
    "name": "The _old_ flexbox",
    "href": "https://www.w3.org/TR/2009/WD-css3-flexbox-20090723/"
  }]
}
!*/
Modernizr.addTest('flexboxlegacy',testAllProps('boxDirection','reverse',true));testRunner();setClasses(classes);delete ModernizrProto.addTest;delete ModernizrProto.addAsyncTest;for(var i=0;i<Modernizr._q.length;i++){Modernizr._q[i]();}
window.Modernizr=Modernizr;;})(window,document);
;
/*! waitForImages jQuery Plugin - v2.1.0 - 2016-01-04
* https://github.com/alexanderdickson/waitForImages
* Copyright (c) 2016 Alex Dickson; Licensed MIT */
(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof exports==='object'){module.exports=factory(require('jquery'));}else{factory(jQuery);}}(function($){var eventNamespace='waitForImages';$.waitForImages={hasImageProperties:['backgroundImage','listStyleImage','borderImage','borderCornerImage','cursor'],hasImageAttributes:['srcset']};$.expr[':']['has-src']=function(obj){return $(obj).is('img[src][src!=""]');};$.expr[':'].uncached=function(obj){if(!$(obj).is(':has-src')){return false;}
return!obj.complete;};$.fn.waitForImages=function(){var allImgsLength=0;var allImgsLoaded=0;var deferred=$.Deferred();var finishedCallback;var eachCallback;var waitForAll;if($.isPlainObject(arguments[0])){waitForAll=arguments[0].waitForAll;eachCallback=arguments[0].each;finishedCallback=arguments[0].finished;}else{if(arguments.length===1&&$.type(arguments[0])==='boolean'){waitForAll=arguments[0];}else{finishedCallback=arguments[0];eachCallback=arguments[1];waitForAll=arguments[2];}}
finishedCallback=finishedCallback||$.noop;eachCallback=eachCallback||$.noop;waitForAll=!!waitForAll;if(!$.isFunction(finishedCallback)||!$.isFunction(eachCallback)){throw new TypeError('An invalid callback was supplied.');}
this.each(function(){var obj=$(this);var allImgs=[];var hasImgProperties=$.waitForImages.hasImageProperties||[];var hasImageAttributes=$.waitForImages.hasImageAttributes||[];var matchUrl=/url\(\s*(['"]?)(.*?)\1\s*\)/g;if(waitForAll){obj.find('*').addBack().each(function(){var element=$(this);if(element.is('img:has-src')&&!element.is('[srcset]')){allImgs.push({src:element.attr('src'),element:element[0]});}
$.each(hasImgProperties,function(i,property){var propertyValue=element.css(property);var match;if(!propertyValue){return true;}
while(match=matchUrl.exec(propertyValue)){allImgs.push({src:match[2],element:element[0]});}});$.each(hasImageAttributes,function(i,attribute){var attributeValue=element.attr(attribute);var attributeValues;if(!attributeValue){return true;}
allImgs.push({src:element.attr('src'),srcset:element.attr('srcset'),element:element[0]});});});}else{obj.find('img:has-src').each(function(){allImgs.push({src:this.src,element:this});});}
allImgsLength=allImgs.length;allImgsLoaded=0;if(allImgsLength===0){finishedCallback.call(obj[0]);deferred.resolveWith(obj[0]);}
$.each(allImgs,function(i,img){var image=new Image();var events='load.'+eventNamespace+' error.'+eventNamespace;$(image).one(events,function me(event){var eachArguments=[allImgsLoaded,allImgsLength,event.type=='load'];allImgsLoaded++;eachCallback.apply(img.element,eachArguments);deferred.notifyWith(img.element,eachArguments);$(this).off(events,me);if(allImgsLoaded==allImgsLength){finishedCallback.call(obj[0]);deferred.resolveWith(obj[0]);return false;}});if(img.srcset){image.srcset=img.srcset;}
image.src=img.src;});});return deferred.promise();};}));
(function($){'use strict';function cnBookingThrowErrorIfUndefined(object,requiredStructure){for(var key in requiredStructure){if(typeof object[key]==='undefined'){throw new Error(key+' is undefined.');}
if(object[key]&&typeof object[key]==='object'&&Object.keys(object[key]).length!==0){cnBookingThrowErrorIfUndefined(object[key],requiredStructure[key]);}}}
var requiredStructure={cnBookingConfig:{inputDateFormat:{},bookingEngine:{provider:{}}}};switch(window.cnBookingConfig.bookingEngine.provider){case'profitroom':case'profitroom-multi':requiredStructure.cnBookingConfig.bookingEngine={provider:{},params:{},locations:{},openOverlay:{}}
break;}
cnBookingThrowErrorIfUndefined(window,requiredStructure);})(jQuery);
typeof navigator==="object"&&(function(global,factory){typeof exports==='object'&&typeof module!=='undefined'?module.exports=factory():typeof define==='function'&&define.amd?define('Plyr',factory):(global=global||self,global.Plyr=factory());}(this,function(){'use strict';(function(){if(typeof window==='undefined'){return;}
try{var ce=new window.CustomEvent('test',{cancelable:true});ce.preventDefault();if(ce.defaultPrevented!==true){throw new Error('Could not prevent default');}}catch(e){var CustomEvent=function CustomEvent(event,params){var evt,origPrevent;params=params||{};params.bubbles=!!params.bubbles;params.cancelable=!!params.cancelable;evt=document.createEvent('CustomEvent');evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail);origPrevent=evt.preventDefault;evt.preventDefault=function(){origPrevent.call(this);try{Object.defineProperty(this,'defaultPrevented',{get:function get(){return true;}});}catch(e){this.defaultPrevented=true;}};return evt;};CustomEvent.prototype=window.Event.prototype;window.CustomEvent=CustomEvent;}})();var commonjsGlobal=typeof globalThis!=='undefined'?globalThis:typeof window!=='undefined'?window:typeof global!=='undefined'?global:typeof self!=='undefined'?self:{};function createCommonjsModule(fn,module){return module={exports:{}},fn(module,module.exports),module.exports;}
var O='object';var check=function(it){return it&&it.Math==Math&&it;};var global_1=check(typeof globalThis==O&&globalThis)||check(typeof window==O&&window)||check(typeof self==O&&self)||check(typeof commonjsGlobal==O&&commonjsGlobal)||Function('return this')();var fails=function(exec){try{return!!exec();}catch(error){return true;}};var descriptors=!fails(function(){return Object.defineProperty({},'a',{get:function(){return 7;}}).a!=7;});var nativePropertyIsEnumerable={}.propertyIsEnumerable;var getOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;var NASHORN_BUG=getOwnPropertyDescriptor&&!nativePropertyIsEnumerable.call({1:2},1);var f=NASHORN_BUG?function propertyIsEnumerable(V){var descriptor=getOwnPropertyDescriptor(this,V);return!!descriptor&&descriptor.enumerable;}:nativePropertyIsEnumerable;var objectPropertyIsEnumerable={f:f};var createPropertyDescriptor=function(bitmap,value){return{enumerable:!(bitmap&1),configurable:!(bitmap&2),writable:!(bitmap&4),value:value};};var toString={}.toString;var classofRaw=function(it){return toString.call(it).slice(8,-1);};var split=''.split;var indexedObject=fails(function(){return!Object('z').propertyIsEnumerable(0);})?function(it){return classofRaw(it)=='String'?split.call(it,''):Object(it);}:Object;var requireObjectCoercible=function(it){if(it==undefined)throw TypeError("Can't call method on "+it);return it;};var toIndexedObject=function(it){return indexedObject(requireObjectCoercible(it));};var isObject=function(it){return typeof it==='object'?it!==null:typeof it==='function';};var toPrimitive=function(input,PREFERRED_STRING){if(!isObject(input))return input;var fn,val;if(PREFERRED_STRING&&typeof(fn=input.toString)=='function'&&!isObject(val=fn.call(input)))return val;if(typeof(fn=input.valueOf)=='function'&&!isObject(val=fn.call(input)))return val;if(!PREFERRED_STRING&&typeof(fn=input.toString)=='function'&&!isObject(val=fn.call(input)))return val;throw TypeError("Can't convert object to primitive value");};var hasOwnProperty={}.hasOwnProperty;var has=function(it,key){return hasOwnProperty.call(it,key);};var document$1=global_1.document;var EXISTS=isObject(document$1)&&isObject(document$1.createElement);var documentCreateElement=function(it){return EXISTS?document$1.createElement(it):{};};var ie8DomDefine=!descriptors&&!fails(function(){return Object.defineProperty(documentCreateElement('div'),'a',{get:function(){return 7;}}).a!=7;});var nativeGetOwnPropertyDescriptor=Object.getOwnPropertyDescriptor;var f$1=descriptors?nativeGetOwnPropertyDescriptor:function getOwnPropertyDescriptor(O,P){O=toIndexedObject(O);P=toPrimitive(P,true);if(ie8DomDefine)try{return nativeGetOwnPropertyDescriptor(O,P);}catch(error){}
if(has(O,P))return createPropertyDescriptor(!objectPropertyIsEnumerable.f.call(O,P),O[P]);};var objectGetOwnPropertyDescriptor={f:f$1};var anObject=function(it){if(!isObject(it)){throw TypeError(String(it)+' is not an object');}return it;};var nativeDefineProperty=Object.defineProperty;var f$2=descriptors?nativeDefineProperty:function defineProperty(O,P,Attributes){anObject(O);P=toPrimitive(P,true);anObject(Attributes);if(ie8DomDefine)try{return nativeDefineProperty(O,P,Attributes);}catch(error){}
if('get'in Attributes||'set'in Attributes)throw TypeError('Accessors not supported');if('value'in Attributes)O[P]=Attributes.value;return O;};var objectDefineProperty={f:f$2};var hide=descriptors?function(object,key,value){return objectDefineProperty.f(object,key,createPropertyDescriptor(1,value));}:function(object,key,value){object[key]=value;return object;};var setGlobal=function(key,value){try{hide(global_1,key,value);}catch(error){global_1[key]=value;}return value;};var isPure=false;var shared=createCommonjsModule(function(module){var SHARED='__core-js_shared__';var store=global_1[SHARED]||setGlobal(SHARED,{});(module.exports=function(key,value){return store[key]||(store[key]=value!==undefined?value:{});})('versions',[]).push({version:'3.1.3',mode:'global',copyright:'© 2019 Denis Pushkarev (zloirock.ru)'});});var functionToString=shared('native-function-to-string',Function.toString);var WeakMap$1=global_1.WeakMap;var nativeWeakMap=typeof WeakMap$1==='function'&&/native code/.test(functionToString.call(WeakMap$1));var id=0;var postfix=Math.random();var uid=function(key){return'Symbol('+String(key===undefined?'':key)+')_'+(++id+postfix).toString(36);};var keys=shared('keys');var sharedKey=function(key){return keys[key]||(keys[key]=uid(key));};var hiddenKeys={};var WeakMap$2=global_1.WeakMap;var set,get,has$1;var enforce=function(it){return has$1(it)?get(it):set(it,{});};var getterFor=function(TYPE){return function(it){var state;if(!isObject(it)||(state=get(it)).type!==TYPE){throw TypeError('Incompatible receiver, '+TYPE+' required');}return state;};};if(nativeWeakMap){var store=new WeakMap$2();var wmget=store.get;var wmhas=store.has;var wmset=store.set;set=function(it,metadata){wmset.call(store,it,metadata);return metadata;};get=function(it){return wmget.call(store,it)||{};};has$1=function(it){return wmhas.call(store,it);};}else{var STATE=sharedKey('state');hiddenKeys[STATE]=true;set=function(it,metadata){hide(it,STATE,metadata);return metadata;};get=function(it){return has(it,STATE)?it[STATE]:{};};has$1=function(it){return has(it,STATE);};}
var internalState={set:set,get:get,has:has$1,enforce:enforce,getterFor:getterFor};var redefine=createCommonjsModule(function(module){var getInternalState=internalState.get;var enforceInternalState=internalState.enforce;var TEMPLATE=String(functionToString).split('toString');shared('inspectSource',function(it){return functionToString.call(it);});(module.exports=function(O,key,value,options){var unsafe=options?!!options.unsafe:false;var simple=options?!!options.enumerable:false;var noTargetGet=options?!!options.noTargetGet:false;if(typeof value=='function'){if(typeof key=='string'&&!has(value,'name'))hide(value,'name',key);enforceInternalState(value).source=TEMPLATE.join(typeof key=='string'?key:'');}
if(O===global_1){if(simple)O[key]=value;else setGlobal(key,value);return;}else if(!unsafe){delete O[key];}else if(!noTargetGet&&O[key]){simple=true;}
if(simple)O[key]=value;else hide(O,key,value);})(Function.prototype,'toString',function toString(){return typeof this=='function'&&getInternalState(this).source||functionToString.call(this);});});var path=global_1;var aFunction=function(variable){return typeof variable=='function'?variable:undefined;};var getBuiltIn=function(namespace,method){return arguments.length<2?aFunction(path[namespace])||aFunction(global_1[namespace]):path[namespace]&&path[namespace][method]||global_1[namespace]&&global_1[namespace][method];};var ceil=Math.ceil;var floor=Math.floor;var toInteger=function(argument){return isNaN(argument=+argument)?0:(argument>0?floor:ceil)(argument);};var min=Math.min;var toLength=function(argument){return argument>0?min(toInteger(argument),0x1FFFFFFFFFFFFF):0;};var max=Math.max;var min$1=Math.min;var toAbsoluteIndex=function(index,length){var integer=toInteger(index);return integer<0?max(integer+length,0):min$1(integer,length);};var createMethod=function(IS_INCLUDES){return function($this,el,fromIndex){var O=toIndexedObject($this);var length=toLength(O.length);var index=toAbsoluteIndex(fromIndex,length);var value;if(IS_INCLUDES&&el!=el)while(length>index){value=O[index++];if(value!=value)return true;}else for(;length>index;index++){if((IS_INCLUDES||index in O)&&O[index]===el)return IS_INCLUDES||index||0;}return!IS_INCLUDES&&-1;};};var arrayIncludes={includes:createMethod(true),indexOf:createMethod(false)};var indexOf=arrayIncludes.indexOf;var objectKeysInternal=function(object,names){var O=toIndexedObject(object);var i=0;var result=[];var key;for(key in O)!has(hiddenKeys,key)&&has(O,key)&&result.push(key);while(names.length>i)if(has(O,key=names[i++])){~indexOf(result,key)||result.push(key);}
return result;};var enumBugKeys=['constructor','hasOwnProperty','isPrototypeOf','propertyIsEnumerable','toLocaleString','toString','valueOf'];var hiddenKeys$1=enumBugKeys.concat('length','prototype');var f$3=Object.getOwnPropertyNames||function getOwnPropertyNames(O){return objectKeysInternal(O,hiddenKeys$1);};var objectGetOwnPropertyNames={f:f$3};var f$4=Object.getOwnPropertySymbols;var objectGetOwnPropertySymbols={f:f$4};var ownKeys=getBuiltIn('Reflect','ownKeys')||function ownKeys(it){var keys=objectGetOwnPropertyNames.f(anObject(it));var getOwnPropertySymbols=objectGetOwnPropertySymbols.f;return getOwnPropertySymbols?keys.concat(getOwnPropertySymbols(it)):keys;};var copyConstructorProperties=function(target,source){var keys=ownKeys(source);var defineProperty=objectDefineProperty.f;var getOwnPropertyDescriptor=objectGetOwnPropertyDescriptor.f;for(var i=0;i<keys.length;i++){var key=keys[i];if(!has(target,key))defineProperty(target,key,getOwnPropertyDescriptor(source,key));}};var replacement=/#|\.prototype\./;var isForced=function(feature,detection){var value=data[normalize(feature)];return value==POLYFILL?true:value==NATIVE?false:typeof detection=='function'?fails(detection):!!detection;};var normalize=isForced.normalize=function(string){return String(string).replace(replacement,'.').toLowerCase();};var data=isForced.data={};var NATIVE=isForced.NATIVE='N';var POLYFILL=isForced.POLYFILL='P';var isForced_1=isForced;var getOwnPropertyDescriptor$1=objectGetOwnPropertyDescriptor.f;var _export=function(options,source){var TARGET=options.target;var GLOBAL=options.global;var STATIC=options.stat;var FORCED,target,key,targetProperty,sourceProperty,descriptor;if(GLOBAL){target=global_1;}else if(STATIC){target=global_1[TARGET]||setGlobal(TARGET,{});}else{target=(global_1[TARGET]||{}).prototype;}
if(target)for(key in source){sourceProperty=source[key];if(options.noTargetGet){descriptor=getOwnPropertyDescriptor$1(target,key);targetProperty=descriptor&&descriptor.value;}else targetProperty=target[key];FORCED=isForced_1(GLOBAL?key:TARGET+(STATIC?'.':'#')+key,options.forced);if(!FORCED&&targetProperty!==undefined){if(typeof sourceProperty===typeof targetProperty)continue;copyConstructorProperties(sourceProperty,targetProperty);}
if(options.sham||(targetProperty&&targetProperty.sham)){hide(sourceProperty,'sham',true);}
redefine(target,key,sourceProperty,options);}};var nativeSymbol=!!Object.getOwnPropertySymbols&&!fails(function(){return!String(Symbol());});var isArray=Array.isArray||function isArray(arg){return classofRaw(arg)=='Array';};var toObject=function(argument){return Object(requireObjectCoercible(argument));};var objectKeys=Object.keys||function keys(O){return objectKeysInternal(O,enumBugKeys);};var objectDefineProperties=descriptors?Object.defineProperties:function defineProperties(O,Properties){anObject(O);var keys=objectKeys(Properties);var length=keys.length;var index=0;var key;while(length>index)objectDefineProperty.f(O,key=keys[index++],Properties[key]);return O;};var html=getBuiltIn('document','documentElement');var IE_PROTO=sharedKey('IE_PROTO');var PROTOTYPE='prototype';var Empty=function(){};var createDict=function(){var iframe=documentCreateElement('iframe');var length=enumBugKeys.length;var lt='<';var script='script';var gt='>';var js='java'+script+':';var iframeDocument;iframe.style.display='none';html.appendChild(iframe);iframe.src=String(js);iframeDocument=iframe.contentWindow.document;iframeDocument.open();iframeDocument.write(lt+script+gt+'document.F=Object'+lt+'/'+script+gt);iframeDocument.close();createDict=iframeDocument.F;while(length--)delete createDict[PROTOTYPE][enumBugKeys[length]];return createDict();};var objectCreate=Object.create||function create(O,Properties){var result;if(O!==null){Empty[PROTOTYPE]=anObject(O);result=new Empty();Empty[PROTOTYPE]=null;result[IE_PROTO]=O;}else result=createDict();return Properties===undefined?result:objectDefineProperties(result,Properties);};hiddenKeys[IE_PROTO]=true;var nativeGetOwnPropertyNames=objectGetOwnPropertyNames.f;var toString$1={}.toString;var windowNames=typeof window=='object'&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];var getWindowNames=function(it){try{return nativeGetOwnPropertyNames(it);}catch(error){return windowNames.slice();}};var f$5=function getOwnPropertyNames(it){return windowNames&&toString$1.call(it)=='[object Window]'?getWindowNames(it):nativeGetOwnPropertyNames(toIndexedObject(it));};var objectGetOwnPropertyNamesExternal={f:f$5};var Symbol$1=global_1.Symbol;var store$1=shared('wks');var wellKnownSymbol=function(name){return store$1[name]||(store$1[name]=nativeSymbol&&Symbol$1[name]||(nativeSymbol?Symbol$1:uid)('Symbol.'+name));};var f$6=wellKnownSymbol;var wrappedWellKnownSymbol={f:f$6};var defineProperty=objectDefineProperty.f;var defineWellKnownSymbol=function(NAME){var Symbol=path.Symbol||(path.Symbol={});if(!has(Symbol,NAME))defineProperty(Symbol,NAME,{value:wrappedWellKnownSymbol.f(NAME)});};var defineProperty$1=objectDefineProperty.f;var TO_STRING_TAG=wellKnownSymbol('toStringTag');var setToStringTag=function(it,TAG,STATIC){if(it&&!has(it=STATIC?it:it.prototype,TO_STRING_TAG)){defineProperty$1(it,TO_STRING_TAG,{configurable:true,value:TAG});}};var aFunction$1=function(it){if(typeof it!='function'){throw TypeError(String(it)+' is not a function');}return it;};var bindContext=function(fn,that,length){aFunction$1(fn);if(that===undefined)return fn;switch(length){case 0:return function(){return fn.call(that);};case 1:return function(a){return fn.call(that,a);};case 2:return function(a,b){return fn.call(that,a,b);};case 3:return function(a,b,c){return fn.call(that,a,b,c);};}
return function(){return fn.apply(that,arguments);};};var SPECIES=wellKnownSymbol('species');var arraySpeciesCreate=function(originalArray,length){var C;if(isArray(originalArray)){C=originalArray.constructor;if(typeof C=='function'&&(C===Array||isArray(C.prototype)))C=undefined;else if(isObject(C)){C=C[SPECIES];if(C===null)C=undefined;}}return new(C===undefined?Array:C)(length===0?0:length);};var push=[].push;var createMethod$1=function(TYPE){var IS_MAP=TYPE==1;var IS_FILTER=TYPE==2;var IS_SOME=TYPE==3;var IS_EVERY=TYPE==4;var IS_FIND_INDEX=TYPE==6;var NO_HOLES=TYPE==5||IS_FIND_INDEX;return function($this,callbackfn,that,specificCreate){var O=toObject($this);var self=indexedObject(O);var boundFunction=bindContext(callbackfn,that,3);var length=toLength(self.length);var index=0;var create=specificCreate||arraySpeciesCreate;var target=IS_MAP?create($this,length):IS_FILTER?create($this,0):undefined;var value,result;for(;length>index;index++)if(NO_HOLES||index in self){value=self[index];result=boundFunction(value,index,O);if(TYPE){if(IS_MAP)target[index]=result;else if(result)switch(TYPE){case 3:return true;case 5:return value;case 6:return index;case 2:push.call(target,value);}else if(IS_EVERY)return false;}}
return IS_FIND_INDEX?-1:IS_SOME||IS_EVERY?IS_EVERY:target;};};var arrayIteration={forEach:createMethod$1(0),map:createMethod$1(1),filter:createMethod$1(2),some:createMethod$1(3),every:createMethod$1(4),find:createMethod$1(5),findIndex:createMethod$1(6)};var $forEach=arrayIteration.forEach;var HIDDEN=sharedKey('hidden');var SYMBOL='Symbol';var PROTOTYPE$1='prototype';var TO_PRIMITIVE=wellKnownSymbol('toPrimitive');var setInternalState=internalState.set;var getInternalState=internalState.getterFor(SYMBOL);var ObjectPrototype=Object[PROTOTYPE$1];var $Symbol=global_1.Symbol;var JSON$1=global_1.JSON;var nativeJSONStringify=JSON$1&&JSON$1.stringify;var nativeGetOwnPropertyDescriptor$1=objectGetOwnPropertyDescriptor.f;var nativeDefineProperty$1=objectDefineProperty.f;var nativeGetOwnPropertyNames$1=objectGetOwnPropertyNamesExternal.f;var nativePropertyIsEnumerable$1=objectPropertyIsEnumerable.f;var AllSymbols=shared('symbols');var ObjectPrototypeSymbols=shared('op-symbols');var StringToSymbolRegistry=shared('string-to-symbol-registry');var SymbolToStringRegistry=shared('symbol-to-string-registry');var WellKnownSymbolsStore=shared('wks');var QObject=global_1.QObject;var USE_SETTER=!QObject||!QObject[PROTOTYPE$1]||!QObject[PROTOTYPE$1].findChild;var setSymbolDescriptor=descriptors&&fails(function(){return objectCreate(nativeDefineProperty$1({},'a',{get:function(){return nativeDefineProperty$1(this,'a',{value:7}).a;}})).a!=7;})?function(O,P,Attributes){var ObjectPrototypeDescriptor=nativeGetOwnPropertyDescriptor$1(ObjectPrototype,P);if(ObjectPrototypeDescriptor)delete ObjectPrototype[P];nativeDefineProperty$1(O,P,Attributes);if(ObjectPrototypeDescriptor&&O!==ObjectPrototype){nativeDefineProperty$1(ObjectPrototype,P,ObjectPrototypeDescriptor);}}:nativeDefineProperty$1;var wrap=function(tag,description){var symbol=AllSymbols[tag]=objectCreate($Symbol[PROTOTYPE$1]);setInternalState(symbol,{type:SYMBOL,tag:tag,description:description});if(!descriptors)symbol.description=description;return symbol;};var isSymbol=nativeSymbol&&typeof $Symbol.iterator=='symbol'?function(it){return typeof it=='symbol';}:function(it){return Object(it)instanceof $Symbol;};var $defineProperty=function defineProperty(O,P,Attributes){if(O===ObjectPrototype)$defineProperty(ObjectPrototypeSymbols,P,Attributes);anObject(O);var key=toPrimitive(P,true);anObject(Attributes);if(has(AllSymbols,key)){if(!Attributes.enumerable){if(!has(O,HIDDEN))nativeDefineProperty$1(O,HIDDEN,createPropertyDescriptor(1,{}));O[HIDDEN][key]=true;}else{if(has(O,HIDDEN)&&O[HIDDEN][key])O[HIDDEN][key]=false;Attributes=objectCreate(Attributes,{enumerable:createPropertyDescriptor(0,false)});}return setSymbolDescriptor(O,key,Attributes);}return nativeDefineProperty$1(O,key,Attributes);};var $defineProperties=function defineProperties(O,Properties){anObject(O);var properties=toIndexedObject(Properties);var keys=objectKeys(properties).concat($getOwnPropertySymbols(properties));$forEach(keys,function(key){if(!descriptors||$propertyIsEnumerable.call(properties,key))$defineProperty(O,key,properties[key]);});return O;};var $create=function create(O,Properties){return Properties===undefined?objectCreate(O):$defineProperties(objectCreate(O),Properties);};var $propertyIsEnumerable=function propertyIsEnumerable(V){var P=toPrimitive(V,true);var enumerable=nativePropertyIsEnumerable$1.call(this,P);if(this===ObjectPrototype&&has(AllSymbols,P)&&!has(ObjectPrototypeSymbols,P))return false;return enumerable||!has(this,P)||!has(AllSymbols,P)||has(this,HIDDEN)&&this[HIDDEN][P]?enumerable:true;};var $getOwnPropertyDescriptor=function getOwnPropertyDescriptor(O,P){var it=toIndexedObject(O);var key=toPrimitive(P,true);if(it===ObjectPrototype&&has(AllSymbols,key)&&!has(ObjectPrototypeSymbols,key))return;var descriptor=nativeGetOwnPropertyDescriptor$1(it,key);if(descriptor&&has(AllSymbols,key)&&!(has(it,HIDDEN)&&it[HIDDEN][key])){descriptor.enumerable=true;}
return descriptor;};var $getOwnPropertyNames=function getOwnPropertyNames(O){var names=nativeGetOwnPropertyNames$1(toIndexedObject(O));var result=[];$forEach(names,function(key){if(!has(AllSymbols,key)&&!has(hiddenKeys,key))result.push(key);});return result;};var $getOwnPropertySymbols=function getOwnPropertySymbols(O){var IS_OBJECT_PROTOTYPE=O===ObjectPrototype;var names=nativeGetOwnPropertyNames$1(IS_OBJECT_PROTOTYPE?ObjectPrototypeSymbols:toIndexedObject(O));var result=[];$forEach(names,function(key){if(has(AllSymbols,key)&&(!IS_OBJECT_PROTOTYPE||has(ObjectPrototype,key))){result.push(AllSymbols[key]);}});return result;};if(!nativeSymbol){$Symbol=function Symbol(){if(this instanceof $Symbol)throw TypeError('Symbol is not a constructor');var description=!arguments.length||arguments[0]===undefined?undefined:String(arguments[0]);var tag=uid(description);var setter=function(value){if(this===ObjectPrototype)setter.call(ObjectPrototypeSymbols,value);if(has(this,HIDDEN)&&has(this[HIDDEN],tag))this[HIDDEN][tag]=false;setSymbolDescriptor(this,tag,createPropertyDescriptor(1,value));};if(descriptors&&USE_SETTER)setSymbolDescriptor(ObjectPrototype,tag,{configurable:true,set:setter});return wrap(tag,description);};redefine($Symbol[PROTOTYPE$1],'toString',function toString(){return getInternalState(this).tag;});objectPropertyIsEnumerable.f=$propertyIsEnumerable;objectDefineProperty.f=$defineProperty;objectGetOwnPropertyDescriptor.f=$getOwnPropertyDescriptor;objectGetOwnPropertyNames.f=objectGetOwnPropertyNamesExternal.f=$getOwnPropertyNames;objectGetOwnPropertySymbols.f=$getOwnPropertySymbols;if(descriptors){nativeDefineProperty$1($Symbol[PROTOTYPE$1],'description',{configurable:true,get:function description(){return getInternalState(this).description;}});{redefine(ObjectPrototype,'propertyIsEnumerable',$propertyIsEnumerable,{unsafe:true});}}
wrappedWellKnownSymbol.f=function(name){return wrap(wellKnownSymbol(name),name);};}
_export({global:true,wrap:true,forced:!nativeSymbol,sham:!nativeSymbol},{Symbol:$Symbol});$forEach(objectKeys(WellKnownSymbolsStore),function(name){defineWellKnownSymbol(name);});_export({target:SYMBOL,stat:true,forced:!nativeSymbol},{'for':function(key){var string=String(key);if(has(StringToSymbolRegistry,string))return StringToSymbolRegistry[string];var symbol=$Symbol(string);StringToSymbolRegistry[string]=symbol;SymbolToStringRegistry[symbol]=string;return symbol;},keyFor:function keyFor(sym){if(!isSymbol(sym))throw TypeError(sym+' is not a symbol');if(has(SymbolToStringRegistry,sym))return SymbolToStringRegistry[sym];},useSetter:function(){USE_SETTER=true;},useSimple:function(){USE_SETTER=false;}});_export({target:'Object',stat:true,forced:!nativeSymbol,sham:!descriptors},{create:$create,defineProperty:$defineProperty,defineProperties:$defineProperties,getOwnPropertyDescriptor:$getOwnPropertyDescriptor});_export({target:'Object',stat:true,forced:!nativeSymbol},{getOwnPropertyNames:$getOwnPropertyNames,getOwnPropertySymbols:$getOwnPropertySymbols});_export({target:'Object',stat:true,forced:fails(function(){objectGetOwnPropertySymbols.f(1);})},{getOwnPropertySymbols:function getOwnPropertySymbols(it){return objectGetOwnPropertySymbols.f(toObject(it));}});JSON$1&&_export({target:'JSON',stat:true,forced:!nativeSymbol||fails(function(){var symbol=$Symbol();return nativeJSONStringify([symbol])!='[null]'||nativeJSONStringify({a:symbol})!='{}'||nativeJSONStringify(Object(symbol))!='{}';})},{stringify:function stringify(it){var args=[it];var index=1;var replacer,$replacer;while(arguments.length>index)args.push(arguments[index++]);$replacer=replacer=args[1];if(!isObject(replacer)&&it===undefined||isSymbol(it))return;if(!isArray(replacer))replacer=function(key,value){if(typeof $replacer=='function')value=$replacer.call(this,key,value);if(!isSymbol(value))return value;};args[1]=replacer;return nativeJSONStringify.apply(JSON$1,args);}});if(!$Symbol[PROTOTYPE$1][TO_PRIMITIVE])hide($Symbol[PROTOTYPE$1],TO_PRIMITIVE,$Symbol[PROTOTYPE$1].valueOf);setToStringTag($Symbol,SYMBOL);hiddenKeys[HIDDEN]=true;var defineProperty$2=objectDefineProperty.f;var NativeSymbol=global_1.Symbol;if(descriptors&&typeof NativeSymbol=='function'&&(!('description'in NativeSymbol.prototype)||NativeSymbol().description!==undefined)){var EmptyStringDescriptionStore={};var SymbolWrapper=function Symbol(){var description=arguments.length<1||arguments[0]===undefined?undefined:String(arguments[0]);var result=this instanceof SymbolWrapper?new NativeSymbol(description):description===undefined?NativeSymbol():NativeSymbol(description);if(description==='')EmptyStringDescriptionStore[result]=true;return result;};copyConstructorProperties(SymbolWrapper,NativeSymbol);var symbolPrototype=SymbolWrapper.prototype=NativeSymbol.prototype;symbolPrototype.constructor=SymbolWrapper;var symbolToString=symbolPrototype.toString;var native=String(NativeSymbol('test'))=='Symbol(test)';var regexp=/^Symbol\((.*)\)[^)]+$/;defineProperty$2(symbolPrototype,'description',{configurable:true,get:function description(){var symbol=isObject(this)?this.valueOf():this;var string=symbolToString.call(symbol);if(has(EmptyStringDescriptionStore,symbol))return'';var desc=native?string.slice(7,-1):string.replace(regexp,'$1');return desc===''?undefined:desc;}});_export({global:true,forced:true},{Symbol:SymbolWrapper});}
defineWellKnownSymbol('iterator');var UNSCOPABLES=wellKnownSymbol('unscopables');var ArrayPrototype=Array.prototype;if(ArrayPrototype[UNSCOPABLES]==undefined){hide(ArrayPrototype,UNSCOPABLES,objectCreate(null));}
var addToUnscopables=function(key){ArrayPrototype[UNSCOPABLES][key]=true;};var iterators={};var correctPrototypeGetter=!fails(function(){function F(){}
F.prototype.constructor=null;return Object.getPrototypeOf(new F())!==F.prototype;});var IE_PROTO$1=sharedKey('IE_PROTO');var ObjectPrototype$1=Object.prototype;var objectGetPrototypeOf=correctPrototypeGetter?Object.getPrototypeOf:function(O){O=toObject(O);if(has(O,IE_PROTO$1))return O[IE_PROTO$1];if(typeof O.constructor=='function'&&O instanceof O.constructor){return O.constructor.prototype;}return O instanceof Object?ObjectPrototype$1:null;};var ITERATOR=wellKnownSymbol('iterator');var BUGGY_SAFARI_ITERATORS=false;var returnThis=function(){return this;};var IteratorPrototype,PrototypeOfArrayIteratorPrototype,arrayIterator;if([].keys){arrayIterator=[].keys();if(!('next'in arrayIterator))BUGGY_SAFARI_ITERATORS=true;else{PrototypeOfArrayIteratorPrototype=objectGetPrototypeOf(objectGetPrototypeOf(arrayIterator));if(PrototypeOfArrayIteratorPrototype!==Object.prototype)IteratorPrototype=PrototypeOfArrayIteratorPrototype;}}
if(IteratorPrototype==undefined)IteratorPrototype={};if(!has(IteratorPrototype,ITERATOR))hide(IteratorPrototype,ITERATOR,returnThis);var iteratorsCore={IteratorPrototype:IteratorPrototype,BUGGY_SAFARI_ITERATORS:BUGGY_SAFARI_ITERATORS};var IteratorPrototype$1=iteratorsCore.IteratorPrototype;var returnThis$1=function(){return this;};var createIteratorConstructor=function(IteratorConstructor,NAME,next){var TO_STRING_TAG=NAME+' Iterator';IteratorConstructor.prototype=objectCreate(IteratorPrototype$1,{next:createPropertyDescriptor(1,next)});setToStringTag(IteratorConstructor,TO_STRING_TAG,false);iterators[TO_STRING_TAG]=returnThis$1;return IteratorConstructor;};var aPossiblePrototype=function(it){if(!isObject(it)&&it!==null){throw TypeError("Can't set "+String(it)+' as a prototype');}return it;};var objectSetPrototypeOf=Object.setPrototypeOf||('__proto__'in{}?function(){var CORRECT_SETTER=false;var test={};var setter;try{setter=Object.getOwnPropertyDescriptor(Object.prototype,'__proto__').set;setter.call(test,[]);CORRECT_SETTER=test instanceof Array;}catch(error){}
return function setPrototypeOf(O,proto){anObject(O);aPossiblePrototype(proto);if(CORRECT_SETTER)setter.call(O,proto);else O.__proto__=proto;return O;};}():undefined);var IteratorPrototype$2=iteratorsCore.IteratorPrototype;var BUGGY_SAFARI_ITERATORS$1=iteratorsCore.BUGGY_SAFARI_ITERATORS;var ITERATOR$1=wellKnownSymbol('iterator');var KEYS='keys';var VALUES='values';var ENTRIES='entries';var returnThis$2=function(){return this;};var defineIterator=function(Iterable,NAME,IteratorConstructor,next,DEFAULT,IS_SET,FORCED){createIteratorConstructor(IteratorConstructor,NAME,next);var getIterationMethod=function(KIND){if(KIND===DEFAULT&&defaultIterator)return defaultIterator;if(!BUGGY_SAFARI_ITERATORS$1&&KIND in IterablePrototype)return IterablePrototype[KIND];switch(KIND){case KEYS:return function keys(){return new IteratorConstructor(this,KIND);};case VALUES:return function values(){return new IteratorConstructor(this,KIND);};case ENTRIES:return function entries(){return new IteratorConstructor(this,KIND);};}return function(){return new IteratorConstructor(this);};};var TO_STRING_TAG=NAME+' Iterator';var INCORRECT_VALUES_NAME=false;var IterablePrototype=Iterable.prototype;var nativeIterator=IterablePrototype[ITERATOR$1]||IterablePrototype['@@iterator']||DEFAULT&&IterablePrototype[DEFAULT];var defaultIterator=!BUGGY_SAFARI_ITERATORS$1&&nativeIterator||getIterationMethod(DEFAULT);var anyNativeIterator=NAME=='Array'?IterablePrototype.entries||nativeIterator:nativeIterator;var CurrentIteratorPrototype,methods,KEY;if(anyNativeIterator){CurrentIteratorPrototype=objectGetPrototypeOf(anyNativeIterator.call(new Iterable()));if(IteratorPrototype$2!==Object.prototype&&CurrentIteratorPrototype.next){if(objectGetPrototypeOf(CurrentIteratorPrototype)!==IteratorPrototype$2){if(objectSetPrototypeOf){objectSetPrototypeOf(CurrentIteratorPrototype,IteratorPrototype$2);}else if(typeof CurrentIteratorPrototype[ITERATOR$1]!='function'){hide(CurrentIteratorPrototype,ITERATOR$1,returnThis$2);}}
setToStringTag(CurrentIteratorPrototype,TO_STRING_TAG,true);}}
if(DEFAULT==VALUES&&nativeIterator&&nativeIterator.name!==VALUES){INCORRECT_VALUES_NAME=true;defaultIterator=function values(){return nativeIterator.call(this);};}
if(IterablePrototype[ITERATOR$1]!==defaultIterator){hide(IterablePrototype,ITERATOR$1,defaultIterator);}
iterators[NAME]=defaultIterator;if(DEFAULT){methods={values:getIterationMethod(VALUES),keys:IS_SET?defaultIterator:getIterationMethod(KEYS),entries:getIterationMethod(ENTRIES)};if(FORCED)for(KEY in methods){if(BUGGY_SAFARI_ITERATORS$1||INCORRECT_VALUES_NAME||!(KEY in IterablePrototype)){redefine(IterablePrototype,KEY,methods[KEY]);}}else _export({target:NAME,proto:true,forced:BUGGY_SAFARI_ITERATORS$1||INCORRECT_VALUES_NAME},methods);}
return methods;};var ARRAY_ITERATOR='Array Iterator';var setInternalState$1=internalState.set;var getInternalState$1=internalState.getterFor(ARRAY_ITERATOR);var es_array_iterator=defineIterator(Array,'Array',function(iterated,kind){setInternalState$1(this,{type:ARRAY_ITERATOR,target:toIndexedObject(iterated),index:0,kind:kind});},function(){var state=getInternalState$1(this);var target=state.target;var kind=state.kind;var index=state.index++;if(!target||index>=target.length){state.target=undefined;return{value:undefined,done:true};}
if(kind=='keys')return{value:index,done:false};if(kind=='values')return{value:target[index],done:false};return{value:[index,target[index]],done:false};},'values');iterators.Arguments=iterators.Array;addToUnscopables('keys');addToUnscopables('values');addToUnscopables('entries');var sloppyArrayMethod=function(METHOD_NAME,argument){var method=[][METHOD_NAME];return!method||!fails(function(){method.call(null,argument||function(){throw 1;},1);});};var nativeJoin=[].join;var ES3_STRINGS=indexedObject!=Object;var SLOPPY_METHOD=sloppyArrayMethod('join',',');_export({target:'Array',proto:true,forced:ES3_STRINGS||SLOPPY_METHOD},{join:function join(separator){return nativeJoin.call(toIndexedObject(this),separator===undefined?',':separator);}});var createProperty=function(object,key,value){var propertyKey=toPrimitive(key);if(propertyKey in object)objectDefineProperty.f(object,propertyKey,createPropertyDescriptor(0,value));else object[propertyKey]=value;};var SPECIES$1=wellKnownSymbol('species');var arrayMethodHasSpeciesSupport=function(METHOD_NAME){return!fails(function(){var array=[];var constructor=array.constructor={};constructor[SPECIES$1]=function(){return{foo:1};};return array[METHOD_NAME](Boolean).foo!==1;});};var SPECIES$2=wellKnownSymbol('species');var nativeSlice=[].slice;var max$1=Math.max;_export({target:'Array',proto:true,forced:!arrayMethodHasSpeciesSupport('slice')},{slice:function slice(start,end){var O=toIndexedObject(this);var length=toLength(O.length);var k=toAbsoluteIndex(start,length);var fin=toAbsoluteIndex(end===undefined?length:end,length);var Constructor,result,n;if(isArray(O)){Constructor=O.constructor;if(typeof Constructor=='function'&&(Constructor===Array||isArray(Constructor.prototype))){Constructor=undefined;}else if(isObject(Constructor)){Constructor=Constructor[SPECIES$2];if(Constructor===null)Constructor=undefined;}
if(Constructor===Array||Constructor===undefined){return nativeSlice.call(O,k,fin);}}
result=new(Constructor===undefined?Array:Constructor)(max$1(fin-k,0));for(n=0;k<fin;k++,n++)if(k in O)createProperty(result,n,O[k]);result.length=n;return result;}});var TO_STRING_TAG$1=wellKnownSymbol('toStringTag');var CORRECT_ARGUMENTS=classofRaw(function(){return arguments;}())=='Arguments';var tryGet=function(it,key){try{return it[key];}catch(error){}};var classof=function(it){var O,tag,result;return it===undefined?'Undefined':it===null?'Null':typeof(tag=tryGet(O=Object(it),TO_STRING_TAG$1))=='string'?tag:CORRECT_ARGUMENTS?classofRaw(O):(result=classofRaw(O))=='Object'&&typeof O.callee=='function'?'Arguments':result;};var TO_STRING_TAG$2=wellKnownSymbol('toStringTag');var test={};test[TO_STRING_TAG$2]='z';var objectToString=String(test)!=='[object z]'?function toString(){return'[object '+classof(this)+']';}:test.toString;var ObjectPrototype$2=Object.prototype;if(objectToString!==ObjectPrototype$2.toString){redefine(ObjectPrototype$2,'toString',objectToString,{unsafe:true});}
var regexpFlags=function(){var that=anObject(this);var result='';if(that.global)result+='g';if(that.ignoreCase)result+='i';if(that.multiline)result+='m';if(that.dotAll)result+='s';if(that.unicode)result+='u';if(that.sticky)result+='y';return result;};var TO_STRING='toString';var RegExpPrototype=RegExp.prototype;var nativeToString=RegExpPrototype[TO_STRING];var NOT_GENERIC=fails(function(){return nativeToString.call({source:'a',flags:'b'})!='/a/b';});var INCORRECT_NAME=nativeToString.name!=TO_STRING;if(NOT_GENERIC||INCORRECT_NAME){redefine(RegExp.prototype,TO_STRING,function toString(){var R=anObject(this);var p=String(R.source);var rf=R.flags;var f=String(rf===undefined&&R instanceof RegExp&&!('flags'in RegExpPrototype)?regexpFlags.call(R):rf);return'/'+p+'/'+f;},{unsafe:true});}
var createMethod$2=function(CONVERT_TO_STRING){return function($this,pos){var S=String(requireObjectCoercible($this));var position=toInteger(pos);var size=S.length;var first,second;if(position<0||position>=size)return CONVERT_TO_STRING?'':undefined;first=S.charCodeAt(position);return first<0xD800||first>0xDBFF||position+1===size||(second=S.charCodeAt(position+1))<0xDC00||second>0xDFFF?CONVERT_TO_STRING?S.charAt(position):first:CONVERT_TO_STRING?S.slice(position,position+2):(first-0xD800<<10)+(second-0xDC00)+0x10000;};};var stringMultibyte={codeAt:createMethod$2(false),charAt:createMethod$2(true)};var charAt=stringMultibyte.charAt;var STRING_ITERATOR='String Iterator';var setInternalState$2=internalState.set;var getInternalState$2=internalState.getterFor(STRING_ITERATOR);defineIterator(String,'String',function(iterated){setInternalState$2(this,{type:STRING_ITERATOR,string:String(iterated),index:0});},function next(){var state=getInternalState$2(this);var string=state.string;var index=state.index;var point;if(index>=string.length)return{value:undefined,done:true};point=charAt(string,index);state.index+=point.length;return{value:point,done:false};});var nativeExec=RegExp.prototype.exec;var nativeReplace=String.prototype.replace;var patchedExec=nativeExec;var UPDATES_LAST_INDEX_WRONG=(function(){var re1=/a/;var re2=/b*/g;nativeExec.call(re1,'a');nativeExec.call(re2,'a');return re1.lastIndex!==0||re2.lastIndex!==0;})();var NPCG_INCLUDED=/()??/.exec('')[1]!==undefined;var PATCH=UPDATES_LAST_INDEX_WRONG||NPCG_INCLUDED;if(PATCH){patchedExec=function exec(str){var re=this;var lastIndex,reCopy,match,i;if(NPCG_INCLUDED){reCopy=new RegExp('^'+re.source+'$(?!\\s)',regexpFlags.call(re));}
if(UPDATES_LAST_INDEX_WRONG)lastIndex=re.lastIndex;match=nativeExec.call(re,str);if(UPDATES_LAST_INDEX_WRONG&&match){re.lastIndex=re.global?match.index+match[0].length:lastIndex;}
if(NPCG_INCLUDED&&match&&match.length>1){nativeReplace.call(match[0],reCopy,function(){for(i=1;i<arguments.length-2;i++){if(arguments[i]===undefined)match[i]=undefined;}});}
return match;};}
var regexpExec=patchedExec;var SPECIES$3=wellKnownSymbol('species');var REPLACE_SUPPORTS_NAMED_GROUPS=!fails(function(){var re=/./;re.exec=function(){var result=[];result.groups={a:'7'};return result;};return''.replace(re,'$<a>')!=='7';});var SPLIT_WORKS_WITH_OVERWRITTEN_EXEC=!fails(function(){var re=/(?:)/;var originalExec=re.exec;re.exec=function(){return originalExec.apply(this,arguments);};var result='ab'.split(re);return result.length!==2||result[0]!=='a'||result[1]!=='b';});var fixRegexpWellKnownSymbolLogic=function(KEY,length,exec,sham){var SYMBOL=wellKnownSymbol(KEY);var DELEGATES_TO_SYMBOL=!fails(function(){var O={};O[SYMBOL]=function(){return 7;};return''[KEY](O)!=7;});var DELEGATES_TO_EXEC=DELEGATES_TO_SYMBOL&&!fails(function(){var execCalled=false;var re=/a/;re.exec=function(){execCalled=true;return null;};if(KEY==='split'){re.constructor={};re.constructor[SPECIES$3]=function(){return re;};}
re[SYMBOL]('');return!execCalled;});if(!DELEGATES_TO_SYMBOL||!DELEGATES_TO_EXEC||(KEY==='replace'&&!REPLACE_SUPPORTS_NAMED_GROUPS)||(KEY==='split'&&!SPLIT_WORKS_WITH_OVERWRITTEN_EXEC)){var nativeRegExpMethod=/./[SYMBOL];var methods=exec(SYMBOL,''[KEY],function(nativeMethod,regexp,str,arg2,forceStringMethod){if(regexp.exec===regexpExec){if(DELEGATES_TO_SYMBOL&&!forceStringMethod){return{done:true,value:nativeRegExpMethod.call(regexp,str,arg2)};}
return{done:true,value:nativeMethod.call(str,regexp,arg2)};}
return{done:false};});var stringMethod=methods[0];var regexMethod=methods[1];redefine(String.prototype,KEY,stringMethod);redefine(RegExp.prototype,SYMBOL,length==2?function(string,arg){return regexMethod.call(string,this,arg);}:function(string){return regexMethod.call(string,this);});if(sham)hide(RegExp.prototype[SYMBOL],'sham',true);}};var charAt$1=stringMultibyte.charAt;var advanceStringIndex=function(S,index,unicode){return index+(unicode?charAt$1(S,index).length:1);};var regexpExecAbstract=function(R,S){var exec=R.exec;if(typeof exec==='function'){var result=exec.call(R,S);if(typeof result!=='object'){throw TypeError('RegExp exec method returned something other than an Object or null');}
return result;}
if(classofRaw(R)!=='RegExp'){throw TypeError('RegExp#exec called on incompatible receiver');}
return regexpExec.call(R,S);};var max$2=Math.max;var min$2=Math.min;var floor$1=Math.floor;var SUBSTITUTION_SYMBOLS=/\$([$&'`]|\d\d?|<[^>]*>)/g;var SUBSTITUTION_SYMBOLS_NO_NAMED=/\$([$&'`]|\d\d?)/g;var maybeToString=function(it){return it===undefined?it:String(it);};fixRegexpWellKnownSymbolLogic('replace',2,function(REPLACE,nativeReplace,maybeCallNative){return[function replace(searchValue,replaceValue){var O=requireObjectCoercible(this);var replacer=searchValue==undefined?undefined:searchValue[REPLACE];return replacer!==undefined?replacer.call(searchValue,O,replaceValue):nativeReplace.call(String(O),searchValue,replaceValue);},function(regexp,replaceValue){var res=maybeCallNative(nativeReplace,regexp,this,replaceValue);if(res.done)return res.value;var rx=anObject(regexp);var S=String(this);var functionalReplace=typeof replaceValue==='function';if(!functionalReplace)replaceValue=String(replaceValue);var global=rx.global;if(global){var fullUnicode=rx.unicode;rx.lastIndex=0;}
var results=[];while(true){var result=regexpExecAbstract(rx,S);if(result===null)break;results.push(result);if(!global)break;var matchStr=String(result[0]);if(matchStr==='')rx.lastIndex=advanceStringIndex(S,toLength(rx.lastIndex),fullUnicode);}
var accumulatedResult='';var nextSourcePosition=0;for(var i=0;i<results.length;i++){result=results[i];var matched=String(result[0]);var position=max$2(min$2(toInteger(result.index),S.length),0);var captures=[];for(var j=1;j<result.length;j++)captures.push(maybeToString(result[j]));var namedCaptures=result.groups;if(functionalReplace){var replacerArgs=[matched].concat(captures,position,S);if(namedCaptures!==undefined)replacerArgs.push(namedCaptures);var replacement=String(replaceValue.apply(undefined,replacerArgs));}else{replacement=getSubstitution(matched,S,position,captures,namedCaptures,replaceValue);}
if(position>=nextSourcePosition){accumulatedResult+=S.slice(nextSourcePosition,position)+replacement;nextSourcePosition=position+matched.length;}}
return accumulatedResult+S.slice(nextSourcePosition);}];function getSubstitution(matched,str,position,captures,namedCaptures,replacement){var tailPos=position+matched.length;var m=captures.length;var symbols=SUBSTITUTION_SYMBOLS_NO_NAMED;if(namedCaptures!==undefined){namedCaptures=toObject(namedCaptures);symbols=SUBSTITUTION_SYMBOLS;}
return nativeReplace.call(replacement,symbols,function(match,ch){var capture;switch(ch.charAt(0)){case'$':return'$';case'&':return matched;case'`':return str.slice(0,position);case"'":return str.slice(tailPos);case'<':capture=namedCaptures[ch.slice(1,-1)];break;default:var n=+ch;if(n===0)return match;if(n>m){var f=floor$1(n/10);if(f===0)return match;if(f<=m)return captures[f-1]===undefined?ch.charAt(1):captures[f-1]+ch.charAt(1);return match;}
capture=captures[n-1];}
return capture===undefined?'':capture;});}});var sameValue=Object.is||function is(x,y){return x===y?x!==0||1/x===1/y:x!=x&&y!=y;};fixRegexpWellKnownSymbolLogic('search',1,function(SEARCH,nativeSearch,maybeCallNative){return[function search(regexp){var O=requireObjectCoercible(this);var searcher=regexp==undefined?undefined:regexp[SEARCH];return searcher!==undefined?searcher.call(regexp,O):new RegExp(regexp)[SEARCH](String(O));},function(regexp){var res=maybeCallNative(nativeSearch,regexp,this);if(res.done)return res.value;var rx=anObject(regexp);var S=String(this);var previousLastIndex=rx.lastIndex;if(!sameValue(previousLastIndex,0))rx.lastIndex=0;var result=regexpExecAbstract(rx,S);if(!sameValue(rx.lastIndex,previousLastIndex))rx.lastIndex=previousLastIndex;return result===null?-1:result.index;}];});var MATCH=wellKnownSymbol('match');var isRegexp=function(it){var isRegExp;return isObject(it)&&((isRegExp=it[MATCH])!==undefined?!!isRegExp:classofRaw(it)=='RegExp');};var SPECIES$4=wellKnownSymbol('species');var speciesConstructor=function(O,defaultConstructor){var C=anObject(O).constructor;var S;return C===undefined||(S=anObject(C)[SPECIES$4])==undefined?defaultConstructor:aFunction$1(S);};var arrayPush=[].push;var min$3=Math.min;var MAX_UINT32=0xFFFFFFFF;var SUPPORTS_Y=!fails(function(){return!RegExp(MAX_UINT32,'y');});fixRegexpWellKnownSymbolLogic('split',2,function(SPLIT,nativeSplit,maybeCallNative){var internalSplit;if('abbc'.split(/(b)*/)[1]=='c'||'test'.split(/(?:)/,-1).length!=4||'ab'.split(/(?:ab)*/).length!=2||'.'.split(/(.?)(.?)/).length!=4||'.'.split(/()()/).length>1||''.split(/.?/).length){internalSplit=function(separator,limit){var string=String(requireObjectCoercible(this));var lim=limit===undefined?MAX_UINT32:limit>>>0;if(lim===0)return[];if(separator===undefined)return[string];if(!isRegexp(separator)){return nativeSplit.call(string,separator,lim);}
var output=[];var flags=(separator.ignoreCase?'i':'')+
(separator.multiline?'m':'')+
(separator.unicode?'u':'')+
(separator.sticky?'y':'');var lastLastIndex=0;var separatorCopy=new RegExp(separator.source,flags+'g');var match,lastIndex,lastLength;while(match=regexpExec.call(separatorCopy,string)){lastIndex=separatorCopy.lastIndex;if(lastIndex>lastLastIndex){output.push(string.slice(lastLastIndex,match.index));if(match.length>1&&match.index<string.length)arrayPush.apply(output,match.slice(1));lastLength=match[0].length;lastLastIndex=lastIndex;if(output.length>=lim)break;}
if(separatorCopy.lastIndex===match.index)separatorCopy.lastIndex++;}
if(lastLastIndex===string.length){if(lastLength||!separatorCopy.test(''))output.push('');}else output.push(string.slice(lastLastIndex));return output.length>lim?output.slice(0,lim):output;};}else if('0'.split(undefined,0).length){internalSplit=function(separator,limit){return separator===undefined&&limit===0?[]:nativeSplit.call(this,separator,limit);};}else internalSplit=nativeSplit;return[function split(separator,limit){var O=requireObjectCoercible(this);var splitter=separator==undefined?undefined:separator[SPLIT];return splitter!==undefined?splitter.call(separator,O,limit):internalSplit.call(String(O),separator,limit);},function(regexp,limit){var res=maybeCallNative(internalSplit,regexp,this,limit,internalSplit!==nativeSplit);if(res.done)return res.value;var rx=anObject(regexp);var S=String(this);var C=speciesConstructor(rx,RegExp);var unicodeMatching=rx.unicode;var flags=(rx.ignoreCase?'i':'')+
(rx.multiline?'m':'')+
(rx.unicode?'u':'')+
(SUPPORTS_Y?'y':'g');var splitter=new C(SUPPORTS_Y?rx:'^(?:'+rx.source+')',flags);var lim=limit===undefined?MAX_UINT32:limit>>>0;if(lim===0)return[];if(S.length===0)return regexpExecAbstract(splitter,S)===null?[S]:[];var p=0;var q=0;var A=[];while(q<S.length){splitter.lastIndex=SUPPORTS_Y?q:0;var z=regexpExecAbstract(splitter,SUPPORTS_Y?S:S.slice(q));var e;if(z===null||(e=min$3(toLength(splitter.lastIndex+(SUPPORTS_Y?0:q)),S.length))===p){q=advanceStringIndex(S,q,unicodeMatching);}else{A.push(S.slice(p,q));if(A.length===lim)return A;for(var i=1;i<=z.length-1;i++){A.push(z[i]);if(A.length===lim)return A;}
q=p=e;}}
A.push(S.slice(p));return A;}];},!SUPPORTS_Y);var domIterables={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0};var $forEach$1=arrayIteration.forEach;var arrayForEach=sloppyArrayMethod('forEach')?function forEach(callbackfn){return $forEach$1(this,callbackfn,arguments.length>1?arguments[1]:undefined);}:[].forEach;for(var COLLECTION_NAME in domIterables){var Collection=global_1[COLLECTION_NAME];var CollectionPrototype=Collection&&Collection.prototype;if(CollectionPrototype&&CollectionPrototype.forEach!==arrayForEach)try{hide(CollectionPrototype,'forEach',arrayForEach);}catch(error){CollectionPrototype.forEach=arrayForEach;}}
var ITERATOR$2=wellKnownSymbol('iterator');var TO_STRING_TAG$3=wellKnownSymbol('toStringTag');var ArrayValues=es_array_iterator.values;for(var COLLECTION_NAME$1 in domIterables){var Collection$1=global_1[COLLECTION_NAME$1];var CollectionPrototype$1=Collection$1&&Collection$1.prototype;if(CollectionPrototype$1){if(CollectionPrototype$1[ITERATOR$2]!==ArrayValues)try{hide(CollectionPrototype$1,ITERATOR$2,ArrayValues);}catch(error){CollectionPrototype$1[ITERATOR$2]=ArrayValues;}
if(!CollectionPrototype$1[TO_STRING_TAG$3])hide(CollectionPrototype$1,TO_STRING_TAG$3,COLLECTION_NAME$1);if(domIterables[COLLECTION_NAME$1])for(var METHOD_NAME in es_array_iterator){if(CollectionPrototype$1[METHOD_NAME]!==es_array_iterator[METHOD_NAME])try{hide(CollectionPrototype$1,METHOD_NAME,es_array_iterator[METHOD_NAME]);}catch(error){CollectionPrototype$1[METHOD_NAME]=es_array_iterator[METHOD_NAME];}}}}
var ITERATOR$3=wellKnownSymbol('iterator');var nativeUrl=!fails(function(){var url=new URL('b?e=1','http://a');var searchParams=url.searchParams;url.pathname='c%20d';return(isPure&&!url.toJSON)||!searchParams.sort||url.href!=='http://a/c%20d?e=1'||searchParams.get('e')!=='1'||String(new URLSearchParams('?a=1'))!=='a=1'||!searchParams[ITERATOR$3]||new URL('https://a@b').username!=='a'||new URLSearchParams(new URLSearchParams('a=b')).get('a')!=='b'||new URL('http://тест').host!=='xn--e1aybc'||new URL('http://a#б').hash!=='#%D0%B1';});var anInstance=function(it,Constructor,name){if(!(it instanceof Constructor)){throw TypeError('Incorrect '+(name?name+' ':'')+'invocation');}return it;};var nativeAssign=Object.assign;var objectAssign=!nativeAssign||fails(function(){var A={};var B={};var symbol=Symbol();var alphabet='abcdefghijklmnopqrst';A[symbol]=7;alphabet.split('').forEach(function(chr){B[chr]=chr;});return nativeAssign({},A)[symbol]!=7||objectKeys(nativeAssign({},B)).join('')!=alphabet;})?function assign(target,source){var T=toObject(target);var argumentsLength=arguments.length;var index=1;var getOwnPropertySymbols=objectGetOwnPropertySymbols.f;var propertyIsEnumerable=objectPropertyIsEnumerable.f;while(argumentsLength>index){var S=indexedObject(arguments[index++]);var keys=getOwnPropertySymbols?objectKeys(S).concat(getOwnPropertySymbols(S)):objectKeys(S);var length=keys.length;var j=0;var key;while(length>j){key=keys[j++];if(!descriptors||propertyIsEnumerable.call(S,key))T[key]=S[key];}}return T;}:nativeAssign;var callWithSafeIterationClosing=function(iterator,fn,value,ENTRIES){try{return ENTRIES?fn(anObject(value)[0],value[1]):fn(value);}catch(error){var returnMethod=iterator['return'];if(returnMethod!==undefined)anObject(returnMethod.call(iterator));throw error;}};var ITERATOR$4=wellKnownSymbol('iterator');var ArrayPrototype$1=Array.prototype;var isArrayIteratorMethod=function(it){return it!==undefined&&(iterators.Array===it||ArrayPrototype$1[ITERATOR$4]===it);};var ITERATOR$5=wellKnownSymbol('iterator');var getIteratorMethod=function(it){if(it!=undefined)return it[ITERATOR$5]||it['@@iterator']||iterators[classof(it)];};var arrayFrom=function from(arrayLike){var O=toObject(arrayLike);var C=typeof this=='function'?this:Array;var argumentsLength=arguments.length;var mapfn=argumentsLength>1?arguments[1]:undefined;var mapping=mapfn!==undefined;var index=0;var iteratorMethod=getIteratorMethod(O);var length,result,step,iterator;if(mapping)mapfn=bindContext(mapfn,argumentsLength>2?arguments[2]:undefined,2);if(iteratorMethod!=undefined&&!(C==Array&&isArrayIteratorMethod(iteratorMethod))){iterator=iteratorMethod.call(O);result=new C();for(;!(step=iterator.next()).done;index++){createProperty(result,index,mapping?callWithSafeIterationClosing(iterator,mapfn,[step.value,index],true):step.value);}}else{length=toLength(O.length);result=new C(length);for(;length>index;index++){createProperty(result,index,mapping?mapfn(O[index],index):O[index]);}}
result.length=index;return result;};var maxInt=2147483647;var base=36;var tMin=1;var tMax=26;var skew=38;var damp=700;var initialBias=72;var initialN=128;var delimiter='-';var regexNonASCII=/[^\0-\u007E]/;var regexSeparators=/[.\u3002\uFF0E\uFF61]/g;var OVERFLOW_ERROR='Overflow: input needs wider integers to process';var baseMinusTMin=base-tMin;var floor$2=Math.floor;var stringFromCharCode=String.fromCharCode;var ucs2decode=function(string){var output=[];var counter=0;var length=string.length;while(counter<length){var value=string.charCodeAt(counter++);if(value>=0xD800&&value<=0xDBFF&&counter<length){var extra=string.charCodeAt(counter++);if((extra&0xFC00)==0xDC00){output.push(((value&0x3FF)<<10)+(extra&0x3FF)+0x10000);}else{output.push(value);counter--;}}else{output.push(value);}}
return output;};var digitToBasic=function(digit){return digit+22+75*(digit<26);};var adapt=function(delta,numPoints,firstTime){var k=0;delta=firstTime?floor$2(delta/damp):delta>>1;delta+=floor$2(delta/numPoints);for(;delta>baseMinusTMin*tMax>>1;k+=base){delta=floor$2(delta/baseMinusTMin);}
return floor$2(k+(baseMinusTMin+1)*delta/(delta+skew));};var encode=function(input){var output=[];input=ucs2decode(input);var inputLength=input.length;var n=initialN;var delta=0;var bias=initialBias;var i,currentValue;for(i=0;i<input.length;i++){currentValue=input[i];if(currentValue<0x80){output.push(stringFromCharCode(currentValue));}}
var basicLength=output.length;var handledCPCount=basicLength;if(basicLength){output.push(delimiter);}
while(handledCPCount<inputLength){var m=maxInt;for(i=0;i<input.length;i++){currentValue=input[i];if(currentValue>=n&&currentValue<m){m=currentValue;}}
var handledCPCountPlusOne=handledCPCount+1;if(m-n>floor$2((maxInt-delta)/handledCPCountPlusOne)){throw RangeError(OVERFLOW_ERROR);}
delta+=(m-n)*handledCPCountPlusOne;n=m;for(i=0;i<input.length;i++){currentValue=input[i];if(currentValue<n&&++delta>maxInt){throw RangeError(OVERFLOW_ERROR);}
if(currentValue==n){var q=delta;for(var k=base;;k+=base){var t=k<=bias?tMin:(k>=bias+tMax?tMax:k-bias);if(q<t)break;var qMinusT=q-t;var baseMinusT=base-t;output.push(stringFromCharCode(digitToBasic(t+qMinusT%baseMinusT)));q=floor$2(qMinusT/baseMinusT);}
output.push(stringFromCharCode(digitToBasic(q)));bias=adapt(delta,handledCPCountPlusOne,handledCPCount==basicLength);delta=0;++handledCPCount;}}
++delta;++n;}
return output.join('');};var punycodeToAscii=function(input){var encoded=[];var labels=input.toLowerCase().replace(regexSeparators,'\u002E').split('.');var i,label;for(i=0;i<labels.length;i++){label=labels[i];encoded.push(regexNonASCII.test(label)?'xn--'+encode(label):label);}
return encoded.join('.');};var redefineAll=function(target,src,options){for(var key in src)redefine(target,key,src[key],options);return target;};var getIterator=function(it){var iteratorMethod=getIteratorMethod(it);if(typeof iteratorMethod!='function'){throw TypeError(String(it)+' is not iterable');}return anObject(iteratorMethod.call(it));};var ITERATOR$6=wellKnownSymbol('iterator');var URL_SEARCH_PARAMS='URLSearchParams';var URL_SEARCH_PARAMS_ITERATOR=URL_SEARCH_PARAMS+'Iterator';var setInternalState$3=internalState.set;var getInternalParamsState=internalState.getterFor(URL_SEARCH_PARAMS);var getInternalIteratorState=internalState.getterFor(URL_SEARCH_PARAMS_ITERATOR);var plus=/\+/g;var sequences=Array(4);var percentSequence=function(bytes){return sequences[bytes-1]||(sequences[bytes-1]=RegExp('((?:%[\\da-f]{2}){'+bytes+'})','gi'));};var percentDecode=function(sequence){try{return decodeURIComponent(sequence);}catch(error){return sequence;}};var deserialize=function(it){var result=it.replace(plus,' ');var bytes=4;try{return decodeURIComponent(result);}catch(error){while(bytes){result=result.replace(percentSequence(bytes--),percentDecode);}
return result;}};var find=/[!'()~]|%20/g;var replace={'!':'%21',"'":'%27','(':'%28',')':'%29','~':'%7E','%20':'+'};var replacer=function(match){return replace[match];};var serialize=function(it){return encodeURIComponent(it).replace(find,replacer);};var parseSearchParams=function(result,query){if(query){var attributes=query.split('&');var index=0;var attribute,entry;while(index<attributes.length){attribute=attributes[index++];if(attribute.length){entry=attribute.split('=');result.push({key:deserialize(entry.shift()),value:deserialize(entry.join('='))});}}}};var updateSearchParams=function(query){this.entries.length=0;parseSearchParams(this.entries,query);};var validateArgumentsLength=function(passed,required){if(passed<required)throw TypeError('Not enough arguments');};var URLSearchParamsIterator=createIteratorConstructor(function Iterator(params,kind){setInternalState$3(this,{type:URL_SEARCH_PARAMS_ITERATOR,iterator:getIterator(getInternalParamsState(params).entries),kind:kind});},'Iterator',function next(){var state=getInternalIteratorState(this);var kind=state.kind;var step=state.iterator.next();var entry=step.value;if(!step.done){step.value=kind==='keys'?entry.key:kind==='values'?entry.value:[entry.key,entry.value];}return step;});var URLSearchParamsConstructor=function URLSearchParams(){anInstance(this,URLSearchParamsConstructor,URL_SEARCH_PARAMS);var init=arguments.length>0?arguments[0]:undefined;var that=this;var entries=[];var iteratorMethod,iterator,step,entryIterator,first,second,key;setInternalState$3(that,{type:URL_SEARCH_PARAMS,entries:entries,updateURL:function(){},updateSearchParams:updateSearchParams});if(init!==undefined){if(isObject(init)){iteratorMethod=getIteratorMethod(init);if(typeof iteratorMethod==='function'){iterator=iteratorMethod.call(init);while(!(step=iterator.next()).done){entryIterator=getIterator(anObject(step.value));if((first=entryIterator.next()).done||(second=entryIterator.next()).done||!entryIterator.next().done)throw TypeError('Expected sequence with length 2');entries.push({key:first.value+'',value:second.value+''});}}else for(key in init)if(has(init,key))entries.push({key:key,value:init[key]+''});}else{parseSearchParams(entries,typeof init==='string'?init.charAt(0)==='?'?init.slice(1):init:init+'');}}};var URLSearchParamsPrototype=URLSearchParamsConstructor.prototype;redefineAll(URLSearchParamsPrototype,{append:function append(name,value){validateArgumentsLength(arguments.length,2);var state=getInternalParamsState(this);state.entries.push({key:name+'',value:value+''});state.updateURL();},'delete':function(name){validateArgumentsLength(arguments.length,1);var state=getInternalParamsState(this);var entries=state.entries;var key=name+'';var index=0;while(index<entries.length){if(entries[index].key===key)entries.splice(index,1);else index++;}
state.updateURL();},get:function get(name){validateArgumentsLength(arguments.length,1);var entries=getInternalParamsState(this).entries;var key=name+'';var index=0;for(;index<entries.length;index++){if(entries[index].key===key)return entries[index].value;}
return null;},getAll:function getAll(name){validateArgumentsLength(arguments.length,1);var entries=getInternalParamsState(this).entries;var key=name+'';var result=[];var index=0;for(;index<entries.length;index++){if(entries[index].key===key)result.push(entries[index].value);}
return result;},has:function has(name){validateArgumentsLength(arguments.length,1);var entries=getInternalParamsState(this).entries;var key=name+'';var index=0;while(index<entries.length){if(entries[index++].key===key)return true;}
return false;},set:function set(name,value){validateArgumentsLength(arguments.length,1);var state=getInternalParamsState(this);var entries=state.entries;var found=false;var key=name+'';var val=value+'';var index=0;var entry;for(;index<entries.length;index++){entry=entries[index];if(entry.key===key){if(found)entries.splice(index--,1);else{found=true;entry.value=val;}}}
if(!found)entries.push({key:key,value:val});state.updateURL();},sort:function sort(){var state=getInternalParamsState(this);var entries=state.entries;var slice=entries.slice();var entry,entriesIndex,sliceIndex;entries.length=0;for(sliceIndex=0;sliceIndex<slice.length;sliceIndex++){entry=slice[sliceIndex];for(entriesIndex=0;entriesIndex<sliceIndex;entriesIndex++){if(entries[entriesIndex].key>entry.key){entries.splice(entriesIndex,0,entry);break;}}
if(entriesIndex===sliceIndex)entries.push(entry);}
state.updateURL();},forEach:function forEach(callback){var entries=getInternalParamsState(this).entries;var boundFunction=bindContext(callback,arguments.length>1?arguments[1]:undefined,3);var index=0;var entry;while(index<entries.length){entry=entries[index++];boundFunction(entry.value,entry.key,this);}},keys:function keys(){return new URLSearchParamsIterator(this,'keys');},values:function values(){return new URLSearchParamsIterator(this,'values');},entries:function entries(){return new URLSearchParamsIterator(this,'entries');}},{enumerable:true});redefine(URLSearchParamsPrototype,ITERATOR$6,URLSearchParamsPrototype.entries);redefine(URLSearchParamsPrototype,'toString',function toString(){var entries=getInternalParamsState(this).entries;var result=[];var index=0;var entry;while(index<entries.length){entry=entries[index++];result.push(serialize(entry.key)+'='+serialize(entry.value));}return result.join('&');},{enumerable:true});setToStringTag(URLSearchParamsConstructor,URL_SEARCH_PARAMS);_export({global:true,forced:!nativeUrl},{URLSearchParams:URLSearchParamsConstructor});var web_urlSearchParams={URLSearchParams:URLSearchParamsConstructor,getState:getInternalParamsState};var codeAt=stringMultibyte.codeAt;var NativeURL=global_1.URL;var URLSearchParams$1=web_urlSearchParams.URLSearchParams;var getInternalSearchParamsState=web_urlSearchParams.getState;var setInternalState$4=internalState.set;var getInternalURLState=internalState.getterFor('URL');var floor$3=Math.floor;var pow=Math.pow;var INVALID_AUTHORITY='Invalid authority';var INVALID_SCHEME='Invalid scheme';var INVALID_HOST='Invalid host';var INVALID_PORT='Invalid port';var ALPHA=/[A-Za-z]/;var ALPHANUMERIC=/[\d+\-.A-Za-z]/;var DIGIT=/\d/;var HEX_START=/^(0x|0X)/;var OCT=/^[0-7]+$/;var DEC=/^\d+$/;var HEX=/^[\dA-Fa-f]+$/;var FORBIDDEN_HOST_CODE_POINT=/[\u0000\u0009\u000A\u000D #%/:?@[\\]]/;var FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT=/[\u0000\u0009\u000A\u000D #/:?@[\\]]/;var LEADING_AND_TRAILING_C0_CONTROL_OR_SPACE=/^[\u0000-\u001F ]+|[\u0000-\u001F ]+$/g;var TAB_AND_NEW_LINE=/[\u0009\u000A\u000D]/g;var EOF;var parseHost=function(url,input){var result,codePoints,index;if(input.charAt(0)=='['){if(input.charAt(input.length-1)!=']')return INVALID_HOST;result=parseIPv6(input.slice(1,-1));if(!result)return INVALID_HOST;url.host=result;}else if(!isSpecial(url)){if(FORBIDDEN_HOST_CODE_POINT_EXCLUDING_PERCENT.test(input))return INVALID_HOST;result='';codePoints=arrayFrom(input);for(index=0;index<codePoints.length;index++){result+=percentEncode(codePoints[index],C0ControlPercentEncodeSet);}
url.host=result;}else{input=punycodeToAscii(input);if(FORBIDDEN_HOST_CODE_POINT.test(input))return INVALID_HOST;result=parseIPv4(input);if(result===null)return INVALID_HOST;url.host=result;}};var parseIPv4=function(input){var parts=input.split('.');var partsLength,numbers,index,part,radix,number,ipv4;if(parts.length&&parts[parts.length-1]==''){parts.pop();}
partsLength=parts.length;if(partsLength>4)return input;numbers=[];for(index=0;index<partsLength;index++){part=parts[index];if(part=='')return input;radix=10;if(part.length>1&&part.charAt(0)=='0'){radix=HEX_START.test(part)?16:8;part=part.slice(radix==8?1:2);}
if(part===''){number=0;}else{if(!(radix==10?DEC:radix==8?OCT:HEX).test(part))return input;number=parseInt(part,radix);}
numbers.push(number);}
for(index=0;index<partsLength;index++){number=numbers[index];if(index==partsLength-1){if(number>=pow(256,5-partsLength))return null;}else if(number>255)return null;}
ipv4=numbers.pop();for(index=0;index<numbers.length;index++){ipv4+=numbers[index]*pow(256,3-index);}
return ipv4;};var parseIPv6=function(input){var address=[0,0,0,0,0,0,0,0];var pieceIndex=0;var compress=null;var pointer=0;var value,length,numbersSeen,ipv4Piece,number,swaps,swap;var char=function(){return input.charAt(pointer);};if(char()==':'){if(input.charAt(1)!=':')return;pointer+=2;pieceIndex++;compress=pieceIndex;}
while(char()){if(pieceIndex==8)return;if(char()==':'){if(compress!==null)return;pointer++;pieceIndex++;compress=pieceIndex;continue;}
value=length=0;while(length<4&&HEX.test(char())){value=value*16+parseInt(char(),16);pointer++;length++;}
if(char()=='.'){if(length==0)return;pointer-=length;if(pieceIndex>6)return;numbersSeen=0;while(char()){ipv4Piece=null;if(numbersSeen>0){if(char()=='.'&&numbersSeen<4)pointer++;else return;}
if(!DIGIT.test(char()))return;while(DIGIT.test(char())){number=parseInt(char(),10);if(ipv4Piece===null)ipv4Piece=number;else if(ipv4Piece==0)return;else ipv4Piece=ipv4Piece*10+number;if(ipv4Piece>255)return;pointer++;}
address[pieceIndex]=address[pieceIndex]*256+ipv4Piece;numbersSeen++;if(numbersSeen==2||numbersSeen==4)pieceIndex++;}
if(numbersSeen!=4)return;break;}else if(char()==':'){pointer++;if(!char())return;}else if(char())return;address[pieceIndex++]=value;}
if(compress!==null){swaps=pieceIndex-compress;pieceIndex=7;while(pieceIndex!=0&&swaps>0){swap=address[pieceIndex];address[pieceIndex--]=address[compress+swaps-1];address[compress+--swaps]=swap;}}else if(pieceIndex!=8)return;return address;};var findLongestZeroSequence=function(ipv6){var maxIndex=null;var maxLength=1;var currStart=null;var currLength=0;var index=0;for(;index<8;index++){if(ipv6[index]!==0){if(currLength>maxLength){maxIndex=currStart;maxLength=currLength;}
currStart=null;currLength=0;}else{if(currStart===null)currStart=index;++currLength;}}
if(currLength>maxLength){maxIndex=currStart;maxLength=currLength;}
return maxIndex;};var serializeHost=function(host){var result,index,compress,ignore0;if(typeof host=='number'){result=[];for(index=0;index<4;index++){result.unshift(host%256);host=floor$3(host/256);}return result.join('.');}else if(typeof host=='object'){result='';compress=findLongestZeroSequence(host);for(index=0;index<8;index++){if(ignore0&&host[index]===0)continue;if(ignore0)ignore0=false;if(compress===index){result+=index?':':'::';ignore0=true;}else{result+=host[index].toString(16);if(index<7)result+=':';}}
return'['+result+']';}return host;};var C0ControlPercentEncodeSet={};var fragmentPercentEncodeSet=objectAssign({},C0ControlPercentEncodeSet,{' ':1,'"':1,'<':1,'>':1,'`':1});var pathPercentEncodeSet=objectAssign({},fragmentPercentEncodeSet,{'#':1,'?':1,'{':1,'}':1});var userinfoPercentEncodeSet=objectAssign({},pathPercentEncodeSet,{'/':1,':':1,';':1,'=':1,'@':1,'[':1,'\\':1,']':1,'^':1,'|':1});var percentEncode=function(char,set){var code=codeAt(char,0);return code>0x20&&code<0x7F&&!has(set,char)?char:encodeURIComponent(char);};var specialSchemes={ftp:21,file:null,gopher:70,http:80,https:443,ws:80,wss:443};var isSpecial=function(url){return has(specialSchemes,url.scheme);};var includesCredentials=function(url){return url.username!=''||url.password!='';};var cannotHaveUsernamePasswordPort=function(url){return!url.host||url.cannotBeABaseURL||url.scheme=='file';};var isWindowsDriveLetter=function(string,normalized){var second;return string.length==2&&ALPHA.test(string.charAt(0))&&((second=string.charAt(1))==':'||(!normalized&&second=='|'));};var startsWithWindowsDriveLetter=function(string){var third;return string.length>1&&isWindowsDriveLetter(string.slice(0,2))&&(string.length==2||((third=string.charAt(2))==='/'||third==='\\'||third==='?'||third==='#'));};var shortenURLsPath=function(url){var path=url.path;var pathSize=path.length;if(pathSize&&(url.scheme!='file'||pathSize!=1||!isWindowsDriveLetter(path[0],true))){path.pop();}};var isSingleDot=function(segment){return segment==='.'||segment.toLowerCase()==='%2e';};var isDoubleDot=function(segment){segment=segment.toLowerCase();return segment==='..'||segment==='%2e.'||segment==='.%2e'||segment==='%2e%2e';};var SCHEME_START={};var SCHEME={};var NO_SCHEME={};var SPECIAL_RELATIVE_OR_AUTHORITY={};var PATH_OR_AUTHORITY={};var RELATIVE={};var RELATIVE_SLASH={};var SPECIAL_AUTHORITY_SLASHES={};var SPECIAL_AUTHORITY_IGNORE_SLASHES={};var AUTHORITY={};var HOST={};var HOSTNAME={};var PORT={};var FILE={};var FILE_SLASH={};var FILE_HOST={};var PATH_START={};var PATH={};var CANNOT_BE_A_BASE_URL_PATH={};var QUERY={};var FRAGMENT={};var parseURL=function(url,input,stateOverride,base){var state=stateOverride||SCHEME_START;var pointer=0;var buffer='';var seenAt=false;var seenBracket=false;var seenPasswordToken=false;var codePoints,char,bufferCodePoints,failure;if(!stateOverride){url.scheme='';url.username='';url.password='';url.host=null;url.port=null;url.path=[];url.query=null;url.fragment=null;url.cannotBeABaseURL=false;input=input.replace(LEADING_AND_TRAILING_C0_CONTROL_OR_SPACE,'');}
input=input.replace(TAB_AND_NEW_LINE,'');codePoints=arrayFrom(input);while(pointer<=codePoints.length){char=codePoints[pointer];switch(state){case SCHEME_START:if(char&&ALPHA.test(char)){buffer+=char.toLowerCase();state=SCHEME;}else if(!stateOverride){state=NO_SCHEME;continue;}else return INVALID_SCHEME;break;case SCHEME:if(char&&(ALPHANUMERIC.test(char)||char=='+'||char=='-'||char=='.')){buffer+=char.toLowerCase();}else if(char==':'){if(stateOverride&&((isSpecial(url)!=has(specialSchemes,buffer))||(buffer=='file'&&(includesCredentials(url)||url.port!==null))||(url.scheme=='file'&&!url.host)))return;url.scheme=buffer;if(stateOverride){if(isSpecial(url)&&specialSchemes[url.scheme]==url.port)url.port=null;return;}
buffer='';if(url.scheme=='file'){state=FILE;}else if(isSpecial(url)&&base&&base.scheme==url.scheme){state=SPECIAL_RELATIVE_OR_AUTHORITY;}else if(isSpecial(url)){state=SPECIAL_AUTHORITY_SLASHES;}else if(codePoints[pointer+1]=='/'){state=PATH_OR_AUTHORITY;pointer++;}else{url.cannotBeABaseURL=true;url.path.push('');state=CANNOT_BE_A_BASE_URL_PATH;}}else if(!stateOverride){buffer='';state=NO_SCHEME;pointer=0;continue;}else return INVALID_SCHEME;break;case NO_SCHEME:if(!base||(base.cannotBeABaseURL&&char!='#'))return INVALID_SCHEME;if(base.cannotBeABaseURL&&char=='#'){url.scheme=base.scheme;url.path=base.path.slice();url.query=base.query;url.fragment='';url.cannotBeABaseURL=true;state=FRAGMENT;break;}
state=base.scheme=='file'?FILE:RELATIVE;continue;case SPECIAL_RELATIVE_OR_AUTHORITY:if(char=='/'&&codePoints[pointer+1]=='/'){state=SPECIAL_AUTHORITY_IGNORE_SLASHES;pointer++;}else{state=RELATIVE;continue;}break;case PATH_OR_AUTHORITY:if(char=='/'){state=AUTHORITY;break;}else{state=PATH;continue;}
case RELATIVE:url.scheme=base.scheme;if(char==EOF){url.username=base.username;url.password=base.password;url.host=base.host;url.port=base.port;url.path=base.path.slice();url.query=base.query;}else if(char=='/'||(char=='\\'&&isSpecial(url))){state=RELATIVE_SLASH;}else if(char=='?'){url.username=base.username;url.password=base.password;url.host=base.host;url.port=base.port;url.path=base.path.slice();url.query='';state=QUERY;}else if(char=='#'){url.username=base.username;url.password=base.password;url.host=base.host;url.port=base.port;url.path=base.path.slice();url.query=base.query;url.fragment='';state=FRAGMENT;}else{url.username=base.username;url.password=base.password;url.host=base.host;url.port=base.port;url.path=base.path.slice();url.path.pop();state=PATH;continue;}break;case RELATIVE_SLASH:if(isSpecial(url)&&(char=='/'||char=='\\')){state=SPECIAL_AUTHORITY_IGNORE_SLASHES;}else if(char=='/'){state=AUTHORITY;}else{url.username=base.username;url.password=base.password;url.host=base.host;url.port=base.port;state=PATH;continue;}break;case SPECIAL_AUTHORITY_SLASHES:state=SPECIAL_AUTHORITY_IGNORE_SLASHES;if(char!='/'||buffer.charAt(pointer+1)!='/')continue;pointer++;break;case SPECIAL_AUTHORITY_IGNORE_SLASHES:if(char!='/'&&char!='\\'){state=AUTHORITY;continue;}break;case AUTHORITY:if(char=='@'){if(seenAt)buffer='%40'+buffer;seenAt=true;bufferCodePoints=arrayFrom(buffer);for(var i=0;i<bufferCodePoints.length;i++){var codePoint=bufferCodePoints[i];if(codePoint==':'&&!seenPasswordToken){seenPasswordToken=true;continue;}
var encodedCodePoints=percentEncode(codePoint,userinfoPercentEncodeSet);if(seenPasswordToken)url.password+=encodedCodePoints;else url.username+=encodedCodePoints;}
buffer='';}else if(char==EOF||char=='/'||char=='?'||char=='#'||(char=='\\'&&isSpecial(url))){if(seenAt&&buffer=='')return INVALID_AUTHORITY;pointer-=arrayFrom(buffer).length+1;buffer='';state=HOST;}else buffer+=char;break;case HOST:case HOSTNAME:if(stateOverride&&url.scheme=='file'){state=FILE_HOST;continue;}else if(char==':'&&!seenBracket){if(buffer=='')return INVALID_HOST;failure=parseHost(url,buffer);if(failure)return failure;buffer='';state=PORT;if(stateOverride==HOSTNAME)return;}else if(char==EOF||char=='/'||char=='?'||char=='#'||(char=='\\'&&isSpecial(url))){if(isSpecial(url)&&buffer=='')return INVALID_HOST;if(stateOverride&&buffer==''&&(includesCredentials(url)||url.port!==null))return;failure=parseHost(url,buffer);if(failure)return failure;buffer='';state=PATH_START;if(stateOverride)return;continue;}else{if(char=='[')seenBracket=true;else if(char==']')seenBracket=false;buffer+=char;}break;case PORT:if(DIGIT.test(char)){buffer+=char;}else if(char==EOF||char=='/'||char=='?'||char=='#'||(char=='\\'&&isSpecial(url))||stateOverride){if(buffer!=''){var port=parseInt(buffer,10);if(port>0xFFFF)return INVALID_PORT;url.port=(isSpecial(url)&&port===specialSchemes[url.scheme])?null:port;buffer='';}
if(stateOverride)return;state=PATH_START;continue;}else return INVALID_PORT;break;case FILE:url.scheme='file';if(char=='/'||char=='\\')state=FILE_SLASH;else if(base&&base.scheme=='file'){if(char==EOF){url.host=base.host;url.path=base.path.slice();url.query=base.query;}else if(char=='?'){url.host=base.host;url.path=base.path.slice();url.query='';state=QUERY;}else if(char=='#'){url.host=base.host;url.path=base.path.slice();url.query=base.query;url.fragment='';state=FRAGMENT;}else{if(!startsWithWindowsDriveLetter(codePoints.slice(pointer).join(''))){url.host=base.host;url.path=base.path.slice();shortenURLsPath(url);}
state=PATH;continue;}}else{state=PATH;continue;}break;case FILE_SLASH:if(char=='/'||char=='\\'){state=FILE_HOST;break;}
if(base&&base.scheme=='file'&&!startsWithWindowsDriveLetter(codePoints.slice(pointer).join(''))){if(isWindowsDriveLetter(base.path[0],true))url.path.push(base.path[0]);else url.host=base.host;}
state=PATH;continue;case FILE_HOST:if(char==EOF||char=='/'||char=='\\'||char=='?'||char=='#'){if(!stateOverride&&isWindowsDriveLetter(buffer)){state=PATH;}else if(buffer==''){url.host='';if(stateOverride)return;state=PATH_START;}else{failure=parseHost(url,buffer);if(failure)return failure;if(url.host=='localhost')url.host='';if(stateOverride)return;buffer='';state=PATH_START;}continue;}else buffer+=char;break;case PATH_START:if(isSpecial(url)){state=PATH;if(char!='/'&&char!='\\')continue;}else if(!stateOverride&&char=='?'){url.query='';state=QUERY;}else if(!stateOverride&&char=='#'){url.fragment='';state=FRAGMENT;}else if(char!=EOF){state=PATH;if(char!='/')continue;}break;case PATH:if(char==EOF||char=='/'||(char=='\\'&&isSpecial(url))||(!stateOverride&&(char=='?'||char=='#'))){if(isDoubleDot(buffer)){shortenURLsPath(url);if(char!='/'&&!(char=='\\'&&isSpecial(url))){url.path.push('');}}else if(isSingleDot(buffer)){if(char!='/'&&!(char=='\\'&&isSpecial(url))){url.path.push('');}}else{if(url.scheme=='file'&&!url.path.length&&isWindowsDriveLetter(buffer)){if(url.host)url.host='';buffer=buffer.charAt(0)+':';}
url.path.push(buffer);}
buffer='';if(url.scheme=='file'&&(char==EOF||char=='?'||char=='#')){while(url.path.length>1&&url.path[0]===''){url.path.shift();}}
if(char=='?'){url.query='';state=QUERY;}else if(char=='#'){url.fragment='';state=FRAGMENT;}}else{buffer+=percentEncode(char,pathPercentEncodeSet);}break;case CANNOT_BE_A_BASE_URL_PATH:if(char=='?'){url.query='';state=QUERY;}else if(char=='#'){url.fragment='';state=FRAGMENT;}else if(char!=EOF){url.path[0]+=percentEncode(char,C0ControlPercentEncodeSet);}break;case QUERY:if(!stateOverride&&char=='#'){url.fragment='';state=FRAGMENT;}else if(char!=EOF){if(char=="'"&&isSpecial(url))url.query+='%27';else if(char=='#')url.query+='%23';else url.query+=percentEncode(char,C0ControlPercentEncodeSet);}break;case FRAGMENT:if(char!=EOF)url.fragment+=percentEncode(char,fragmentPercentEncodeSet);break;}
pointer++;}};var URLConstructor=function URL(url){var that=anInstance(this,URLConstructor,'URL');var base=arguments.length>1?arguments[1]:undefined;var urlString=String(url);var state=setInternalState$4(that,{type:'URL'});var baseState,failure;if(base!==undefined){if(base instanceof URLConstructor)baseState=getInternalURLState(base);else{failure=parseURL(baseState={},String(base));if(failure)throw TypeError(failure);}}
failure=parseURL(state,urlString,null,baseState);if(failure)throw TypeError(failure);var searchParams=state.searchParams=new URLSearchParams$1();var searchParamsState=getInternalSearchParamsState(searchParams);searchParamsState.updateSearchParams(state.query);searchParamsState.updateURL=function(){state.query=String(searchParams)||null;};if(!descriptors){that.href=serializeURL.call(that);that.origin=getOrigin.call(that);that.protocol=getProtocol.call(that);that.username=getUsername.call(that);that.password=getPassword.call(that);that.host=getHost.call(that);that.hostname=getHostname.call(that);that.port=getPort.call(that);that.pathname=getPathname.call(that);that.search=getSearch.call(that);that.searchParams=getSearchParams.call(that);that.hash=getHash.call(that);}};var URLPrototype=URLConstructor.prototype;var serializeURL=function(){var url=getInternalURLState(this);var scheme=url.scheme;var username=url.username;var password=url.password;var host=url.host;var port=url.port;var path=url.path;var query=url.query;var fragment=url.fragment;var output=scheme+':';if(host!==null){output+='//';if(includesCredentials(url)){output+=username+(password?':'+password:'')+'@';}
output+=serializeHost(host);if(port!==null)output+=':'+port;}else if(scheme=='file')output+='//';output+=url.cannotBeABaseURL?path[0]:path.length?'/'+path.join('/'):'';if(query!==null)output+='?'+query;if(fragment!==null)output+='#'+fragment;return output;};var getOrigin=function(){var url=getInternalURLState(this);var scheme=url.scheme;var port=url.port;if(scheme=='blob')try{return new URL(scheme.path[0]).origin;}catch(error){return'null';}
if(scheme=='file'||!isSpecial(url))return'null';return scheme+'://'+serializeHost(url.host)+(port!==null?':'+port:'');};var getProtocol=function(){return getInternalURLState(this).scheme+':';};var getUsername=function(){return getInternalURLState(this).username;};var getPassword=function(){return getInternalURLState(this).password;};var getHost=function(){var url=getInternalURLState(this);var host=url.host;var port=url.port;return host===null?'':port===null?serializeHost(host):serializeHost(host)+':'+port;};var getHostname=function(){var host=getInternalURLState(this).host;return host===null?'':serializeHost(host);};var getPort=function(){var port=getInternalURLState(this).port;return port===null?'':String(port);};var getPathname=function(){var url=getInternalURLState(this);var path=url.path;return url.cannotBeABaseURL?path[0]:path.length?'/'+path.join('/'):'';};var getSearch=function(){var query=getInternalURLState(this).query;return query?'?'+query:'';};var getSearchParams=function(){return getInternalURLState(this).searchParams;};var getHash=function(){var fragment=getInternalURLState(this).fragment;return fragment?'#'+fragment:'';};var accessorDescriptor=function(getter,setter){return{get:getter,set:setter,configurable:true,enumerable:true};};if(descriptors){objectDefineProperties(URLPrototype,{href:accessorDescriptor(serializeURL,function(href){var url=getInternalURLState(this);var urlString=String(href);var failure=parseURL(url,urlString);if(failure)throw TypeError(failure);getInternalSearchParamsState(url.searchParams).updateSearchParams(url.query);}),origin:accessorDescriptor(getOrigin),protocol:accessorDescriptor(getProtocol,function(protocol){var url=getInternalURLState(this);parseURL(url,String(protocol)+':',SCHEME_START);}),username:accessorDescriptor(getUsername,function(username){var url=getInternalURLState(this);var codePoints=arrayFrom(String(username));if(cannotHaveUsernamePasswordPort(url))return;url.username='';for(var i=0;i<codePoints.length;i++){url.username+=percentEncode(codePoints[i],userinfoPercentEncodeSet);}}),password:accessorDescriptor(getPassword,function(password){var url=getInternalURLState(this);var codePoints=arrayFrom(String(password));if(cannotHaveUsernamePasswordPort(url))return;url.password='';for(var i=0;i<codePoints.length;i++){url.password+=percentEncode(codePoints[i],userinfoPercentEncodeSet);}}),host:accessorDescriptor(getHost,function(host){var url=getInternalURLState(this);if(url.cannotBeABaseURL)return;parseURL(url,String(host),HOST);}),hostname:accessorDescriptor(getHostname,function(hostname){var url=getInternalURLState(this);if(url.cannotBeABaseURL)return;parseURL(url,String(hostname),HOSTNAME);}),port:accessorDescriptor(getPort,function(port){var url=getInternalURLState(this);if(cannotHaveUsernamePasswordPort(url))return;port=String(port);if(port=='')url.port=null;else parseURL(url,port,PORT);}),pathname:accessorDescriptor(getPathname,function(pathname){var url=getInternalURLState(this);if(url.cannotBeABaseURL)return;url.path=[];parseURL(url,pathname+'',PATH_START);}),search:accessorDescriptor(getSearch,function(search){var url=getInternalURLState(this);search=String(search);if(search==''){url.query=null;}else{if('?'==search.charAt(0))search=search.slice(1);url.query='';parseURL(url,search,QUERY);}
getInternalSearchParamsState(url.searchParams).updateSearchParams(url.query);}),searchParams:accessorDescriptor(getSearchParams),hash:accessorDescriptor(getHash,function(hash){var url=getInternalURLState(this);hash=String(hash);if(hash==''){url.fragment=null;return;}
if('#'==hash.charAt(0))hash=hash.slice(1);url.fragment='';parseURL(url,hash,FRAGMENT);})});}
redefine(URLPrototype,'toJSON',function toJSON(){return serializeURL.call(this);},{enumerable:true});redefine(URLPrototype,'toString',function toString(){return serializeURL.call(this);},{enumerable:true});if(NativeURL){var nativeCreateObjectURL=NativeURL.createObjectURL;var nativeRevokeObjectURL=NativeURL.revokeObjectURL;if(nativeCreateObjectURL)redefine(URLConstructor,'createObjectURL',function createObjectURL(blob){return nativeCreateObjectURL.apply(NativeURL,arguments);});if(nativeRevokeObjectURL)redefine(URLConstructor,'revokeObjectURL',function revokeObjectURL(url){return nativeRevokeObjectURL.apply(NativeURL,arguments);});}
setToStringTag(URLConstructor,'URL');_export({global:true,forced:!nativeUrl,sham:!descriptors},{URL:URLConstructor});function _typeof(obj){if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function(obj){return typeof obj;};}else{_typeof=function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;};}
return _typeof(obj);}
function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}
function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}
function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}
return obj;}
function _slicedToArray(arr,i){return _arrayWithHoles(arr)||_iterableToArrayLimit(arr,i)||_nonIterableRest();}
function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_nonIterableSpread();}
function _arrayWithoutHoles(arr){if(Array.isArray(arr)){for(var i=0,arr2=new Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2;}}
function _arrayWithHoles(arr){if(Array.isArray(arr))return arr;}
function _iterableToArray(iter){if(Symbol.iterator in Object(iter)||Object.prototype.toString.call(iter)==="[object Arguments]")return Array.from(iter);}
function _iterableToArrayLimit(arr,i){var _arr=[];var _n=true;var _d=false;var _e=undefined;try{for(var _i=arr[Symbol.iterator](),_s;!(_n=(_s=_i.next()).done);_n=true){_arr.push(_s.value);if(i&&_arr.length===i)break;}}catch(err){_d=true;_e=err;}finally{try{if(!_n&&_i["return"]!=null)_i["return"]();}finally{if(_d)throw _e;}}
return _arr;}
function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance");}
function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance");}
(function(global){var checkIfIteratorIsSupported=function checkIfIteratorIsSupported(){try{return!!Symbol.iterator;}catch(error){return false;}};var iteratorSupported=checkIfIteratorIsSupported();var createIterator=function createIterator(items){var iterator={next:function next(){var value=items.shift();return{done:value===void 0,value:value};}};if(iteratorSupported){iterator[Symbol.iterator]=function(){return iterator;};}
return iterator;};var serializeParam=function serializeParam(value){return encodeURIComponent(value).replace(/%20/g,'+');};var deserializeParam=function deserializeParam(value){return decodeURIComponent(String(value).replace(/\+/g,' '));};var polyfillURLSearchParams=function polyfillURLSearchParams(){var URLSearchParams=function URLSearchParams(searchString){Object.defineProperty(this,'_entries',{writable:true,value:{}});var typeofSearchString=_typeof(searchString);if(typeofSearchString==='undefined');else if(typeofSearchString==='string'){if(searchString!==''){this._fromString(searchString);}}else if(searchString instanceof URLSearchParams){var _this=this;searchString.forEach(function(value,name){_this.append(name,value);});}else if(searchString!==null&&typeofSearchString==='object'){if(Object.prototype.toString.call(searchString)==='[object Array]'){for(var i=0;i<searchString.length;i++){var entry=searchString[i];if(Object.prototype.toString.call(entry)==='[object Array]'||entry.length!==2){this.append(entry[0],entry[1]);}else{throw new TypeError('Expected [string, any] as entry at index '+i+' of URLSearchParams\'s input');}}}else{for(var key in searchString){if(searchString.hasOwnProperty(key)){this.append(key,searchString[key]);}}}}else{throw new TypeError('Unsupported input\'s type for URLSearchParams');}};var proto=URLSearchParams.prototype;proto.append=function(name,value){if(name in this._entries){this._entries[name].push(String(value));}else{this._entries[name]=[String(value)];}};proto.delete=function(name){delete this._entries[name];};proto.get=function(name){return name in this._entries?this._entries[name][0]:null;};proto.getAll=function(name){return name in this._entries?this._entries[name].slice(0):[];};proto.has=function(name){return name in this._entries;};proto.set=function(name,value){this._entries[name]=[String(value)];};proto.forEach=function(callback,thisArg){var entries;for(var name in this._entries){if(this._entries.hasOwnProperty(name)){entries=this._entries[name];for(var i=0;i<entries.length;i++){callback.call(thisArg,entries[i],name,this);}}}};proto.keys=function(){var items=[];this.forEach(function(value,name){items.push(name);});return createIterator(items);};proto.values=function(){var items=[];this.forEach(function(value){items.push(value);});return createIterator(items);};proto.entries=function(){var items=[];this.forEach(function(value,name){items.push([name,value]);});return createIterator(items);};if(iteratorSupported){proto[Symbol.iterator]=proto.entries;}
proto.toString=function(){var searchArray=[];this.forEach(function(value,name){searchArray.push(serializeParam(name)+'='+serializeParam(value));});return searchArray.join('&');};global.URLSearchParams=URLSearchParams;};if(!('URLSearchParams'in global)||new global.URLSearchParams('?a=1').toString()!=='a=1'){polyfillURLSearchParams();}
var proto=global.URLSearchParams.prototype;if(typeof proto.sort!=='function'){proto.sort=function(){var _this=this;var items=[];this.forEach(function(value,name){items.push([name,value]);if(!_this._entries){_this.delete(name);}});items.sort(function(a,b){if(a[0]<b[0]){return-1;}else if(a[0]>b[0]){return+1;}else{return 0;}});if(_this._entries){_this._entries={};}
for(var i=0;i<items.length;i++){this.append(items[i][0],items[i][1]);}};}
if(typeof proto._fromString!=='function'){Object.defineProperty(proto,'_fromString',{enumerable:false,configurable:false,writable:false,value:function value(searchString){if(this._entries){this._entries={};}else{var keys=[];this.forEach(function(value,name){keys.push(name);});for(var i=0;i<keys.length;i++){this.delete(keys[i]);}}
searchString=searchString.replace(/^\?/,'');var attributes=searchString.split('&');var attribute;for(var i=0;i<attributes.length;i++){attribute=attributes[i].split('=');this.append(deserializeParam(attribute[0]),attribute.length>1?deserializeParam(attribute[1]):'');}}});}})(typeof commonjsGlobal!=='undefined'?commonjsGlobal:typeof window!=='undefined'?window:typeof self!=='undefined'?self:commonjsGlobal);(function(global){var checkIfURLIsSupported=function checkIfURLIsSupported(){try{var u=new global.URL('b','http://a');u.pathname='c%20d';return u.href==='http://a/c%20d'&&u.searchParams;}catch(e){return false;}};var polyfillURL=function polyfillURL(){var _URL=global.URL;var URL=function URL(url,base){if(typeof url!=='string')url=String(url);var doc=document,baseElement;if(base&&(global.location===void 0||base!==global.location.href)){doc=document.implementation.createHTMLDocument('');baseElement=doc.createElement('base');baseElement.href=base;doc.head.appendChild(baseElement);try{if(baseElement.href.indexOf(base)!==0)throw new Error(baseElement.href);}catch(err){throw new Error('URL unable to set base '+base+' due to '+err);}}
var anchorElement=doc.createElement('a');anchorElement.href=url;if(baseElement){doc.body.appendChild(anchorElement);anchorElement.href=anchorElement.href;}
if(anchorElement.protocol===':'||!/:/.test(anchorElement.href)){throw new TypeError('Invalid URL');}
Object.defineProperty(this,'_anchorElement',{value:anchorElement});var searchParams=new global.URLSearchParams(this.search);var enableSearchUpdate=true;var enableSearchParamsUpdate=true;var _this=this;['append','delete','set'].forEach(function(methodName){var method=searchParams[methodName];searchParams[methodName]=function(){method.apply(searchParams,arguments);if(enableSearchUpdate){enableSearchParamsUpdate=false;_this.search=searchParams.toString();enableSearchParamsUpdate=true;}};});Object.defineProperty(this,'searchParams',{value:searchParams,enumerable:true});var search=void 0;Object.defineProperty(this,'_updateSearchParams',{enumerable:false,configurable:false,writable:false,value:function value(){if(this.search!==search){search=this.search;if(enableSearchParamsUpdate){enableSearchUpdate=false;this.searchParams._fromString(this.search);enableSearchUpdate=true;}}}});};var proto=URL.prototype;var linkURLWithAnchorAttribute=function linkURLWithAnchorAttribute(attributeName){Object.defineProperty(proto,attributeName,{get:function get(){return this._anchorElement[attributeName];},set:function set(value){this._anchorElement[attributeName]=value;},enumerable:true});};['hash','host','hostname','port','protocol'].forEach(function(attributeName){linkURLWithAnchorAttribute(attributeName);});Object.defineProperty(proto,'search',{get:function get(){return this._anchorElement['search'];},set:function set(value){this._anchorElement['search']=value;this._updateSearchParams();},enumerable:true});Object.defineProperties(proto,{'toString':{get:function get(){var _this=this;return function(){return _this.href;};}},'href':{get:function get(){return this._anchorElement.href.replace(/\?$/,'');},set:function set(value){this._anchorElement.href=value;this._updateSearchParams();},enumerable:true},'pathname':{get:function get(){return this._anchorElement.pathname.replace(/(^\/?)/,'/');},set:function set(value){this._anchorElement.pathname=value;},enumerable:true},'origin':{get:function get(){var expectedPort={'http:':80,'https:':443,'ftp:':21}[this._anchorElement.protocol];var addPortToOrigin=this._anchorElement.port!=expectedPort&&this._anchorElement.port!=='';return this._anchorElement.protocol+'//'+this._anchorElement.hostname+(addPortToOrigin?':'+this._anchorElement.port:'');},enumerable:true},'password':{get:function get(){return'';},set:function set(value){},enumerable:true},'username':{get:function get(){return'';},set:function set(value){},enumerable:true}});URL.createObjectURL=function(blob){return _URL.createObjectURL.apply(_URL,arguments);};URL.revokeObjectURL=function(url){return _URL.revokeObjectURL.apply(_URL,arguments);};global.URL=URL;};if(!checkIfURLIsSupported()){polyfillURL();}
if(global.location!==void 0&&!('origin'in global.location)){var getOrigin=function getOrigin(){return global.location.protocol+'//'+global.location.hostname+(global.location.port?':'+global.location.port:'');};try{Object.defineProperty(global.location,'origin',{get:getOrigin,enumerable:true});}catch(e){setInterval(function(){global.location.origin=getOrigin();},100);}}})(typeof commonjsGlobal!=='undefined'?commonjsGlobal:typeof window!=='undefined'?window:typeof self!=='undefined'?self:commonjsGlobal);var IS_CONCAT_SPREADABLE=wellKnownSymbol('isConcatSpreadable');var MAX_SAFE_INTEGER=0x1FFFFFFFFFFFFF;var MAXIMUM_ALLOWED_INDEX_EXCEEDED='Maximum allowed index exceeded';var IS_CONCAT_SPREADABLE_SUPPORT=!fails(function(){var array=[];array[IS_CONCAT_SPREADABLE]=false;return array.concat()[0]!==array;});var SPECIES_SUPPORT=arrayMethodHasSpeciesSupport('concat');var isConcatSpreadable=function(O){if(!isObject(O))return false;var spreadable=O[IS_CONCAT_SPREADABLE];return spreadable!==undefined?!!spreadable:isArray(O);};var FORCED=!IS_CONCAT_SPREADABLE_SUPPORT||!SPECIES_SUPPORT;_export({target:'Array',proto:true,forced:FORCED},{concat:function concat(arg){var O=toObject(this);var A=arraySpeciesCreate(O,0);var n=0;var i,k,length,len,E;for(i=-1,length=arguments.length;i<length;i++){E=i===-1?O:arguments[i];if(isConcatSpreadable(E)){len=toLength(E.length);if(n+len>MAX_SAFE_INTEGER)throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);for(k=0;k<len;k++,n++)if(k in E)createProperty(A,n,E[k]);}else{if(n>=MAX_SAFE_INTEGER)throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);createProperty(A,n++,E);}}
A.length=n;return A;}});var $filter=arrayIteration.filter;_export({target:'Array',proto:true,forced:!arrayMethodHasSpeciesSupport('filter')},{filter:function filter(callbackfn){return $filter(this,callbackfn,arguments.length>1?arguments[1]:undefined);}});var $find=arrayIteration.find;var FIND='find';var SKIPS_HOLES=true;if(FIND in[])Array(1)[FIND](function(){SKIPS_HOLES=false;});_export({target:'Array',proto:true,forced:SKIPS_HOLES},{find:function find(callbackfn){return $find(this,callbackfn,arguments.length>1?arguments[1]:undefined);}});addToUnscopables(FIND);var ITERATOR$7=wellKnownSymbol('iterator');var SAFE_CLOSING=false;try{var called=0;var iteratorWithReturn={next:function(){return{done:!!called++};},'return':function(){SAFE_CLOSING=true;}};iteratorWithReturn[ITERATOR$7]=function(){return this;};Array.from(iteratorWithReturn,function(){throw 2;});}catch(error){}
var checkCorrectnessOfIteration=function(exec,SKIP_CLOSING){if(!SKIP_CLOSING&&!SAFE_CLOSING)return false;var ITERATION_SUPPORT=false;try{var object={};object[ITERATOR$7]=function(){return{next:function(){return{done:ITERATION_SUPPORT=true};}};};exec(object);}catch(error){}
return ITERATION_SUPPORT;};var INCORRECT_ITERATION=!checkCorrectnessOfIteration(function(iterable){Array.from(iterable);});_export({target:'Array',stat:true,forced:INCORRECT_ITERATION},{from:arrayFrom});var $includes=arrayIncludes.includes;_export({target:'Array',proto:true},{includes:function includes(el){return $includes(this,el,arguments.length>1?arguments[1]:undefined);}});addToUnscopables('includes');var $map=arrayIteration.map;_export({target:'Array',proto:true,forced:!arrayMethodHasSpeciesSupport('map')},{map:function map(callbackfn){return $map(this,callbackfn,arguments.length>1?arguments[1]:undefined);}});var inheritIfRequired=function($this,dummy,Wrapper){var NewTarget,NewTargetPrototype;if(objectSetPrototypeOf&&typeof(NewTarget=dummy.constructor)=='function'&&NewTarget!==Wrapper&&isObject(NewTargetPrototype=NewTarget.prototype)&&NewTargetPrototype!==Wrapper.prototype)objectSetPrototypeOf($this,NewTargetPrototype);return $this;};var whitespaces='\u0009\u000A\u000B\u000C\u000D\u0020\u00A0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF';var whitespace='['+whitespaces+']';var ltrim=RegExp('^'+whitespace+whitespace+'*');var rtrim=RegExp(whitespace+whitespace+'*$');var createMethod$3=function(TYPE){return function($this){var string=String(requireObjectCoercible($this));if(TYPE&1)string=string.replace(ltrim,'');if(TYPE&2)string=string.replace(rtrim,'');return string;};};var stringTrim={start:createMethod$3(1),end:createMethod$3(2),trim:createMethod$3(3)};var getOwnPropertyNames=objectGetOwnPropertyNames.f;var getOwnPropertyDescriptor$2=objectGetOwnPropertyDescriptor.f;var defineProperty$3=objectDefineProperty.f;var trim=stringTrim.trim;var NUMBER='Number';var NativeNumber=global_1[NUMBER];var NumberPrototype=NativeNumber.prototype;var BROKEN_CLASSOF=classofRaw(objectCreate(NumberPrototype))==NUMBER;var toNumber=function(argument){var it=toPrimitive(argument,false);var first,third,radix,maxCode,digits,length,index,code;if(typeof it=='string'&&it.length>2){it=trim(it);first=it.charCodeAt(0);if(first===43||first===45){third=it.charCodeAt(2);if(third===88||third===120)return NaN;}else if(first===48){switch(it.charCodeAt(1)){case 66:case 98:radix=2;maxCode=49;break;case 79:case 111:radix=8;maxCode=55;break;default:return+it;}
digits=it.slice(2);length=digits.length;for(index=0;index<length;index++){code=digits.charCodeAt(index);if(code<48||code>maxCode)return NaN;}return parseInt(digits,radix);}}return+it;};if(isForced_1(NUMBER,!NativeNumber(' 0o1')||!NativeNumber('0b1')||NativeNumber('+0x1'))){var NumberWrapper=function Number(value){var it=arguments.length<1?0:value;var dummy=this;return dummy instanceof NumberWrapper&&(BROKEN_CLASSOF?fails(function(){NumberPrototype.valueOf.call(dummy);}):classofRaw(dummy)!=NUMBER)?inheritIfRequired(new NativeNumber(toNumber(it)),dummy,NumberWrapper):toNumber(it);};for(var keys$1=descriptors?getOwnPropertyNames(NativeNumber):('MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,'+'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,'+'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger').split(','),j=0,key;keys$1.length>j;j++){if(has(NativeNumber,key=keys$1[j])&&!has(NumberWrapper,key)){defineProperty$3(NumberWrapper,key,getOwnPropertyDescriptor$2(NativeNumber,key));}}
NumberWrapper.prototype=NumberPrototype;NumberPrototype.constructor=NumberWrapper;redefine(global_1,NUMBER,NumberWrapper);}
var FAILS_ON_PRIMITIVES=fails(function(){objectKeys(1);});_export({target:'Object',stat:true,forced:FAILS_ON_PRIMITIVES},{keys:function keys(it){return objectKeys(toObject(it));}});var notARegexp=function(it){if(isRegexp(it)){throw TypeError("The method doesn't accept regular expressions");}return it;};var MATCH$1=wellKnownSymbol('match');var correctIsRegexpLogic=function(METHOD_NAME){var regexp=/./;try{'/./'[METHOD_NAME](regexp);}catch(e){try{regexp[MATCH$1]=false;return'/./'[METHOD_NAME](regexp);}catch(f){}}return false;};_export({target:'String',proto:true,forced:!correctIsRegexpLogic('includes')},{includes:function includes(searchString){return!!~String(requireObjectCoercible(this)).indexOf(notARegexp(searchString),arguments.length>1?arguments[1]:undefined);}});var freezing=!fails(function(){return Object.isExtensible(Object.preventExtensions({}));});var internalMetadata=createCommonjsModule(function(module){var defineProperty=objectDefineProperty.f;var METADATA=uid('meta');var id=0;var isExtensible=Object.isExtensible||function(){return true;};var setMetadata=function(it){defineProperty(it,METADATA,{value:{objectID:'O'+ ++id,weakData:{}}});};var fastKey=function(it,create){if(!isObject(it))return typeof it=='symbol'?it:(typeof it=='string'?'S':'P')+it;if(!has(it,METADATA)){if(!isExtensible(it))return'F';if(!create)return'E';setMetadata(it);}return it[METADATA].objectID;};var getWeakData=function(it,create){if(!has(it,METADATA)){if(!isExtensible(it))return true;if(!create)return false;setMetadata(it);}return it[METADATA].weakData;};var onFreeze=function(it){if(freezing&&meta.REQUIRED&&isExtensible(it)&&!has(it,METADATA))setMetadata(it);return it;};var meta=module.exports={REQUIRED:false,fastKey:fastKey,getWeakData:getWeakData,onFreeze:onFreeze};hiddenKeys[METADATA]=true;});var internalMetadata_1=internalMetadata.REQUIRED;var internalMetadata_2=internalMetadata.fastKey;var internalMetadata_3=internalMetadata.getWeakData;var internalMetadata_4=internalMetadata.onFreeze;var iterate_1=createCommonjsModule(function(module){var Result=function(stopped,result){this.stopped=stopped;this.result=result;};var iterate=module.exports=function(iterable,fn,that,AS_ENTRIES,IS_ITERATOR){var boundFunction=bindContext(fn,that,AS_ENTRIES?2:1);var iterator,iterFn,index,length,result,step;if(IS_ITERATOR){iterator=iterable;}else{iterFn=getIteratorMethod(iterable);if(typeof iterFn!='function')throw TypeError('Target is not iterable');if(isArrayIteratorMethod(iterFn)){for(index=0,length=toLength(iterable.length);length>index;index++){result=AS_ENTRIES?boundFunction(anObject(step=iterable[index])[0],step[1]):boundFunction(iterable[index]);if(result&&result instanceof Result)return result;}return new Result(false);}
iterator=iterFn.call(iterable);}
while(!(step=iterator.next()).done){result=callWithSafeIterationClosing(iterator,boundFunction,step.value,AS_ENTRIES);if(result&&result instanceof Result)return result;}return new Result(false);};iterate.stop=function(result){return new Result(true,result);};});var collection=function(CONSTRUCTOR_NAME,wrapper,common,IS_MAP,IS_WEAK){var NativeConstructor=global_1[CONSTRUCTOR_NAME];var NativePrototype=NativeConstructor&&NativeConstructor.prototype;var Constructor=NativeConstructor;var ADDER=IS_MAP?'set':'add';var exported={};var fixMethod=function(KEY){var nativeMethod=NativePrototype[KEY];redefine(NativePrototype,KEY,KEY=='add'?function add(a){nativeMethod.call(this,a===0?0:a);return this;}:KEY=='delete'?function(a){return IS_WEAK&&!isObject(a)?false:nativeMethod.call(this,a===0?0:a);}:KEY=='get'?function get(a){return IS_WEAK&&!isObject(a)?undefined:nativeMethod.call(this,a===0?0:a);}:KEY=='has'?function has(a){return IS_WEAK&&!isObject(a)?false:nativeMethod.call(this,a===0?0:a);}:function set(a,b){nativeMethod.call(this,a===0?0:a,b);return this;});};if(isForced_1(CONSTRUCTOR_NAME,typeof NativeConstructor!='function'||!(IS_WEAK||NativePrototype.forEach&&!fails(function(){new NativeConstructor().entries().next();})))){Constructor=common.getConstructor(wrapper,CONSTRUCTOR_NAME,IS_MAP,ADDER);internalMetadata.REQUIRED=true;}else if(isForced_1(CONSTRUCTOR_NAME,true)){var instance=new Constructor();var HASNT_CHAINING=instance[ADDER](IS_WEAK?{}:-0,1)!=instance;var THROWS_ON_PRIMITIVES=fails(function(){instance.has(1);});var ACCEPT_ITERABLES=checkCorrectnessOfIteration(function(iterable){new NativeConstructor(iterable);});var BUGGY_ZERO=!IS_WEAK&&fails(function(){var $instance=new NativeConstructor();var index=5;while(index--)$instance[ADDER](index,index);return!$instance.has(-0);});if(!ACCEPT_ITERABLES){Constructor=wrapper(function(dummy,iterable){anInstance(dummy,Constructor,CONSTRUCTOR_NAME);var that=inheritIfRequired(new NativeConstructor(),dummy,Constructor);if(iterable!=undefined)iterate_1(iterable,that[ADDER],that,IS_MAP);return that;});Constructor.prototype=NativePrototype;NativePrototype.constructor=Constructor;}
if(THROWS_ON_PRIMITIVES||BUGGY_ZERO){fixMethod('delete');fixMethod('has');IS_MAP&&fixMethod('get');}
if(BUGGY_ZERO||HASNT_CHAINING)fixMethod(ADDER);if(IS_WEAK&&NativePrototype.clear)delete NativePrototype.clear;}
exported[CONSTRUCTOR_NAME]=Constructor;_export({global:true,forced:Constructor!=NativeConstructor},exported);setToStringTag(Constructor,CONSTRUCTOR_NAME);if(!IS_WEAK)common.setStrong(Constructor,CONSTRUCTOR_NAME,IS_MAP);return Constructor;};var getWeakData=internalMetadata.getWeakData;var setInternalState$5=internalState.set;var internalStateGetterFor=internalState.getterFor;var find$1=arrayIteration.find;var findIndex=arrayIteration.findIndex;var id$1=0;var uncaughtFrozenStore=function(store){return store.frozen||(store.frozen=new UncaughtFrozenStore());};var UncaughtFrozenStore=function(){this.entries=[];};var findUncaughtFrozen=function(store,key){return find$1(store.entries,function(it){return it[0]===key;});};UncaughtFrozenStore.prototype={get:function(key){var entry=findUncaughtFrozen(this,key);if(entry)return entry[1];},has:function(key){return!!findUncaughtFrozen(this,key);},set:function(key,value){var entry=findUncaughtFrozen(this,key);if(entry)entry[1]=value;else this.entries.push([key,value]);},'delete':function(key){var index=findIndex(this.entries,function(it){return it[0]===key;});if(~index)this.entries.splice(index,1);return!!~index;}};var collectionWeak={getConstructor:function(wrapper,CONSTRUCTOR_NAME,IS_MAP,ADDER){var C=wrapper(function(that,iterable){anInstance(that,C,CONSTRUCTOR_NAME);setInternalState$5(that,{type:CONSTRUCTOR_NAME,id:id$1++,frozen:undefined});if(iterable!=undefined)iterate_1(iterable,that[ADDER],that,IS_MAP);});var getInternalState=internalStateGetterFor(CONSTRUCTOR_NAME);var define=function(that,key,value){var state=getInternalState(that);var data=getWeakData(anObject(key),true);if(data===true)uncaughtFrozenStore(state).set(key,value);else data[state.id]=value;return that;};redefineAll(C.prototype,{'delete':function(key){var state=getInternalState(this);if(!isObject(key))return false;var data=getWeakData(key);if(data===true)return uncaughtFrozenStore(state)['delete'](key);return data&&has(data,state.id)&&delete data[state.id];},has:function has$1(key){var state=getInternalState(this);if(!isObject(key))return false;var data=getWeakData(key);if(data===true)return uncaughtFrozenStore(state).has(key);return data&&has(data,state.id);}});redefineAll(C.prototype,IS_MAP?{get:function get(key){var state=getInternalState(this);if(isObject(key)){var data=getWeakData(key);if(data===true)return uncaughtFrozenStore(state).get(key);return data?data[state.id]:undefined;}},set:function set(key,value){return define(this,key,value);}}:{add:function add(value){return define(this,value,true);}});return C;}};var es_weakMap=createCommonjsModule(function(module){var enforceIternalState=internalState.enforce;var IS_IE11=!global_1.ActiveXObject&&'ActiveXObject'in global_1;var isExtensible=Object.isExtensible;var InternalWeakMap;var wrapper=function(get){return function WeakMap(){return get(this,arguments.length?arguments[0]:undefined);};};var $WeakMap=module.exports=collection('WeakMap',wrapper,collectionWeak,true,true);if(nativeWeakMap&&IS_IE11){InternalWeakMap=collectionWeak.getConstructor(wrapper,'WeakMap',true);internalMetadata.REQUIRED=true;var WeakMapPrototype=$WeakMap.prototype;var nativeDelete=WeakMapPrototype['delete'];var nativeHas=WeakMapPrototype.has;var nativeGet=WeakMapPrototype.get;var nativeSet=WeakMapPrototype.set;redefineAll(WeakMapPrototype,{'delete':function(key){if(isObject(key)&&!isExtensible(key)){var state=enforceIternalState(this);if(!state.frozen)state.frozen=new InternalWeakMap();return nativeDelete.call(this,key)||state.frozen['delete'](key);}return nativeDelete.call(this,key);},has:function has(key){if(isObject(key)&&!isExtensible(key)){var state=enforceIternalState(this);if(!state.frozen)state.frozen=new InternalWeakMap();return nativeHas.call(this,key)||state.frozen.has(key);}return nativeHas.call(this,key);},get:function get(key){if(isObject(key)&&!isExtensible(key)){var state=enforceIternalState(this);if(!state.frozen)state.frozen=new InternalWeakMap();return nativeHas.call(this,key)?nativeGet.call(this,key):state.frozen.get(key);}return nativeGet.call(this,key);},set:function set(key,value){if(isObject(key)&&!isExtensible(key)){var state=enforceIternalState(this);if(!state.frozen)state.frozen=new InternalWeakMap();nativeHas.call(this,key)?nativeSet.call(this,key,value):state.frozen.set(key,value);}else nativeSet.call(this,key,value);return this;}});}});_export({target:'Object',stat:true,forced:Object.assign!==objectAssign},{assign:objectAssign});var non='\u200B\u0085\u180E';var forcedStringTrimMethod=function(METHOD_NAME){return fails(function(){return!!whitespaces[METHOD_NAME]()||non[METHOD_NAME]()!=non||whitespaces[METHOD_NAME].name!==METHOD_NAME;});};var $trim=stringTrim.trim;_export({target:'String',proto:true,forced:forcedStringTrimMethod('trim')},{trim:function trim(){return $trim(this);}});var thisNumberValue=function(value){if(typeof value!='number'&&classofRaw(value)!='Number'){throw TypeError('Incorrect invocation');}
return+value;};var stringRepeat=''.repeat||function repeat(count){var str=String(requireObjectCoercible(this));var result='';var n=toInteger(count);if(n<0||n==Infinity)throw RangeError('Wrong number of repetitions');for(;n>0;(n>>>=1)&&(str+=str))if(n&1)result+=str;return result;};var nativeToFixed=1.0.toFixed;var floor$4=Math.floor;var pow$1=function(x,n,acc){return n===0?acc:n%2===1?pow$1(x,n-1,acc*x):pow$1(x*x,n/2,acc);};var log=function(x){var n=0;var x2=x;while(x2>=4096){n+=12;x2/=4096;}
while(x2>=2){n+=1;x2/=2;}return n;};var FORCED$1=nativeToFixed&&(0.00008.toFixed(3)!=='0.000'||0.9.toFixed(0)!=='1'||1.255.toFixed(2)!=='1.25'||1000000000000000128.0.toFixed(0)!=='1000000000000000128')||!fails(function(){nativeToFixed.call({});});_export({target:'Number',proto:true,forced:FORCED$1},{toFixed:function toFixed(fractionDigits){var number=thisNumberValue(this);var fractDigits=toInteger(fractionDigits);var data=[0,0,0,0,0,0];var sign='';var result='0';var e,z,j,k;var multiply=function(n,c){var index=-1;var c2=c;while(++index<6){c2+=n*data[index];data[index]=c2%1e7;c2=floor$4(c2/1e7);}};var divide=function(n){var index=6;var c=0;while(--index>=0){c+=data[index];data[index]=floor$4(c/n);c=(c%n)*1e7;}};var dataToString=function(){var index=6;var s='';while(--index>=0){if(s!==''||index===0||data[index]!==0){var t=String(data[index]);s=s===''?t:s+stringRepeat.call('0',7-t.length)+t;}}return s;};if(fractDigits<0||fractDigits>20)throw RangeError('Incorrect fraction digits');if(number!=number)return'NaN';if(number<=-1e21||number>=1e21)return String(number);if(number<0){sign='-';number=-number;}
if(number>1e-21){e=log(number*pow$1(2,69,1))-69;z=e<0?number*pow$1(2,-e,1):number/pow$1(2,e,1);z*=0x10000000000000;e=52-e;if(e>0){multiply(0,z);j=fractDigits;while(j>=7){multiply(1e7,0);j-=7;}
multiply(pow$1(10,j,1),0);j=e-1;while(j>=23){divide(1<<23);j-=23;}
divide(1<<j);multiply(1,1);divide(2);result=dataToString();}else{multiply(0,z);multiply(1<<-e,0);result=dataToString()+stringRepeat.call('0',fractDigits);}}
if(fractDigits>0){k=result.length;result=sign+(k<=fractDigits?'0.'+stringRepeat.call('0',fractDigits-k)+result:result.slice(0,k-fractDigits)+'.'+result.slice(k-fractDigits));}else{result=sign+result;}return result;}});var propertyIsEnumerable=objectPropertyIsEnumerable.f;var createMethod$4=function(TO_ENTRIES){return function(it){var O=toIndexedObject(it);var keys=objectKeys(O);var length=keys.length;var i=0;var result=[];var key;while(length>i){key=keys[i++];if(!descriptors||propertyIsEnumerable.call(O,key)){result.push(TO_ENTRIES?[key,O[key]]:O[key]);}}
return result;};};var objectToArray={entries:createMethod$4(true),values:createMethod$4(false)};var $entries=objectToArray.entries;_export({target:'Object',stat:true},{entries:function entries(O){return $entries(O);}});var $values=objectToArray.values;_export({target:'Object',stat:true},{values:function values(O){return $values(O);}});var defaults={addCSS:true,thumbWidth:15,watch:true};function matches(element,selector){function match(){return Array.from(document.querySelectorAll(selector)).includes(this);}
var matches=match;return matches.call(element,selector);}
function trigger(element,type){if(!element||!type){return;}
var event=new Event(type);element.dispatchEvent(event);}
_export({target:'Number',stat:true},{isNaN:function isNaN(number){return number!=number;}});var getConstructor=function getConstructor(input){return input!==null&&typeof input!=='undefined'?input.constructor:null;};var instanceOf=function instanceOf(input,constructor){return Boolean(input&&constructor&&input instanceof constructor);};var isNullOrUndefined=function isNullOrUndefined(input){return input===null||typeof input==='undefined';};var isObject$1=function isObject(input){return getConstructor(input)===Object;};var isNumber=function isNumber(input){return getConstructor(input)===Number&&!Number.isNaN(input);};var isString=function isString(input){return getConstructor(input)===String;};var isBoolean=function isBoolean(input){return getConstructor(input)===Boolean;};var isFunction=function isFunction(input){return getConstructor(input)===Function;};var isArray$1=function isArray(input){return Array.isArray(input);};var isNodeList=function isNodeList(input){return instanceOf(input,NodeList);};var isElement=function isElement(input){return instanceOf(input,Element);};var isEvent=function isEvent(input){return instanceOf(input,Event);};var isEmpty=function isEmpty(input){return isNullOrUndefined(input)||(isString(input)||isArray$1(input)||isNodeList(input))&&!input.length||isObject$1(input)&&!Object.keys(input).length;};var is={nullOrUndefined:isNullOrUndefined,object:isObject$1,number:isNumber,string:isString,boolean:isBoolean,function:isFunction,array:isArray$1,nodeList:isNodeList,element:isElement,event:isEvent,empty:isEmpty};fixRegexpWellKnownSymbolLogic('match',1,function(MATCH,nativeMatch,maybeCallNative){return[function match(regexp){var O=requireObjectCoercible(this);var matcher=regexp==undefined?undefined:regexp[MATCH];return matcher!==undefined?matcher.call(regexp,O):new RegExp(regexp)[MATCH](String(O));},function(regexp){var res=maybeCallNative(nativeMatch,regexp,this);if(res.done)return res.value;var rx=anObject(regexp);var S=String(this);if(!rx.global)return regexpExecAbstract(rx,S);var fullUnicode=rx.unicode;rx.lastIndex=0;var A=[];var n=0;var result;while((result=regexpExecAbstract(rx,S))!==null){var matchStr=String(result[0]);A[n]=matchStr;if(matchStr==='')rx.lastIndex=advanceStringIndex(S,toLength(rx.lastIndex),fullUnicode);n++;}
return n===0?null:A;}];});function getDecimalPlaces(value){var match="".concat(value).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);if(!match){return 0;}
return Math.max(0,(match[1]?match[1].length:0)-(match[2]?+match[2]:0));}
function round(number,step){if(step<1){var places=getDecimalPlaces(step);return parseFloat(number.toFixed(places));}
return Math.round(number/step)*step;}
var RangeTouch=function(){function RangeTouch(target,options){_classCallCheck(this,RangeTouch);if(is.element(target)){this.element=target;}else if(is.string(target)){this.element=document.querySelector(target);}
if(!is.element(this.element)||!is.empty(this.element.rangeTouch)){return;}
this.config=Object.assign({},defaults,options);this.init();}
_createClass(RangeTouch,[{key:"init",value:function init(){if(!RangeTouch.enabled){return;}
if(this.config.addCSS){this.element.style.userSelect='none';this.element.style.webKitUserSelect='none';this.element.style.touchAction='manipulation';}
this.listeners(true);this.element.rangeTouch=this;}},{key:"destroy",value:function destroy(){if(!RangeTouch.enabled){return;}
this.listeners(false);this.element.rangeTouch=null;}},{key:"listeners",value:function listeners(toggle){var _this=this;var method=toggle?'addEventListener':'removeEventListener';['touchstart','touchmove','touchend'].forEach(function(type){_this.element[method](type,function(event){return _this.set(event);},false);});}},{key:"get",value:function get(event){if(!RangeTouch.enabled||!is.event(event)){return null;}
var input=event.target;var touch=event.changedTouches[0];var min=parseFloat(input.getAttribute('min'))||0;var max=parseFloat(input.getAttribute('max'))||100;var step=parseFloat(input.getAttribute('step'))||1;var delta=max-min;var percent;var clientRect=input.getBoundingClientRect();var thumbWidth=100/clientRect.width*(this.config.thumbWidth/2)/100;percent=100/clientRect.width*(touch.clientX-clientRect.left);if(percent<0){percent=0;}else if(percent>100){percent=100;}
if(percent<50){percent-=(100-percent*2)*thumbWidth;}else if(percent>50){percent+=(percent-50)*2*thumbWidth;}
return min+round(delta*(percent/100),step);}},{key:"set",value:function set(event){if(!RangeTouch.enabled||!is.event(event)||event.target.disabled){return;}
event.preventDefault();event.target.value=this.get(event);trigger(event.target,event.type==='touchend'?'change':'input');}}],[{key:"setup",value:function setup(target){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var targets=null;if(is.empty(target)||is.string(target)){targets=Array.from(document.querySelectorAll(is.string(target)?target:'input[type="range"]'));}else if(is.element(target)){targets=[target];}else if(is.nodeList(target)){targets=Array.from(target);}else if(is.array(target)){targets=target.filter(is.element);}
if(is.empty(targets)){return null;}
var config=Object.assign({},defaults,options);if(is.string(target)&&config.watch){var observer=new MutationObserver(function(mutations){Array.from(mutations).forEach(function(mutation){Array.from(mutation.addedNodes).forEach(function(node){if(!is.element(node)||!matches(node,target)){return;}
var range=new RangeTouch(node,config);});});});observer.observe(document.body,{childList:true,subtree:true});}
return targets.map(function(t){return new RangeTouch(t,options);});}},{key:"enabled",get:function get(){return'ontouchstart'in document.documentElement;}}]);return RangeTouch;}();var SPECIES$5=wellKnownSymbol('species');var setSpecies=function(CONSTRUCTOR_NAME){var Constructor=getBuiltIn(CONSTRUCTOR_NAME);var defineProperty=objectDefineProperty.f;if(descriptors&&Constructor&&!Constructor[SPECIES$5]){defineProperty(Constructor,SPECIES$5,{configurable:true,get:function(){return this;}});}};var location=global_1.location;var set$1=global_1.setImmediate;var clear=global_1.clearImmediate;var process=global_1.process;var MessageChannel=global_1.MessageChannel;var Dispatch=global_1.Dispatch;var counter=0;var queue={};var ONREADYSTATECHANGE='onreadystatechange';var defer,channel,port;var run=function(id){if(queue.hasOwnProperty(id)){var fn=queue[id];delete queue[id];fn();}};var runner=function(id){return function(){run(id);};};var listener=function(event){run(event.data);};var post=function(id){global_1.postMessage(id+'',location.protocol+'//'+location.host);};if(!set$1||!clear){set$1=function setImmediate(fn){var args=[];var i=1;while(arguments.length>i)args.push(arguments[i++]);queue[++counter]=function(){(typeof fn=='function'?fn:Function(fn)).apply(undefined,args);};defer(counter);return counter;};clear=function clearImmediate(id){delete queue[id];};if(classofRaw(process)=='process'){defer=function(id){process.nextTick(runner(id));};}else if(Dispatch&&Dispatch.now){defer=function(id){Dispatch.now(runner(id));};}else if(MessageChannel){channel=new MessageChannel();port=channel.port2;channel.port1.onmessage=listener;defer=bindContext(port.postMessage,port,1);}else if(global_1.addEventListener&&typeof postMessage=='function'&&!global_1.importScripts&&!fails(post)){defer=post;global_1.addEventListener('message',listener,false);}else if(ONREADYSTATECHANGE in documentCreateElement('script')){defer=function(id){html.appendChild(documentCreateElement('script'))[ONREADYSTATECHANGE]=function(){html.removeChild(this);run(id);};};}else{defer=function(id){setTimeout(runner(id),0);};}}
var task={set:set$1,clear:clear};var userAgent=getBuiltIn('navigator','userAgent')||'';var getOwnPropertyDescriptor$3=objectGetOwnPropertyDescriptor.f;var macrotask=task.set;var MutationObserver$1=global_1.MutationObserver||global_1.WebKitMutationObserver;var process$1=global_1.process;var Promise$1=global_1.Promise;var IS_NODE=classofRaw(process$1)=='process';var queueMicrotaskDescriptor=getOwnPropertyDescriptor$3(global_1,'queueMicrotask');var queueMicrotask=queueMicrotaskDescriptor&&queueMicrotaskDescriptor.value;var flush,head,last,notify,toggle,node,promise;if(!queueMicrotask){flush=function(){var parent,fn;if(IS_NODE&&(parent=process$1.domain))parent.exit();while(head){fn=head.fn;head=head.next;try{fn();}catch(error){if(head)notify();else last=undefined;throw error;}}last=undefined;if(parent)parent.enter();};if(IS_NODE){notify=function(){process$1.nextTick(flush);};}else if(MutationObserver$1&&!/(iphone|ipod|ipad).*applewebkit/i.test(userAgent)){toggle=true;node=document.createTextNode('');new MutationObserver$1(flush).observe(node,{characterData:true});notify=function(){node.data=toggle=!toggle;};}else if(Promise$1&&Promise$1.resolve){promise=Promise$1.resolve(undefined);notify=function(){promise.then(flush);};}else{notify=function(){macrotask.call(global_1,flush);};}}
var microtask=queueMicrotask||function(fn){var task={fn:fn,next:undefined};if(last)last.next=task;if(!head){head=task;notify();}last=task;};var PromiseCapability=function(C){var resolve,reject;this.promise=new C(function($$resolve,$$reject){if(resolve!==undefined||reject!==undefined)throw TypeError('Bad Promise constructor');resolve=$$resolve;reject=$$reject;});this.resolve=aFunction$1(resolve);this.reject=aFunction$1(reject);};var f$7=function(C){return new PromiseCapability(C);};var newPromiseCapability={f:f$7};var promiseResolve=function(C,x){anObject(C);if(isObject(x)&&x.constructor===C)return x;var promiseCapability=newPromiseCapability.f(C);var resolve=promiseCapability.resolve;resolve(x);return promiseCapability.promise;};var hostReportErrors=function(a,b){var console=global_1.console;if(console&&console.error){arguments.length===1?console.error(a):console.error(a,b);}};var perform=function(exec){try{return{error:false,value:exec()};}catch(error){return{error:true,value:error};}};var task$1=task.set;var SPECIES$6=wellKnownSymbol('species');var PROMISE='Promise';var getInternalState$3=internalState.get;var setInternalState$6=internalState.set;var getInternalPromiseState=internalState.getterFor(PROMISE);var PromiseConstructor=global_1[PROMISE];var TypeError$1=global_1.TypeError;var document$2=global_1.document;var process$2=global_1.process;var $fetch=global_1.fetch;var versions=process$2&&process$2.versions;var v8=versions&&versions.v8||'';var newPromiseCapability$1=newPromiseCapability.f;var newGenericPromiseCapability=newPromiseCapability$1;var IS_NODE$1=classofRaw(process$2)=='process';var DISPATCH_EVENT=!!(document$2&&document$2.createEvent&&global_1.dispatchEvent);var UNHANDLED_REJECTION='unhandledrejection';var REJECTION_HANDLED='rejectionhandled';var PENDING=0;var FULFILLED=1;var REJECTED=2;var HANDLED=1;var UNHANDLED=2;var Internal,OwnPromiseCapability,PromiseWrapper;var FORCED$2=isForced_1(PROMISE,function(){var promise=PromiseConstructor.resolve(1);var empty=function(){};var FakePromise=(promise.constructor={})[SPECIES$6]=function(exec){exec(empty,empty);};return!((IS_NODE$1||typeof PromiseRejectionEvent=='function')&&(!isPure||promise['finally'])&&promise.then(empty)instanceof FakePromise&&v8.indexOf('6.6')!==0&&userAgent.indexOf('Chrome/66')===-1);});var INCORRECT_ITERATION$1=FORCED$2||!checkCorrectnessOfIteration(function(iterable){PromiseConstructor.all(iterable)['catch'](function(){});});var isThenable=function(it){var then;return isObject(it)&&typeof(then=it.then)=='function'?then:false;};var notify$1=function(promise,state,isReject){if(state.notified)return;state.notified=true;var chain=state.reactions;microtask(function(){var value=state.value;var ok=state.state==FULFILLED;var index=0;while(chain.length>index){var reaction=chain[index++];var handler=ok?reaction.ok:reaction.fail;var resolve=reaction.resolve;var reject=reaction.reject;var domain=reaction.domain;var result,then,exited;try{if(handler){if(!ok){if(state.rejection===UNHANDLED)onHandleUnhandled(promise,state);state.rejection=HANDLED;}
if(handler===true)result=value;else{if(domain)domain.enter();result=handler(value);if(domain){domain.exit();exited=true;}}
if(result===reaction.promise){reject(TypeError$1('Promise-chain cycle'));}else if(then=isThenable(result)){then.call(result,resolve,reject);}else resolve(result);}else reject(value);}catch(error){if(domain&&!exited)domain.exit();reject(error);}}
state.reactions=[];state.notified=false;if(isReject&&!state.rejection)onUnhandled(promise,state);});};var dispatchEvent=function(name,promise,reason){var event,handler;if(DISPATCH_EVENT){event=document$2.createEvent('Event');event.promise=promise;event.reason=reason;event.initEvent(name,false,true);global_1.dispatchEvent(event);}else event={promise:promise,reason:reason};if(handler=global_1['on'+name])handler(event);else if(name===UNHANDLED_REJECTION)hostReportErrors('Unhandled promise rejection',reason);};var onUnhandled=function(promise,state){task$1.call(global_1,function(){var value=state.value;var IS_UNHANDLED=isUnhandled(state);var result;if(IS_UNHANDLED){result=perform(function(){if(IS_NODE$1){process$2.emit('unhandledRejection',value,promise);}else dispatchEvent(UNHANDLED_REJECTION,promise,value);});state.rejection=IS_NODE$1||isUnhandled(state)?UNHANDLED:HANDLED;if(result.error)throw result.value;}});};var isUnhandled=function(state){return state.rejection!==HANDLED&&!state.parent;};var onHandleUnhandled=function(promise,state){task$1.call(global_1,function(){if(IS_NODE$1){process$2.emit('rejectionHandled',promise);}else dispatchEvent(REJECTION_HANDLED,promise,state.value);});};var bind=function(fn,promise,state,unwrap){return function(value){fn(promise,state,value,unwrap);};};var internalReject=function(promise,state,value,unwrap){if(state.done)return;state.done=true;if(unwrap)state=unwrap;state.value=value;state.state=REJECTED;notify$1(promise,state,true);};var internalResolve=function(promise,state,value,unwrap){if(state.done)return;state.done=true;if(unwrap)state=unwrap;try{if(promise===value)throw TypeError$1("Promise can't be resolved itself");var then=isThenable(value);if(then){microtask(function(){var wrapper={done:false};try{then.call(value,bind(internalResolve,promise,wrapper,state),bind(internalReject,promise,wrapper,state));}catch(error){internalReject(promise,wrapper,error,state);}});}else{state.value=value;state.state=FULFILLED;notify$1(promise,state,false);}}catch(error){internalReject(promise,{done:false},error,state);}};if(FORCED$2){PromiseConstructor=function Promise(executor){anInstance(this,PromiseConstructor,PROMISE);aFunction$1(executor);Internal.call(this);var state=getInternalState$3(this);try{executor(bind(internalResolve,this,state),bind(internalReject,this,state));}catch(error){internalReject(this,state,error);}};Internal=function Promise(executor){setInternalState$6(this,{type:PROMISE,done:false,notified:false,parent:false,reactions:[],rejection:false,state:PENDING,value:undefined});};Internal.prototype=redefineAll(PromiseConstructor.prototype,{then:function then(onFulfilled,onRejected){var state=getInternalPromiseState(this);var reaction=newPromiseCapability$1(speciesConstructor(this,PromiseConstructor));reaction.ok=typeof onFulfilled=='function'?onFulfilled:true;reaction.fail=typeof onRejected=='function'&&onRejected;reaction.domain=IS_NODE$1?process$2.domain:undefined;state.parent=true;state.reactions.push(reaction);if(state.state!=PENDING)notify$1(this,state,false);return reaction.promise;},'catch':function(onRejected){return this.then(undefined,onRejected);}});OwnPromiseCapability=function(){var promise=new Internal();var state=getInternalState$3(promise);this.promise=promise;this.resolve=bind(internalResolve,promise,state);this.reject=bind(internalReject,promise,state);};newPromiseCapability.f=newPromiseCapability$1=function(C){return C===PromiseConstructor||C===PromiseWrapper?new OwnPromiseCapability(C):newGenericPromiseCapability(C);};if(typeof $fetch=='function')_export({global:true,enumerable:true,forced:true},{fetch:function fetch(input){return promiseResolve(PromiseConstructor,$fetch.apply(global_1,arguments));}});}
_export({global:true,wrap:true,forced:FORCED$2},{Promise:PromiseConstructor});setToStringTag(PromiseConstructor,PROMISE,false);setSpecies(PROMISE);PromiseWrapper=path[PROMISE];_export({target:PROMISE,stat:true,forced:FORCED$2},{reject:function reject(r){var capability=newPromiseCapability$1(this);capability.reject.call(undefined,r);return capability.promise;}});_export({target:PROMISE,stat:true,forced:FORCED$2},{resolve:function resolve(x){return promiseResolve(this,x);}});_export({target:PROMISE,stat:true,forced:INCORRECT_ITERATION$1},{all:function all(iterable){var C=this;var capability=newPromiseCapability$1(C);var resolve=capability.resolve;var reject=capability.reject;var result=perform(function(){var $promiseResolve=aFunction$1(C.resolve);var values=[];var counter=0;var remaining=1;iterate_1(iterable,function(promise){var index=counter++;var alreadyCalled=false;values.push(undefined);remaining++;$promiseResolve.call(C,promise).then(function(value){if(alreadyCalled)return;alreadyCalled=true;values[index]=value;--remaining||resolve(values);},reject);});--remaining||resolve(values);});if(result.error)reject(result.value);return capability.promise;},race:function race(iterable){var C=this;var capability=newPromiseCapability$1(C);var reject=capability.reject;var result=perform(function(){var $promiseResolve=aFunction$1(C.resolve);iterate_1(iterable,function(promise){$promiseResolve.call(C,promise).then(capability.resolve,reject);});});if(result.error)reject(result.value);return capability.promise;}});var nativeStartsWith=''.startsWith;var min$4=Math.min;_export({target:'String',proto:true,forced:!correctIsRegexpLogic('startsWith')},{startsWith:function startsWith(searchString){var that=String(requireObjectCoercible(this));notARegexp(searchString);var index=toLength(min$4(arguments.length>1?arguments[1]:undefined,that.length));var search=String(searchString);return nativeStartsWith?nativeStartsWith.call(that,search,index):that.slice(index,index+search.length)===search;}});var getConstructor$1=function getConstructor(input){return input!==null&&typeof input!=='undefined'?input.constructor:null;};var instanceOf$1=function instanceOf(input,constructor){return Boolean(input&&constructor&&input instanceof constructor);};var isNullOrUndefined$1=function isNullOrUndefined(input){return input===null||typeof input==='undefined';};var isObject$2=function isObject(input){return getConstructor$1(input)===Object;};var isNumber$1=function isNumber(input){return getConstructor$1(input)===Number&&!Number.isNaN(input);};var isString$1=function isString(input){return getConstructor$1(input)===String;};var isBoolean$1=function isBoolean(input){return getConstructor$1(input)===Boolean;};var isFunction$1=function isFunction(input){return getConstructor$1(input)===Function;};var isArray$2=function isArray(input){return Array.isArray(input);};var isWeakMap=function isWeakMap(input){return instanceOf$1(input,WeakMap);};var isNodeList$1=function isNodeList(input){return instanceOf$1(input,NodeList);};var isElement$1=function isElement(input){return instanceOf$1(input,Element);};var isTextNode=function isTextNode(input){return getConstructor$1(input)===Text;};var isEvent$1=function isEvent(input){return instanceOf$1(input,Event);};var isKeyboardEvent=function isKeyboardEvent(input){return instanceOf$1(input,KeyboardEvent);};var isCue=function isCue(input){return instanceOf$1(input,window.TextTrackCue)||instanceOf$1(input,window.VTTCue);};var isTrack=function isTrack(input){return instanceOf$1(input,TextTrack)||!isNullOrUndefined$1(input)&&isString$1(input.kind);};var isPromise=function isPromise(input){return instanceOf$1(input,Promise);};var isEmpty$1=function isEmpty(input){return isNullOrUndefined$1(input)||(isString$1(input)||isArray$2(input)||isNodeList$1(input))&&!input.length||isObject$2(input)&&!Object.keys(input).length;};var isUrl=function isUrl(input){if(instanceOf$1(input,window.URL)){return true;}
if(!isString$1(input)){return false;}
var string=input;if(!input.startsWith('http://')||!input.startsWith('https://')){string="http://".concat(input);}
try{return!isEmpty$1(new URL(string).hostname);}catch(e){return false;}};var is$1={nullOrUndefined:isNullOrUndefined$1,object:isObject$2,number:isNumber$1,string:isString$1,boolean:isBoolean$1,function:isFunction$1,array:isArray$2,weakMap:isWeakMap,nodeList:isNodeList$1,element:isElement$1,textNode:isTextNode,event:isEvent$1,keyboardEvent:isKeyboardEvent,cue:isCue,track:isTrack,promise:isPromise,url:isUrl,empty:isEmpty$1};var transitionEndEvent=function(){var element=document.createElement('span');var events={WebkitTransition:'webkitTransitionEnd',MozTransition:'transitionend',OTransition:'oTransitionEnd otransitionend',transition:'transitionend'};var type=Object.keys(events).find(function(event){return element.style[event]!==undefined;});return is$1.string(type)?events[type]:false;}();function repaint(element,delay){setTimeout(function(){try{element.hidden=true;element.offsetHeight;element.hidden=false;}catch(e){}},delay);}
var browser={isIE:!!document.documentMode,isEdge:window.navigator.userAgent.includes('Edge'),isWebkit:'WebkitAppearance'in document.documentElement.style&&!/Edge/.test(navigator.userAgent),isIPhone:/(iPhone|iPod)/gi.test(navigator.platform),isIos:/(iPad|iPhone|iPod)/gi.test(navigator.platform)};var supportsPassiveListeners=function(){var supported=false;try{var options=Object.defineProperty({},'passive',{get:function get(){supported=true;return null;}});window.addEventListener('test',null,options);window.removeEventListener('test',null,options);}catch(e){}
return supported;}();function toggleListener(element,event,callback){var _this=this;var toggle=arguments.length>3&&arguments[3]!==undefined?arguments[3]:false;var passive=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;var capture=arguments.length>5&&arguments[5]!==undefined?arguments[5]:false;if(!element||!('addEventListener'in element)||is$1.empty(event)||!is$1.function(callback)){return;}
var events=event.split(' ');var options=capture;if(supportsPassiveListeners){options={passive:passive,capture:capture};}
events.forEach(function(type){if(_this&&_this.eventListeners&&toggle){_this.eventListeners.push({element:element,type:type,callback:callback,options:options});}
element[toggle?'addEventListener':'removeEventListener'](type,callback,options);});}
function on(element){var events=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var callback=arguments.length>2?arguments[2]:undefined;var passive=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;var capture=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;toggleListener.call(this,element,events,callback,true,passive,capture);}
function off(element){var events=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var callback=arguments.length>2?arguments[2]:undefined;var passive=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;var capture=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;toggleListener.call(this,element,events,callback,false,passive,capture);}
function once(element){var _this2=this;var events=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var callback=arguments.length>2?arguments[2]:undefined;var passive=arguments.length>3&&arguments[3]!==undefined?arguments[3]:true;var capture=arguments.length>4&&arguments[4]!==undefined?arguments[4]:false;var onceCallback=function onceCallback(){off(element,events,onceCallback,passive,capture);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}
callback.apply(_this2,args);};toggleListener.call(this,element,events,onceCallback,true,passive,capture);}
function triggerEvent(element){var type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var bubbles=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;var detail=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};if(!is$1.element(element)||is$1.empty(type)){return;}
var event=new CustomEvent(type,{bubbles:bubbles,detail:Object.assign({},detail,{plyr:this})});element.dispatchEvent(event);}
function unbindListeners(){if(this&&this.eventListeners){this.eventListeners.forEach(function(item){var element=item.element,type=item.type,callback=item.callback,options=item.options;element.removeEventListener(type,callback,options);});this.eventListeners=[];}}
function ready(){var _this3=this;return new Promise(function(resolve){return _this3.ready?setTimeout(resolve,0):on.call(_this3,_this3.elements.container,'ready',resolve);}).then(function(){});}
function cloneDeep(object){return JSON.parse(JSON.stringify(object));}
function getDeep(object,path){return path.split('.').reduce(function(obj,key){return obj&&obj[key];},object);}
function extend(){var target=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};for(var _len=arguments.length,sources=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){sources[_key-1]=arguments[_key];}
if(!sources.length){return target;}
var source=sources.shift();if(!is$1.object(source)){return target;}
Object.keys(source).forEach(function(key){if(is$1.object(source[key])){if(!Object.keys(target).includes(key)){Object.assign(target,_defineProperty({},key,{}));}
extend(target[key],source[key]);}else{Object.assign(target,_defineProperty({},key,source[key]));}});return extend.apply(void 0,[target].concat(sources));}
function wrap$1(elements,wrapper){var targets=elements.length?elements:[elements];Array.from(targets).reverse().forEach(function(element,index){var child=index>0?wrapper.cloneNode(true):wrapper;var parent=element.parentNode;var sibling=element.nextSibling;child.appendChild(element);if(sibling){parent.insertBefore(child,sibling);}else{parent.appendChild(child);}});}
function setAttributes(element,attributes){if(!is$1.element(element)||is$1.empty(attributes)){return;}
Object.entries(attributes).filter(function(_ref){var _ref2=_slicedToArray(_ref,2),value=_ref2[1];return!is$1.nullOrUndefined(value);}).forEach(function(_ref3){var _ref4=_slicedToArray(_ref3,2),key=_ref4[0],value=_ref4[1];return element.setAttribute(key,value);});}
function createElement(type,attributes,text){var element=document.createElement(type);if(is$1.object(attributes)){setAttributes(element,attributes);}
if(is$1.string(text)){element.innerText=text;}
return element;}
function insertAfter(element,target){if(!is$1.element(element)||!is$1.element(target)){return;}
target.parentNode.insertBefore(element,target.nextSibling);}
function insertElement(type,parent,attributes,text){if(!is$1.element(parent)){return;}
parent.appendChild(createElement(type,attributes,text));}
function removeElement(element){if(is$1.nodeList(element)||is$1.array(element)){Array.from(element).forEach(removeElement);return;}
if(!is$1.element(element)||!is$1.element(element.parentNode)){return;}
element.parentNode.removeChild(element);}
function emptyElement(element){if(!is$1.element(element)){return;}
var length=element.childNodes.length;while(length>0){element.removeChild(element.lastChild);length-=1;}}
function replaceElement(newChild,oldChild){if(!is$1.element(oldChild)||!is$1.element(oldChild.parentNode)||!is$1.element(newChild)){return null;}
oldChild.parentNode.replaceChild(newChild,oldChild);return newChild;}
function getAttributesFromSelector(sel,existingAttributes){if(!is$1.string(sel)||is$1.empty(sel)){return{};}
var attributes={};var existing=extend({},existingAttributes);sel.split(',').forEach(function(s){var selector=s.trim();var className=selector.replace('.','');var stripped=selector.replace(/[[\]]/g,'');var parts=stripped.split('=');var _parts=_slicedToArray(parts,1),key=_parts[0];var value=parts.length>1?parts[1].replace(/["']/g,''):'';var start=selector.charAt(0);switch(start){case'.':if(is$1.string(existing.class)){attributes.class="".concat(existing.class," ").concat(className);}else{attributes.class=className;}
break;case'#':attributes.id=selector.replace('#','');break;case'[':attributes[key]=value;break;default:break;}});return extend(existing,attributes);}
function toggleHidden(element,hidden){if(!is$1.element(element)){return;}
var hide=hidden;if(!is$1.boolean(hide)){hide=!element.hidden;}
element.hidden=hide;}
function toggleClass(element,className,force){if(is$1.nodeList(element)){return Array.from(element).map(function(e){return toggleClass(e,className,force);});}
if(is$1.element(element)){var method='toggle';if(typeof force!=='undefined'){method=force?'add':'remove';}
element.classList[method](className);return element.classList.contains(className);}
return false;}
function hasClass(element,className){return is$1.element(element)&&element.classList.contains(className);}
function matches$1(element,selector){function match(){return Array.from(document.querySelectorAll(selector)).includes(this);}
var method=match;return method.call(element,selector);}
function getElements(selector){return this.elements.container.querySelectorAll(selector);}
function getElement(selector){return this.elements.container.querySelector(selector);}
function trapFocus(){var element=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var toggle=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!is$1.element(element)){return;}
var focusable=getElements.call(this,'button:not(:disabled), input:not(:disabled), [tabindex]');var first=focusable[0];var last=focusable[focusable.length-1];var trap=function trap(event){if(event.key!=='Tab'||event.keyCode!==9){return;}
var focused=document.activeElement;if(focused===last&&!event.shiftKey){first.focus();event.preventDefault();}else if(focused===first&&event.shiftKey){last.focus();event.preventDefault();}};toggleListener.call(this,this.elements.container,'keydown',trap,toggle,false);}
function setFocus(){var element=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var tabFocus=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!is$1.element(element)){return;}
element.focus({preventScroll:true});if(tabFocus){toggleClass(element,this.config.classNames.tabFocus);}}
var defaultCodecs={'audio/ogg':'vorbis','audio/wav':'1','video/webm':'vp8, vorbis','video/mp4':'avc1.42E01E, mp4a.40.2','video/ogg':'theora'};var support={audio:'canPlayType'in document.createElement('audio'),video:'canPlayType'in document.createElement('video'),check:function check(type,provider,playsinline){var canPlayInline=browser.isIPhone&&playsinline&&support.playsinline;var api=support[type]||provider!=='html5';var ui=api&&support.rangeInput&&(type!=='video'||!browser.isIPhone||canPlayInline);return{api:api,ui:ui};},pip:function(){if(browser.isIPhone){return false;}
if(is$1.function(createElement('video').webkitSetPresentationMode)){return true;}
if(document.pictureInPictureEnabled&&!createElement('video').disablePictureInPicture){return true;}
return false;}(),airplay:is$1.function(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:'playsInline'in document.createElement('video'),mime:function mime(input){if(is$1.empty(input)){return false;}
var _input$split=input.split('/'),_input$split2=_slicedToArray(_input$split,1),mediaType=_input$split2[0];var type=input;if(!this.isHTML5||mediaType!==this.type){return false;}
if(Object.keys(defaultCodecs).includes(type)){type+="; codecs=\"".concat(defaultCodecs[input],"\"");}
try{return Boolean(type&&this.media.canPlayType(type).replace(/no/,''));}catch(e){return false;}},textTracks:'textTracks'in document.createElement('video'),rangeInput:function(){var range=document.createElement('input');range.type='range';return range.type==='range';}(),touch:'ontouchstart'in document.documentElement,transitions:transitionEndEvent!==false,reducedMotion:'matchMedia'in window&&window.matchMedia('(prefers-reduced-motion)').matches};function validateRatio(input){if(!is$1.array(input)&&(!is$1.string(input)||!input.includes(':'))){return false;}
var ratio=is$1.array(input)?input:input.split(':');return ratio.map(Number).every(is$1.number);}
function reduceAspectRatio(ratio){if(!is$1.array(ratio)||!ratio.every(is$1.number)){return null;}
var _ratio=_slicedToArray(ratio,2),width=_ratio[0],height=_ratio[1];var getDivider=function getDivider(w,h){return h===0?w:getDivider(h,w%h);};var divider=getDivider(width,height);return[width/divider,height/divider];}
function getAspectRatio(input){var parse=function parse(ratio){return validateRatio(ratio)?ratio.split(':').map(Number):null;};var ratio=parse(input);if(ratio===null){ratio=parse(this.config.ratio);}
if(ratio===null&&!is$1.empty(this.embed)&&is$1.array(this.embed.ratio)){ratio=this.embed.ratio;}
if(ratio===null&&this.isHTML5){var _this$media=this.media,videoWidth=_this$media.videoWidth,videoHeight=_this$media.videoHeight;ratio=reduceAspectRatio([videoWidth,videoHeight]);}
return ratio;}
function setAspectRatio(input){if(!this.isVideo){return{};}
var ratio=getAspectRatio.call(this,input);var _ref=is$1.array(ratio)?ratio:[0,0],_ref2=_slicedToArray(_ref,2),w=_ref2[0],h=_ref2[1];var padding=100/w*h;this.elements.wrapper.style.paddingBottom="".concat(padding,"%");if(this.isVimeo&&this.supported.ui){var height=240;var offset=(height-padding)/(height/50);this.media.style.transform="translateY(-".concat(offset,"%)");}else if(this.isHTML5){this.elements.wrapper.classList.toggle(this.config.classNames.videoFixedRatio,ratio!==null);}
return{padding:padding,ratio:ratio};}
var html5={getSources:function getSources(){var _this=this;if(!this.isHTML5){return[];}
var sources=Array.from(this.media.querySelectorAll('source'));return sources.filter(function(source){var type=source.getAttribute('type');if(is$1.empty(type)){return true;}
return support.mime.call(_this,type);});},getQualityOptions:function getQualityOptions(){return html5.getSources.call(this).map(function(source){return Number(source.getAttribute('size'));}).filter(Boolean);},extend:function extend(){if(!this.isHTML5){return;}
var player=this;if(!is$1.empty(this.config.ratio)){setAspectRatio.call(player);}
Object.defineProperty(player.media,'quality',{get:function get(){var sources=html5.getSources.call(player);var source=sources.find(function(s){return s.getAttribute('src')===player.source;});return source&&Number(source.getAttribute('size'));},set:function set(input){var sources=html5.getSources.call(player);var source=sources.find(function(s){return Number(s.getAttribute('size'))===input;});if(!source){return;}
var _player$media=player.media,currentTime=_player$media.currentTime,paused=_player$media.paused,preload=_player$media.preload,readyState=_player$media.readyState;player.media.src=source.getAttribute('src');if(preload!=='none'||readyState){player.once('loadedmetadata',function(){player.currentTime=currentTime;if(!paused){player.play();}});player.media.load();}
triggerEvent.call(player,player.media,'qualitychange',false,{quality:input});}});},cancelRequests:function cancelRequests(){if(!this.isHTML5){return;}
removeElement(html5.getSources.call(this));this.media.setAttribute('src',this.config.blankVideo);this.media.load();this.debug.log('Cancelled network requests');}};function dedupe(array){if(!is$1.array(array)){return array;}
return array.filter(function(item,index){return array.indexOf(item)===index;});}
function closest(array,value){if(!is$1.array(array)||!array.length){return null;}
return array.reduce(function(prev,curr){return Math.abs(curr-value)<Math.abs(prev-value)?curr:prev;});}
var defineProperty$4=objectDefineProperty.f;var getOwnPropertyNames$1=objectGetOwnPropertyNames.f;var MATCH$2=wellKnownSymbol('match');var NativeRegExp=global_1.RegExp;var RegExpPrototype$1=NativeRegExp.prototype;var re1=/a/g;var re2=/a/g;var CORRECT_NEW=new NativeRegExp(re1)!==re1;var FORCED$3=descriptors&&isForced_1('RegExp',(!CORRECT_NEW||fails(function(){re2[MATCH$2]=false;return NativeRegExp(re1)!=re1||NativeRegExp(re2)==re2||NativeRegExp(re1,'i')!='/a/i';})));if(FORCED$3){var RegExpWrapper=function RegExp(pattern,flags){var thisIsRegExp=this instanceof RegExpWrapper;var patternIsRegExp=isRegexp(pattern);var flagsAreUndefined=flags===undefined;return!thisIsRegExp&&patternIsRegExp&&pattern.constructor===RegExpWrapper&&flagsAreUndefined?pattern:inheritIfRequired(CORRECT_NEW?new NativeRegExp(patternIsRegExp&&!flagsAreUndefined?pattern.source:pattern,flags):NativeRegExp((patternIsRegExp=pattern instanceof RegExpWrapper)?pattern.source:pattern,patternIsRegExp&&flagsAreUndefined?regexpFlags.call(pattern):flags),thisIsRegExp?this:RegExpPrototype$1,RegExpWrapper);};var proxy=function(key){key in RegExpWrapper||defineProperty$4(RegExpWrapper,key,{configurable:true,get:function(){return NativeRegExp[key];},set:function(it){NativeRegExp[key]=it;}});};var keys$2=getOwnPropertyNames$1(NativeRegExp);var index=0;while(keys$2.length>index)proxy(keys$2[index++]);RegExpPrototype$1.constructor=RegExpWrapper;RegExpWrapper.prototype=RegExpPrototype$1;redefine(global_1,'RegExp',RegExpWrapper);}
setSpecies('RegExp');function generateId(prefix){return"".concat(prefix,"-").concat(Math.floor(Math.random()*10000));}
function format(input){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key];}
if(is$1.empty(input)){return input;}
return input.toString().replace(/{(\d+)}/g,function(match,i){return args[i].toString();});}
function getPercentage(current,max){if(current===0||max===0||Number.isNaN(current)||Number.isNaN(max)){return 0;}
return(current/max*100).toFixed(2);}
function replaceAll(){var input=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var find=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'';var replace=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'';return input.replace(new RegExp(find.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,'\\$1'),'g'),replace.toString());}
function toTitleCase(){var input=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';return input.toString().replace(/\w\S*/g,function(text){return text.charAt(0).toUpperCase()+text.substr(1).toLowerCase();});}
function toPascalCase(){var input=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var string=input.toString();string=replaceAll(string,'-',' ');string=replaceAll(string,'_',' ');string=toTitleCase(string);return replaceAll(string,' ','');}
function toCamelCase(){var input=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var string=input.toString();string=toPascalCase(string);return string.charAt(0).toLowerCase()+string.slice(1);}
function stripHTML(source){var fragment=document.createDocumentFragment();var element=document.createElement('div');fragment.appendChild(element);element.innerHTML=source;return fragment.firstChild.innerText;}
function getHTML(element){var wrapper=document.createElement('div');wrapper.appendChild(element);return wrapper.innerHTML;}
var resources={pip:'PIP',airplay:'AirPlay',html5:'HTML5',vimeo:'Vimeo',youtube:'YouTube'};var i18n={get:function get(){var key=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var config=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(is$1.empty(key)||is$1.empty(config)){return'';}
var string=getDeep(config.i18n,key);if(is$1.empty(string)){if(Object.keys(resources).includes(key)){return resources[key];}
return'';}
var replace={'{seektime}':config.seekTime,'{title}':config.title};Object.entries(replace).forEach(function(_ref){var _ref2=_slicedToArray(_ref,2),k=_ref2[0],v=_ref2[1];string=replaceAll(string,k,v);});return string;}};var Storage=function(){function Storage(player){_classCallCheck(this,Storage);this.enabled=player.config.storage.enabled;this.key=player.config.storage.key;}
_createClass(Storage,[{key:"get",value:function get(key){if(!Storage.supported||!this.enabled){return null;}
var store=window.localStorage.getItem(this.key);if(is$1.empty(store)){return null;}
var json=JSON.parse(store);return is$1.string(key)&&key.length?json[key]:json;}},{key:"set",value:function set(object){if(!Storage.supported||!this.enabled){return;}
if(!is$1.object(object)){return;}
var storage=this.get();if(is$1.empty(storage)){storage={};}
extend(storage,object);window.localStorage.setItem(this.key,JSON.stringify(storage));}}],[{key:"supported",get:function get(){try{if(!('localStorage'in window)){return false;}
var test='___test';window.localStorage.setItem(test,test);window.localStorage.removeItem(test);return true;}catch(e){return false;}}}]);return Storage;}();function fetch(url){var responseType=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'text';return new Promise(function(resolve,reject){try{var request=new XMLHttpRequest();if(!('withCredentials'in request)){return;}
request.addEventListener('load',function(){if(responseType==='text'){try{resolve(JSON.parse(request.responseText));}catch(e){resolve(request.responseText);}}else{resolve(request.response);}});request.addEventListener('error',function(){throw new Error(request.status);});request.open('GET',url,true);request.responseType=responseType;request.send();}catch(e){reject(e);}});}
function loadSprite(url,id){if(!is$1.string(url)){return;}
var prefix='cache';var hasId=is$1.string(id);var isCached=false;var exists=function exists(){return document.getElementById(id)!==null;};var update=function update(container,data){container.innerHTML=data;if(hasId&&exists()){return;}
document.body.insertAdjacentElement('afterbegin',container);};if(!hasId||!exists()){var useStorage=Storage.supported;var container=document.createElement('div');container.setAttribute('hidden','');if(hasId){container.setAttribute('id',id);}
if(useStorage){var cached=window.localStorage.getItem("".concat(prefix,"-").concat(id));isCached=cached!==null;if(isCached){var data=JSON.parse(cached);update(container,data.content);}}
fetch(url).then(function(result){if(is$1.empty(result)){return;}
if(useStorage){window.localStorage.setItem("".concat(prefix,"-").concat(id),JSON.stringify({content:result}));}
update(container,result);}).catch(function(){});}}
var ceil$1=Math.ceil;var floor$5=Math.floor;_export({target:'Math',stat:true},{trunc:function trunc(it){return(it>0?floor$5:ceil$1)(it);}});var getHours=function getHours(value){return Math.trunc(value/60/60%60,10);};var getMinutes=function getMinutes(value){return Math.trunc(value/60%60,10);};var getSeconds=function getSeconds(value){return Math.trunc(value%60,10);};function formatTime(){var time=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var displayHours=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var inverted=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(!is$1.number(time)){return formatTime(null,displayHours,inverted);}
var format=function format(value){return"0".concat(value).slice(-2);};var hours=getHours(time);var mins=getMinutes(time);var secs=getSeconds(time);if(displayHours||hours>0){hours="".concat(hours,":");}else{hours='';}
return"".concat(inverted&&time>0?'-':'').concat(hours).concat(format(mins),":").concat(format(secs));}
var controls={getIconUrl:function getIconUrl(){var url=new URL(this.config.iconUrl,window.location);var cors=url.host!==window.location.host||browser.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:cors};},findElements:function findElements(){try{this.elements.controls=getElement.call(this,this.config.selectors.controls.wrapper);this.elements.buttons={play:getElements.call(this,this.config.selectors.buttons.play),pause:getElement.call(this,this.config.selectors.buttons.pause),restart:getElement.call(this,this.config.selectors.buttons.restart),rewind:getElement.call(this,this.config.selectors.buttons.rewind),fastForward:getElement.call(this,this.config.selectors.buttons.fastForward),mute:getElement.call(this,this.config.selectors.buttons.mute),pip:getElement.call(this,this.config.selectors.buttons.pip),airplay:getElement.call(this,this.config.selectors.buttons.airplay),settings:getElement.call(this,this.config.selectors.buttons.settings),captions:getElement.call(this,this.config.selectors.buttons.captions),fullscreen:getElement.call(this,this.config.selectors.buttons.fullscreen)};this.elements.progress=getElement.call(this,this.config.selectors.progress);this.elements.inputs={seek:getElement.call(this,this.config.selectors.inputs.seek),volume:getElement.call(this,this.config.selectors.inputs.volume)};this.elements.display={buffer:getElement.call(this,this.config.selectors.display.buffer),currentTime:getElement.call(this,this.config.selectors.display.currentTime),duration:getElement.call(this,this.config.selectors.display.duration)};if(is$1.element(this.elements.progress)){this.elements.display.seekTooltip=this.elements.progress.querySelector(".".concat(this.config.classNames.tooltip));}
return true;}catch(error){this.debug.warn('It looks like there is a problem with your custom controls HTML',error);this.toggleNativeControls(true);return false;}},createIcon:function createIcon(type,attributes){var namespace='http://www.w3.org/2000/svg';var iconUrl=controls.getIconUrl.call(this);var iconPath="".concat(!iconUrl.cors?iconUrl.url:'',"#").concat(this.config.iconPrefix);var icon=document.createElementNS(namespace,'svg');setAttributes(icon,extend(attributes,{role:'presentation',focusable:'false'}));var use=document.createElementNS(namespace,'use');var path="".concat(iconPath,"-").concat(type);if('href'in use){use.setAttributeNS('http://www.w3.org/1999/xlink','href',path);}
use.setAttributeNS('http://www.w3.org/1999/xlink','xlink:href',path);icon.appendChild(use);return icon;},createLabel:function createLabel(key){var attr=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var text=i18n.get(key,this.config);var attributes=Object.assign({},attr,{class:[attr.class,this.config.classNames.hidden].filter(Boolean).join(' ')});return createElement('span',attributes,text);},createBadge:function createBadge(text){if(is$1.empty(text)){return null;}
var badge=createElement('span',{class:this.config.classNames.menu.value});badge.appendChild(createElement('span',{class:this.config.classNames.menu.badge},text));return badge;},createButton:function createButton(buttonType,attr){var _this=this;var attributes=extend({},attr);var type=toCamelCase(buttonType);var props={element:'button',toggle:false,label:null,icon:null,labelPressed:null,iconPressed:null};['element','icon','label'].forEach(function(key){if(Object.keys(attributes).includes(key)){props[key]=attributes[key];delete attributes[key];}});if(props.element==='button'&&!Object.keys(attributes).includes('type')){attributes.type='button';}
if(Object.keys(attributes).includes('class')){if(!attributes.class.split(' ').some(function(c){return c===_this.config.classNames.control;})){extend(attributes,{class:"".concat(attributes.class," ").concat(this.config.classNames.control)});}}else{attributes.class=this.config.classNames.control;}
switch(buttonType){case'play':props.toggle=true;props.label='play';props.labelPressed='pause';props.icon='play';props.iconPressed='pause';break;case'mute':props.toggle=true;props.label='mute';props.labelPressed='unmute';props.icon='volume';props.iconPressed='muted';break;case'captions':props.toggle=true;props.label='enableCaptions';props.labelPressed='disableCaptions';props.icon='captions-off';props.iconPressed='captions-on';break;case'fullscreen':props.toggle=true;props.label='enterFullscreen';props.labelPressed='exitFullscreen';props.icon='enter-fullscreen';props.iconPressed='exit-fullscreen';break;case'play-large':attributes.class+=" ".concat(this.config.classNames.control,"--overlaid");type='play';props.label='play';props.icon='play';break;default:if(is$1.empty(props.label)){props.label=type;}
if(is$1.empty(props.icon)){props.icon=buttonType;}}
var button=createElement(props.element);if(props.toggle){button.appendChild(controls.createIcon.call(this,props.iconPressed,{class:'icon--pressed'}));button.appendChild(controls.createIcon.call(this,props.icon,{class:'icon--not-pressed'}));button.appendChild(controls.createLabel.call(this,props.labelPressed,{class:'label--pressed'}));button.appendChild(controls.createLabel.call(this,props.label,{class:'label--not-pressed'}));}else{button.appendChild(controls.createIcon.call(this,props.icon));button.appendChild(controls.createLabel.call(this,props.label));}
extend(attributes,getAttributesFromSelector(this.config.selectors.buttons[type],attributes));setAttributes(button,attributes);if(type==='play'){if(!is$1.array(this.elements.buttons[type])){this.elements.buttons[type]=[];}
this.elements.buttons[type].push(button);}else{this.elements.buttons[type]=button;}
return button;},createRange:function createRange(type,attributes){var input=createElement('input',extend(getAttributesFromSelector(this.config.selectors.inputs[type]),{type:'range',min:0,max:100,step:0.01,value:0,autocomplete:'off',role:'slider','aria-label':i18n.get(type,this.config),'aria-valuemin':0,'aria-valuemax':100,'aria-valuenow':0},attributes));this.elements.inputs[type]=input;controls.updateRangeFill.call(this,input);RangeTouch.setup(input);return input;},createProgress:function createProgress(type,attributes){var progress=createElement('progress',extend(getAttributesFromSelector(this.config.selectors.display[type]),{min:0,max:100,value:0,role:'progressbar','aria-hidden':true},attributes));if(type!=='volume'){progress.appendChild(createElement('span',null,'0'));var suffixKey={played:'played',buffer:'buffered'}[type];var suffix=suffixKey?i18n.get(suffixKey,this.config):'';progress.innerText="% ".concat(suffix.toLowerCase());}
this.elements.display[type]=progress;return progress;},createTime:function createTime(type,attrs){var attributes=getAttributesFromSelector(this.config.selectors.display[type],attrs);var container=createElement('div',extend(attributes,{class:"".concat(attributes.class?attributes.class:''," ").concat(this.config.classNames.display.time," ").trim(),'aria-label':i18n.get(type,this.config)}),'00:00');this.elements.display[type]=container;return container;},bindMenuItemShortcuts:function bindMenuItemShortcuts(menuItem,type){var _this2=this;on(menuItem,'keydown keyup',function(event){if(![32,38,39,40].includes(event.which)){return;}
event.preventDefault();event.stopPropagation();if(event.type==='keydown'){return;}
var isRadioButton=matches$1(menuItem,'[role="menuitemradio"]');if(!isRadioButton&&[32,39].includes(event.which)){controls.showMenuPanel.call(_this2,type,true);}else{var target;if(event.which!==32){if(event.which===40||isRadioButton&&event.which===39){target=menuItem.nextElementSibling;if(!is$1.element(target)){target=menuItem.parentNode.firstElementChild;}}else{target=menuItem.previousElementSibling;if(!is$1.element(target)){target=menuItem.parentNode.lastElementChild;}}
setFocus.call(_this2,target,true);}}},false);on(menuItem,'keyup',function(event){if(event.which!==13){return;}
controls.focusFirstMenuItem.call(_this2,null,true);});},createMenuItem:function createMenuItem(_ref){var _this3=this;var value=_ref.value,list=_ref.list,type=_ref.type,title=_ref.title,_ref$badge=_ref.badge,badge=_ref$badge===void 0?null:_ref$badge,_ref$checked=_ref.checked,checked=_ref$checked===void 0?false:_ref$checked;var attributes=getAttributesFromSelector(this.config.selectors.inputs[type]);var menuItem=createElement('button',extend(attributes,{type:'button',role:'menuitemradio',class:"".concat(this.config.classNames.control," ").concat(attributes.class?attributes.class:'').trim(),'aria-checked':checked,value:value}));var flex=createElement('span');flex.innerHTML=title;if(is$1.element(badge)){flex.appendChild(badge);}
menuItem.appendChild(flex);Object.defineProperty(menuItem,'checked',{enumerable:true,get:function get(){return menuItem.getAttribute('aria-checked')==='true';},set:function set(check){if(check){Array.from(menuItem.parentNode.children).filter(function(node){return matches$1(node,'[role="menuitemradio"]');}).forEach(function(node){return node.setAttribute('aria-checked','false');});}
menuItem.setAttribute('aria-checked',check?'true':'false');}});this.listeners.bind(menuItem,'click keyup',function(event){if(is$1.keyboardEvent(event)&&event.which!==32){return;}
event.preventDefault();event.stopPropagation();menuItem.checked=true;switch(type){case'language':_this3.currentTrack=Number(value);break;case'quality':_this3.quality=value;break;case'speed':_this3.speed=parseFloat(value);break;default:break;}
controls.showMenuPanel.call(_this3,'home',is$1.keyboardEvent(event));},type,false);controls.bindMenuItemShortcuts.call(this,menuItem,type);list.appendChild(menuItem);},formatTime:function formatTime$1(){var time=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var inverted=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!is$1.number(time)){return time;}
var forceHours=getHours(this.duration)>0;return formatTime(time,forceHours,inverted);},updateTimeDisplay:function updateTimeDisplay(){var target=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;var time=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var inverted=arguments.length>2&&arguments[2]!==undefined?arguments[2]:false;if(!is$1.element(target)||!is$1.number(time)){return;}
target.innerText=controls.formatTime(time,inverted);},updateVolume:function updateVolume(){if(!this.supported.ui){return;}
if(is$1.element(this.elements.inputs.volume)){controls.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume);}
if(is$1.element(this.elements.buttons.mute)){this.elements.buttons.mute.pressed=this.muted||this.volume===0;}},setRange:function setRange(target){var value=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(!is$1.element(target)){return;}
target.value=value;controls.updateRangeFill.call(this,target);},updateProgress:function updateProgress(event){var _this4=this;if(!this.supported.ui||!is$1.event(event)){return;}
var value=0;var setProgress=function setProgress(target,input){var val=is$1.number(input)?input:0;var progress=is$1.element(target)?target:_this4.elements.display.buffer;if(is$1.element(progress)){progress.value=val;var label=progress.getElementsByTagName('span')[0];if(is$1.element(label)){label.childNodes[0].nodeValue=val;}}};if(event){switch(event.type){case'timeupdate':case'seeking':case'seeked':value=getPercentage(this.currentTime,this.duration);if(event.type==='timeupdate'){controls.setRange.call(this,this.elements.inputs.seek,value);}
break;case'playing':case'progress':setProgress(this.elements.display.buffer,this.buffered*100);break;default:break;}}},updateRangeFill:function updateRangeFill(target){var range=is$1.event(target)?target.target:target;if(!is$1.element(range)||range.getAttribute('type')!=='range'){return;}
if(matches$1(range,this.config.selectors.inputs.seek)){range.setAttribute('aria-valuenow',this.currentTime);var currentTime=controls.formatTime(this.currentTime);var duration=controls.formatTime(this.duration);var format=i18n.get('seekLabel',this.config);range.setAttribute('aria-valuetext',format.replace('{currentTime}',currentTime).replace('{duration}',duration));}else if(matches$1(range,this.config.selectors.inputs.volume)){var percent=range.value*100;range.setAttribute('aria-valuenow',percent);range.setAttribute('aria-valuetext',"".concat(percent.toFixed(1),"%"));}else{range.setAttribute('aria-valuenow',range.value);}
if(!browser.isWebkit){return;}
range.style.setProperty('--value',"".concat(range.value/range.max*100,"%"));},updateSeekTooltip:function updateSeekTooltip(event){var _this5=this;if(!this.config.tooltips.seek||!is$1.element(this.elements.inputs.seek)||!is$1.element(this.elements.display.seekTooltip)||this.duration===0){return;}
var visible="".concat(this.config.classNames.tooltip,"--visible");var toggle=function toggle(show){return toggleClass(_this5.elements.display.seekTooltip,visible,show);};if(this.touch){toggle(false);return;}
var percent=0;var clientRect=this.elements.progress.getBoundingClientRect();if(is$1.event(event)){percent=100/clientRect.width*(event.pageX-clientRect.left);}else if(hasClass(this.elements.display.seekTooltip,visible)){percent=parseFloat(this.elements.display.seekTooltip.style.left,10);}else{return;}
if(percent<0){percent=0;}else if(percent>100){percent=100;}
controls.updateTimeDisplay.call(this,this.elements.display.seekTooltip,this.duration/100*percent);this.elements.display.seekTooltip.style.left="".concat(percent,"%");if(is$1.event(event)&&['mouseenter','mouseleave'].includes(event.type)){toggle(event.type==='mouseenter');}},timeUpdate:function timeUpdate(event){var invert=!is$1.element(this.elements.display.duration)&&this.config.invertTime;controls.updateTimeDisplay.call(this,this.elements.display.currentTime,invert?this.duration-this.currentTime:this.currentTime,invert);if(event&&event.type==='timeupdate'&&this.media.seeking){return;}
controls.updateProgress.call(this,event);},durationUpdate:function durationUpdate(){if(!this.supported.ui||!this.config.invertTime&&this.currentTime){return;}
if(this.duration>=Math.pow(2,32)){toggleHidden(this.elements.display.currentTime,true);toggleHidden(this.elements.progress,true);return;}
if(is$1.element(this.elements.inputs.seek)){this.elements.inputs.seek.setAttribute('aria-valuemax',this.duration);}
var hasDuration=is$1.element(this.elements.display.duration);if(!hasDuration&&this.config.displayDuration&&this.paused){controls.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration);}
if(hasDuration){controls.updateTimeDisplay.call(this,this.elements.display.duration,this.duration);}
controls.updateSeekTooltip.call(this);},toggleMenuButton:function toggleMenuButton(setting,toggle){toggleHidden(this.elements.settings.buttons[setting],!toggle);},updateSetting:function updateSetting(setting,container,input){var pane=this.elements.settings.panels[setting];var value=null;var list=container;if(setting==='captions'){value=this.currentTrack;}else{value=!is$1.empty(input)?input:this[setting];if(is$1.empty(value)){value=this.config[setting].default;}
if(!is$1.empty(this.options[setting])&&!this.options[setting].includes(value)){this.debug.warn("Unsupported value of '".concat(value,"' for ").concat(setting));return;}
if(!this.config[setting].options.includes(value)){this.debug.warn("Disabled value of '".concat(value,"' for ").concat(setting));return;}}
if(!is$1.element(list)){list=pane&&pane.querySelector('[role="menu"]');}
if(!is$1.element(list)){return;}
var label=this.elements.settings.buttons[setting].querySelector(".".concat(this.config.classNames.menu.value));label.innerHTML=controls.getLabel.call(this,setting,value);var target=list&&list.querySelector("[value=\"".concat(value,"\"]"));if(is$1.element(target)){target.checked=true;}},getLabel:function getLabel(setting,value){switch(setting){case'speed':return value===1?i18n.get('normal',this.config):"".concat(value,"&times;");case'quality':if(is$1.number(value)){var label=i18n.get("qualityLabel.".concat(value),this.config);if(!label.length){return"".concat(value,"p");}
return label;}
return toTitleCase(value);case'captions':return captions.getLabel.call(this);default:return null;}},setQualityMenu:function setQualityMenu(options){var _this6=this;if(!is$1.element(this.elements.settings.panels.quality)){return;}
var type='quality';var list=this.elements.settings.panels.quality.querySelector('[role="menu"]');if(is$1.array(options)){this.options.quality=dedupe(options).filter(function(quality){return _this6.config.quality.options.includes(quality);});}
var toggle=!is$1.empty(this.options.quality)&&this.options.quality.length>1;controls.toggleMenuButton.call(this,type,toggle);emptyElement(list);controls.checkMenu.call(this);if(!toggle){return;}
var getBadge=function getBadge(quality){var label=i18n.get("qualityBadge.".concat(quality),_this6.config);if(!label.length){return null;}
return controls.createBadge.call(_this6,label);};this.options.quality.sort(function(a,b){var sorting=_this6.config.quality.options;return sorting.indexOf(a)>sorting.indexOf(b)?1:-1;}).forEach(function(quality){controls.createMenuItem.call(_this6,{value:quality,list:list,type:type,title:controls.getLabel.call(_this6,'quality',quality),badge:getBadge(quality)});});controls.updateSetting.call(this,type,list);},setCaptionsMenu:function setCaptionsMenu(){var _this7=this;if(!is$1.element(this.elements.settings.panels.captions)){return;}
var type='captions';var list=this.elements.settings.panels.captions.querySelector('[role="menu"]');var tracks=captions.getTracks.call(this);var toggle=Boolean(tracks.length);controls.toggleMenuButton.call(this,type,toggle);emptyElement(list);controls.checkMenu.call(this);if(!toggle){return;}
var options=tracks.map(function(track,value){return{value:value,checked:_this7.captions.toggled&&_this7.currentTrack===value,title:captions.getLabel.call(_this7,track),badge:track.language&&controls.createBadge.call(_this7,track.language.toUpperCase()),list:list,type:'language'};});options.unshift({value:-1,checked:!this.captions.toggled,title:i18n.get('disabled',this.config),list:list,type:'language'});options.forEach(controls.createMenuItem.bind(this));controls.updateSetting.call(this,type,list);},setSpeedMenu:function setSpeedMenu(options){var _this8=this;if(!is$1.element(this.elements.settings.panels.speed)){return;}
var type='speed';var list=this.elements.settings.panels.speed.querySelector('[role="menu"]');if(is$1.array(options)){this.options.speed=options;}else if(this.isHTML5||this.isVimeo){this.options.speed=[0.5,0.75,1,1.25,1.5,1.75,2];}
this.options.speed=this.options.speed.filter(function(speed){return _this8.config.speed.options.includes(speed);});var toggle=!is$1.empty(this.options.speed)&&this.options.speed.length>1;controls.toggleMenuButton.call(this,type,toggle);emptyElement(list);controls.checkMenu.call(this);if(!toggle){return;}
this.options.speed.forEach(function(speed){controls.createMenuItem.call(_this8,{value:speed,list:list,type:type,title:controls.getLabel.call(_this8,'speed',speed)});});controls.updateSetting.call(this,type,list);},checkMenu:function checkMenu(){var buttons=this.elements.settings.buttons;var visible=!is$1.empty(buttons)&&Object.values(buttons).some(function(button){return!button.hidden;});toggleHidden(this.elements.settings.menu,!visible);},focusFirstMenuItem:function focusFirstMenuItem(pane){var tabFocus=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(this.elements.settings.popup.hidden){return;}
var target=pane;if(!is$1.element(target)){target=Object.values(this.elements.settings.panels).find(function(p){return!p.hidden;});}
var firstItem=target.querySelector('[role^="menuitem"]');setFocus.call(this,firstItem,tabFocus);},toggleMenu:function toggleMenu(input){var popup=this.elements.settings.popup;var button=this.elements.buttons.settings;if(!is$1.element(popup)||!is$1.element(button)){return;}
var hidden=popup.hidden;var show=hidden;if(is$1.boolean(input)){show=input;}else if(is$1.keyboardEvent(input)&&input.which===27){show=false;}else if(is$1.event(input)){var target=is$1.function(input.composedPath)?input.composedPath()[0]:input.target;var isMenuItem=popup.contains(target);if(isMenuItem||!isMenuItem&&input.target!==button&&show){return;}}
button.setAttribute('aria-expanded',show);toggleHidden(popup,!show);toggleClass(this.elements.container,this.config.classNames.menu.open,show);if(show&&is$1.keyboardEvent(input)){controls.focusFirstMenuItem.call(this,null,true);}else if(!show&&!hidden){setFocus.call(this,button,is$1.keyboardEvent(input));}},getMenuSize:function getMenuSize(tab){var clone=tab.cloneNode(true);clone.style.position='absolute';clone.style.opacity=0;clone.removeAttribute('hidden');tab.parentNode.appendChild(clone);var width=clone.scrollWidth;var height=clone.scrollHeight;removeElement(clone);return{width:width,height:height};},showMenuPanel:function showMenuPanel(){var _this9=this;var type=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'';var tabFocus=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var target=this.elements.container.querySelector("#plyr-settings-".concat(this.id,"-").concat(type));if(!is$1.element(target)){return;}
var container=target.parentNode;var current=Array.from(container.children).find(function(node){return!node.hidden;});if(support.transitions&&!support.reducedMotion){container.style.width="".concat(current.scrollWidth,"px");container.style.height="".concat(current.scrollHeight,"px");var size=controls.getMenuSize.call(this,target);var restore=function restore(event){if(event.target!==container||!['width','height'].includes(event.propertyName)){return;}
container.style.width='';container.style.height='';off.call(_this9,container,transitionEndEvent,restore);};on.call(this,container,transitionEndEvent,restore);container.style.width="".concat(size.width,"px");container.style.height="".concat(size.height,"px");}
toggleHidden(current,true);toggleHidden(target,false);controls.focusFirstMenuItem.call(this,target,tabFocus);},setDownloadUrl:function setDownloadUrl(){var button=this.elements.buttons.download;if(!is$1.element(button)){return;}
button.setAttribute('href',this.download);},create:function create(data){var _this10=this;var bindMenuItemShortcuts=controls.bindMenuItemShortcuts,createButton=controls.createButton,createProgress=controls.createProgress,createRange=controls.createRange,createTime=controls.createTime,setQualityMenu=controls.setQualityMenu,setSpeedMenu=controls.setSpeedMenu,showMenuPanel=controls.showMenuPanel;this.elements.controls=null;if(this.config.controls.includes('play-large')){this.elements.container.appendChild(createButton.call(this,'play-large'));}
var container=createElement('div',getAttributesFromSelector(this.config.selectors.controls.wrapper));this.elements.controls=container;var defaultAttributes={class:'plyr__controls__item'};dedupe(this.config.controls).forEach(function(control){if(control==='restart'){container.appendChild(createButton.call(_this10,'restart',defaultAttributes));}
if(control==='rewind'){container.appendChild(createButton.call(_this10,'rewind',defaultAttributes));}
if(control==='play'){container.appendChild(createButton.call(_this10,'play',defaultAttributes));}
if(control==='fast-forward'){container.appendChild(createButton.call(_this10,'fast-forward',defaultAttributes));}
if(control==='progress'){var progressContainer=createElement('div',{class:"".concat(defaultAttributes.class," plyr__progress__container")});var progress=createElement('div',getAttributesFromSelector(_this10.config.selectors.progress));progress.appendChild(createRange.call(_this10,'seek',{id:"plyr-seek-".concat(data.id)}));progress.appendChild(createProgress.call(_this10,'buffer'));if(_this10.config.tooltips.seek){var tooltip=createElement('span',{class:_this10.config.classNames.tooltip},'00:00');progress.appendChild(tooltip);_this10.elements.display.seekTooltip=tooltip;}
_this10.elements.progress=progress;progressContainer.appendChild(_this10.elements.progress);container.appendChild(progressContainer);}
if(control==='current-time'){container.appendChild(createTime.call(_this10,'currentTime',defaultAttributes));}
if(control==='duration'){container.appendChild(createTime.call(_this10,'duration',defaultAttributes));}
if(control==='mute'||control==='volume'){var volume=_this10.elements.volume;if(!is$1.element(volume)||!container.contains(volume)){volume=createElement('div',extend({},defaultAttributes,{class:"".concat(defaultAttributes.class," plyr__volume").trim()}));_this10.elements.volume=volume;container.appendChild(volume);}
if(control==='mute'){volume.appendChild(createButton.call(_this10,'mute'));}
if(control==='volume'){var attributes={max:1,step:0.05,value:_this10.config.volume};volume.appendChild(createRange.call(_this10,'volume',extend(attributes,{id:"plyr-volume-".concat(data.id)})));}}
if(control==='captions'){container.appendChild(createButton.call(_this10,'captions',defaultAttributes));}
if(control==='settings'&&!is$1.empty(_this10.config.settings)){var wrapper=createElement('div',extend({},defaultAttributes,{class:"".concat(defaultAttributes.class," plyr__menu").trim(),hidden:''}));wrapper.appendChild(createButton.call(_this10,'settings',{'aria-haspopup':true,'aria-controls':"plyr-settings-".concat(data.id),'aria-expanded':false}));var popup=createElement('div',{class:'plyr__menu__container',id:"plyr-settings-".concat(data.id),hidden:''});var inner=createElement('div');var home=createElement('div',{id:"plyr-settings-".concat(data.id,"-home")});var menu=createElement('div',{role:'menu'});home.appendChild(menu);inner.appendChild(home);_this10.elements.settings.panels.home=home;_this10.config.settings.forEach(function(type){var menuItem=createElement('button',extend(getAttributesFromSelector(_this10.config.selectors.buttons.settings),{type:'button',class:"".concat(_this10.config.classNames.control," ").concat(_this10.config.classNames.control,"--forward"),role:'menuitem','aria-haspopup':true,hidden:''}));bindMenuItemShortcuts.call(_this10,menuItem,type);on(menuItem,'click',function(){showMenuPanel.call(_this10,type,false);});var flex=createElement('span',null,i18n.get(type,_this10.config));var value=createElement('span',{class:_this10.config.classNames.menu.value});value.innerHTML=data[type];flex.appendChild(value);menuItem.appendChild(flex);menu.appendChild(menuItem);var pane=createElement('div',{id:"plyr-settings-".concat(data.id,"-").concat(type),hidden:''});var backButton=createElement('button',{type:'button',class:"".concat(_this10.config.classNames.control," ").concat(_this10.config.classNames.control,"--back")});backButton.appendChild(createElement('span',{'aria-hidden':true},i18n.get(type,_this10.config)));backButton.appendChild(createElement('span',{class:_this10.config.classNames.hidden},i18n.get('menuBack',_this10.config)));on(pane,'keydown',function(event){if(event.which!==37){return;}
event.preventDefault();event.stopPropagation();showMenuPanel.call(_this10,'home',true);},false);on(backButton,'click',function(){showMenuPanel.call(_this10,'home',false);});pane.appendChild(backButton);pane.appendChild(createElement('div',{role:'menu'}));inner.appendChild(pane);_this10.elements.settings.buttons[type]=menuItem;_this10.elements.settings.panels[type]=pane;});popup.appendChild(inner);wrapper.appendChild(popup);container.appendChild(wrapper);_this10.elements.settings.popup=popup;_this10.elements.settings.menu=wrapper;}
if(control==='pip'&&support.pip){container.appendChild(createButton.call(_this10,'pip',defaultAttributes));}
if(control==='airplay'&&support.airplay){container.appendChild(createButton.call(_this10,'airplay',defaultAttributes));}
if(control==='download'){var _attributes=extend({},defaultAttributes,{element:'a',href:_this10.download,target:'_blank'});var download=_this10.config.urls.download;if(!is$1.url(download)&&_this10.isEmbed){extend(_attributes,{icon:"logo-".concat(_this10.provider),label:_this10.provider});}
container.appendChild(createButton.call(_this10,'download',_attributes));}
if(control==='fullscreen'){container.appendChild(createButton.call(_this10,'fullscreen',defaultAttributes));}});if(this.isHTML5){setQualityMenu.call(this,html5.getQualityOptions.call(this));}
setSpeedMenu.call(this);return container;},inject:function inject(){var _this11=this;if(this.config.loadSprite){var icon=controls.getIconUrl.call(this);if(icon.cors){loadSprite(icon.url,'sprite-plyr');}}
this.id=Math.floor(Math.random()*10000);var container=null;this.elements.controls=null;var props={id:this.id,seektime:this.config.seekTime,title:this.config.title};var update=true;if(is$1.function(this.config.controls)){this.config.controls=this.config.controls.call(this,props);}
if(!this.config.controls){this.config.controls=[];}
if(is$1.element(this.config.controls)||is$1.string(this.config.controls)){container=this.config.controls;}else{container=controls.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:captions.getLabel.call(this)});update=false;}
var replace=function replace(input){var result=input;Object.entries(props).forEach(function(_ref2){var _ref3=_slicedToArray(_ref2,2),key=_ref3[0],value=_ref3[1];result=replaceAll(result,"{".concat(key,"}"),value);});return result;};if(update){if(is$1.string(this.config.controls)){container=replace(container);}else if(is$1.element(container)){container.innerHTML=replace(container.innerHTML);}}
var target;if(is$1.string(this.config.selectors.controls.container)){target=document.querySelector(this.config.selectors.controls.container);}
if(!is$1.element(target)){target=this.elements.container;}
var insertMethod=is$1.element(container)?'insertAdjacentElement':'insertAdjacentHTML';target[insertMethod]('afterbegin',container);if(!is$1.element(this.elements.controls)){controls.findElements.call(this);}
if(!is$1.empty(this.elements.buttons)){var addProperty=function addProperty(button){var className=_this11.config.classNames.controlPressed;Object.defineProperty(button,'pressed',{enumerable:true,get:function get(){return hasClass(button,className);},set:function set(){var pressed=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;toggleClass(button,className,pressed);}});};Object.values(this.elements.buttons).filter(Boolean).forEach(function(button){if(is$1.array(button)||is$1.nodeList(button)){Array.from(button).filter(Boolean).forEach(addProperty);}else{addProperty(button);}});}
if(browser.isEdge){repaint(target);}
if(this.config.tooltips.controls){var _this$config=this.config,classNames=_this$config.classNames,selectors=_this$config.selectors;var selector="".concat(selectors.controls.wrapper," ").concat(selectors.labels," .").concat(classNames.hidden);var labels=getElements.call(this,selector);Array.from(labels).forEach(function(label){toggleClass(label,_this11.config.classNames.hidden,false);toggleClass(label,_this11.config.classNames.tooltip,true);});}}};function parseUrl(input){var safe=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var url=input;if(safe){var parser=document.createElement('a');parser.href=url;url=parser.href;}
try{return new URL(url);}catch(e){return null;}}
function buildUrlParams(input){var params=new URLSearchParams();if(is$1.object(input)){Object.entries(input).forEach(function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];params.set(key,value);});}
return params;}
var captions={setup:function setup(){if(!this.supported.ui){return;}
if(!this.isVideo||this.isYouTube||this.isHTML5&&!support.textTracks){if(is$1.array(this.config.controls)&&this.config.controls.includes('settings')&&this.config.settings.includes('captions')){controls.setCaptionsMenu.call(this);}
return;}
if(!is$1.element(this.elements.captions)){this.elements.captions=createElement('div',getAttributesFromSelector(this.config.selectors.captions));insertAfter(this.elements.captions,this.elements.wrapper);}
if(browser.isIE&&window.URL){var elements=this.media.querySelectorAll('track');Array.from(elements).forEach(function(track){var src=track.getAttribute('src');var url=parseUrl(src);if(url!==null&&url.hostname!==window.location.href.hostname&&['http:','https:'].includes(url.protocol)){fetch(src,'blob').then(function(blob){track.setAttribute('src',window.URL.createObjectURL(blob));}).catch(function(){removeElement(track);});}});}
var browserLanguages=navigator.languages||[navigator.language||navigator.userLanguage||'en'];var languages=dedupe(browserLanguages.map(function(language){return language.split('-')[0];}));var language=(this.storage.get('language')||this.config.captions.language||'auto').toLowerCase();if(language==='auto'){var _languages=_slicedToArray(languages,1);language=_languages[0];}
var active=this.storage.get('captions');if(!is$1.boolean(active)){active=this.config.captions.active;}
Object.assign(this.captions,{toggled:false,active:active,language:language,languages:languages});if(this.isHTML5){var trackEvents=this.config.captions.update?'addtrack removetrack':'removetrack';on.call(this,this.media.textTracks,trackEvents,captions.update.bind(this));}
setTimeout(captions.update.bind(this),0);},update:function update(){var _this=this;var tracks=captions.getTracks.call(this,true);var _this$captions=this.captions,active=_this$captions.active,language=_this$captions.language,meta=_this$captions.meta,currentTrackNode=_this$captions.currentTrackNode;var languageExists=Boolean(tracks.find(function(track){return track.language===language;}));if(this.isHTML5&&this.isVideo){tracks.filter(function(track){return!meta.get(track);}).forEach(function(track){_this.debug.log('Track added',track);meta.set(track,{default:track.mode==='showing'});track.mode='hidden';on.call(_this,track,'cuechange',function(){return captions.updateCues.call(_this);});});}
if(languageExists&&this.language!==language||!tracks.includes(currentTrackNode)){captions.setLanguage.call(this,language);captions.toggle.call(this,active&&languageExists);}
toggleClass(this.elements.container,this.config.classNames.captions.enabled,!is$1.empty(tracks));if((this.config.controls||[]).includes('settings')&&this.config.settings.includes('captions')){controls.setCaptionsMenu.call(this);}},toggle:function toggle(input){var passive=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(!this.supported.ui){return;}
var toggled=this.captions.toggled;var activeClass=this.config.classNames.captions.active;var active=is$1.nullOrUndefined(input)?!toggled:input;if(active!==toggled){if(!passive){this.captions.active=active;this.storage.set({captions:active});}
if(!this.language&&active&&!passive){var tracks=captions.getTracks.call(this);var track=captions.findTrack.call(this,[this.captions.language].concat(_toConsumableArray(this.captions.languages)),true);this.captions.language=track.language;captions.set.call(this,tracks.indexOf(track));return;}
if(this.elements.buttons.captions){this.elements.buttons.captions.pressed=active;}
toggleClass(this.elements.container,activeClass,active);this.captions.toggled=active;controls.updateSetting.call(this,'captions');triggerEvent.call(this,this.media,active?'captionsenabled':'captionsdisabled');}},set:function set(index){var passive=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var tracks=captions.getTracks.call(this);if(index===-1){captions.toggle.call(this,false,passive);return;}
if(!is$1.number(index)){this.debug.warn('Invalid caption argument',index);return;}
if(!(index in tracks)){this.debug.warn('Track not found',index);return;}
if(this.captions.currentTrack!==index){this.captions.currentTrack=index;var track=tracks[index];var _ref=track||{},language=_ref.language;this.captions.currentTrackNode=track;controls.updateSetting.call(this,'captions');if(!passive){this.captions.language=language;this.storage.set({language:language});}
if(this.isVimeo){this.embed.enableTextTrack(language);}
triggerEvent.call(this,this.media,'languagechange');}
captions.toggle.call(this,true,passive);if(this.isHTML5&&this.isVideo){captions.updateCues.call(this);}},setLanguage:function setLanguage(input){var passive=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(!is$1.string(input)){this.debug.warn('Invalid language argument',input);return;}
var language=input.toLowerCase();this.captions.language=language;var tracks=captions.getTracks.call(this);var track=captions.findTrack.call(this,[language]);captions.set.call(this,tracks.indexOf(track),passive);},getTracks:function getTracks(){var _this2=this;var update=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var tracks=Array.from((this.media||{}).textTracks||[]);return tracks.filter(function(track){return!_this2.isHTML5||update||_this2.captions.meta.has(track);}).filter(function(track){return['captions','subtitles'].includes(track.kind);});},findTrack:function findTrack(languages){var _this3=this;var force=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var tracks=captions.getTracks.call(this);var sortIsDefault=function sortIsDefault(track){return Number((_this3.captions.meta.get(track)||{}).default);};var sorted=Array.from(tracks).sort(function(a,b){return sortIsDefault(b)-sortIsDefault(a);});var track;languages.every(function(language){track=sorted.find(function(t){return t.language===language;});return!track;});return track||(force?sorted[0]:undefined);},getCurrentTrack:function getCurrentTrack(){return captions.getTracks.call(this)[this.currentTrack];},getLabel:function getLabel(track){var currentTrack=track;if(!is$1.track(currentTrack)&&support.textTracks&&this.captions.toggled){currentTrack=captions.getCurrentTrack.call(this);}
if(is$1.track(currentTrack)){if(!is$1.empty(currentTrack.label)){return currentTrack.label;}
if(!is$1.empty(currentTrack.language)){return track.language.toUpperCase();}
return i18n.get('enabled',this.config);}
return i18n.get('disabled',this.config);},updateCues:function updateCues(input){if(!this.supported.ui){return;}
if(!is$1.element(this.elements.captions)){this.debug.warn('No captions element to render to');return;}
if(!is$1.nullOrUndefined(input)&&!Array.isArray(input)){this.debug.warn('updateCues: Invalid input',input);return;}
var cues=input;if(!cues){var track=captions.getCurrentTrack.call(this);cues=Array.from((track||{}).activeCues||[]).map(function(cue){return cue.getCueAsHTML();}).map(getHTML);}
var content=cues.map(function(cueText){return cueText.trim();}).join('\n');var changed=content!==this.elements.captions.innerHTML;if(changed){emptyElement(this.elements.captions);var caption=createElement('span',getAttributesFromSelector(this.config.selectors.caption));caption.innerHTML=content;this.elements.captions.appendChild(caption);triggerEvent.call(this,this.media,'cuechange');}}};var defaults$1={enabled:true,title:'',debug:false,autoplay:false,autopause:true,playsinline:true,seekTime:10,volume:1,muted:false,duration:null,displayDuration:true,invertTime:true,toggleInvert:true,ratio:null,clickToPlay:true,hideControls:true,resetOnEnd:false,disableContextMenu:true,loadSprite:true,iconPrefix:'plyr',iconUrl:'https://cdn.plyr.io/3.5.6/plyr.svg',blankVideo:'https://cdn.plyr.io/static/blank.mp4',quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240]},loop:{active:false},speed:{selected:1,options:[0.5,0.75,1,1.25,1.5,1.75,2]},keyboard:{focused:true,global:false},tooltips:{controls:false,seek:true},captions:{active:false,language:'auto',update:false},fullscreen:{enabled:true,fallback:true,iosNative:false},storage:{enabled:true,key:'plyr'},controls:['play-large','play','progress','current-time','mute','volume','captions','settings','pip','airplay','fullscreen'],settings:['captions','quality','speed'],i18n:{restart:'Restart',rewind:'Rewind {seektime}s',play:'Play',pause:'Pause',fastForward:'Forward {seektime}s',seek:'Seek',seekLabel:'{currentTime} of {duration}',played:'Played',buffered:'Buffered',currentTime:'Current time',duration:'Duration',volume:'Volume',mute:'Mute',unmute:'Unmute',enableCaptions:'Enable captions',disableCaptions:'Disable captions',download:'Download',enterFullscreen:'Enter fullscreen',exitFullscreen:'Exit fullscreen',frameTitle:'Player for {title}',captions:'Captions',settings:'Settings',menuBack:'Go back to previous menu',speed:'Speed',normal:'Normal',quality:'Quality',loop:'Loop',start:'Start',end:'End',all:'All',reset:'Reset',disabled:'Disabled',enabled:'Enabled',advertisement:'Ad',qualityBadge:{2160:'4K',1440:'HD',1080:'HD',720:'HD',576:'SD',480:'SD'}},urls:{download:null,vimeo:{sdk:'https://player.vimeo.com/api/player.js',iframe:'https://player.vimeo.com/video/{0}?{1}',api:'https://vimeo.com/api/v2/video/{0}.json'},youtube:{sdk:'https://www.youtube.com/iframe_api',api:'https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}'},googleIMA:{sdk:'https://imasdk.googleapis.com/js/sdkloader/ima3.js'}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:['ended','progress','stalled','playing','waiting','canplay','canplaythrough','loadstart','loadeddata','loadedmetadata','timeupdate','volumechange','play','pause','error','seeking','seeked','emptied','ratechange','cuechange','download','enterfullscreen','exitfullscreen','captionsenabled','captionsdisabled','languagechange','controlshidden','controlsshown','ready','statechange','qualitychange','adsloaded','adscontentpause','adscontentresume','adstarted','adsmidpoint','adscomplete','adsallcomplete','adsimpression','adsclick'],selectors:{editable:'input, textarea, select, [contenteditable]',container:'.plyr',controls:{container:null,wrapper:'.plyr__controls'},labels:'[data-plyr]',buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:'.plyr__time--current',duration:'.plyr__time--duration',buffer:'.plyr__progress__buffer',loop:'.plyr__progress__loop',volume:'.plyr__volume--display'},progress:'.plyr__progress',captions:'.plyr__captions',caption:'.plyr__caption'},classNames:{type:'plyr--{0}',provider:'plyr--{0}',video:'plyr__video-wrapper',embed:'plyr__video-embed',videoFixedRatio:'plyr__video-wrapper--fixed-ratio',embedContainer:'plyr__video-embed__container',poster:'plyr__poster',posterEnabled:'plyr__poster-enabled',ads:'plyr__ads',control:'plyr__control',controlPressed:'plyr__control--pressed',playing:'plyr--playing',paused:'plyr--paused',stopped:'plyr--stopped',loading:'plyr--loading',hover:'plyr--hover',tooltip:'plyr__tooltip',cues:'plyr__cues',hidden:'plyr__sr-only',hideControls:'plyr--hide-controls',isIos:'plyr--is-ios',isTouch:'plyr--is-touch',uiSupported:'plyr--full-ui',noTransition:'plyr--no-transition',display:{time:'plyr__time'},menu:{value:'plyr__menu__value',badge:'plyr__badge',open:'plyr--menu-open'},captions:{enabled:'plyr--captions-enabled',active:'plyr--captions-active'},fullscreen:{enabled:'plyr--fullscreen-enabled',fallback:'plyr--fullscreen-fallback'},pip:{supported:'plyr--pip-supported',active:'plyr--pip-active'},airplay:{supported:'plyr--airplay-supported',active:'plyr--airplay-active'},tabFocus:'plyr__tab-focus',previewThumbnails:{thumbContainer:'plyr__preview-thumb',thumbContainerShown:'plyr__preview-thumb--is-shown',imageContainer:'plyr__preview-thumb__image-container',timeContainer:'plyr__preview-thumb__time-container',scrubbingContainer:'plyr__preview-scrubbing',scrubbingContainerShown:'plyr__preview-scrubbing--is-shown'}},attributes:{embed:{provider:'data-plyr-provider',id:'data-plyr-embed-id'}},ads:{enabled:false,publisherId:'',tagUrl:''},previewThumbnails:{enabled:false,src:''},vimeo:{byline:false,portrait:false,title:false,speed:true,transparent:false},youtube:{noCookie:false,rel:0,showinfo:0,iv_load_policy:3,modestbranding:1}};var pip={active:'picture-in-picture',inactive:'inline'};var providers={html5:'html5',youtube:'youtube',vimeo:'vimeo'};var types={audio:'audio',video:'video'};function getProviderByUrl(url){if(/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(url)){return providers.youtube;}
if(/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(url)){return providers.vimeo;}
return null;}
var noop=function noop(){};var Console=function(){function Console(){var enabled=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;_classCallCheck(this,Console);this.enabled=window.console&&enabled;if(this.enabled){this.log('Debugging enabled');}}
_createClass(Console,[{key:"log",get:function get(){return this.enabled?Function.prototype.bind.call(console.log,console):noop;}},{key:"warn",get:function get(){return this.enabled?Function.prototype.bind.call(console.warn,console):noop;}},{key:"error",get:function get(){return this.enabled?Function.prototype.bind.call(console.error,console):noop;}}]);return Console;}();function onChange(){if(!this.enabled){return;}
var button=this.player.elements.buttons.fullscreen;if(is$1.element(button)){button.pressed=this.active;}
triggerEvent.call(this.player,this.target,this.active?'enterfullscreen':'exitfullscreen',true);if(!browser.isIos){trapFocus.call(this.player,this.target,this.active);}}
function toggleFallback(){var toggle=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(toggle){this.scrollPosition={x:window.scrollX||0,y:window.scrollY||0};}else{window.scrollTo(this.scrollPosition.x,this.scrollPosition.y);}
document.body.style.overflow=toggle?'hidden':'';toggleClass(this.target,this.player.config.classNames.fullscreen.fallback,toggle);if(browser.isIos){var viewport=document.head.querySelector('meta[name="viewport"]');var property='viewport-fit=cover';if(!viewport){viewport=document.createElement('meta');viewport.setAttribute('name','viewport');}
var hasProperty=is$1.string(viewport.content)&&viewport.content.includes(property);if(toggle){this.cleanupViewport=!hasProperty;if(!hasProperty){viewport.content+=",".concat(property);}}else if(this.cleanupViewport){viewport.content=viewport.content.split(',').filter(function(part){return part.trim()!==property;}).join(',');}}
onChange.call(this);}
var Fullscreen=function(){function Fullscreen(player){var _this=this;_classCallCheck(this,Fullscreen);this.player=player;this.prefix=Fullscreen.prefix;this.property=Fullscreen.property;this.scrollPosition={x:0,y:0};this.forceFallback=player.config.fullscreen.fallback==='force';on.call(this.player,document,this.prefix==='ms'?'MSFullscreenChange':"".concat(this.prefix,"fullscreenchange"),function(){onChange.call(_this);});on.call(this.player,this.player.elements.container,'dblclick',function(event){if(is$1.element(_this.player.elements.controls)&&_this.player.elements.controls.contains(event.target)){return;}
_this.toggle();});this.update();}
_createClass(Fullscreen,[{key:"update",value:function update(){if(this.enabled){var mode;if(this.forceFallback){mode='Fallback (forced)';}else if(Fullscreen.native){mode='Native';}else{mode='Fallback';}
this.player.debug.log("".concat(mode," fullscreen enabled"));}else{this.player.debug.log('Fullscreen not supported and fallback disabled');}
toggleClass(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.enabled);}},{key:"enter",value:function enter(){if(!this.enabled){return;}
if(browser.isIos&&this.player.config.fullscreen.iosNative){this.target.webkitEnterFullscreen();}else if(!Fullscreen.native||this.forceFallback){toggleFallback.call(this,true);}else if(!this.prefix){this.target.requestFullscreen();}else if(!is$1.empty(this.prefix)){this.target["".concat(this.prefix,"Request").concat(this.property)]();}}},{key:"exit",value:function exit(){if(!this.enabled){return;}
if(browser.isIos&&this.player.config.fullscreen.iosNative){this.target.webkitExitFullscreen();this.player.play();}else if(!Fullscreen.native||this.forceFallback){toggleFallback.call(this,false);}else if(!this.prefix){(document.cancelFullScreen||document.exitFullscreen).call(document);}else if(!is$1.empty(this.prefix)){var action=this.prefix==='moz'?'Cancel':'Exit';document["".concat(this.prefix).concat(action).concat(this.property)]();}}},{key:"toggle",value:function toggle(){if(!this.active){this.enter();}else{this.exit();}}},{key:"usingNative",get:function get(){return Fullscreen.native&&!this.forceFallback;}},{key:"enabled",get:function get(){return(Fullscreen.native||this.player.config.fullscreen.fallback)&&this.player.config.fullscreen.enabled&&this.player.supported.ui&&this.player.isVideo;}},{key:"active",get:function get(){if(!this.enabled){return false;}
if(!Fullscreen.native||this.forceFallback){return hasClass(this.target,this.player.config.classNames.fullscreen.fallback);}
var element=!this.prefix?document.fullscreenElement:document["".concat(this.prefix).concat(this.property,"Element")];return element===this.target;}},{key:"target",get:function get(){return browser.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.container;}}],[{key:"native",get:function get(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled);}},{key:"prefix",get:function get(){if(is$1.function(document.exitFullscreen)){return'';}
var value='';var prefixes=['webkit','moz','ms'];prefixes.some(function(pre){if(is$1.function(document["".concat(pre,"ExitFullscreen")])||is$1.function(document["".concat(pre,"CancelFullScreen")])){value=pre;return true;}
return false;});return value;}},{key:"property",get:function get(){return this.prefix==='moz'?'FullScreen':'Fullscreen';}}]);return Fullscreen;}();var mathSign=Math.sign||function sign(x){return(x=+x)==0||x!=x?x:x<0?-1:1;};_export({target:'Math',stat:true},{sign:mathSign});function loadImage(src){var minWidth=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;return new Promise(function(resolve,reject){var image=new Image();var handler=function handler(){delete image.onload;delete image.onerror;(image.naturalWidth>=minWidth?resolve:reject)(image);};Object.assign(image,{onload:handler,onerror:handler,src:src});});}
var ui={addStyleHook:function addStyleHook(){toggleClass(this.elements.container,this.config.selectors.container.replace('.',''),true);toggleClass(this.elements.container,this.config.classNames.uiSupported,this.supported.ui);},toggleNativeControls:function toggleNativeControls(){var toggle=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(toggle&&this.isHTML5){this.media.setAttribute('controls','');}else{this.media.removeAttribute('controls');}},build:function build(){var _this=this;this.listeners.media();if(!this.supported.ui){this.debug.warn("Basic support only for ".concat(this.provider," ").concat(this.type));ui.toggleNativeControls.call(this,true);return;}
if(!is$1.element(this.elements.controls)){controls.inject.call(this);this.listeners.controls();}
ui.toggleNativeControls.call(this);if(this.isHTML5){captions.setup.call(this);}
this.volume=null;this.muted=null;this.loop=null;this.quality=null;this.speed=null;controls.updateVolume.call(this);controls.timeUpdate.call(this);ui.checkPlaying.call(this);toggleClass(this.elements.container,this.config.classNames.pip.supported,support.pip&&this.isHTML5&&this.isVideo);toggleClass(this.elements.container,this.config.classNames.airplay.supported,support.airplay&&this.isHTML5);toggleClass(this.elements.container,this.config.classNames.isIos,browser.isIos);toggleClass(this.elements.container,this.config.classNames.isTouch,this.touch);this.ready=true;setTimeout(function(){triggerEvent.call(_this,_this.media,'ready');},0);ui.setTitle.call(this);if(this.poster){ui.setPoster.call(this,this.poster,false).catch(function(){});}
if(this.config.duration){controls.durationUpdate.call(this);}},setTitle:function setTitle(){var label=i18n.get('play',this.config);if(is$1.string(this.config.title)&&!is$1.empty(this.config.title)){label+=", ".concat(this.config.title);}
Array.from(this.elements.buttons.play||[]).forEach(function(button){button.setAttribute('aria-label',label);});if(this.isEmbed){var iframe=getElement.call(this,'iframe');if(!is$1.element(iframe)){return;}
var title=!is$1.empty(this.config.title)?this.config.title:'video';var format=i18n.get('frameTitle',this.config);iframe.setAttribute('title',format.replace('{title}',title));}},togglePoster:function togglePoster(enable){toggleClass(this.elements.container,this.config.classNames.posterEnabled,enable);},setPoster:function setPoster(poster){var _this2=this;var passive=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;if(passive&&this.poster){return Promise.reject(new Error('Poster already set'));}
this.media.setAttribute('poster',poster);return ready.call(this).then(function(){return loadImage(poster);}).catch(function(err){if(poster===_this2.poster){ui.togglePoster.call(_this2,false);}
throw err;}).then(function(){if(poster!==_this2.poster){throw new Error('setPoster cancelled by later call to setPoster');}}).then(function(){Object.assign(_this2.elements.poster.style,{backgroundImage:"url('".concat(poster,"')"),backgroundSize:''});ui.togglePoster.call(_this2,true);return poster;});},checkPlaying:function checkPlaying(event){var _this3=this;toggleClass(this.elements.container,this.config.classNames.playing,this.playing);toggleClass(this.elements.container,this.config.classNames.paused,this.paused);toggleClass(this.elements.container,this.config.classNames.stopped,this.stopped);Array.from(this.elements.buttons.play||[]).forEach(function(target){Object.assign(target,{pressed:_this3.playing});});if(is$1.event(event)&&event.type==='timeupdate'){return;}
ui.toggleControls.call(this);},checkLoading:function checkLoading(event){var _this4=this;this.loading=['stalled','waiting'].includes(event.type);clearTimeout(this.timers.loading);this.timers.loading=setTimeout(function(){toggleClass(_this4.elements.container,_this4.config.classNames.loading,_this4.loading);ui.toggleControls.call(_this4);},this.loading?250:0);},toggleControls:function toggleControls(force){var controlsElement=this.elements.controls;if(controlsElement&&this.config.hideControls){var recentTouchSeek=this.touch&&this.lastSeekTime+2000>Date.now();this.toggleControls(Boolean(force||this.loading||this.paused||controlsElement.pressed||controlsElement.hover||recentTouchSeek));}}};var Listeners=function(){function Listeners(player){_classCallCheck(this,Listeners);this.player=player;this.lastKey=null;this.focusTimer=null;this.lastKeyDown=null;this.handleKey=this.handleKey.bind(this);this.toggleMenu=this.toggleMenu.bind(this);this.setTabFocus=this.setTabFocus.bind(this);this.firstTouch=this.firstTouch.bind(this);}
_createClass(Listeners,[{key:"handleKey",value:function handleKey(event){var player=this.player;var elements=player.elements;var code=event.keyCode?event.keyCode:event.which;var pressed=event.type==='keydown';var repeat=pressed&&code===this.lastKey;if(event.altKey||event.ctrlKey||event.metaKey||event.shiftKey){return;}
if(!is$1.number(code)){return;}
var seekByKey=function seekByKey(){player.currentTime=player.duration/10*(code-48);};if(pressed){var focused=document.activeElement;if(is$1.element(focused)){var editable=player.config.selectors.editable;var seek=elements.inputs.seek;if(focused!==seek&&matches$1(focused,editable)){return;}
if(event.which===32&&matches$1(focused,'button, [role^="menuitem"]')){return;}}
var preventDefault=[32,37,38,39,40,48,49,50,51,52,53,54,56,57,67,70,73,75,76,77,79];if(preventDefault.includes(code)){event.preventDefault();event.stopPropagation();}
switch(code){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:if(!repeat){seekByKey();}
break;case 32:case 75:if(!repeat){player.togglePlay();}
break;case 38:player.increaseVolume(0.1);break;case 40:player.decreaseVolume(0.1);break;case 77:if(!repeat){player.muted=!player.muted;}
break;case 39:player.forward();break;case 37:player.rewind();break;case 70:player.fullscreen.toggle();break;case 67:if(!repeat){player.toggleCaptions();}
break;case 76:player.loop=!player.loop;break;default:break;}
if(code===27&&!player.fullscreen.usingNative&&player.fullscreen.active){player.fullscreen.toggle();}
this.lastKey=code;}else{this.lastKey=null;}}},{key:"toggleMenu",value:function toggleMenu(event){controls.toggleMenu.call(this.player,event);}},{key:"firstTouch",value:function firstTouch(){var player=this.player;var elements=player.elements;player.touch=true;toggleClass(elements.container,player.config.classNames.isTouch,true);}},{key:"setTabFocus",value:function setTabFocus(event){var player=this.player;var elements=player.elements;clearTimeout(this.focusTimer);if(event.type==='keydown'&&event.which!==9){return;}
if(event.type==='keydown'){this.lastKeyDown=event.timeStamp;}
var removeCurrent=function removeCurrent(){var className=player.config.classNames.tabFocus;var current=getElements.call(player,".".concat(className));toggleClass(current,className,false);};var wasKeyDown=event.timeStamp-this.lastKeyDown<=20;if(event.type==='focus'&&!wasKeyDown){return;}
removeCurrent();this.focusTimer=setTimeout(function(){var focused=document.activeElement;if(!elements.container.contains(focused)){return;}
toggleClass(document.activeElement,player.config.classNames.tabFocus,true);},10);}},{key:"global",value:function global(){var toggle=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;var player=this.player;if(player.config.keyboard.global){toggleListener.call(player,window,'keydown keyup',this.handleKey,toggle,false);}
toggleListener.call(player,document.body,'click',this.toggleMenu,toggle);once.call(player,document.body,'touchstart',this.firstTouch);toggleListener.call(player,document.body,'keydown focus blur',this.setTabFocus,toggle,false,true);}},{key:"container",value:function container(){var player=this.player;var config=player.config,elements=player.elements,timers=player.timers;if(!config.keyboard.global&&config.keyboard.focused){on.call(player,elements.container,'keydown keyup',this.handleKey,false);}
on.call(player,elements.container,'mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen',function(event){var controlsElement=elements.controls;if(controlsElement&&event.type==='enterfullscreen'){controlsElement.pressed=false;controlsElement.hover=false;}
var show=['touchstart','touchmove','mousemove'].includes(event.type);var delay=0;if(show){ui.toggleControls.call(player,true);delay=player.touch?3000:2000;}
clearTimeout(timers.controls);timers.controls=setTimeout(function(){return ui.toggleControls.call(player,false);},delay);});var setGutter=function setGutter(ratio,padding,toggle){if(!player.isVimeo){return;}
var target=player.elements.wrapper.firstChild;var _ratio=_slicedToArray(ratio,2),y=_ratio[1];var _getAspectRatio$call=getAspectRatio.call(player),_getAspectRatio$call2=_slicedToArray(_getAspectRatio$call,2),videoX=_getAspectRatio$call2[0],videoY=_getAspectRatio$call2[1];target.style.maxWidth=toggle?"".concat(y/videoY*videoX,"px"):null;target.style.margin=toggle?'0 auto':null;};var setPlayerSize=function setPlayerSize(measure){if(!measure){return setAspectRatio.call(player);}
var rect=elements.container.getBoundingClientRect();var width=rect.width,height=rect.height;return setAspectRatio.call(player,"".concat(width,":").concat(height));};var resized=function resized(){clearTimeout(timers.resized);timers.resized=setTimeout(setPlayerSize,50);};on.call(player,elements.container,'enterfullscreen exitfullscreen',function(event){var _player$fullscreen=player.fullscreen,target=_player$fullscreen.target,usingNative=_player$fullscreen.usingNative;if(target!==elements.container){return;}
if(!player.isEmbed&&is$1.empty(player.config.ratio)){return;}
var isEnter=event.type==='enterfullscreen';var _setPlayerSize=setPlayerSize(isEnter),padding=_setPlayerSize.padding,ratio=_setPlayerSize.ratio;setGutter(ratio,padding,isEnter);if(!usingNative){if(isEnter){on.call(player,window,'resize',resized);}else{off.call(player,window,'resize',resized);}}});}},{key:"media",value:function media(){var _this=this;var player=this.player;var elements=player.elements;on.call(player,player.media,'timeupdate seeking seeked',function(event){return controls.timeUpdate.call(player,event);});on.call(player,player.media,'durationchange loadeddata loadedmetadata',function(event){return controls.durationUpdate.call(player,event);});on.call(player,player.media,'canplay loadeddata',function(){toggleHidden(elements.volume,!player.hasAudio);toggleHidden(elements.buttons.mute,!player.hasAudio);});on.call(player,player.media,'ended',function(){if(player.isHTML5&&player.isVideo&&player.config.resetOnEnd){player.restart();}});on.call(player,player.media,'progress playing seeking seeked',function(event){return controls.updateProgress.call(player,event);});on.call(player,player.media,'volumechange',function(event){return controls.updateVolume.call(player,event);});on.call(player,player.media,'playing play pause ended emptied timeupdate',function(event){return ui.checkPlaying.call(player,event);});on.call(player,player.media,'waiting canplay seeked playing',function(event){return ui.checkLoading.call(player,event);});if(player.supported.ui&&player.config.clickToPlay&&!player.isAudio){var wrapper=getElement.call(player,".".concat(player.config.classNames.video));if(!is$1.element(wrapper)){return;}
on.call(player,elements.container,'click',function(event){var targets=[elements.container,wrapper];if(!targets.includes(event.target)&&!wrapper.contains(event.target)){return;}
if(player.touch&&player.config.hideControls){return;}
if(player.ended){_this.proxy(event,player.restart,'restart');_this.proxy(event,player.play,'play');}else{_this.proxy(event,player.togglePlay,'play');}});}
if(player.supported.ui&&player.config.disableContextMenu){on.call(player,elements.wrapper,'contextmenu',function(event){event.preventDefault();},false);}
on.call(player,player.media,'volumechange',function(){player.storage.set({volume:player.volume,muted:player.muted});});on.call(player,player.media,'ratechange',function(){controls.updateSetting.call(player,'speed');player.storage.set({speed:player.speed});});on.call(player,player.media,'qualitychange',function(event){controls.updateSetting.call(player,'quality',null,event.detail.quality);});on.call(player,player.media,'ready qualitychange',function(){controls.setDownloadUrl.call(player);});var proxyEvents=player.config.events.concat(['keyup','keydown']).join(' ');on.call(player,player.media,proxyEvents,function(event){var _event$detail=event.detail,detail=_event$detail===void 0?{}:_event$detail;if(event.type==='error'){detail=player.media.error;}
triggerEvent.call(player,elements.container,event.type,true,detail);});}},{key:"proxy",value:function proxy(event,defaultHandler,customHandlerKey){var player=this.player;var customHandler=player.config.listeners[customHandlerKey];var hasCustomHandler=is$1.function(customHandler);var returned=true;if(hasCustomHandler){returned=customHandler.call(player,event);}
if(returned&&is$1.function(defaultHandler)){defaultHandler.call(player,event);}}},{key:"bind",value:function bind(element,type,defaultHandler,customHandlerKey){var _this2=this;var passive=arguments.length>4&&arguments[4]!==undefined?arguments[4]:true;var player=this.player;var customHandler=player.config.listeners[customHandlerKey];var hasCustomHandler=is$1.function(customHandler);on.call(player,element,type,function(event){return _this2.proxy(event,defaultHandler,customHandlerKey);},passive&&!hasCustomHandler);}},{key:"controls",value:function controls$1(){var _this3=this;var player=this.player;var elements=player.elements;var inputEvent=browser.isIE?'change':'input';if(elements.buttons.play){Array.from(elements.buttons.play).forEach(function(button){_this3.bind(button,'click',player.togglePlay,'play');});}
this.bind(elements.buttons.restart,'click',player.restart,'restart');this.bind(elements.buttons.rewind,'click',player.rewind,'rewind');this.bind(elements.buttons.fastForward,'click',player.forward,'fastForward');this.bind(elements.buttons.mute,'click',function(){player.muted=!player.muted;},'mute');this.bind(elements.buttons.captions,'click',function(){return player.toggleCaptions();});this.bind(elements.buttons.download,'click',function(){triggerEvent.call(player,player.media,'download');},'download');this.bind(elements.buttons.fullscreen,'click',function(){player.fullscreen.toggle();},'fullscreen');this.bind(elements.buttons.pip,'click',function(){player.pip='toggle';},'pip');this.bind(elements.buttons.airplay,'click',player.airplay,'airplay');this.bind(elements.buttons.settings,'click',function(event){event.stopPropagation();controls.toggleMenu.call(player,event);});this.bind(elements.buttons.settings,'keyup',function(event){var code=event.which;if(![13,32].includes(code)){return;}
if(code===13){controls.focusFirstMenuItem.call(player,null,true);return;}
event.preventDefault();event.stopPropagation();controls.toggleMenu.call(player,event);},null,false);this.bind(elements.settings.menu,'keydown',function(event){if(event.which===27){controls.toggleMenu.call(player,event);}});this.bind(elements.inputs.seek,'mousedown mousemove',function(event){var rect=elements.progress.getBoundingClientRect();var percent=100/rect.width*(event.pageX-rect.left);event.currentTarget.setAttribute('seek-value',percent);});this.bind(elements.inputs.seek,'mousedown mouseup keydown keyup touchstart touchend',function(event){var seek=event.currentTarget;var code=event.keyCode?event.keyCode:event.which;var attribute='play-on-seeked';if(is$1.keyboardEvent(event)&&code!==39&&code!==37){return;}
player.lastSeekTime=Date.now();var play=seek.hasAttribute(attribute);var done=['mouseup','touchend','keyup'].includes(event.type);if(play&&done){seek.removeAttribute(attribute);player.play();}else if(!done&&player.playing){seek.setAttribute(attribute,'');player.pause();}});if(browser.isIos){var inputs=getElements.call(player,'input[type="range"]');Array.from(inputs).forEach(function(input){return _this3.bind(input,inputEvent,function(event){return repaint(event.target);});});}
this.bind(elements.inputs.seek,inputEvent,function(event){var seek=event.currentTarget;var seekTo=seek.getAttribute('seek-value');if(is$1.empty(seekTo)){seekTo=seek.value;}
seek.removeAttribute('seek-value');player.currentTime=seekTo/seek.max*player.duration;},'seek');this.bind(elements.progress,'mouseenter mouseleave mousemove',function(event){return controls.updateSeekTooltip.call(player,event);});this.bind(elements.progress,'mousemove touchmove',function(event){var previewThumbnails=player.previewThumbnails;if(previewThumbnails&&previewThumbnails.loaded){previewThumbnails.startMove(event);}});this.bind(elements.progress,'mouseleave click',function(){var previewThumbnails=player.previewThumbnails;if(previewThumbnails&&previewThumbnails.loaded){previewThumbnails.endMove(false,true);}});this.bind(elements.progress,'mousedown touchstart',function(event){var previewThumbnails=player.previewThumbnails;if(previewThumbnails&&previewThumbnails.loaded){previewThumbnails.startScrubbing(event);}});this.bind(elements.progress,'mouseup touchend',function(event){var previewThumbnails=player.previewThumbnails;if(previewThumbnails&&previewThumbnails.loaded){previewThumbnails.endScrubbing(event);}});if(browser.isWebkit){Array.from(getElements.call(player,'input[type="range"]')).forEach(function(element){_this3.bind(element,'input',function(event){return controls.updateRangeFill.call(player,event.target);});});}
if(player.config.toggleInvert&&!is$1.element(elements.display.duration)){this.bind(elements.display.currentTime,'click',function(){if(player.currentTime===0){return;}
player.config.invertTime=!player.config.invertTime;controls.timeUpdate.call(player);});}
this.bind(elements.inputs.volume,inputEvent,function(event){player.volume=event.target.value;},'volume');this.bind(elements.controls,'mouseenter mouseleave',function(event){elements.controls.hover=!player.touch&&event.type==='mouseenter';});this.bind(elements.controls,'mousedown mouseup touchstart touchend touchcancel',function(event){elements.controls.pressed=['mousedown','touchstart'].includes(event.type);});this.bind(elements.controls,'focusin',function(){var config=player.config,timers=player.timers;toggleClass(elements.controls,config.classNames.noTransition,true);ui.toggleControls.call(player,true);setTimeout(function(){toggleClass(elements.controls,config.classNames.noTransition,false);},0);var delay=_this3.touch?3000:4000;clearTimeout(timers.controls);timers.controls=setTimeout(function(){return ui.toggleControls.call(player,false);},delay);});this.bind(elements.inputs.volume,'wheel',function(event){var inverted=event.webkitDirectionInvertedFromDevice;var _map=[event.deltaX,-event.deltaY].map(function(value){return inverted?-value:value;}),_map2=_slicedToArray(_map,2),x=_map2[0],y=_map2[1];var direction=Math.sign(Math.abs(x)>Math.abs(y)?x:y);player.increaseVolume(direction/50);var volume=player.media.volume;if(direction===1&&volume<1||direction===-1&&volume>0){event.preventDefault();}},'volume',false);}}]);return Listeners;}();var defineProperty$5=objectDefineProperty.f;var FunctionPrototype=Function.prototype;var FunctionPrototypeToString=FunctionPrototype.toString;var nameRE=/^\s*function ([^ (]*)/;var NAME='name';if(descriptors&&!(NAME in FunctionPrototype)){defineProperty$5(FunctionPrototype,NAME,{configurable:true,get:function(){try{return FunctionPrototypeToString.call(this).match(nameRE)[1];}catch(error){return'';}}});}
var max$3=Math.max;var min$5=Math.min;var MAX_SAFE_INTEGER$1=0x1FFFFFFFFFFFFF;var MAXIMUM_ALLOWED_LENGTH_EXCEEDED='Maximum allowed length exceeded';_export({target:'Array',proto:true,forced:!arrayMethodHasSpeciesSupport('splice')},{splice:function splice(start,deleteCount){var O=toObject(this);var len=toLength(O.length);var actualStart=toAbsoluteIndex(start,len);var argumentsLength=arguments.length;var insertCount,actualDeleteCount,A,k,from,to;if(argumentsLength===0){insertCount=actualDeleteCount=0;}else if(argumentsLength===1){insertCount=0;actualDeleteCount=len-actualStart;}else{insertCount=argumentsLength-2;actualDeleteCount=min$5(max$3(toInteger(deleteCount),0),len-actualStart);}
if(len+insertCount-actualDeleteCount>MAX_SAFE_INTEGER$1){throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);}
A=arraySpeciesCreate(O,actualDeleteCount);for(k=0;k<actualDeleteCount;k++){from=actualStart+k;if(from in O)createProperty(A,k,O[from]);}
A.length=actualDeleteCount;if(insertCount<actualDeleteCount){for(k=actualStart;k<len-actualDeleteCount;k++){from=k+actualDeleteCount;to=k+insertCount;if(from in O)O[to]=O[from];else delete O[to];}
for(k=len;k>len-actualDeleteCount+insertCount;k--)delete O[k-1];}else if(insertCount>actualDeleteCount){for(k=len-actualDeleteCount;k>actualStart;k--){from=k+actualDeleteCount-1;to=k+insertCount-1;if(from in O)O[to]=O[from];else delete O[to];}}
for(k=0;k<insertCount;k++){O[k+actualStart]=arguments[k+2];}
O.length=len-actualDeleteCount+insertCount;return A;}});var loadjs_umd=createCommonjsModule(function(module,exports){(function(root,factory){{module.exports=factory();}})(commonjsGlobal,function(){var devnull=function devnull(){},bundleIdCache={},bundleResultCache={},bundleCallbackQueue={};function subscribe(bundleIds,callbackFn){bundleIds=bundleIds.push?bundleIds:[bundleIds];var depsNotFound=[],i=bundleIds.length,numWaiting=i,fn,bundleId,r,q;fn=function fn(bundleId,pathsNotFound){if(pathsNotFound.length)depsNotFound.push(bundleId);numWaiting--;if(!numWaiting)callbackFn(depsNotFound);};while(i--){bundleId=bundleIds[i];r=bundleResultCache[bundleId];if(r){fn(bundleId,r);continue;}
q=bundleCallbackQueue[bundleId]=bundleCallbackQueue[bundleId]||[];q.push(fn);}}
function publish(bundleId,pathsNotFound){if(!bundleId)return;var q=bundleCallbackQueue[bundleId];bundleResultCache[bundleId]=pathsNotFound;if(!q)return;while(q.length){q[0](bundleId,pathsNotFound);q.splice(0,1);}}
function executeCallbacks(args,depsNotFound){if(args.call)args={success:args};if(depsNotFound.length)(args.error||devnull)(depsNotFound);else(args.success||devnull)(args);}
function loadFile(path,callbackFn,args,numTries){var doc=document,async=args.async,maxTries=(args.numRetries||0)+1,beforeCallbackFn=args.before||devnull,pathStripped=path.replace(/^(css|img)!/,''),isLegacyIECss,e;numTries=numTries||0;if(/(^css!|\.css$)/.test(path)){e=doc.createElement('link');e.rel='stylesheet';e.href=pathStripped;isLegacyIECss='hideFocus'in e;if(isLegacyIECss&&e.relList){isLegacyIECss=0;e.rel='preload';e.as='style';}}else if(/(^img!|\.(png|gif|jpg|svg)$)/.test(path)){e=doc.createElement('img');e.src=pathStripped;}else{e=doc.createElement('script');e.src=path;e.async=async===undefined?true:async;}
e.onload=e.onerror=e.onbeforeload=function(ev){var result=ev.type[0];if(isLegacyIECss){try{if(!e.sheet.cssText.length)result='e';}catch(x){if(x.code!=18)result='e';}}
if(result=='e'){numTries+=1;if(numTries<maxTries){return loadFile(path,callbackFn,args,numTries);}}else if(e.rel=='preload'&&e.as=='style'){return e.rel='stylesheet';}
callbackFn(path,result,ev.defaultPrevented);};if(beforeCallbackFn(path,e)!==false)doc.head.appendChild(e);}
function loadFiles(paths,callbackFn,args){paths=paths.push?paths:[paths];var numWaiting=paths.length,x=numWaiting,pathsNotFound=[],fn,i;fn=function fn(path,result,defaultPrevented){if(result=='e')pathsNotFound.push(path);if(result=='b'){if(defaultPrevented)pathsNotFound.push(path);else return;}
numWaiting--;if(!numWaiting)callbackFn(pathsNotFound);};for(i=0;i<x;i++){loadFile(paths[i],fn,args);}}
function loadjs(paths,arg1,arg2){var bundleId,args;if(arg1&&arg1.trim)bundleId=arg1;args=(bundleId?arg2:arg1)||{};if(bundleId){if(bundleId in bundleIdCache){throw"LoadJS";}else{bundleIdCache[bundleId]=true;}}
function loadFn(resolve,reject){loadFiles(paths,function(pathsNotFound){executeCallbacks(args,pathsNotFound);if(resolve){executeCallbacks({success:resolve,error:reject},pathsNotFound);}
publish(bundleId,pathsNotFound);},args);}
if(args.returnPromise)return new Promise(loadFn);else loadFn();}
loadjs.ready=function ready(deps,args){subscribe(deps,function(depsNotFound){executeCallbacks(args,depsNotFound);});return loadjs;};loadjs.done=function done(bundleId){publish(bundleId,[]);};loadjs.reset=function reset(){bundleIdCache={};bundleResultCache={};bundleCallbackQueue={};};loadjs.isDefined=function isDefined(bundleId){return bundleId in bundleIdCache;};return loadjs;});});function loadScript(url){return new Promise(function(resolve,reject){loadjs_umd(url,{success:resolve,error:reject});});}
function parseId(url){if(is$1.empty(url)){return null;}
if(is$1.number(Number(url))){return url;}
var regex=/^.*(vimeo.com\/|video\/)(\d+).*/;return url.match(regex)?RegExp.$2:url;}
function assurePlaybackState(play){if(play&&!this.embed.hasPlayed){this.embed.hasPlayed=true;}
if(this.media.paused===play){this.media.paused=!play;triggerEvent.call(this,this.media,play?'play':'pause');}}
var vimeo={setup:function setup(){var _this=this;toggleClass(this.elements.wrapper,this.config.classNames.embed,true);setAspectRatio.call(this);if(!is$1.object(window.Vimeo)){loadScript(this.config.urls.vimeo.sdk).then(function(){vimeo.ready.call(_this);}).catch(function(error){_this.debug.warn('Vimeo SDK (player.js) failed to load',error);});}else{vimeo.ready.call(this);}},ready:function ready(){var _this2=this;var player=this;var config=player.config.vimeo;var params=buildUrlParams(extend({},{loop:player.config.loop.active,autoplay:player.autoplay,muted:player.muted,gesture:'media',playsinline:!this.config.fullscreen.iosNative},config));var source=player.media.getAttribute('src');if(is$1.empty(source)){source=player.media.getAttribute(player.config.attributes.embed.id);}
var id=parseId(source);var iframe=createElement('iframe');var src=format(player.config.urls.vimeo.iframe,id,params);iframe.setAttribute('src',src);iframe.setAttribute('allowfullscreen','');iframe.setAttribute('allowtransparency','');iframe.setAttribute('allow','autoplay');var poster=player.poster;var wrapper=createElement('div',{poster:poster,class:player.config.classNames.embedContainer});wrapper.appendChild(iframe);player.media=replaceElement(wrapper,player.media);fetch(format(player.config.urls.vimeo.api,id),'json').then(function(response){if(is$1.empty(response)){return;}
var url=new URL(response[0].thumbnail_large);url.pathname="".concat(url.pathname.split('_')[0],".jpg");ui.setPoster.call(player,url.href).catch(function(){});});player.embed=new window.Vimeo.Player(iframe,{autopause:player.config.autopause,muted:player.muted});player.media.paused=true;player.media.currentTime=0;if(player.supported.ui){player.embed.disableTextTrack();}
player.media.play=function(){assurePlaybackState.call(player,true);return player.embed.play();};player.media.pause=function(){assurePlaybackState.call(player,false);return player.embed.pause();};player.media.stop=function(){player.pause();player.currentTime=0;};var currentTime=player.media.currentTime;Object.defineProperty(player.media,'currentTime',{get:function get(){return currentTime;},set:function set(time){var embed=player.embed,media=player.media,paused=player.paused,volume=player.volume;var restorePause=paused&&!embed.hasPlayed;media.seeking=true;triggerEvent.call(player,media,'seeking');Promise.resolve(restorePause&&embed.setVolume(0)).then(function(){return embed.setCurrentTime(time);}).then(function(){return restorePause&&embed.pause();}).then(function(){return restorePause&&embed.setVolume(volume);}).catch(function(){});}});var speed=player.config.speed.selected;Object.defineProperty(player.media,'playbackRate',{get:function get(){return speed;},set:function set(input){player.embed.setPlaybackRate(input).then(function(){speed=input;triggerEvent.call(player,player.media,'ratechange');}).catch(function(error){if(error.name==='Error'){controls.setSpeedMenu.call(player,[]);}});}});var volume=player.config.volume;Object.defineProperty(player.media,'volume',{get:function get(){return volume;},set:function set(input){player.embed.setVolume(input).then(function(){volume=input;triggerEvent.call(player,player.media,'volumechange');});}});var muted=player.config.muted;Object.defineProperty(player.media,'muted',{get:function get(){return muted;},set:function set(input){var toggle=is$1.boolean(input)?input:false;player.embed.setVolume(toggle?0:player.config.volume).then(function(){muted=toggle;triggerEvent.call(player,player.media,'volumechange');});}});var loop=player.config.loop;Object.defineProperty(player.media,'loop',{get:function get(){return loop;},set:function set(input){var toggle=is$1.boolean(input)?input:player.config.loop.active;player.embed.setLoop(toggle).then(function(){loop=toggle;});}});var currentSrc;player.embed.getVideoUrl().then(function(value){currentSrc=value;controls.setDownloadUrl.call(player);}).catch(function(error){_this2.debug.warn(error);});Object.defineProperty(player.media,'currentSrc',{get:function get(){return currentSrc;}});Object.defineProperty(player.media,'ended',{get:function get(){return player.currentTime===player.duration;}});Promise.all([player.embed.getVideoWidth(),player.embed.getVideoHeight()]).then(function(dimensions){var _dimensions=_slicedToArray(dimensions,2),width=_dimensions[0],height=_dimensions[1];player.embed.ratio=[width,height];setAspectRatio.call(_this2);});player.embed.setAutopause(player.config.autopause).then(function(state){player.config.autopause=state;});player.embed.getVideoTitle().then(function(title){player.config.title=title;ui.setTitle.call(_this2);});player.embed.getCurrentTime().then(function(value){currentTime=value;triggerEvent.call(player,player.media,'timeupdate');});player.embed.getDuration().then(function(value){player.media.duration=value;triggerEvent.call(player,player.media,'durationchange');});player.embed.getTextTracks().then(function(tracks){player.media.textTracks=tracks;captions.setup.call(player);});player.embed.on('cuechange',function(_ref){var _ref$cues=_ref.cues,cues=_ref$cues===void 0?[]:_ref$cues;var strippedCues=cues.map(function(cue){return stripHTML(cue.text);});captions.updateCues.call(player,strippedCues);});player.embed.on('loaded',function(){player.embed.getPaused().then(function(paused){assurePlaybackState.call(player,!paused);if(!paused){triggerEvent.call(player,player.media,'playing');}});if(is$1.element(player.embed.element)&&player.supported.ui){var frame=player.embed.element;frame.setAttribute('tabindex',-1);}});player.embed.on('play',function(){assurePlaybackState.call(player,true);triggerEvent.call(player,player.media,'playing');});player.embed.on('pause',function(){assurePlaybackState.call(player,false);});player.embed.on('timeupdate',function(data){player.media.seeking=false;currentTime=data.seconds;triggerEvent.call(player,player.media,'timeupdate');});player.embed.on('progress',function(data){player.media.buffered=data.percent;triggerEvent.call(player,player.media,'progress');if(parseInt(data.percent,10)===1){triggerEvent.call(player,player.media,'canplaythrough');}
player.embed.getDuration().then(function(value){if(value!==player.media.duration){player.media.duration=value;triggerEvent.call(player,player.media,'durationchange');}});});player.embed.on('seeked',function(){player.media.seeking=false;triggerEvent.call(player,player.media,'seeked');});player.embed.on('ended',function(){player.media.paused=true;triggerEvent.call(player,player.media,'ended');});player.embed.on('error',function(detail){player.media.error=detail;triggerEvent.call(player,player.media,'error');});setTimeout(function(){return ui.build.call(player);},0);}};function parseId$1(url){if(is$1.empty(url)){return null;}
var regex=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/;return url.match(regex)?RegExp.$2:url;}
function assurePlaybackState$1(play){if(play&&!this.embed.hasPlayed){this.embed.hasPlayed=true;}
if(this.media.paused===play){this.media.paused=!play;triggerEvent.call(this,this.media,play?'play':'pause');}}
function getHost$1(config){if(config.noCookie){return'https://www.youtube-nocookie.com';}
if(window.location.protocol==='http:'){return'http://www.youtube.com';}
return undefined;}
var youtube={setup:function setup(){var _this=this;toggleClass(this.elements.wrapper,this.config.classNames.embed,true);if(is$1.object(window.YT)&&is$1.function(window.YT.Player)){youtube.ready.call(this);}else{var callback=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){if(is$1.function(callback)){callback();}
youtube.ready.call(_this);};loadScript(this.config.urls.youtube.sdk).catch(function(error){_this.debug.warn('YouTube API failed to load',error);});}},getTitle:function getTitle(videoId){var _this2=this;var url=format(this.config.urls.youtube.api,videoId);fetch(url).then(function(data){if(is$1.object(data)){var title=data.title,height=data.height,width=data.width;_this2.config.title=title;ui.setTitle.call(_this2);_this2.embed.ratio=[width,height];}
setAspectRatio.call(_this2);}).catch(function(){setAspectRatio.call(_this2);});},ready:function ready(){var player=this;var currentId=player.media&&player.media.getAttribute('id');if(!is$1.empty(currentId)&&currentId.startsWith('youtube-')){return;}
var source=player.media.getAttribute('src');if(is$1.empty(source)){source=player.media.getAttribute(this.config.attributes.embed.id);}
var videoId=parseId$1(source);var id=generateId(player.provider);var poster=player.poster;var container=createElement('div',{id:id,poster:poster});player.media=replaceElement(container,player.media);var posterSrc=function posterSrc(s){return"https://i.ytimg.com/vi/".concat(videoId,"/").concat(s,"default.jpg");};loadImage(posterSrc('maxres'),121).catch(function(){return loadImage(posterSrc('sd'),121);}).catch(function(){return loadImage(posterSrc('hq'));}).then(function(image){return ui.setPoster.call(player,image.src);}).then(function(src){if(!src.includes('maxres')){player.elements.poster.style.backgroundSize='cover';}}).catch(function(){});var config=player.config.youtube;player.embed=new window.YT.Player(id,{videoId:videoId,host:getHost$1(config),playerVars:extend({},{autoplay:player.config.autoplay?1:0,hl:player.config.hl,controls:player.supported.ui?0:1,disablekb:1,playsinline:!player.config.fullscreen.iosNative?1:0,cc_load_policy:player.captions.active?1:0,cc_lang_pref:player.config.captions.language,widget_referrer:window?window.location.href:null},config),events:{onError:function onError(event){if(!player.media.error){var code=event.data;var message={2:'The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.',5:'The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.',100:'The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.',101:'The owner of the requested video does not allow it to be played in embedded players.',150:'The owner of the requested video does not allow it to be played in embedded players.'}[code]||'An unknown error occured';player.media.error={code:code,message:message};triggerEvent.call(player,player.media,'error');}},onPlaybackRateChange:function onPlaybackRateChange(event){var instance=event.target;player.media.playbackRate=instance.getPlaybackRate();triggerEvent.call(player,player.media,'ratechange');},onReady:function onReady(event){if(is$1.function(player.media.play)){return;}
var instance=event.target;youtube.getTitle.call(player,videoId);player.media.play=function(){assurePlaybackState$1.call(player,true);instance.playVideo();};player.media.pause=function(){assurePlaybackState$1.call(player,false);instance.pauseVideo();};player.media.stop=function(){instance.stopVideo();};player.media.duration=instance.getDuration();player.media.paused=true;player.media.currentTime=0;Object.defineProperty(player.media,'currentTime',{get:function get(){return Number(instance.getCurrentTime());},set:function set(time){if(player.paused&&!player.embed.hasPlayed){player.embed.mute();}
player.media.seeking=true;triggerEvent.call(player,player.media,'seeking');instance.seekTo(time);}});Object.defineProperty(player.media,'playbackRate',{get:function get(){return instance.getPlaybackRate();},set:function set(input){instance.setPlaybackRate(input);}});var volume=player.config.volume;Object.defineProperty(player.media,'volume',{get:function get(){return volume;},set:function set(input){volume=input;instance.setVolume(volume*100);triggerEvent.call(player,player.media,'volumechange');}});var muted=player.config.muted;Object.defineProperty(player.media,'muted',{get:function get(){return muted;},set:function set(input){var toggle=is$1.boolean(input)?input:muted;muted=toggle;instance[toggle?'mute':'unMute']();triggerEvent.call(player,player.media,'volumechange');}});Object.defineProperty(player.media,'currentSrc',{get:function get(){return instance.getVideoUrl();}});Object.defineProperty(player.media,'ended',{get:function get(){return player.currentTime===player.duration;}});player.options.speed=instance.getAvailablePlaybackRates();if(player.supported.ui){player.media.setAttribute('tabindex',-1);}
triggerEvent.call(player,player.media,'timeupdate');triggerEvent.call(player,player.media,'durationchange');clearInterval(player.timers.buffering);player.timers.buffering=setInterval(function(){player.media.buffered=instance.getVideoLoadedFraction();if(player.media.lastBuffered===null||player.media.lastBuffered<player.media.buffered){triggerEvent.call(player,player.media,'progress');}
player.media.lastBuffered=player.media.buffered;if(player.media.buffered===1){clearInterval(player.timers.buffering);triggerEvent.call(player,player.media,'canplaythrough');}},200);setTimeout(function(){return ui.build.call(player);},50);},onStateChange:function onStateChange(event){var instance=event.target;clearInterval(player.timers.playing);var seeked=player.media.seeking&&[1,2].includes(event.data);if(seeked){player.media.seeking=false;triggerEvent.call(player,player.media,'seeked');}
switch(event.data){case-1:triggerEvent.call(player,player.media,'timeupdate');player.media.buffered=instance.getVideoLoadedFraction();triggerEvent.call(player,player.media,'progress');break;case 0:assurePlaybackState$1.call(player,false);if(player.media.loop){instance.stopVideo();instance.playVideo();}else{triggerEvent.call(player,player.media,'ended');}
break;case 1:if(!player.config.autoplay&&player.media.paused&&!player.embed.hasPlayed){player.media.pause();}else{assurePlaybackState$1.call(player,true);triggerEvent.call(player,player.media,'playing');player.timers.playing=setInterval(function(){triggerEvent.call(player,player.media,'timeupdate');},50);if(player.media.duration!==instance.getDuration()){player.media.duration=instance.getDuration();triggerEvent.call(player,player.media,'durationchange');}}
break;case 2:if(!player.muted){player.embed.unMute();}
assurePlaybackState$1.call(player,false);break;default:break;}
triggerEvent.call(player,player.elements.container,'statechange',false,{code:event.data});}}});}};var media={setup:function setup(){if(!this.media){this.debug.warn('No media element found!');return;}
toggleClass(this.elements.container,this.config.classNames.type.replace('{0}',this.type),true);toggleClass(this.elements.container,this.config.classNames.provider.replace('{0}',this.provider),true);if(this.isEmbed){toggleClass(this.elements.container,this.config.classNames.type.replace('{0}','video'),true);}
if(this.isVideo){this.elements.wrapper=createElement('div',{class:this.config.classNames.video});wrap$1(this.media,this.elements.wrapper);this.elements.poster=createElement('div',{class:this.config.classNames.poster});this.elements.wrapper.appendChild(this.elements.poster);}
if(this.isHTML5){html5.extend.call(this);}else if(this.isYouTube){youtube.setup.call(this);}else if(this.isVimeo){vimeo.setup.call(this);}}};var destroy=function destroy(instance){if(instance.manager){instance.manager.destroy();}
if(instance.elements.displayContainer){instance.elements.displayContainer.destroy();}
instance.elements.container.remove();};var Ads=function(){function Ads(player){var _this=this;_classCallCheck(this,Ads);this.player=player;this.config=player.config.ads;this.playing=false;this.initialized=false;this.elements={container:null,displayContainer:null};this.manager=null;this.loader=null;this.cuePoints=null;this.events={};this.safetyTimer=null;this.countdownTimer=null;this.managerPromise=new Promise(function(resolve,reject){_this.on('loaded',resolve);_this.on('error',reject);});this.load();}
_createClass(Ads,[{key:"load",value:function load(){var _this2=this;if(!this.enabled){return;}
if(!is$1.object(window.google)||!is$1.object(window.google.ima)){loadScript(this.player.config.urls.googleIMA.sdk).then(function(){_this2.ready();}).catch(function(){_this2.trigger('error',new Error('Google IMA SDK failed to load'));});}else{this.ready();}}},{key:"ready",value:function ready(){var _this3=this;if(!this.enabled){destroy(this);}
this.startSafetyTimer(12000,'ready()');this.managerPromise.then(function(){_this3.clearSafetyTimer('onAdsManagerLoaded()');});this.listeners();this.setupIMA();}},{key:"setupIMA",value:function setupIMA(){this.elements.container=createElement('div',{class:this.player.config.classNames.ads});this.player.elements.container.appendChild(this.elements.container);google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED);google.ima.settings.setLocale(this.player.config.ads.language);google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline);this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media);this.requestAds();}},{key:"requestAds",value:function requestAds(){var _this4=this;var container=this.player.elements.container;try{this.loader=new google.ima.AdsLoader(this.elements.displayContainer);this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,function(event){return _this4.onAdsManagerLoaded(event);},false);this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(error){return _this4.onAdError(error);},false);var request=new google.ima.AdsRequest();request.adTagUrl=this.tagUrl;request.linearAdSlotWidth=container.offsetWidth;request.linearAdSlotHeight=container.offsetHeight;request.nonLinearAdSlotWidth=container.offsetWidth;request.nonLinearAdSlotHeight=container.offsetHeight;request.forceNonLinearFullSlot=false;request.setAdWillPlayMuted(!this.player.muted);this.loader.requestAds(request);}catch(e){this.onAdError(e);}}},{key:"pollCountdown",value:function pollCountdown(){var _this5=this;var start=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;if(!start){clearInterval(this.countdownTimer);this.elements.container.removeAttribute('data-badge-text');return;}
var update=function update(){var time=formatTime(Math.max(_this5.manager.getRemainingTime(),0));var label="".concat(i18n.get('advertisement',_this5.player.config)," - ").concat(time);_this5.elements.container.setAttribute('data-badge-text',label);};this.countdownTimer=setInterval(update,100);}},{key:"onAdsManagerLoaded",value:function onAdsManagerLoaded(event){var _this6=this;if(!this.enabled){return;}
var settings=new google.ima.AdsRenderingSettings();settings.restoreCustomPlaybackStateOnAdBreakComplete=true;settings.enablePreloading=true;this.manager=event.getAdsManager(this.player,settings);this.cuePoints=this.manager.getCuePoints();this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,function(error){return _this6.onAdError(error);});Object.keys(google.ima.AdEvent.Type).forEach(function(type){_this6.manager.addEventListener(google.ima.AdEvent.Type[type],function(e){return _this6.onAdEvent(e);});});this.trigger('loaded');}},{key:"addCuePoints",value:function addCuePoints(){var _this7=this;if(!is$1.empty(this.cuePoints)){this.cuePoints.forEach(function(cuePoint){if(cuePoint!==0&&cuePoint!==-1&&cuePoint<_this7.player.duration){var seekElement=_this7.player.elements.progress;if(is$1.element(seekElement)){var cuePercentage=100/_this7.player.duration*cuePoint;var cue=createElement('span',{class:_this7.player.config.classNames.cues});cue.style.left="".concat(cuePercentage.toString(),"%");seekElement.appendChild(cue);}}});}}},{key:"onAdEvent",value:function onAdEvent(event){var _this8=this;var container=this.player.elements.container;var ad=event.getAd();var adData=event.getAdData();var dispatchEvent=function dispatchEvent(type){triggerEvent.call(_this8.player,_this8.player.media,"ads".concat(type.replace(/_/g,'').toLowerCase()));};dispatchEvent(event.type);switch(event.type){case google.ima.AdEvent.Type.LOADED:this.trigger('loaded');this.pollCountdown(true);if(!ad.isLinear()){ad.width=container.offsetWidth;ad.height=container.offsetHeight;}
break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.loadAds();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown();this.resumeContent();break;case google.ima.AdEvent.Type.LOG:if(adData.adError){this.player.debug.warn("Non-fatal ad error: ".concat(adData.adError.getMessage()));}
break;default:break;}}},{key:"onAdError",value:function onAdError(event){this.cancel();this.player.debug.warn('Ads error',event);}},{key:"listeners",value:function listeners(){var _this9=this;var container=this.player.elements.container;var time;this.player.on('canplay',function(){_this9.addCuePoints();});this.player.on('ended',function(){_this9.loader.contentComplete();});this.player.on('timeupdate',function(){time=_this9.player.currentTime;});this.player.on('seeked',function(){var seekedTime=_this9.player.currentTime;if(is$1.empty(_this9.cuePoints)){return;}
_this9.cuePoints.forEach(function(cuePoint,index){if(time<cuePoint&&cuePoint<seekedTime){_this9.manager.discardAdBreak();_this9.cuePoints.splice(index,1);}});});window.addEventListener('resize',function(){if(_this9.manager){_this9.manager.resize(container.offsetWidth,container.offsetHeight,google.ima.ViewMode.NORMAL);}});}},{key:"play",value:function play(){var _this10=this;var container=this.player.elements.container;if(!this.managerPromise){this.resumeContent();}
this.managerPromise.then(function(){_this10.manager.setVolume(_this10.player.volume);_this10.elements.displayContainer.initialize();try{if(!_this10.initialized){_this10.manager.init(container.offsetWidth,container.offsetHeight,google.ima.ViewMode.NORMAL);_this10.manager.start();}
_this10.initialized=true;}catch(adError){_this10.onAdError(adError);}}).catch(function(){});}},{key:"resumeContent",value:function resumeContent(){this.elements.container.style.zIndex='';this.playing=false;this.player.media.play();}},{key:"pauseContent",value:function pauseContent(){this.elements.container.style.zIndex=3;this.playing=true;this.player.media.pause();}},{key:"cancel",value:function cancel(){if(this.initialized){this.resumeContent();}
this.trigger('error');this.loadAds();}},{key:"loadAds",value:function loadAds(){var _this11=this;this.managerPromise.then(function(){if(_this11.manager){_this11.manager.destroy();}
_this11.managerPromise=new Promise(function(resolve){_this11.on('loaded',resolve);_this11.player.debug.log(_this11.manager);});_this11.requestAds();}).catch(function(){});}},{key:"trigger",value:function trigger(event){var _this12=this;for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){args[_key-1]=arguments[_key];}
var handlers=this.events[event];if(is$1.array(handlers)){handlers.forEach(function(handler){if(is$1.function(handler)){handler.apply(_this12,args);}});}}},{key:"on",value:function on(event,callback){if(!is$1.array(this.events[event])){this.events[event]=[];}
this.events[event].push(callback);return this;}},{key:"startSafetyTimer",value:function startSafetyTimer(time,from){var _this13=this;this.player.debug.log("Safety timer invoked from: ".concat(from));this.safetyTimer=setTimeout(function(){_this13.cancel();_this13.clearSafetyTimer('startSafetyTimer()');},time);}},{key:"clearSafetyTimer",value:function clearSafetyTimer(from){if(!is$1.nullOrUndefined(this.safetyTimer)){this.player.debug.log("Safety timer cleared from: ".concat(from));clearTimeout(this.safetyTimer);this.safetyTimer=null;}}},{key:"enabled",get:function get(){var config=this.config;return this.player.isHTML5&&this.player.isVideo&&config.enabled&&(!is$1.empty(config.publisherId)||is$1.url(config.tagUrl));}},{key:"tagUrl",get:function get(){var config=this.config;if(is$1.url(config.tagUrl)){return config.tagUrl;}
var params={AV_PUBLISHERID:'58c25bb0073ef448b1087ad6',AV_CHANNELID:'5a0458dc28a06145e4519d21',AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:this.publisherId};var base='https://go.aniview.com/api/adserver6/vast/';return"".concat(base,"?").concat(buildUrlParams(params));}}]);return Ads;}();var $findIndex=arrayIteration.findIndex;var FIND_INDEX='findIndex';var SKIPS_HOLES$1=true;if(FIND_INDEX in[])Array(1)[FIND_INDEX](function(){SKIPS_HOLES$1=false;});_export({target:'Array',proto:true,forced:SKIPS_HOLES$1},{findIndex:function findIndex(callbackfn){return $findIndex(this,callbackfn,arguments.length>1?arguments[1]:undefined);}});addToUnscopables(FIND_INDEX);var parseVtt=function parseVtt(vttDataString){var processedList=[];var frames=vttDataString.split(/\r\n\r\n|\n\n|\r\r/);frames.forEach(function(frame){var result={};var lines=frame.split(/\r\n|\n|\r/);lines.forEach(function(line){if(!is$1.number(result.startTime)){var matchTimes=line.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);if(matchTimes){result.startTime=Number(matchTimes[1]||0)*60*60+Number(matchTimes[2])*60+Number(matchTimes[3])+Number("0.".concat(matchTimes[4]));result.endTime=Number(matchTimes[6]||0)*60*60+Number(matchTimes[7])*60+Number(matchTimes[8])+Number("0.".concat(matchTimes[9]));}}else if(!is$1.empty(line.trim())&&is$1.empty(result.text)){var lineSplit=line.trim().split('#xywh=');var _lineSplit=_slicedToArray(lineSplit,1);result.text=_lineSplit[0];if(lineSplit[1]){var _lineSplit$1$split=lineSplit[1].split(',');var _lineSplit$1$split2=_slicedToArray(_lineSplit$1$split,4);result.x=_lineSplit$1$split2[0];result.y=_lineSplit$1$split2[1];result.w=_lineSplit$1$split2[2];result.h=_lineSplit$1$split2[3];}}});if(result.text){processedList.push(result);}});return processedList;};var PreviewThumbnails=function(){function PreviewThumbnails(player){_classCallCheck(this,PreviewThumbnails);this.player=player;this.thumbnails=[];this.loaded=false;this.lastMouseMoveTime=Date.now();this.mouseDown=false;this.loadedImages=[];this.elements={thumb:{},scrubbing:{}};this.load();}
_createClass(PreviewThumbnails,[{key:"load",value:function load(){var _this=this;if(this.player.elements.display.seekTooltip){this.player.elements.display.seekTooltip.hidden=this.enabled;}
if(!this.enabled){return;}
this.getThumbnails().then(function(){if(!_this.enabled){return;}
_this.render();_this.determineContainerAutoSizing();_this.loaded=true;});}},{key:"getThumbnails",value:function getThumbnails(){var _this2=this;return new Promise(function(resolve){var src=_this2.player.config.previewThumbnails.src;if(is$1.empty(src)){throw new Error('Missing previewThumbnails.src config attribute');}
var urls=is$1.string(src)?[src]:src;var promises=urls.map(function(u){return _this2.getThumbnail(u);});Promise.all(promises).then(function(){_this2.thumbnails.sort(function(x,y){return x.height-y.height;});_this2.player.debug.log('Preview thumbnails',_this2.thumbnails);resolve();});});}},{key:"getThumbnail",value:function getThumbnail(url){var _this3=this;return new Promise(function(resolve){fetch(url).then(function(response){var thumbnail={frames:parseVtt(response),height:null,urlPrefix:''};if(!thumbnail.frames[0].text.startsWith('/')&&!thumbnail.frames[0].text.startsWith('http://')&&!thumbnail.frames[0].text.startsWith('https://')){thumbnail.urlPrefix=url.substring(0,url.lastIndexOf('/')+1);}
var tempImage=new Image();tempImage.onload=function(){thumbnail.height=tempImage.naturalHeight;thumbnail.width=tempImage.naturalWidth;_this3.thumbnails.push(thumbnail);resolve();};tempImage.src=thumbnail.urlPrefix+thumbnail.frames[0].text;});});}},{key:"startMove",value:function startMove(event){if(!this.loaded){return;}
if(!is$1.event(event)||!['touchmove','mousemove'].includes(event.type)){return;}
if(!this.player.media.duration){return;}
if(event.type==='touchmove'){this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);}else{var clientRect=this.player.elements.progress.getBoundingClientRect();var percentage=100/clientRect.width*(event.pageX-clientRect.left);this.seekTime=this.player.media.duration*(percentage/100);if(this.seekTime<0){this.seekTime=0;}
if(this.seekTime>this.player.media.duration-1){this.seekTime=this.player.media.duration-1;}
this.mousePosX=event.pageX;this.elements.thumb.time.innerText=formatTime(this.seekTime);}
this.showImageAtCurrentTime();}},{key:"endMove",value:function endMove(){this.toggleThumbContainer(false,true);}},{key:"startScrubbing",value:function startScrubbing(event){if(event.button===false||event.button===0){this.mouseDown=true;if(this.player.media.duration){this.toggleScrubbingContainer(true);this.toggleThumbContainer(false,true);this.showImageAtCurrentTime();}}}},{key:"endScrubbing",value:function endScrubbing(){var _this4=this;this.mouseDown=false;if(Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)){this.toggleScrubbingContainer(false);}else{once.call(this.player,this.player.media,'timeupdate',function(){if(!_this4.mouseDown){_this4.toggleScrubbingContainer(false);}});}}},{key:"listeners",value:function listeners(){var _this5=this;this.player.on('play',function(){_this5.toggleThumbContainer(false,true);});this.player.on('seeked',function(){_this5.toggleThumbContainer(false);});this.player.on('timeupdate',function(){_this5.lastTime=_this5.player.media.currentTime;});}},{key:"render",value:function render(){this.elements.thumb.container=createElement('div',{class:this.player.config.classNames.previewThumbnails.thumbContainer});this.elements.thumb.imageContainer=createElement('div',{class:this.player.config.classNames.previewThumbnails.imageContainer});this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);var timeContainer=createElement('div',{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=createElement('span',{},'00:00');timeContainer.appendChild(this.elements.thumb.time);this.elements.thumb.container.appendChild(timeContainer);if(is$1.element(this.player.elements.progress)){this.player.elements.progress.appendChild(this.elements.thumb.container);}
this.elements.scrubbing.container=createElement('div',{class:this.player.config.classNames.previewThumbnails.scrubbingContainer});this.player.elements.wrapper.appendChild(this.elements.scrubbing.container);}},{key:"showImageAtCurrentTime",value:function showImageAtCurrentTime(){var _this6=this;if(this.mouseDown){this.setScrubbingContainerSize();}else{this.setThumbContainerSizeAndPos();}
var thumbNum=this.thumbnails[0].frames.findIndex(function(frame){return _this6.seekTime>=frame.startTime&&_this6.seekTime<=frame.endTime;});var hasThumb=thumbNum>=0;var qualityIndex=0;if(!this.mouseDown){this.toggleThumbContainer(hasThumb);}
if(!hasThumb){return;}
this.thumbnails.forEach(function(thumbnail,index){if(_this6.loadedImages.includes(thumbnail.frames[thumbNum].text)){qualityIndex=index;}});if(thumbNum!==this.showingThumb){this.showingThumb=thumbNum;this.loadImage(qualityIndex);}}},{key:"loadImage",value:function loadImage(){var _this7=this;var qualityIndex=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var thumbNum=this.showingThumb;var thumbnail=this.thumbnails[qualityIndex];var urlPrefix=thumbnail.urlPrefix;var frame=thumbnail.frames[thumbNum];var thumbFilename=thumbnail.frames[thumbNum].text;var thumbUrl=urlPrefix+thumbFilename;if(!this.currentImageElement||this.currentImageElement.dataset.filename!==thumbFilename){if(this.loadingImage&&this.usingSprites){this.loadingImage.onload=null;}
var previewImage=new Image();previewImage.src=thumbUrl;previewImage.dataset.index=thumbNum;previewImage.dataset.filename=thumbFilename;this.showingThumbFilename=thumbFilename;this.player.debug.log("Loading image: ".concat(thumbUrl));previewImage.onload=function(){return _this7.showImage(previewImage,frame,qualityIndex,thumbNum,thumbFilename,true);};this.loadingImage=previewImage;this.removeOldImages(previewImage);}else{this.showImage(this.currentImageElement,frame,qualityIndex,thumbNum,thumbFilename,false);this.currentImageElement.dataset.index=thumbNum;this.removeOldImages(this.currentImageElement);}}},{key:"showImage",value:function showImage(previewImage,frame,qualityIndex,thumbNum,thumbFilename){var newImage=arguments.length>5&&arguments[5]!==undefined?arguments[5]:true;this.player.debug.log("Showing thumb: ".concat(thumbFilename,". num: ").concat(thumbNum,". qual: ").concat(qualityIndex,". newimg: ").concat(newImage));this.setImageSizeAndOffset(previewImage,frame);if(newImage){this.currentImageContainer.appendChild(previewImage);this.currentImageElement=previewImage;if(!this.loadedImages.includes(thumbFilename)){this.loadedImages.push(thumbFilename);}}
this.preloadNearby(thumbNum,true).then(this.preloadNearby(thumbNum,false)).then(this.getHigherQuality(qualityIndex,previewImage,frame,thumbFilename));}},{key:"removeOldImages",value:function removeOldImages(currentImage){var _this8=this;Array.from(this.currentImageContainer.children).forEach(function(image){if(image.tagName.toLowerCase()!=='img'){return;}
var removeDelay=_this8.usingSprites?500:1000;if(image.dataset.index!==currentImage.dataset.index&&!image.dataset.deleting){image.dataset.deleting=true;var currentImageContainer=_this8.currentImageContainer;setTimeout(function(){currentImageContainer.removeChild(image);_this8.player.debug.log("Removing thumb: ".concat(image.dataset.filename));},removeDelay);}});}},{key:"preloadNearby",value:function preloadNearby(thumbNum){var _this9=this;var forward=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;return new Promise(function(resolve){setTimeout(function(){var oldThumbFilename=_this9.thumbnails[0].frames[thumbNum].text;if(_this9.showingThumbFilename===oldThumbFilename){var thumbnailsClone;if(forward){thumbnailsClone=_this9.thumbnails[0].frames.slice(thumbNum);}else{thumbnailsClone=_this9.thumbnails[0].frames.slice(0,thumbNum).reverse();}
var foundOne=false;thumbnailsClone.forEach(function(frame){var newThumbFilename=frame.text;if(newThumbFilename!==oldThumbFilename){if(!_this9.loadedImages.includes(newThumbFilename)){foundOne=true;_this9.player.debug.log("Preloading thumb filename: ".concat(newThumbFilename));var urlPrefix=_this9.thumbnails[0].urlPrefix;var thumbURL=urlPrefix+newThumbFilename;var previewImage=new Image();previewImage.src=thumbURL;previewImage.onload=function(){_this9.player.debug.log("Preloaded thumb filename: ".concat(newThumbFilename));if(!_this9.loadedImages.includes(newThumbFilename))_this9.loadedImages.push(newThumbFilename);resolve();};}}});if(!foundOne){resolve();}}},300);});}},{key:"getHigherQuality",value:function getHigherQuality(currentQualityIndex,previewImage,frame,thumbFilename){var _this10=this;if(currentQualityIndex<this.thumbnails.length-1){var previewImageHeight=previewImage.naturalHeight;if(this.usingSprites){previewImageHeight=frame.h;}
if(previewImageHeight<this.thumbContainerHeight){setTimeout(function(){if(_this10.showingThumbFilename===thumbFilename){_this10.player.debug.log("Showing higher quality thumb for: ".concat(thumbFilename));_this10.loadImage(currentQualityIndex+1);}},300);}}}},{key:"toggleThumbContainer",value:function toggleThumbContainer(){var toggle=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var clearShowing=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var className=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(className,toggle);if(!toggle&&clearShowing){this.showingThumb=null;this.showingThumbFilename=null;}}},{key:"toggleScrubbingContainer",value:function toggleScrubbingContainer(){var toggle=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var className=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(className,toggle);if(!toggle){this.showingThumb=null;this.showingThumbFilename=null;}}},{key:"determineContainerAutoSizing",value:function determineContainerAutoSizing(){if(this.elements.thumb.imageContainer.clientHeight>20){this.sizeSpecifiedInCSS=true;}}},{key:"setThumbContainerSizeAndPos",value:function setThumbContainerSizeAndPos(){if(!this.sizeSpecifiedInCSS){var thumbWidth=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);this.elements.thumb.imageContainer.style.height="".concat(this.thumbContainerHeight,"px");this.elements.thumb.imageContainer.style.width="".concat(thumbWidth,"px");}
this.setThumbContainerPos();}},{key:"setThumbContainerPos",value:function setThumbContainerPos(){var seekbarRect=this.player.elements.progress.getBoundingClientRect();var plyrRect=this.player.elements.container.getBoundingClientRect();var container=this.elements.thumb.container;var minVal=plyrRect.left-seekbarRect.left+10;var maxVal=plyrRect.right-seekbarRect.left-container.clientWidth-10;var previewPos=this.mousePosX-seekbarRect.left-container.clientWidth/2;if(previewPos<minVal){previewPos=minVal;}
if(previewPos>maxVal){previewPos=maxVal;}
container.style.left="".concat(previewPos,"px");}},{key:"setScrubbingContainerSize",value:function setScrubbingContainerSize(){this.elements.scrubbing.container.style.width="".concat(this.player.media.clientWidth,"px");this.elements.scrubbing.container.style.height="".concat(this.player.media.clientWidth/this.thumbAspectRatio,"px");}},{key:"setImageSizeAndOffset",value:function setImageSizeAndOffset(previewImage,frame){if(!this.usingSprites){return;}
var multiplier=this.thumbContainerHeight/frame.h;previewImage.style.height="".concat(Math.floor(previewImage.naturalHeight*multiplier),"px");previewImage.style.width="".concat(Math.floor(previewImage.naturalWidth*multiplier),"px");previewImage.style.left="-".concat(frame.x*multiplier,"px");previewImage.style.top="-".concat(frame.y*multiplier,"px");}},{key:"enabled",get:function get(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled;}},{key:"currentImageContainer",get:function get(){if(this.mouseDown){return this.elements.scrubbing.container;}
return this.elements.thumb.imageContainer;}},{key:"usingSprites",get:function get(){return Object.keys(this.thumbnails[0].frames[0]).includes('w');}},{key:"thumbAspectRatio",get:function get(){if(this.usingSprites){return this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h;}
return this.thumbnails[0].width/this.thumbnails[0].height;}},{key:"thumbContainerHeight",get:function get(){if(this.mouseDown){return Math.floor(this.player.media.clientWidth/this.thumbAspectRatio);}
return Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4);}},{key:"currentImageElement",get:function get(){if(this.mouseDown){return this.currentScrubbingImageElement;}
return this.currentThumbnailImageElement;},set:function set(element){if(this.mouseDown){this.currentScrubbingImageElement=element;}else{this.currentThumbnailImageElement=element;}}}]);return PreviewThumbnails;}();var source={insertElements:function insertElements(type,attributes){var _this=this;if(is$1.string(attributes)){insertElement(type,this.media,{src:attributes});}else if(is$1.array(attributes)){attributes.forEach(function(attribute){insertElement(type,_this.media,attribute);});}},change:function change(input){var _this2=this;if(!getDeep(input,'sources.length')){this.debug.warn('Invalid source format');return;}
html5.cancelRequests.call(this);this.destroy.call(this,function(){_this2.options.quality=[];removeElement(_this2.media);_this2.media=null;if(is$1.element(_this2.elements.container)){_this2.elements.container.removeAttribute('class');}
var sources=input.sources,type=input.type;var _sources=_slicedToArray(sources,1),_sources$=_sources[0],_sources$$provider=_sources$.provider,provider=_sources$$provider===void 0?providers.html5:_sources$$provider,src=_sources$.src;var tagName=provider==='html5'?type:'div';var attributes=provider==='html5'?{}:{src:src};Object.assign(_this2,{provider:provider,type:type,supported:support.check(type,provider,_this2.config.playsinline),media:createElement(tagName,attributes)});_this2.elements.container.appendChild(_this2.media);if(is$1.boolean(input.autoplay)){_this2.config.autoplay=input.autoplay;}
if(_this2.isHTML5){if(_this2.config.crossorigin){_this2.media.setAttribute('crossorigin','');}
if(_this2.config.autoplay){_this2.media.setAttribute('autoplay','');}
if(!is$1.empty(input.poster)){_this2.poster=input.poster;}
if(_this2.config.loop.active){_this2.media.setAttribute('loop','');}
if(_this2.config.muted){_this2.media.setAttribute('muted','');}
if(_this2.config.playsinline){_this2.media.setAttribute('playsinline','');}}
ui.addStyleHook.call(_this2);if(_this2.isHTML5){source.insertElements.call(_this2,'source',sources);}
_this2.config.title=input.title;media.setup.call(_this2);if(_this2.isHTML5){if(Object.keys(input).includes('tracks')){source.insertElements.call(_this2,'track',input.tracks);}}
if(_this2.isHTML5||_this2.isEmbed&&!_this2.supported.ui){ui.build.call(_this2);}
if(_this2.isHTML5){_this2.media.load();}
if(_this2.previewThumbnails){_this2.previewThumbnails.load();}
_this2.fullscreen.update();},true);}};function clamp(){var input=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var min=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var max=arguments.length>2&&arguments[2]!==undefined?arguments[2]:255;return Math.min(Math.max(input,min),max);}
var Plyr=function(){function Plyr(target,options){var _this=this;_classCallCheck(this,Plyr);this.timers={};this.ready=false;this.loading=false;this.failed=false;this.touch=support.touch;this.media=target;if(is$1.string(this.media)){this.media=document.querySelectorAll(this.media);}
if(window.jQuery&&this.media instanceof jQuery||is$1.nodeList(this.media)||is$1.array(this.media)){this.media=this.media[0];}
this.config=extend({},defaults$1,Plyr.defaults,options||{},function(){try{return JSON.parse(_this.media.getAttribute('data-plyr-config'));}catch(e){return{};}}());this.elements={container:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}};this.captions={active:null,currentTrack:-1,meta:new WeakMap()};this.fullscreen={active:false};this.options={speed:[],quality:[]};this.debug=new Console(this.config.debug);this.debug.log('Config',this.config);this.debug.log('Support',support);if(is$1.nullOrUndefined(this.media)||!is$1.element(this.media)){this.debug.error('Setup failed: no suitable element passed');return;}
if(this.media.plyr){this.debug.warn('Target already setup');return;}
if(!this.config.enabled){this.debug.error('Setup failed: disabled by config');return;}
if(!support.check().api){this.debug.error('Setup failed: no support');return;}
var clone=this.media.cloneNode(true);clone.autoplay=false;this.elements.original=clone;var type=this.media.tagName.toLowerCase();var iframe=null;var url=null;switch(type){case'div':iframe=this.media.querySelector('iframe');if(is$1.element(iframe)){url=parseUrl(iframe.getAttribute('src'));this.provider=getProviderByUrl(url.toString());this.elements.container=this.media;this.media=iframe;this.elements.container.className='';if(url.search.length){var truthy=['1','true'];if(truthy.includes(url.searchParams.get('autoplay'))){this.config.autoplay=true;}
if(truthy.includes(url.searchParams.get('loop'))){this.config.loop.active=true;}
if(this.isYouTube){this.config.playsinline=truthy.includes(url.searchParams.get('playsinline'));this.config.youtube.hl=url.searchParams.get('hl');}else{this.config.playsinline=true;}}}else{this.provider=this.media.getAttribute(this.config.attributes.embed.provider);this.media.removeAttribute(this.config.attributes.embed.provider);}
if(is$1.empty(this.provider)||!Object.keys(providers).includes(this.provider)){this.debug.error('Setup failed: Invalid provider');return;}
this.type=types.video;break;case'video':case'audio':this.type=type;this.provider=providers.html5;if(this.media.hasAttribute('crossorigin')){this.config.crossorigin=true;}
if(this.media.hasAttribute('autoplay')){this.config.autoplay=true;}
if(this.media.hasAttribute('playsinline')||this.media.hasAttribute('webkit-playsinline')){this.config.playsinline=true;}
if(this.media.hasAttribute('muted')){this.config.muted=true;}
if(this.media.hasAttribute('loop')){this.config.loop.active=true;}
break;default:this.debug.error('Setup failed: unsupported type');return;}
this.supported=support.check(this.type,this.provider,this.config.playsinline);if(!this.supported.api){this.debug.error('Setup failed: no support');return;}
this.eventListeners=[];this.listeners=new Listeners(this);this.storage=new Storage(this);this.media.plyr=this;if(!is$1.element(this.elements.container)){this.elements.container=createElement('div',{tabindex:0});wrap$1(this.media,this.elements.container);}
ui.addStyleHook.call(this);media.setup.call(this);if(this.config.debug){on.call(this,this.elements.container,this.config.events.join(' '),function(event){_this.debug.log("event: ".concat(event.type));});}
if(this.isHTML5||this.isEmbed&&!this.supported.ui){ui.build.call(this);}
this.listeners.container();this.listeners.global();this.fullscreen=new Fullscreen(this);if(this.config.ads.enabled){this.ads=new Ads(this);}
if(this.isHTML5&&this.config.autoplay){setTimeout(function(){return _this.play();},10);}
this.lastSeekTime=0;if(this.config.previewThumbnails.enabled){this.previewThumbnails=new PreviewThumbnails(this);}}
_createClass(Plyr,[{key:"play",value:function play(){var _this2=this;if(!is$1.function(this.media.play)){return null;}
if(this.ads&&this.ads.enabled){this.ads.managerPromise.then(function(){return _this2.ads.play();}).catch(function(){return _this2.media.play();});}
return this.media.play();}},{key:"pause",value:function pause(){if(!this.playing||!is$1.function(this.media.pause)){return;}
this.media.pause();}},{key:"togglePlay",value:function togglePlay(input){var toggle=is$1.boolean(input)?input:!this.playing;if(toggle){this.play();}else{this.pause();}}},{key:"stop",value:function stop(){if(this.isHTML5){this.pause();this.restart();}else if(is$1.function(this.media.stop)){this.media.stop();}}},{key:"restart",value:function restart(){this.currentTime=0;}},{key:"rewind",value:function rewind(seekTime){this.currentTime=this.currentTime-(is$1.number(seekTime)?seekTime:this.config.seekTime);}},{key:"forward",value:function forward(seekTime){this.currentTime=this.currentTime+(is$1.number(seekTime)?seekTime:this.config.seekTime);}},{key:"increaseVolume",value:function increaseVolume(step){var volume=this.media.muted?0:this.volume;this.volume=volume+(is$1.number(step)?step:0);}},{key:"decreaseVolume",value:function decreaseVolume(step){this.increaseVolume(-step);}},{key:"toggleCaptions",value:function toggleCaptions(input){captions.toggle.call(this,input,false);}},{key:"airplay",value:function airplay(){if(support.airplay){this.media.webkitShowPlaybackTargetPicker();}}},{key:"toggleControls",value:function toggleControls(toggle){if(this.supported.ui&&!this.isAudio){var isHidden=hasClass(this.elements.container,this.config.classNames.hideControls);var force=typeof toggle==='undefined'?undefined:!toggle;var hiding=toggleClass(this.elements.container,this.config.classNames.hideControls,force);if(hiding&&this.config.controls.includes('settings')&&!is$1.empty(this.config.settings)){controls.toggleMenu.call(this,false);}
if(hiding!==isHidden){var eventName=hiding?'controlshidden':'controlsshown';triggerEvent.call(this,this.media,eventName);}
return!hiding;}
return false;}},{key:"on",value:function on$1(event,callback){on.call(this,this.elements.container,event,callback);}},{key:"once",value:function once$1(event,callback){once.call(this,this.elements.container,event,callback);}},{key:"off",value:function off$1(event,callback){off(this.elements.container,event,callback);}},{key:"destroy",value:function destroy(callback){var _this3=this;var soft=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!this.ready){return;}
var done=function done(){document.body.style.overflow='';_this3.embed=null;if(soft){if(Object.keys(_this3.elements).length){removeElement(_this3.elements.buttons.play);removeElement(_this3.elements.captions);removeElement(_this3.elements.controls);removeElement(_this3.elements.wrapper);_this3.elements.buttons.play=null;_this3.elements.captions=null;_this3.elements.controls=null;_this3.elements.wrapper=null;}
if(is$1.function(callback)){callback();}}else{unbindListeners.call(_this3);replaceElement(_this3.elements.original,_this3.elements.container);triggerEvent.call(_this3,_this3.elements.original,'destroyed',true);if(is$1.function(callback)){callback.call(_this3.elements.original);}
_this3.ready=false;setTimeout(function(){_this3.elements=null;_this3.media=null;},200);}};this.stop();clearTimeout(this.timers.loading);clearTimeout(this.timers.controls);clearTimeout(this.timers.resized);if(this.isHTML5){ui.toggleNativeControls.call(this,true);done();}else if(this.isYouTube){clearInterval(this.timers.buffering);clearInterval(this.timers.playing);if(this.embed!==null&&is$1.function(this.embed.destroy)){this.embed.destroy();}
done();}else if(this.isVimeo){if(this.embed!==null){this.embed.unload().then(done);}
setTimeout(done,200);}}},{key:"supports",value:function supports(type){return support.mime.call(this,type);}},{key:"isHTML5",get:function get(){return this.provider===providers.html5;}},{key:"isEmbed",get:function get(){return this.isYouTube||this.isVimeo;}},{key:"isYouTube",get:function get(){return this.provider===providers.youtube;}},{key:"isVimeo",get:function get(){return this.provider===providers.vimeo;}},{key:"isVideo",get:function get(){return this.type===types.video;}},{key:"isAudio",get:function get(){return this.type===types.audio;}},{key:"playing",get:function get(){return Boolean(this.ready&&!this.paused&&!this.ended);}},{key:"paused",get:function get(){return Boolean(this.media.paused);}},{key:"stopped",get:function get(){return Boolean(this.paused&&this.currentTime===0);}},{key:"ended",get:function get(){return Boolean(this.media.ended);}},{key:"currentTime",set:function set(input){if(!this.duration){return;}
var inputIsValid=is$1.number(input)&&input>0;this.media.currentTime=inputIsValid?Math.min(input,this.duration):0;this.debug.log("Seeking to ".concat(this.currentTime," seconds"));},get:function get(){return Number(this.media.currentTime);}},{key:"buffered",get:function get(){var buffered=this.media.buffered;if(is$1.number(buffered)){return buffered;}
if(buffered&&buffered.length&&this.duration>0){return buffered.end(0)/this.duration;}
return 0;}},{key:"seeking",get:function get(){return Boolean(this.media.seeking);}},{key:"duration",get:function get(){var fauxDuration=parseFloat(this.config.duration);var realDuration=(this.media||{}).duration;var duration=!is$1.number(realDuration)||realDuration===Infinity?0:realDuration;return fauxDuration||duration;}},{key:"volume",set:function set(value){var volume=value;var max=1;var min=0;if(is$1.string(volume)){volume=Number(volume);}
if(!is$1.number(volume)){volume=this.storage.get('volume');}
if(!is$1.number(volume)){volume=this.config.volume;}
if(volume>max){volume=max;}
if(volume<min){volume=min;}
this.config.volume=volume;this.media.volume=volume;if(!is$1.empty(value)&&this.muted&&volume>0){this.muted=false;}},get:function get(){return Number(this.media.volume);}},{key:"muted",set:function set(mute){var toggle=mute;if(!is$1.boolean(toggle)){toggle=this.storage.get('muted');}
if(!is$1.boolean(toggle)){toggle=this.config.muted;}
this.config.muted=toggle;this.media.muted=toggle;},get:function get(){return Boolean(this.media.muted);}},{key:"hasAudio",get:function get(){if(!this.isHTML5){return true;}
if(this.isAudio){return true;}
return Boolean(this.media.mozHasAudio)||Boolean(this.media.webkitAudioDecodedByteCount)||Boolean(this.media.audioTracks&&this.media.audioTracks.length);}},{key:"speed",set:function set(input){var _this4=this;var speed=null;if(is$1.number(input)){speed=input;}
if(!is$1.number(speed)){speed=this.storage.get('speed');}
if(!is$1.number(speed)){speed=this.config.speed.selected;}
var min=this.minimumSpeed,max=this.maximumSpeed;speed=clamp(speed,min,max);this.config.speed.selected=speed;setTimeout(function(){_this4.media.playbackRate=speed;},0);},get:function get(){return Number(this.media.playbackRate);}},{key:"minimumSpeed",get:function get(){if(this.isYouTube){return Math.min.apply(Math,_toConsumableArray(this.options.speed));}
if(this.isVimeo){return 0.5;}
return 0.0625;}},{key:"maximumSpeed",get:function get(){if(this.isYouTube){return Math.max.apply(Math,_toConsumableArray(this.options.speed));}
if(this.isVimeo){return 2;}
return 16;}},{key:"quality",set:function set(input){var config=this.config.quality;var options=this.options.quality;if(!options.length){return;}
var quality=[!is$1.empty(input)&&Number(input),this.storage.get('quality'),config.selected,config.default].find(is$1.number);var updateStorage=true;if(!options.includes(quality)){var value=closest(options,quality);this.debug.warn("Unsupported quality option: ".concat(quality,", using ").concat(value," instead"));quality=value;updateStorage=false;}
config.selected=quality;this.media.quality=quality;if(updateStorage){this.storage.set({quality:quality});}},get:function get(){return this.media.quality;}},{key:"loop",set:function set(input){var toggle=is$1.boolean(input)?input:this.config.loop.active;this.config.loop.active=toggle;this.media.loop=toggle;},get:function get(){return Boolean(this.media.loop);}},{key:"source",set:function set(input){source.change.call(this,input);},get:function get(){return this.media.currentSrc;}},{key:"download",get:function get(){var download=this.config.urls.download;return is$1.url(download)?download:this.source;},set:function set(input){if(!is$1.url(input)){return;}
this.config.urls.download=input;controls.setDownloadUrl.call(this);}},{key:"poster",set:function set(input){if(!this.isVideo){this.debug.warn('Poster can only be set for video');return;}
ui.setPoster.call(this,input,false).catch(function(){});},get:function get(){if(!this.isVideo){return null;}
return this.media.getAttribute('poster');}},{key:"ratio",get:function get(){if(!this.isVideo){return null;}
var ratio=reduceAspectRatio(getAspectRatio.call(this));return is$1.array(ratio)?ratio.join(':'):ratio;},set:function set(input){if(!this.isVideo){this.debug.warn('Aspect ratio can only be set for video');return;}
if(!is$1.string(input)||!validateRatio(input)){this.debug.error("Invalid aspect ratio specified (".concat(input,")"));return;}
this.config.ratio=input;setAspectRatio.call(this);}},{key:"autoplay",set:function set(input){var toggle=is$1.boolean(input)?input:this.config.autoplay;this.config.autoplay=toggle;},get:function get(){return Boolean(this.config.autoplay);}},{key:"currentTrack",set:function set(input){captions.set.call(this,input,false);},get:function get(){var _this$captions=this.captions,toggled=_this$captions.toggled,currentTrack=_this$captions.currentTrack;return toggled?currentTrack:-1;}},{key:"language",set:function set(input){captions.setLanguage.call(this,input,false);},get:function get(){return(captions.getCurrentTrack.call(this)||{}).language;}},{key:"pip",set:function set(input){if(!support.pip){return;}
var toggle=is$1.boolean(input)?input:!this.pip;if(is$1.function(this.media.webkitSetPresentationMode)){this.media.webkitSetPresentationMode(toggle?pip.active:pip.inactive);}
if(is$1.function(this.media.requestPictureInPicture)){if(!this.pip&&toggle){this.media.requestPictureInPicture();}else if(this.pip&&!toggle){document.exitPictureInPicture();}}},get:function get(){if(!support.pip){return null;}
if(!is$1.empty(this.media.webkitPresentationMode)){return this.media.webkitPresentationMode===pip.active;}
return this.media===document.pictureInPictureElement;}}],[{key:"supported",value:function supported(type,provider,inline){return support.check(type,provider,inline);}},{key:"loadSprite",value:function loadSprite$1(url,id){return loadSprite(url,id);}},{key:"setup",value:function setup(selector){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var targets=null;if(is$1.string(selector)){targets=Array.from(document.querySelectorAll(selector));}else if(is$1.nodeList(selector)){targets=Array.from(selector);}else if(is$1.array(selector)){targets=selector.filter(is$1.element);}
if(is$1.empty(targets)){return null;}
return targets.map(function(t){return new Plyr(t,options);});}}]);return Plyr;}();Plyr.defaults=cloneDeep(defaults$1);return Plyr;}));
/*!
 * Clamp.js 0.11.5
 *
 * Now Maintained by Josh English http://joshengish.com
 * Joseph Schmitt http://joe.sh
 * Released under the WTFPL license
 * http://sam.zoy.org/wtfpl/
 */
(function(root,factory){if(typeof define==='function'&&define.amd){define([],factory);}else if(typeof exports==='object'){module.exports=factory();}else{root.$clamp=factory();}}(this,function(){function clamp(element,options){options=options||{};var self=this,win=window,opt={clamp:options.clamp||2,useNativeClamp:typeof(options.useNativeClamp)!='undefined'?options.useNativeClamp:true,splitOnChars:options.splitOnChars||['.','-','–','—',' '],animate:options.animate||false,truncationChar:options.truncationChar||'…',truncationHTML:options.truncationHTML},sty=element.style,originalText=element.innerHTML,supportsNativeClamp=typeof(element.style.webkitLineClamp)!='undefined',clampValue=opt.clamp,isCSSValue=clampValue.indexOf&&(clampValue.indexOf('px')>-1||clampValue.indexOf('em')>-1),truncationHTMLContainer;if(opt.truncationHTML){truncationHTMLContainer=document.createElement('span');truncationHTMLContainer.innerHTML=opt.truncationHTML;}
function computeStyle(elem,prop){if(!win.getComputedStyle){win.getComputedStyle=function(el,pseudo){this.el=el;this.getPropertyValue=function(prop){var re=/(\-([a-z]){1})/g;if(prop=='float')prop='styleFloat';if(re.test(prop)){prop=prop.replace(re,function(){return arguments[2].toUpperCase();});}
return el.currentStyle&&el.currentStyle[prop]?el.currentStyle[prop]:null;};return this;};}
return win.getComputedStyle(elem,null).getPropertyValue(prop);}
function getMaxLines(height){var availHeight=height||element.clientHeight,lineHeight=getLineHeight(element);return Math.max(Math.floor(availHeight/lineHeight),0);}
function getMaxHeight(clmp){var lineHeight=getLineHeight(element);return lineHeight*clmp;}
function getLineHeight(elem){var lh=computeStyle(elem,'line-height');if(lh=='normal'){lh=parseInt(computeStyle(elem,'font-size'))*1.187;}
return Math.ceil(parseFloat(lh));}
var splitOnChars=opt.splitOnChars.slice(0),splitChar=splitOnChars[0],chunks,lastChunk;function getLastChild(elem){if(!elem.lastChild){return;}
if(elem.lastChild.childNodes&&elem.lastChild.childNodes.length>0){return getLastChild(Array.prototype.slice.call(elem.childNodes).pop());}
else if(!elem.lastChild||!elem.lastChild.nodeValue||elem.lastChild.nodeValue===''||elem.lastChild.nodeValue==opt.truncationChar){elem.lastChild.parentNode.removeChild(elem.lastChild);return getLastChild(element);}
else{return elem.lastChild;}}
function truncate(target,maxHeight){if(!target||!maxHeight){return;}
function reset(){splitOnChars=opt.splitOnChars.slice(0);splitChar=splitOnChars[0];chunks=null;lastChunk=null;}
var nodeValue=target.nodeValue.replace(opt.truncationChar,'');if(!chunks){if(splitOnChars.length>0){splitChar=splitOnChars.shift();}
else{splitChar='';}
chunks=nodeValue.split(splitChar);}
if(chunks.length>1){lastChunk=chunks.pop();applyEllipsis(target,chunks.join(splitChar));}
else{chunks=null;}
if(truncationHTMLContainer){target.nodeValue=target.nodeValue.replace(opt.truncationChar,'');element.innerHTML=target.nodeValue+' '+truncationHTMLContainer.innerHTML+opt.truncationChar;}
if(chunks){if(element.clientHeight<=maxHeight){if(splitOnChars.length>=0&&splitChar!==''){applyEllipsis(target,chunks.join(splitChar)+splitChar+lastChunk);chunks=null;}
else{return element.innerHTML;}}}
else{if(splitChar===''){applyEllipsis(target,'');target=getLastChild(element);reset();}}
if(opt.animate){setTimeout(function(){truncate(target,maxHeight);},opt.animate===true?10:opt.animate);}else{return truncate(target,maxHeight);}}
function applyEllipsis(elem,str){elem.nodeValue=str+opt.truncationChar;}
if(clampValue=='auto'){clampValue=getMaxLines();}else if(isCSSValue){clampValue=getMaxLines(parseInt(clampValue));}
var clampedText;if(supportsNativeClamp&&opt.useNativeClamp){sty.overflow='hidden';sty.textOverflow='ellipsis';sty.webkitBoxOrient='vertical';sty.display='-webkit-box';sty.webkitLineClamp=clampValue;if(isCSSValue){sty.height=opt.clamp+'px';}}else{var height=getMaxHeight(clampValue);if(height<element.clientHeight){clampedText=truncate(getLastChild(element),height);}}
return{'original':originalText,'clamped':clampedText};}
return clamp;}));
(function($){'use strict';$('.c-booking-modal').on('click',function(){$('body').removeClass('booking-modal-is-visible');});$('.c-brands-modal').on('click',function(){$('body').removeClass('brands-modal-is-visible');});var pageHeaderClass='c-page-header',pageHeaderEl=$('.'+pageHeaderClass),firstWidgetEl=$('.widget:first-of-type').not('.c-slider--layout-builder .widget:first-of-type');if(firstWidgetEl.hasClass('widget_cn-core-fullpage-widget')){pageHeaderEl.addClass(pageHeaderClass+'--negative');}
else if(firstWidgetEl.hasClass('widget_cn-core-hero-widget')){pageHeaderEl.addClass(pageHeaderClass+'--hero');}
else{pageHeaderEl.addClass(pageHeaderClass+'--positive');}
pageHeaderEl.addClass('is-ready');$('.site-search').click(function(){if($('.c-site-search').is(':hidden')){$('.c-site-search').slideDown('slow');$('body').addClass('search-is-active');$('body').removeClass('navigation--is-active');}
else{$('.c-site-search').slideUp('slow');$('body').removeClass('search-is-active');}});$('#c-site-search__close').click(function(){$('.c-site-search').slideUp('slow');});$('.c-navicon').click(function(){$('.c-site-search').slideUp('slow');$('body').removeClass('search-is-active');});$('.c-media--dining-experiences .c-media__item .c-media__image').append("<span></span>");var data=$('.c-media__buttons').html();$('.c-media--dining-experiences .c-media__item .c-media__image span').html(data);})(jQuery);
(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports;}
var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports;}
__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter});}};__webpack_require__.r=function(exports){if(typeof Symbol!=='undefined'&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:'Module'});}
Object.defineProperty(exports,'__esModule',{value:true});};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if((mode&4)&&typeof value==='object'&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,'default',{enumerable:true,value:value});if(mode&2&&typeof value!='string')for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key];}.bind(null,key));return ns;};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module['default'];}:function getModuleExports(){return module;};__webpack_require__.d(getter,'a',getter);return getter;};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property);};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s="./assets/js/child-app.js");})
({"./assets/js/child-app.js":
/*!********************************!*\
  !*** ./assets/js/child-app.js ***!
  \********************************/
/*! no exports provided */
(function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _modules_Offcanvas__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(
/*! ./modules/Offcanvas */
"./assets/js/modules/Offcanvas.js");var _modules_AjaxTrigger__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(
/*! ./modules/AjaxTrigger */
"./assets/js/modules/AjaxTrigger.js");var _modules_FilterLabel__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(
/*! ./modules/FilterLabel */
"./assets/js/modules/FilterLabel.js");var _modules_ClampTarget__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(
/*! ./modules/ClampTarget */
"./assets/js/modules/ClampTarget.js");var _modules_Accordion__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(
/*! ./modules/Accordion */
"./assets/js/modules/Accordion.js");var _modules_TabbedContent__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(
/*! ./modules/TabbedContent */
"./assets/js/modules/TabbedContent.js");new _modules_Offcanvas__WEBPACK_IMPORTED_MODULE_0__["default"]();new _modules_AjaxTrigger__WEBPACK_IMPORTED_MODULE_1__["default"]();new _modules_FilterLabel__WEBPACK_IMPORTED_MODULE_2__["default"]();new _modules_ClampTarget__WEBPACK_IMPORTED_MODULE_3__["default"]();new _modules_Accordion__WEBPACK_IMPORTED_MODULE_4__["default"]();new _modules_TabbedContent__WEBPACK_IMPORTED_MODULE_5__["default"]();}),"./assets/js/modules/Accordion.js":
/*!****************************************!*\
  !*** ./assets/js/modules/Accordion.js ***!
  \****************************************/
/*! exports provided: default */
(function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var jquery__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(
/*! jquery */
"jquery");var jquery__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
var Accordion=function Accordion(){_classCallCheck(this,Accordion);this.accordionItem=jquery__WEBPACK_IMPORTED_MODULE_0___default()('.c-accordion__item');this.accordionItemInner=jquery__WEBPACK_IMPORTED_MODULE_0___default()('.c-row--accordion-inner .c-accordion__item');for(var i=0;i<this.accordionItem.length;i++){this.accordionItem[i].addEventListener('click',function(){this.accordionItem=jquery__WEBPACK_IMPORTED_MODULE_0___default()('.c-accordion__item');this.accordionItem.not(jquery__WEBPACK_IMPORTED_MODULE_0___default()(this)).removeClass('accordion--is-active');this.accordionItem.not(jquery__WEBPACK_IMPORTED_MODULE_0___default()(this)).removeClass('is-active');jquery__WEBPACK_IMPORTED_MODULE_0___default()(this).removeClass("is-active");jquery__WEBPACK_IMPORTED_MODULE_0___default()(this).toggleClass("accordion--is-active");});}
for(var i=0;i<this.accordionItemInner.length;i++){this.accordionItemInner[i].addEventListener('click',function(){this.accordionItemInner=jquery__WEBPACK_IMPORTED_MODULE_0___default()('.c-row--accordion-inner .c-accordion__item');jquery__WEBPACK_IMPORTED_MODULE_0___default()(this).toggleClass("accordion-inner--is-active");console.log('click');});}};__webpack_exports__["default"]=(Accordion);}),"./assets/js/modules/AjaxTrigger.js":
/*!******************************************!*\
  !*** ./assets/js/modules/AjaxTrigger.js ***!
  \******************************************/
/*! exports provided: default */
(function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var jquery__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(
/*! jquery */
"jquery");var jquery__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}
function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}
var AjaxTrigger=function(){function AjaxTrigger(){_classCallCheck(this,AjaxTrigger);jquery__WEBPACK_IMPORTED_MODULE_0___default()('[data-module="ajax-modal"]').on('click',this.handleClick);}
_createClass(AjaxTrigger,[{key:"handleClick",value:function handleClick(event){var triggerEl=jquery__WEBPACK_IMPORTED_MODULE_0___default()(event.currentTarget);triggerEl.addClass('is-waiting');jquery__WEBPACK_IMPORTED_MODULE_0___default()('body').on('ajaxModalHasLoaded',function(){triggerEl.removeClass('is-waiting');});}}]);return AjaxTrigger;}();__webpack_exports__["default"]=(AjaxTrigger);}),"./assets/js/modules/ClampTarget.js":
/*!******************************************!*\
  !*** ./assets/js/modules/ClampTarget.js ***!
  \******************************************/
/*! exports provided: default */
(function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var jquery__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(
/*! jquery */
"jquery");var jquery__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
var ClampTarget=function ClampTarget(){_classCallCheck(this,ClampTarget);var clampSelectors=[{cssSelector:'.c-grid-filter--cta .c-grid-filter__item .c-cta__text',lineLength:4}];jquery__WEBPACK_IMPORTED_MODULE_0___default.a.each(clampSelectors,function(index,clamp){jquery__WEBPACK_IMPORTED_MODULE_0___default()(clamp.cssSelector).each(function(index,element){$clamp(element,{clamp:clamp.lineLength});});});};__webpack_exports__["default"]=(ClampTarget);}),"./assets/js/modules/FilterLabel.js":
/*!******************************************!*\
  !*** ./assets/js/modules/FilterLabel.js ***!
  \******************************************/
/*! exports provided: default */
(function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var jquery__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(
/*! jquery */
"jquery");var jquery__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
var FilterLabel=function FilterLabel(){_classCallCheck(this,FilterLabel);jquery__WEBPACK_IMPORTED_MODULE_0___default()('.c-grid-filter--cta .c-grid-filter__filter .c-grid-filter__select').each(function(){var $this=jquery__WEBPACK_IMPORTED_MODULE_0___default()(this);$this.wrap('<div class="c-grid-filter__select--container"></div>');});};__webpack_exports__["default"]=(FilterLabel);}),"./assets/js/modules/Offcanvas.js":
/*!****************************************!*\
  !*** ./assets/js/modules/Offcanvas.js ***!
  \****************************************/
/*! exports provided: default */
(function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var jquery__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(
/*! jquery */
"jquery");var jquery__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}
function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor;}
var Offcanvas=function(){function Offcanvas(){_classCallCheck(this,Offcanvas);this.offcanvasEl=jquery__WEBPACK_IMPORTED_MODULE_0___default()('.c-offcanvas');this.offcanvasBackgroundEl=this.offcanvasEl.find('.c-offcanvas__background-image');this.defaultOffcanvasBackgroundEl=this.offcanvasEl.find('.c-offcanvas__background-image--default');this.menuEl=this.offcanvasEl.find('.c-nav-primary');this.subMenus=this.menuEl.find('.sub-menu');this.menuItems=this.menuEl.find('.menu__item > a');this.menuItemsWithChildren=this.menuEl.find('.menu__item--has-children > a:not(.disable)');this.activeMenuItems=this.menuEl.find('.menu__item--ancestor');this.lastActiveBackgroundEl=this.defaultOffcanvasBackgroundEl;this.createBackButtons();this.setActiveSubMenus();this.bindEventListeners();}
_createClass(Offcanvas,[{key:"bindEventListeners",value:function bindEventListeners(){var _this=this;this.menuItemsWithChildren.on('click',this.revealSubMenu);this.menuEl.on('click','.menu__button',function(e){return _this.hideSubMenu(e);});this.menuEl.on('click','#Soneva',function(e){return _this.homepageLink(e);});this.offcanvasEl.on('click','.c-offcanvas__close',function(){return _this.resetState();});this.menuItems.on('mouseover',function(e){return _this.showRelatedBackground(e);});}},{key:"revealSubMenu",value:function revealSubMenu(event){event.preventDefault();var menuItem=jquery__WEBPACK_IMPORTED_MODULE_0___default()(event.target).parent();menuItem.find('> .sub-menu').addClass('is-active');}},{key:"homepageLink",value:function homepageLink(event){event.preventDefault();var subMenu=jquery__WEBPACK_IMPORTED_MODULE_0___default()(event.target).parent();subMenu.addClass('is-active');if(document.documentElement.lang=='en-US'){window.location.href='/';}else if(document.documentElement.lang=='ar'){window.location.href='/ar/';}else if(document.documentElement.lang=='ru-RU'){window.location.href='/ru/';}}},{key:"hideSubMenu",value:function hideSubMenu(event){event.preventDefault();var subMenu=jquery__WEBPACK_IMPORTED_MODULE_0___default()(event.target).parent();subMenu.removeClass('is-active');this.offcanvasBackgroundEl.removeClass('is-active');this.defaultOffcanvasBackgroundEl.addClass('is-active');}},{key:"createBackButtons",value:function createBackButtons(){this.subMenus.each(function(){var subMenuEl=jquery__WEBPACK_IMPORTED_MODULE_0___default()(this);var parentEl=subMenuEl.parents('li').parents('li').find('> a');var backButtonText='';if(parentEl.length){backButtonText=parentEl.text();}else{backButtonText=window.cnModuleOffcanvas.homeLabel;}
jquery__WEBPACK_IMPORTED_MODULE_0___default()('<button id="'+backButtonText+'" class="menu__button"/>').prependTo(subMenuEl).text(backButtonText);});}},{key:"showRelatedBackground",value:function showRelatedBackground(event){var menuItemId=jquery__WEBPACK_IMPORTED_MODULE_0___default()(event.target).parent().attr('id');var relatedBackgroundEl=this.offcanvasEl.find('[data-menu-id="'+menuItemId+'"]');this.offcanvasBackgroundEl.removeClass('is-active');if(relatedBackgroundEl.length){this.lastActiveBackgroundEl=relatedBackgroundEl;relatedBackgroundEl.addClass('is-active');}else{this.lastActiveBackgroundEl.addClass('is-active');}}},{key:"setActiveSubMenus",value:function setActiveSubMenus(){this.activeMenuItems.filter(function(){var includeMenuItem=true;jquery__WEBPACK_IMPORTED_MODULE_0___default()(this).find('.menu__item--current').each(function(){var anchorEl=jquery__WEBPACK_IMPORTED_MODULE_0___default()(this).find('> a');var anchorUrl=anchorEl.attr('href');if(anchorUrl==='/'){includeMenuItem=false;}
if(anchorUrl.includes('/contact-us/')){includeMenuItem=false;}
if(anchorUrl.includes('/festivalofcolour/')){includeMenuItem=false;}});return includeMenuItem;}).each(function(){jquery__WEBPACK_IMPORTED_MODULE_0___default()(this).find('> .sub-menu').addClass('is-active');});this.offcanvasBackgroundEl.removeClass('is-active');this.offcanvasEl.find('.is-default').addClass('is-active');}},{key:"resetState",value:function resetState(){var _this2=this;jquery__WEBPACK_IMPORTED_MODULE_0___default()('body').removeClass('navigation--is-active');setTimeout(function(){_this2.subMenus.removeClass('is-active');_this2.setActiveSubMenus();},1000);}}]);return Offcanvas;}();__webpack_exports__["default"]=(Offcanvas);}),"./assets/js/modules/TabbedContent.js":
/*!********************************************!*\
  !*** ./assets/js/modules/TabbedContent.js ***!
  \********************************************/
/*! exports provided: default */
(function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var jquery__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(
/*! jquery */
"jquery");var jquery__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(jquery__WEBPACK_IMPORTED_MODULE_0__);function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
var TabbedContent=function TabbedContent(){_classCallCheck(this,TabbedContent);jquery__WEBPACK_IMPORTED_MODULE_0___default()('.c-tabbed-content--inner-villa .c-tabbed-content__tabs li a:contains("Photos")').addClass("photos");jquery__WEBPACK_IMPORTED_MODULE_0___default()('.c-tabbed-content--inner-villa .c-tabbed-content__tabs li a:contains("Video")').addClass("video");jquery__WEBPACK_IMPORTED_MODULE_0___default()('.c-tabbed-content--inner-villa .c-tabbed-content__tabs li a:contains("Floorplan")').addClass("floorplan");jquery__WEBPACK_IMPORTED_MODULE_0___default()('.c-tabbed-content--inner-villa .c-tabbed-content__tabs li a:contains("360")').addClass("three-sixty");jquery__WEBPACK_IMPORTED_MODULE_0___default()('.c-tabbed-content--inner-villa .c-tabbed-content__tabs li a:contains("Map")').addClass("map");};__webpack_exports__["default"]=(TabbedContent);}),"jquery":
/*!*************************!*\
  !*** external "jQuery" ***!
  \*************************/
/*! no static exports found */
(function(module,exports){module.exports=jQuery;})});
(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports;}
var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports;}
__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.i=function(value){return value;};__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{configurable:false,enumerable:true,get:getter});}};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module['default'];}:function getModuleExports(){return module;};__webpack_require__.d(getter,'a',getter);return getter;};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property);};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=6);})
([(function(module,exports){module.exports=jQuery;}),(function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return rtl;});__webpack_require__.d(__webpack_exports__,"b",function(){return GetYoDigits;});__webpack_require__.d(__webpack_exports__,"c",function(){return transitionend;});var __WEBPACK_IMPORTED_MODULE_0_jquery__=__webpack_require__(0);var __WEBPACK_IMPORTED_MODULE_0_jquery___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_jquery__);function rtl(){return __WEBPACK_IMPORTED_MODULE_0_jquery___default()('html').attr('dir')==='rtl';}
function GetYoDigits(length,namespace){length=length||6;return Math.round(Math.pow(36,length+1)-Math.random()*Math.pow(36,length)).toString(36).slice(1)+(namespace?'-'+namespace:'');}
function transitionend($elem){var transitions={'transition':'transitionend','WebkitTransition':'webkitTransitionEnd','MozTransition':'transitionend','OTransition':'otransitionend'};var elem=document.createElement('div'),end;for(var t in transitions){if(typeof elem.style[t]!=='undefined'){end=transitions[t];}}
if(end){return end;}else{end=setTimeout(function(){$elem.triggerHandler('transitionend',[$elem]);},1);return'transitionend';}}}),(function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:true});var __WEBPACK_IMPORTED_MODULE_0_jquery__=__webpack_require__(0);var __WEBPACK_IMPORTED_MODULE_0_jquery___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_jquery__);var __WEBPACK_IMPORTED_MODULE_1__foundation_core__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_2__foundation_util_core__=__webpack_require__(1);var __WEBPACK_IMPORTED_MODULE_3__foundation_plugin__=__webpack_require__(4);__WEBPACK_IMPORTED_MODULE_1__foundation_core__["a"].addToJquery(__WEBPACK_IMPORTED_MODULE_0_jquery___default.a);__WEBPACK_IMPORTED_MODULE_1__foundation_core__["a"].rtl=__WEBPACK_IMPORTED_MODULE_2__foundation_util_core__["a"];__WEBPACK_IMPORTED_MODULE_1__foundation_core__["a"].GetYoDigits=__WEBPACK_IMPORTED_MODULE_2__foundation_util_core__["b"];__WEBPACK_IMPORTED_MODULE_1__foundation_core__["a"].transitionend=__WEBPACK_IMPORTED_MODULE_2__foundation_util_core__["c"];__WEBPACK_IMPORTED_MODULE_1__foundation_core__["a"].Plugin=__WEBPACK_IMPORTED_MODULE_3__foundation_plugin__["a"];window.Foundation=__WEBPACK_IMPORTED_MODULE_1__foundation_core__["a"];}),(function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return Foundation;});var __WEBPACK_IMPORTED_MODULE_0_jquery__=__webpack_require__(0);var __WEBPACK_IMPORTED_MODULE_0_jquery___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_jquery__);var __WEBPACK_IMPORTED_MODULE_1__foundation_util_core__=__webpack_require__(1);var __WEBPACK_IMPORTED_MODULE_2__foundation_util_mediaQuery__=__webpack_require__(5);var FOUNDATION_VERSION='6.4.3';var Foundation={version:FOUNDATION_VERSION,_plugins:{},_uuids:[],plugin:function(plugin,name){var className=name||functionName(plugin);var attrName=hyphenate(className);this._plugins[attrName]=this[className]=plugin;},registerPlugin:function(plugin,name){var pluginName=name?hyphenate(name):functionName(plugin.constructor).toLowerCase();plugin.uuid=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__foundation_util_core__["b"])(6,pluginName);if(!plugin.$element.attr('data-'+pluginName)){plugin.$element.attr('data-'+pluginName,plugin.uuid);}
if(!plugin.$element.data('zfPlugin')){plugin.$element.data('zfPlugin',plugin);}
plugin.$element.trigger('init.zf.'+pluginName);this._uuids.push(plugin.uuid);return;},unregisterPlugin:function(plugin){var pluginName=hyphenate(functionName(plugin.$element.data('zfPlugin').constructor));this._uuids.splice(this._uuids.indexOf(plugin.uuid),1);plugin.$element.removeAttr('data-'+pluginName).removeData('zfPlugin').trigger('destroyed.zf.'+pluginName);for(var prop in plugin){plugin[prop]=null;}
return;},reInit:function(plugins){var isJQ=plugins instanceof __WEBPACK_IMPORTED_MODULE_0_jquery___default.a;try{if(isJQ){plugins.each(function(){__WEBPACK_IMPORTED_MODULE_0_jquery___default()(this).data('zfPlugin')._init();});}else{var type=typeof plugins,_this=this,fns={'object':function(plgs){plgs.forEach(function(p){p=hyphenate(p);__WEBPACK_IMPORTED_MODULE_0_jquery___default()('[data-'+p+']').foundation('_init');});},'string':function(){plugins=hyphenate(plugins);__WEBPACK_IMPORTED_MODULE_0_jquery___default()('[data-'+plugins+']').foundation('_init');},'undefined':function(){this['object'](Object.keys(_this._plugins));}};fns[type](plugins);}}catch(err){console.error(err);}finally{return plugins;}},reflow:function(elem,plugins){if(typeof plugins==='undefined'){plugins=Object.keys(this._plugins);}
else if(typeof plugins==='string'){plugins=[plugins];}
var _this=this;__WEBPACK_IMPORTED_MODULE_0_jquery___default.a.each(plugins,function(i,name){var plugin=_this._plugins[name];var $elem=__WEBPACK_IMPORTED_MODULE_0_jquery___default()(elem).find('[data-'+name+']').addBack('[data-'+name+']');$elem.each(function(){var $el=__WEBPACK_IMPORTED_MODULE_0_jquery___default()(this),opts={};if($el.data('zfPlugin')){console.warn("Tried to initialize "+name+" on an element that already has a Foundation plugin.");return;}
if($el.attr('data-options')){var thing=$el.attr('data-options').split(';').forEach(function(e,i){var opt=e.split(':').map(function(el){return el.trim();});if(opt[0])opts[opt[0]]=parseValue(opt[1]);});}
try{$el.data('zfPlugin',new plugin(__WEBPACK_IMPORTED_MODULE_0_jquery___default()(this),opts));}catch(er){console.error(er);}finally{return;}});});},getFnName:functionName,addToJquery:function($){var foundation=function(method){var type=typeof method,$noJS=$('.no-js');if($noJS.length){$noJS.removeClass('no-js');}
if(type==='undefined'){__WEBPACK_IMPORTED_MODULE_2__foundation_util_mediaQuery__["a"]._init();Foundation.reflow(this);}else if(type==='string'){var args=Array.prototype.slice.call(arguments,1);var plugClass=this.data('zfPlugin');if(plugClass!==undefined&&plugClass[method]!==undefined){if(this.length===1){plugClass[method].apply(plugClass,args);}else{this.each(function(i,el){plugClass[method].apply($(el).data('zfPlugin'),args);});}}else{throw new ReferenceError("We're sorry, '"+method+"' is not an available method for "+(plugClass?functionName(plugClass):'this element')+'.');}}else{throw new TypeError('We\'re sorry, '+type+' is not a valid parameter. You must use a string representing the method you wish to invoke.');}
return this;};$.fn.foundation=foundation;return $;}};Foundation.util={throttle:function(func,delay){var timer=null;return function(){var context=this,args=arguments;if(timer===null){timer=setTimeout(function(){func.apply(context,args);timer=null;},delay);}};}};window.Foundation=Foundation;(function(){if(!Date.now||!window.Date.now)window.Date.now=Date.now=function(){return new Date().getTime();};var vendors=['webkit','moz'];for(var i=0;i<vendors.length&&!window.requestAnimationFrame;++i){var vp=vendors[i];window.requestAnimationFrame=window[vp+'RequestAnimationFrame'];window.cancelAnimationFrame=window[vp+'CancelAnimationFrame']||window[vp+'CancelRequestAnimationFrame'];}
if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var lastTime=0;window.requestAnimationFrame=function(callback){var now=Date.now();var nextTime=Math.max(lastTime+16,now);return setTimeout(function(){callback(lastTime=nextTime);},nextTime-now);};window.cancelAnimationFrame=clearTimeout;}
if(!window.performance||!window.performance.now){window.performance={start:Date.now(),now:function(){return Date.now()-this.start;}};}})();if(!Function.prototype.bind){Function.prototype.bind=function(oThis){if(typeof this!=='function'){throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');}
var aArgs=Array.prototype.slice.call(arguments,1),fToBind=this,fNOP=function(){},fBound=function(){return fToBind.apply(this instanceof fNOP?this:oThis,aArgs.concat(Array.prototype.slice.call(arguments)));};if(this.prototype){fNOP.prototype=this.prototype;}
fBound.prototype=new fNOP();return fBound;};}
function functionName(fn){if(Function.prototype.name===undefined){var funcNameRegex=/function\s([^(]{1,})\(/;var results=funcNameRegex.exec(fn.toString());return results&&results.length>1?results[1].trim():"";}else if(fn.prototype===undefined){return fn.constructor.name;}else{return fn.prototype.constructor.name;}}
function parseValue(str){if('true'===str)return true;else if('false'===str)return false;else if(!isNaN(str*1))return parseFloat(str);return str;}
function hyphenate(str){return str.replace(/([a-z])([A-Z])/g,'$1-$2').toLowerCase();}}),(function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return Plugin;});var __WEBPACK_IMPORTED_MODULE_0_jquery__=__webpack_require__(0);var __WEBPACK_IMPORTED_MODULE_0_jquery___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_jquery__);var __WEBPACK_IMPORTED_MODULE_1__foundation_util_core__=__webpack_require__(1);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
var Plugin=function(){function Plugin(element,options){_classCallCheck(this,Plugin);this._setup(element,options);var pluginName=getPluginName(this);this.uuid=__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1__foundation_util_core__["b"])(6,pluginName);if(!this.$element.attr('data-'+pluginName)){this.$element.attr('data-'+pluginName,this.uuid);}
if(!this.$element.data('zfPlugin')){this.$element.data('zfPlugin',this);}
this.$element.trigger('init.zf.'+pluginName);}
_createClass(Plugin,[{key:'destroy',value:function destroy(){this._destroy();var pluginName=getPluginName(this);this.$element.removeAttr('data-'+pluginName).removeData('zfPlugin').trigger('destroyed.zf.'+pluginName);for(var prop in this){this[prop]=null;}}}]);return Plugin;}();function hyphenate(str){return str.replace(/([a-z])([A-Z])/g,'$1-$2').toLowerCase();}
function getPluginName(obj){if(typeof obj.constructor.name!=='undefined'){return hyphenate(obj.constructor.name);}else{return hyphenate(obj.className);}}}),(function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return MediaQuery;});var __WEBPACK_IMPORTED_MODULE_0_jquery__=__webpack_require__(0);var __WEBPACK_IMPORTED_MODULE_0_jquery___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_jquery__);var defaultQueries={'default':'only screen',landscape:'only screen and (orientation: landscape)',portrait:'only screen and (orientation: portrait)',retina:'only screen and (-webkit-min-device-pixel-ratio: 2),'+'only screen and (min--moz-device-pixel-ratio: 2),'+'only screen and (-o-min-device-pixel-ratio: 2/1),'+'only screen and (min-device-pixel-ratio: 2),'+'only screen and (min-resolution: 192dpi),'+'only screen and (min-resolution: 2dppx)'};var matchMedia=window.matchMedia||function(){'use strict';var styleMedia=window.styleMedia||window.media;if(!styleMedia){var style=document.createElement('style'),script=document.getElementsByTagName('script')[0],info=null;style.type='text/css';style.id='matchmediajs-test';script&&script.parentNode&&script.parentNode.insertBefore(style,script);info='getComputedStyle'in window&&window.getComputedStyle(style,null)||style.currentStyle;styleMedia={matchMedium:function(media){var text='@media '+media+'{ #matchmediajs-test { width: 1px; } }';if(style.styleSheet){style.styleSheet.cssText=text;}else{style.textContent=text;}
return info.width==='1px';}};}
return function(media){return{matches:styleMedia.matchMedium(media||'all'),media:media||'all'};};}();var MediaQuery={queries:[],current:'',_init:function(){var self=this;var $meta=__WEBPACK_IMPORTED_MODULE_0_jquery___default()('meta.foundation-mq');if(!$meta.length){__WEBPACK_IMPORTED_MODULE_0_jquery___default()('<meta class="foundation-mq">').appendTo(document.head);}
var extractedStyles=__WEBPACK_IMPORTED_MODULE_0_jquery___default()('.foundation-mq').css('font-family');var namedQueries;namedQueries=parseStyleToObject(extractedStyles);for(var key in namedQueries){if(namedQueries.hasOwnProperty(key)){self.queries.push({name:key,value:'only screen and (min-width: '+namedQueries[key]+')'});}}
this.current=this._getCurrentSize();this._watcher();},atLeast:function(size){var query=this.get(size);if(query){return matchMedia(query).matches;}
return false;},is:function(size){size=size.trim().split(' ');if(size.length>1&&size[1]==='only'){if(size[0]===this._getCurrentSize())return true;}else{return this.atLeast(size[0]);}
return false;},get:function(size){for(var i in this.queries){if(this.queries.hasOwnProperty(i)){var query=this.queries[i];if(size===query.name)return query.value;}}
return null;},_getCurrentSize:function(){var matched;for(var i=0;i<this.queries.length;i++){var query=this.queries[i];if(matchMedia(query.value).matches){matched=query;}}
if(typeof matched==='object'){return matched.name;}else{return matched;}},_watcher:function(){var _this=this;__WEBPACK_IMPORTED_MODULE_0_jquery___default()(window).off('resize.zf.mediaquery').on('resize.zf.mediaquery',function(){var newSize=_this._getCurrentSize(),currentSize=_this.current;if(newSize!==currentSize){_this.current=newSize;__WEBPACK_IMPORTED_MODULE_0_jquery___default()(window).trigger('changed.zf.mediaquery',[newSize,currentSize]);}});}};function parseStyleToObject(str){var styleObject={};if(typeof str!=='string'){return styleObject;}
str=str.trim().slice(1,-1);if(!str){return styleObject;}
styleObject=str.split('&').reduce(function(ret,param){var parts=param.replace(/\+/g,' ').split('=');var key=parts[0];var val=parts[1];key=decodeURIComponent(key);val=val===undefined?null:decodeURIComponent(val);if(!ret.hasOwnProperty(key)){ret[key]=val;}else if(Array.isArray(ret[key])){ret[key].push(val);}else{ret[key]=[ret[key],val];}
return ret;},{});return styleObject;}}),(function(module,exports,__webpack_require__){module.exports=__webpack_require__(2);})]);
(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports;}
var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports;}
__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.i=function(value){return value;};__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{configurable:false,enumerable:true,get:getter});}};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module['default'];}:function getModuleExports(){return module;};__webpack_require__.d(getter,'a',getter);return getter;};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property);};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=85);})
({0:(function(module,exports){module.exports=jQuery;}),1:(function(module,exports){module.exports={Foundation:window.Foundation};}),10:(function(module,exports){module.exports={onImagesLoaded:window.Foundation.onImagesLoaded};}),19:(function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:true});var __WEBPACK_IMPORTED_MODULE_0__foundation_core__=__webpack_require__(1);var __WEBPACK_IMPORTED_MODULE_0__foundation_core___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__foundation_core__);var __WEBPACK_IMPORTED_MODULE_1__foundation_equalizer__=__webpack_require__(49);__WEBPACK_IMPORTED_MODULE_0__foundation_core__["Foundation"].plugin(__WEBPACK_IMPORTED_MODULE_1__foundation_equalizer__["a"],'Equalizer');}),2:(function(module,exports){module.exports={Plugin:window.Foundation.Plugin};}),3:(function(module,exports){module.exports={rtl:window.Foundation.rtl,GetYoDigits:window.Foundation.GetYoDigits,transitionend:window.Foundation.transitionend};}),49:(function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return Equalizer;});var __WEBPACK_IMPORTED_MODULE_0_jquery__=__webpack_require__(0);var __WEBPACK_IMPORTED_MODULE_0_jquery___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_jquery__);var __WEBPACK_IMPORTED_MODULE_1__foundation_util_mediaQuery__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_1__foundation_util_mediaQuery___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__foundation_util_mediaQuery__);var __WEBPACK_IMPORTED_MODULE_2__foundation_util_imageLoader__=__webpack_require__(10);var __WEBPACK_IMPORTED_MODULE_2__foundation_util_imageLoader___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2__foundation_util_imageLoader__);var __WEBPACK_IMPORTED_MODULE_3__foundation_util_core__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_3__foundation_util_core___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__foundation_util_core__);var __WEBPACK_IMPORTED_MODULE_4__foundation_plugin__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_4__foundation_plugin___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__foundation_plugin__);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}
function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError("this hasn't been initialised - super() hasn't been called");}return call&&(typeof call==="object"||typeof call==="function")?call:self;}
function _inherits(subClass,superClass){if(typeof superClass!=="function"&&superClass!==null){throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}
var Equalizer=function(_Plugin){_inherits(Equalizer,_Plugin);function Equalizer(){_classCallCheck(this,Equalizer);return _possibleConstructorReturn(this,(Equalizer.__proto__||Object.getPrototypeOf(Equalizer)).apply(this,arguments));}
_createClass(Equalizer,[{key:'_setup',value:function _setup(element,options){this.$element=element;this.options=__WEBPACK_IMPORTED_MODULE_0_jquery___default.a.extend({},Equalizer.defaults,this.$element.data(),options);this.className='Equalizer';this._init();}},{key:'_init',value:function _init(){var eqId=this.$element.attr('data-equalizer')||'';var $watched=this.$element.find('[data-equalizer-watch="'+eqId+'"]');__WEBPACK_IMPORTED_MODULE_1__foundation_util_mediaQuery__["MediaQuery"]._init();this.$watched=$watched.length?$watched:this.$element.find('[data-equalizer-watch]');this.$element.attr('data-resize',eqId||__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__foundation_util_core__["GetYoDigits"])(6,'eq'));this.$element.attr('data-mutate',eqId||__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_3__foundation_util_core__["GetYoDigits"])(6,'eq'));this.hasNested=this.$element.find('[data-equalizer]').length>0;this.isNested=this.$element.parentsUntil(document.body,'[data-equalizer]').length>0;this.isOn=false;this._bindHandler={onResizeMeBound:this._onResizeMe.bind(this),onPostEqualizedBound:this._onPostEqualized.bind(this)};var imgs=this.$element.find('img');var tooSmall;if(this.options.equalizeOn){tooSmall=this._checkMQ();__WEBPACK_IMPORTED_MODULE_0_jquery___default()(window).on('changed.zf.mediaquery',this._checkMQ.bind(this));}else{this._events();}
if(tooSmall!==undefined&&tooSmall===false||tooSmall===undefined){if(imgs.length){__webpack_require__.i(__WEBPACK_IMPORTED_MODULE_2__foundation_util_imageLoader__["onImagesLoaded"])(imgs,this._reflow.bind(this));}else{this._reflow();}}}},{key:'_pauseEvents',value:function _pauseEvents(){this.isOn=false;this.$element.off({'.zf.equalizer':this._bindHandler.onPostEqualizedBound,'resizeme.zf.trigger':this._bindHandler.onResizeMeBound,'mutateme.zf.trigger':this._bindHandler.onResizeMeBound});}},{key:'_onResizeMe',value:function _onResizeMe(e){this._reflow();}},{key:'_onPostEqualized',value:function _onPostEqualized(e){if(e.target!==this.$element[0]){this._reflow();}}},{key:'_events',value:function _events(){var _this=this;this._pauseEvents();if(this.hasNested){this.$element.on('postequalized.zf.equalizer',this._bindHandler.onPostEqualizedBound);}else{this.$element.on('resizeme.zf.trigger',this._bindHandler.onResizeMeBound);this.$element.on('mutateme.zf.trigger',this._bindHandler.onResizeMeBound);}
this.isOn=true;}},{key:'_checkMQ',value:function _checkMQ(){var tooSmall=!__WEBPACK_IMPORTED_MODULE_1__foundation_util_mediaQuery__["MediaQuery"].is(this.options.equalizeOn);if(tooSmall){if(this.isOn){this._pauseEvents();this.$watched.css('height','auto');}}else{if(!this.isOn){this._events();}}
return tooSmall;}},{key:'_killswitch',value:function _killswitch(){return;}},{key:'_reflow',value:function _reflow(){if(!this.options.equalizeOnStack){if(this._isStacked()){this.$watched.css('height','auto');return false;}}
if(this.options.equalizeByRow){this.getHeightsByRow(this.applyHeightByRow.bind(this));}else{this.getHeights(this.applyHeight.bind(this));}}},{key:'_isStacked',value:function _isStacked(){if(!this.$watched[0]||!this.$watched[1]){return true;}
return this.$watched[0].getBoundingClientRect().top!==this.$watched[1].getBoundingClientRect().top;}},{key:'getHeights',value:function getHeights(cb){var heights=[];for(var i=0,len=this.$watched.length;i<len;i++){this.$watched[i].style.height='auto';heights.push(this.$watched[i].offsetHeight);}
cb(heights);}},{key:'getHeightsByRow',value:function getHeightsByRow(cb){var lastElTopOffset=this.$watched.length?this.$watched.first().offset().top:0,groups=[],group=0;groups[group]=[];for(var i=0,len=this.$watched.length;i<len;i++){this.$watched[i].style.height='auto';var elOffsetTop=__WEBPACK_IMPORTED_MODULE_0_jquery___default()(this.$watched[i]).offset().top;if(elOffsetTop!=lastElTopOffset){group++;groups[group]=[];lastElTopOffset=elOffsetTop;}
groups[group].push([this.$watched[i],this.$watched[i].offsetHeight]);}
for(var j=0,ln=groups.length;j<ln;j++){var heights=__WEBPACK_IMPORTED_MODULE_0_jquery___default()(groups[j]).map(function(){return this[1];}).get();var max=Math.max.apply(null,heights);groups[j].push(max);}
cb(groups);}},{key:'applyHeight',value:function applyHeight(heights){var max=Math.max.apply(null,heights);this.$element.trigger('preequalized.zf.equalizer');this.$watched.css('height',max);this.$element.trigger('postequalized.zf.equalizer');}},{key:'applyHeightByRow',value:function applyHeightByRow(groups){this.$element.trigger('preequalized.zf.equalizer');for(var i=0,len=groups.length;i<len;i++){var groupsILength=groups[i].length,max=groups[i][groupsILength-1];if(groupsILength<=2){__WEBPACK_IMPORTED_MODULE_0_jquery___default()(groups[i][0][0]).css({'height':'auto'});continue;}
this.$element.trigger('preequalizedrow.zf.equalizer');for(var j=0,lenJ=groupsILength-1;j<lenJ;j++){__WEBPACK_IMPORTED_MODULE_0_jquery___default()(groups[i][j][0]).css({'height':max});}
this.$element.trigger('postequalizedrow.zf.equalizer');}
this.$element.trigger('postequalized.zf.equalizer');}},{key:'_destroy',value:function _destroy(){this._pauseEvents();this.$watched.css('height','auto');}}]);return Equalizer;}(__WEBPACK_IMPORTED_MODULE_4__foundation_plugin__["Plugin"]);Equalizer.defaults={equalizeOnStack:false,equalizeByRow:false,equalizeOn:''};}),6:(function(module,exports){module.exports={MediaQuery:window.Foundation.MediaQuery};}),85:(function(module,exports,__webpack_require__){module.exports=__webpack_require__(19);})});
(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports;}
var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports;}
__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.i=function(value){return value;};__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{configurable:false,enumerable:true,get:getter});}};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module['default'];}:function getModuleExports(){return module;};__webpack_require__.d(getter,'a',getter);return getter;};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property);};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=103);})
({0:(function(module,exports){module.exports=jQuery;}),1:(function(module,exports){module.exports={Foundation:window.Foundation};}),103:(function(module,exports,__webpack_require__){module.exports=__webpack_require__(37);}),37:(function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:true});var __WEBPACK_IMPORTED_MODULE_0__foundation_core__=__webpack_require__(1);var __WEBPACK_IMPORTED_MODULE_0__foundation_core___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__foundation_core__);var __WEBPACK_IMPORTED_MODULE_1__foundation_util_mediaQuery__=__webpack_require__(67);__WEBPACK_IMPORTED_MODULE_0__foundation_core__["Foundation"].MediaQuery=__WEBPACK_IMPORTED_MODULE_1__foundation_util_mediaQuery__["a"];__WEBPACK_IMPORTED_MODULE_0__foundation_core__["Foundation"].MediaQuery._init();}),67:(function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return MediaQuery;});var __WEBPACK_IMPORTED_MODULE_0_jquery__=__webpack_require__(0);var __WEBPACK_IMPORTED_MODULE_0_jquery___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_jquery__);var defaultQueries={'default':'only screen',landscape:'only screen and (orientation: landscape)',portrait:'only screen and (orientation: portrait)',retina:'only screen and (-webkit-min-device-pixel-ratio: 2),'+'only screen and (min--moz-device-pixel-ratio: 2),'+'only screen and (-o-min-device-pixel-ratio: 2/1),'+'only screen and (min-device-pixel-ratio: 2),'+'only screen and (min-resolution: 192dpi),'+'only screen and (min-resolution: 2dppx)'};var matchMedia=window.matchMedia||function(){'use strict';var styleMedia=window.styleMedia||window.media;if(!styleMedia){var style=document.createElement('style'),script=document.getElementsByTagName('script')[0],info=null;style.type='text/css';style.id='matchmediajs-test';script&&script.parentNode&&script.parentNode.insertBefore(style,script);info='getComputedStyle'in window&&window.getComputedStyle(style,null)||style.currentStyle;styleMedia={matchMedium:function(media){var text='@media '+media+'{ #matchmediajs-test { width: 1px; } }';if(style.styleSheet){style.styleSheet.cssText=text;}else{style.textContent=text;}
return info.width==='1px';}};}
return function(media){return{matches:styleMedia.matchMedium(media||'all'),media:media||'all'};};}();var MediaQuery={queries:[],current:'',_init:function(){var self=this;var $meta=__WEBPACK_IMPORTED_MODULE_0_jquery___default()('meta.foundation-mq');if(!$meta.length){__WEBPACK_IMPORTED_MODULE_0_jquery___default()('<meta class="foundation-mq">').appendTo(document.head);}
var extractedStyles=__WEBPACK_IMPORTED_MODULE_0_jquery___default()('.foundation-mq').css('font-family');var namedQueries;namedQueries=parseStyleToObject(extractedStyles);for(var key in namedQueries){if(namedQueries.hasOwnProperty(key)){self.queries.push({name:key,value:'only screen and (min-width: '+namedQueries[key]+')'});}}
this.current=this._getCurrentSize();this._watcher();},atLeast:function(size){var query=this.get(size);if(query){return matchMedia(query).matches;}
return false;},is:function(size){size=size.trim().split(' ');if(size.length>1&&size[1]==='only'){if(size[0]===this._getCurrentSize())return true;}else{return this.atLeast(size[0]);}
return false;},get:function(size){for(var i in this.queries){if(this.queries.hasOwnProperty(i)){var query=this.queries[i];if(size===query.name)return query.value;}}
return null;},_getCurrentSize:function(){var matched;for(var i=0;i<this.queries.length;i++){var query=this.queries[i];if(matchMedia(query.value).matches){matched=query;}}
if(typeof matched==='object'){return matched.name;}else{return matched;}},_watcher:function(){var _this=this;__WEBPACK_IMPORTED_MODULE_0_jquery___default()(window).off('resize.zf.mediaquery').on('resize.zf.mediaquery',function(){var newSize=_this._getCurrentSize(),currentSize=_this.current;if(newSize!==currentSize){_this.current=newSize;__WEBPACK_IMPORTED_MODULE_0_jquery___default()(window).trigger('changed.zf.mediaquery',[newSize,currentSize]);}});}};function parseStyleToObject(str){var styleObject={};if(typeof str!=='string'){return styleObject;}
str=str.trim().slice(1,-1);if(!str){return styleObject;}
styleObject=str.split('&').reduce(function(ret,param){var parts=param.replace(/\+/g,' ').split('=');var key=parts[0];var val=parts[1];key=decodeURIComponent(key);val=val===undefined?null:decodeURIComponent(val);if(!ret.hasOwnProperty(key)){ret[key]=val;}else if(Array.isArray(ret[key])){ret[key].push(val);}else{ret[key]=[ret[key],val];}
return ret;},{});return styleObject;}})});
'use strict';!function($){function Timer(elem,options,cb){var _this=this,duration=options.duration,nameSpace=Object.keys(elem.data())[0]||'timer',remain=-1,start,timer;this.isPaused=false;this.restart=function(){remain=-1;clearTimeout(timer);this.start();};this.start=function(){this.isPaused=false;clearTimeout(timer);remain=remain<=0?duration:remain;elem.data('paused',false);start=Date.now();timer=setTimeout(function(){if(options.infinite){_this.restart();}
if(cb&&typeof cb==='function'){cb();}},remain);elem.trigger('timerstart.zf.'+nameSpace);};this.pause=function(){this.isPaused=true;clearTimeout(timer);elem.data('paused',true);var end=Date.now();remain=remain-(end-start);elem.trigger('timerpaused.zf.'+nameSpace);};}
function onImagesLoaded(images,callback){var self=this,unloaded=images.length;if(unloaded===0){callback();}
images.each(function(){if(this.complete||this.readyState===4||this.readyState==='complete'){singleImageLoaded();}
else{var src=$(this).attr('src');$(this).attr('src',src+(src.indexOf('?')>=0?'&':'?')+new Date().getTime());$(this).one('load',function(){singleImageLoaded();});}});function singleImageLoaded(){unloaded--;if(unloaded===0){callback();}}}
Foundation.Timer=Timer;Foundation.onImagesLoaded=onImagesLoaded;}(jQuery);
(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports;}
var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports;}
__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.i=function(value){return value;};__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{configurable:false,enumerable:true,get:getter});}};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module['default'];}:function getModuleExports(){return module;};__webpack_require__.d(getter,'a',getter);return getter;};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property);};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=108);})
({0:(function(module,exports){module.exports=jQuery;}),1:(function(module,exports){module.exports={Foundation:window.Foundation};}),108:(function(module,exports,__webpack_require__){module.exports=__webpack_require__(42);}),4:(function(module,exports){module.exports={Motion:window.Foundation.Motion,Move:window.Foundation.Move};}),42:(function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:true});var __WEBPACK_IMPORTED_MODULE_0__foundation_core__=__webpack_require__(1);var __WEBPACK_IMPORTED_MODULE_0__foundation_core___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__foundation_core__);var __WEBPACK_IMPORTED_MODULE_1_jquery__=__webpack_require__(0);var __WEBPACK_IMPORTED_MODULE_1_jquery___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_jquery__);var __WEBPACK_IMPORTED_MODULE_2__foundation_util_triggers__=__webpack_require__(7);__WEBPACK_IMPORTED_MODULE_2__foundation_util_triggers__["a"].init(__WEBPACK_IMPORTED_MODULE_1_jquery___default.a,__WEBPACK_IMPORTED_MODULE_0__foundation_core__["Foundation"]);}),7:(function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return Triggers;});var __WEBPACK_IMPORTED_MODULE_0_jquery__=__webpack_require__(0);var __WEBPACK_IMPORTED_MODULE_0_jquery___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_jquery__);var __WEBPACK_IMPORTED_MODULE_1__foundation_util_motion__=__webpack_require__(4);var __WEBPACK_IMPORTED_MODULE_1__foundation_util_motion___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__foundation_util_motion__);var MutationObserver=function(){var prefixes=['WebKit','Moz','O','Ms',''];for(var i=0;i<prefixes.length;i++){if(prefixes[i]+'MutationObserver'in window){return window[prefixes[i]+'MutationObserver'];}}
return false;}();var triggers=function(el,type){el.data(type).split(' ').forEach(function(id){__WEBPACK_IMPORTED_MODULE_0_jquery___default()('#'+id)[type==='close'?'trigger':'triggerHandler'](type+'.zf.trigger',[el]);});};var Triggers={Listeners:{Basic:{},Global:{}},Initializers:{}};Triggers.Listeners.Basic={openListener:function(){triggers(__WEBPACK_IMPORTED_MODULE_0_jquery___default()(this),'open');},closeListener:function(){var id=__WEBPACK_IMPORTED_MODULE_0_jquery___default()(this).data('close');if(id){triggers(__WEBPACK_IMPORTED_MODULE_0_jquery___default()(this),'close');}else{__WEBPACK_IMPORTED_MODULE_0_jquery___default()(this).trigger('close.zf.trigger');}},toggleListener:function(){var id=__WEBPACK_IMPORTED_MODULE_0_jquery___default()(this).data('toggle');if(id){triggers(__WEBPACK_IMPORTED_MODULE_0_jquery___default()(this),'toggle');}else{__WEBPACK_IMPORTED_MODULE_0_jquery___default()(this).trigger('toggle.zf.trigger');}},closeableListener:function(e){e.stopPropagation();var animation=__WEBPACK_IMPORTED_MODULE_0_jquery___default()(this).data('closable');if(animation!==''){__WEBPACK_IMPORTED_MODULE_1__foundation_util_motion__["Motion"].animateOut(__WEBPACK_IMPORTED_MODULE_0_jquery___default()(this),animation,function(){__WEBPACK_IMPORTED_MODULE_0_jquery___default()(this).trigger('closed.zf');});}else{__WEBPACK_IMPORTED_MODULE_0_jquery___default()(this).fadeOut().trigger('closed.zf');}},toggleFocusListener:function(){var id=__WEBPACK_IMPORTED_MODULE_0_jquery___default()(this).data('toggle-focus');__WEBPACK_IMPORTED_MODULE_0_jquery___default()('#'+id).triggerHandler('toggle.zf.trigger',[__WEBPACK_IMPORTED_MODULE_0_jquery___default()(this)]);}};Triggers.Initializers.addOpenListener=function($elem){$elem.off('click.zf.trigger',Triggers.Listeners.Basic.openListener);$elem.on('click.zf.trigger','[data-open]',Triggers.Listeners.Basic.openListener);};Triggers.Initializers.addCloseListener=function($elem){$elem.off('click.zf.trigger',Triggers.Listeners.Basic.closeListener);$elem.on('click.zf.trigger','[data-close]',Triggers.Listeners.Basic.closeListener);};Triggers.Initializers.addToggleListener=function($elem){$elem.off('click.zf.trigger',Triggers.Listeners.Basic.toggleListener);$elem.on('click.zf.trigger','[data-toggle]',Triggers.Listeners.Basic.toggleListener);};Triggers.Initializers.addCloseableListener=function($elem){$elem.off('close.zf.trigger',Triggers.Listeners.Basic.closeableListener);$elem.on('close.zf.trigger','[data-closeable], [data-closable]',Triggers.Listeners.Basic.closeableListener);};Triggers.Initializers.addToggleFocusListener=function($elem){$elem.off('focus.zf.trigger blur.zf.trigger',Triggers.Listeners.Basic.toggleFocusListener);$elem.on('focus.zf.trigger blur.zf.trigger','[data-toggle-focus]',Triggers.Listeners.Basic.toggleFocusListener);};Triggers.Listeners.Global={resizeListener:function($nodes){if(!MutationObserver){$nodes.each(function(){__WEBPACK_IMPORTED_MODULE_0_jquery___default()(this).triggerHandler('resizeme.zf.trigger');});}
$nodes.attr('data-events',"resize");},scrollListener:function($nodes){if(!MutationObserver){$nodes.each(function(){__WEBPACK_IMPORTED_MODULE_0_jquery___default()(this).triggerHandler('scrollme.zf.trigger');});}
$nodes.attr('data-events',"scroll");},closeMeListener:function(e,pluginId){var plugin=e.namespace.split('.')[0];var plugins=__WEBPACK_IMPORTED_MODULE_0_jquery___default()('[data-'+plugin+']').not('[data-yeti-box="'+pluginId+'"]');plugins.each(function(){var _this=__WEBPACK_IMPORTED_MODULE_0_jquery___default()(this);_this.triggerHandler('close.zf.trigger',[_this]);});}};Triggers.Initializers.addClosemeListener=function(pluginName){var yetiBoxes=__WEBPACK_IMPORTED_MODULE_0_jquery___default()('[data-yeti-box]'),plugNames=['dropdown','tooltip','reveal'];if(pluginName){if(typeof pluginName==='string'){plugNames.push(pluginName);}else if(typeof pluginName==='object'&&typeof pluginName[0]==='string'){plugNames.concat(pluginName);}else{console.error('Plugin names must be strings');}}
if(yetiBoxes.length){var listeners=plugNames.map(function(name){return'closeme.zf.'+name;}).join(' ');__WEBPACK_IMPORTED_MODULE_0_jquery___default()(window).off(listeners).on(listeners,Triggers.Listeners.Global.closeMeListener);}};function debounceGlobalListener(debounce,trigger,listener){var timer=void 0,args=Array.prototype.slice.call(arguments,3);__WEBPACK_IMPORTED_MODULE_0_jquery___default()(window).off(trigger).on(trigger,function(e){if(timer){clearTimeout(timer);}
timer=setTimeout(function(){listener.apply(null,args);},debounce||10);});}
Triggers.Initializers.addResizeListener=function(debounce){var $nodes=__WEBPACK_IMPORTED_MODULE_0_jquery___default()('[data-resize]');if($nodes.length){debounceGlobalListener(debounce,'resize.zf.trigger',Triggers.Listeners.Global.resizeListener,$nodes);}};Triggers.Initializers.addScrollListener=function(debounce){var $nodes=__WEBPACK_IMPORTED_MODULE_0_jquery___default()('[data-scroll]');if($nodes.length){debounceGlobalListener(debounce,'scroll.zf.trigger',Triggers.Listeners.Global.scrollListener,$nodes);}};Triggers.Initializers.addMutationEventsListener=function($elem){if(!MutationObserver){return false;}
var $nodes=$elem.find('[data-resize], [data-scroll], [data-mutate]');var listeningElementsMutation=function(mutationRecordsList){var $target=__WEBPACK_IMPORTED_MODULE_0_jquery___default()(mutationRecordsList[0].target);switch(mutationRecordsList[0].type){case"attributes":if($target.attr("data-events")==="scroll"&&mutationRecordsList[0].attributeName==="data-events"){$target.triggerHandler('scrollme.zf.trigger',[$target,window.pageYOffset]);}
if($target.attr("data-events")==="resize"&&mutationRecordsList[0].attributeName==="data-events"){$target.triggerHandler('resizeme.zf.trigger',[$target]);}
if(mutationRecordsList[0].attributeName==="style"){$target.closest("[data-mutate]").attr("data-events","mutate");$target.closest("[data-mutate]").triggerHandler('mutateme.zf.trigger',[$target.closest("[data-mutate]")]);}
break;case"childList":$target.closest("[data-mutate]").attr("data-events","mutate");$target.closest("[data-mutate]").triggerHandler('mutateme.zf.trigger',[$target.closest("[data-mutate]")]);break;default:return false;}};if($nodes.length){for(var i=0;i<=$nodes.length-1;i++){var elementObserver=new MutationObserver(listeningElementsMutation);elementObserver.observe($nodes[i],{attributes:true,childList:true,characterData:false,subtree:true,attributeFilter:["data-events","style"]});}}};Triggers.Initializers.addSimpleListeners=function(){var $document=__WEBPACK_IMPORTED_MODULE_0_jquery___default()(document);Triggers.Initializers.addOpenListener($document);Triggers.Initializers.addCloseListener($document);Triggers.Initializers.addToggleListener($document);Triggers.Initializers.addCloseableListener($document);Triggers.Initializers.addToggleFocusListener($document);};Triggers.Initializers.addGlobalListeners=function(){var $document=__WEBPACK_IMPORTED_MODULE_0_jquery___default()(document);Triggers.Initializers.addMutationEventsListener($document);Triggers.Initializers.addResizeListener();Triggers.Initializers.addScrollListener();Triggers.Initializers.addClosemeListener();};Triggers.init=function($,Foundation){if(typeof $.triggersInitialized==='undefined'){var $document=$(document);if(document.readyState==="complete"){Triggers.Initializers.addSimpleListeners();Triggers.Initializers.addGlobalListeners();}else{$(window).on('load',function(){Triggers.Initializers.addSimpleListeners();Triggers.Initializers.addGlobalListeners();});}
$.triggersInitialized=true;}
if(Foundation){Foundation.Triggers=Triggers;Foundation.IHearYou=Triggers.Initializers.addGlobalListeners;}};})});
/*!
Waypoints - 4.0.1
Copyright © 2011-2016 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blob/master/licenses.txt
*/
(function(){'use strict'
var keyCounter=0
var allWaypoints={}
function Waypoint(options){if(!options){throw new Error('No options passed to Waypoint constructor')}
if(!options.element){throw new Error('No element option passed to Waypoint constructor')}
if(!options.handler){throw new Error('No handler option passed to Waypoint constructor')}
this.key='waypoint-'+keyCounter
this.options=Waypoint.Adapter.extend({},Waypoint.defaults,options)
this.element=this.options.element
this.adapter=new Waypoint.Adapter(this.element)
this.callback=options.handler
this.axis=this.options.horizontal?'horizontal':'vertical'
this.enabled=this.options.enabled
this.triggerPoint=null
this.group=Waypoint.Group.findOrCreate({name:this.options.group,axis:this.axis})
this.context=Waypoint.Context.findOrCreateByElement(this.options.context)
if(Waypoint.offsetAliases[this.options.offset]){this.options.offset=Waypoint.offsetAliases[this.options.offset]}
this.group.add(this)
this.context.add(this)
allWaypoints[this.key]=this
keyCounter+=1}
Waypoint.prototype.queueTrigger=function(direction){this.group.queueTrigger(this,direction)}
Waypoint.prototype.trigger=function(args){if(!this.enabled){return}
if(this.callback){this.callback.apply(this,args)}}
Waypoint.prototype.destroy=function(){this.context.remove(this)
this.group.remove(this)
delete allWaypoints[this.key]}
Waypoint.prototype.disable=function(){this.enabled=false
return this}
Waypoint.prototype.enable=function(){this.context.refresh()
this.enabled=true
return this}
Waypoint.prototype.next=function(){return this.group.next(this)}
Waypoint.prototype.previous=function(){return this.group.previous(this)}
Waypoint.invokeAll=function(method){var allWaypointsArray=[]
for(var waypointKey in allWaypoints){allWaypointsArray.push(allWaypoints[waypointKey])}
for(var i=0,end=allWaypointsArray.length;i<end;i++){allWaypointsArray[i][method]()}}
Waypoint.destroyAll=function(){Waypoint.invokeAll('destroy')}
Waypoint.disableAll=function(){Waypoint.invokeAll('disable')}
Waypoint.enableAll=function(){Waypoint.Context.refreshAll()
for(var waypointKey in allWaypoints){allWaypoints[waypointKey].enabled=true}
return this}
Waypoint.refreshAll=function(){Waypoint.Context.refreshAll()}
Waypoint.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight}
Waypoint.viewportWidth=function(){return document.documentElement.clientWidth}
Waypoint.adapters=[]
Waypoint.defaults={context:window,continuous:true,enabled:true,group:'default',horizontal:false,offset:0}
Waypoint.offsetAliases={'bottom-in-view':function(){return this.context.innerHeight()-this.adapter.outerHeight()},'right-in-view':function(){return this.context.innerWidth()-this.adapter.outerWidth()}}
window.Waypoint=Waypoint}());(function(){'use strict'
function requestAnimationFrameShim(callback){window.setTimeout(callback,1000/60)}
var keyCounter=0
var contexts={}
var Waypoint=window.Waypoint
var oldWindowLoad=window.onload
function Context(element){this.element=element
this.Adapter=Waypoint.Adapter
this.adapter=new this.Adapter(element)
this.key='waypoint-context-'+keyCounter
this.didScroll=false
this.didResize=false
this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()}
this.waypoints={vertical:{},horizontal:{}}
element.waypointContextKey=this.key
contexts[element.waypointContextKey]=this
keyCounter+=1
if(!Waypoint.windowContext){Waypoint.windowContext=true
Waypoint.windowContext=new Context(window)}
this.createThrottledScrollHandler()
this.createThrottledResizeHandler()}
Context.prototype.add=function(waypoint){var axis=waypoint.options.horizontal?'horizontal':'vertical'
this.waypoints[axis][waypoint.key]=waypoint
this.refresh()}
Context.prototype.checkEmpty=function(){var horizontalEmpty=this.Adapter.isEmptyObject(this.waypoints.horizontal)
var verticalEmpty=this.Adapter.isEmptyObject(this.waypoints.vertical)
var isWindow=this.element==this.element.window
if(horizontalEmpty&&verticalEmpty&&!isWindow){this.adapter.off('.waypoints')
delete contexts[this.key]}}
Context.prototype.createThrottledResizeHandler=function(){var self=this
function resizeHandler(){self.handleResize()
self.didResize=false}
this.adapter.on('resize.waypoints',function(){if(!self.didResize){self.didResize=true
Waypoint.requestAnimationFrame(resizeHandler)}})}
Context.prototype.createThrottledScrollHandler=function(){var self=this
function scrollHandler(){self.handleScroll()
self.didScroll=false}
this.adapter.on('scroll.waypoints',function(){if(!self.didScroll||Waypoint.isTouch){self.didScroll=true
Waypoint.requestAnimationFrame(scrollHandler)}})}
Context.prototype.handleResize=function(){Waypoint.Context.refreshAll()}
Context.prototype.handleScroll=function(){var triggeredGroups={}
var axes={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:'right',backward:'left'},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:'down',backward:'up'}}
for(var axisKey in axes){var axis=axes[axisKey]
var isForward=axis.newScroll>axis.oldScroll
var direction=isForward?axis.forward:axis.backward
for(var waypointKey in this.waypoints[axisKey]){var waypoint=this.waypoints[axisKey][waypointKey]
if(waypoint.triggerPoint===null){continue}
var wasBeforeTriggerPoint=axis.oldScroll<waypoint.triggerPoint
var nowAfterTriggerPoint=axis.newScroll>=waypoint.triggerPoint
var crossedForward=wasBeforeTriggerPoint&&nowAfterTriggerPoint
var crossedBackward=!wasBeforeTriggerPoint&&!nowAfterTriggerPoint
if(crossedForward||crossedBackward){waypoint.queueTrigger(direction)
triggeredGroups[waypoint.group.id]=waypoint.group}}}
for(var groupKey in triggeredGroups){triggeredGroups[groupKey].flushTriggers()}
this.oldScroll={x:axes.horizontal.newScroll,y:axes.vertical.newScroll}}
Context.prototype.innerHeight=function(){if(this.element==this.element.window){return Waypoint.viewportHeight()}
return this.adapter.innerHeight()}
Context.prototype.remove=function(waypoint){delete this.waypoints[waypoint.axis][waypoint.key]
this.checkEmpty()}
Context.prototype.innerWidth=function(){if(this.element==this.element.window){return Waypoint.viewportWidth()}
return this.adapter.innerWidth()}
Context.prototype.destroy=function(){var allWaypoints=[]
for(var axis in this.waypoints){for(var waypointKey in this.waypoints[axis]){allWaypoints.push(this.waypoints[axis][waypointKey])}}
for(var i=0,end=allWaypoints.length;i<end;i++){allWaypoints[i].destroy()}}
Context.prototype.refresh=function(){var isWindow=this.element==this.element.window
var contextOffset=isWindow?undefined:this.adapter.offset()
var triggeredGroups={}
var axes
this.handleScroll()
axes={horizontal:{contextOffset:isWindow?0:contextOffset.left,contextScroll:isWindow?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:'right',backward:'left',offsetProp:'left'},vertical:{contextOffset:isWindow?0:contextOffset.top,contextScroll:isWindow?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:'down',backward:'up',offsetProp:'top'}}
for(var axisKey in axes){var axis=axes[axisKey]
for(var waypointKey in this.waypoints[axisKey]){var waypoint=this.waypoints[axisKey][waypointKey]
var adjustment=waypoint.options.offset
var oldTriggerPoint=waypoint.triggerPoint
var elementOffset=0
var freshWaypoint=oldTriggerPoint==null
var contextModifier,wasBeforeScroll,nowAfterScroll
var triggeredBackward,triggeredForward
if(waypoint.element!==waypoint.element.window){elementOffset=waypoint.adapter.offset()[axis.offsetProp]}
if(typeof adjustment==='function'){adjustment=adjustment.apply(waypoint)}
else if(typeof adjustment==='string'){adjustment=parseFloat(adjustment)
if(waypoint.options.offset.indexOf('%')>-1){adjustment=Math.ceil(axis.contextDimension*adjustment/100)}}
contextModifier=axis.contextScroll-axis.contextOffset
waypoint.triggerPoint=Math.floor(elementOffset+contextModifier-adjustment)
wasBeforeScroll=oldTriggerPoint<axis.oldScroll
nowAfterScroll=waypoint.triggerPoint>=axis.oldScroll
triggeredBackward=wasBeforeScroll&&nowAfterScroll
triggeredForward=!wasBeforeScroll&&!nowAfterScroll
if(!freshWaypoint&&triggeredBackward){waypoint.queueTrigger(axis.backward)
triggeredGroups[waypoint.group.id]=waypoint.group}
else if(!freshWaypoint&&triggeredForward){waypoint.queueTrigger(axis.forward)
triggeredGroups[waypoint.group.id]=waypoint.group}
else if(freshWaypoint&&axis.oldScroll>=waypoint.triggerPoint){waypoint.queueTrigger(axis.forward)
triggeredGroups[waypoint.group.id]=waypoint.group}}}
Waypoint.requestAnimationFrame(function(){for(var groupKey in triggeredGroups){triggeredGroups[groupKey].flushTriggers()}})
return this}
Context.findOrCreateByElement=function(element){return Context.findByElement(element)||new Context(element)}
Context.refreshAll=function(){for(var contextId in contexts){contexts[contextId].refresh()}}
Context.findByElement=function(element){return contexts[element.waypointContextKey]}
window.onload=function(){if(oldWindowLoad){oldWindowLoad()}
Context.refreshAll()}
Waypoint.requestAnimationFrame=function(callback){var requestFn=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||requestAnimationFrameShim
requestFn.call(window,callback)}
Waypoint.Context=Context}());(function(){'use strict'
function byTriggerPoint(a,b){return a.triggerPoint-b.triggerPoint}
function byReverseTriggerPoint(a,b){return b.triggerPoint-a.triggerPoint}
var groups={vertical:{},horizontal:{}}
var Waypoint=window.Waypoint
function Group(options){this.name=options.name
this.axis=options.axis
this.id=this.name+'-'+this.axis
this.waypoints=[]
this.clearTriggerQueues()
groups[this.axis][this.name]=this}
Group.prototype.add=function(waypoint){this.waypoints.push(waypoint)}
Group.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}}
Group.prototype.flushTriggers=function(){for(var direction in this.triggerQueues){var waypoints=this.triggerQueues[direction]
var reverse=direction==='up'||direction==='left'
waypoints.sort(reverse?byReverseTriggerPoint:byTriggerPoint)
for(var i=0,end=waypoints.length;i<end;i+=1){var waypoint=waypoints[i]
if(waypoint.options.continuous||i===waypoints.length-1){waypoint.trigger([direction])}}}
this.clearTriggerQueues()}
Group.prototype.next=function(waypoint){this.waypoints.sort(byTriggerPoint)
var index=Waypoint.Adapter.inArray(waypoint,this.waypoints)
var isLast=index===this.waypoints.length-1
return isLast?null:this.waypoints[index+1]}
Group.prototype.previous=function(waypoint){this.waypoints.sort(byTriggerPoint)
var index=Waypoint.Adapter.inArray(waypoint,this.waypoints)
return index?this.waypoints[index-1]:null}
Group.prototype.queueTrigger=function(waypoint,direction){this.triggerQueues[direction].push(waypoint)}
Group.prototype.remove=function(waypoint){var index=Waypoint.Adapter.inArray(waypoint,this.waypoints)
if(index>-1){this.waypoints.splice(index,1)}}
Group.prototype.first=function(){return this.waypoints[0]}
Group.prototype.last=function(){return this.waypoints[this.waypoints.length-1]}
Group.findOrCreate=function(options){return groups[options.axis][options.name]||new Group(options)}
Waypoint.Group=Group}());(function(){'use strict'
var $=window.jQuery
var Waypoint=window.Waypoint
function JQueryAdapter(element){this.$element=$(element)}
$.each(['innerHeight','innerWidth','off','offset','on','outerHeight','outerWidth','scrollLeft','scrollTop'],function(i,method){JQueryAdapter.prototype[method]=function(){var args=Array.prototype.slice.call(arguments)
return this.$element[method].apply(this.$element,args)}})
$.each(['extend','inArray','isEmptyObject'],function(i,method){JQueryAdapter[method]=$[method]})
Waypoint.adapters.push({name:'jquery',Adapter:JQueryAdapter})
Waypoint.Adapter=JQueryAdapter}());(function(){'use strict'
var Waypoint=window.Waypoint
function createExtension(framework){return function(){var waypoints=[]
var overrides=arguments[0]
if(framework.isFunction(arguments[0])){overrides=framework.extend({},arguments[1])
overrides.handler=arguments[0]}
this.each(function(){var options=framework.extend({},overrides,{element:this})
if(typeof options.context==='string'){options.context=framework(this).closest(options.context)[0]}
waypoints.push(new Waypoint(options))})
return waypoints}}
if(window.jQuery){window.jQuery.fn.waypoint=createExtension(window.jQuery)}
if(window.Zepto){window.Zepto.fn.waypoint=createExtension(window.Zepto)}}());
!(function(root,factory){if(typeof define==='function'&&define.amd){define(['jquery'],function($){return factory(root,$);});}else if(typeof exports==='object'){factory(root,require('jquery'));}else{factory(root,root.jQuery||root.Zepto);}})(this,function(global,$){'use strict';var PLUGIN_NAME='remodal';var NAMESPACE=global.REMODAL_GLOBALS&&global.REMODAL_GLOBALS.NAMESPACE||PLUGIN_NAME;var ANIMATIONSTART_EVENTS=$.map(['animationstart','webkitAnimationStart','MSAnimationStart','oAnimationStart'],function(eventName){return eventName+'.'+NAMESPACE;}).join(' ');var ANIMATIONEND_EVENTS=$.map(['animationend','webkitAnimationEnd','MSAnimationEnd','oAnimationEnd'],function(eventName){return eventName+'.'+NAMESPACE;}).join(' ');var DEFAULTS=$.extend({hashTracking:true,closeOnConfirm:true,closeOnCancel:true,closeOnEscape:true,closeOnOutsideClick:true,modifier:'',appendTo:null},global.REMODAL_GLOBALS&&global.REMODAL_GLOBALS.DEFAULTS);var STATES={CLOSING:'closing',CLOSED:'closed',OPENING:'opening',OPENED:'opened'};var STATE_CHANGE_REASONS={CONFIRMATION:'confirmation',CANCELLATION:'cancellation'};var IS_ANIMATION=(function(){var style=document.createElement('div').style;return style.animationName!==undefined||style.WebkitAnimationName!==undefined||style.MozAnimationName!==undefined||style.msAnimationName!==undefined||style.OAnimationName!==undefined;})();var IS_IOS=/iPad|iPhone|iPod/.test(navigator.platform);var current;var scrollTop;function getAnimationDuration($elem){if(IS_ANIMATION&&$elem.css('animation-name')==='none'&&$elem.css('-webkit-animation-name')==='none'&&$elem.css('-moz-animation-name')==='none'&&$elem.css('-o-animation-name')==='none'&&$elem.css('-ms-animation-name')==='none'){return 0;}
var duration=$elem.css('animation-duration')||$elem.css('-webkit-animation-duration')||$elem.css('-moz-animation-duration')||$elem.css('-o-animation-duration')||$elem.css('-ms-animation-duration')||'0s';var delay=$elem.css('animation-delay')||$elem.css('-webkit-animation-delay')||$elem.css('-moz-animation-delay')||$elem.css('-o-animation-delay')||$elem.css('-ms-animation-delay')||'0s';var iterationCount=$elem.css('animation-iteration-count')||$elem.css('-webkit-animation-iteration-count')||$elem.css('-moz-animation-iteration-count')||$elem.css('-o-animation-iteration-count')||$elem.css('-ms-animation-iteration-count')||'1';var max;var len;var num;var i;duration=duration.split(', ');delay=delay.split(', ');iterationCount=iterationCount.split(', ');for(i=0,len=duration.length,max=Number.NEGATIVE_INFINITY;i<len;i++){num=parseFloat(duration[i])*parseInt(iterationCount[i],10)+parseFloat(delay[i]);if(num>max){max=num;}}
return max;}
function getScrollbarWidth(){if($(document).height()<=$(window).height()){return 0;}
var outer=document.createElement('div');var inner=document.createElement('div');var widthNoScroll;var widthWithScroll;outer.style.visibility='hidden';outer.style.width='100px';document.body.appendChild(outer);widthNoScroll=outer.offsetWidth;outer.style.overflow='scroll';inner.style.width='100%';outer.appendChild(inner);widthWithScroll=inner.offsetWidth;outer.parentNode.removeChild(outer);return widthNoScroll-widthWithScroll;}
function lockScreen(){if(IS_IOS){return;}
var $html=$('html');var lockedClass=namespacify('is-locked');var paddingRight;var $body;if(!$html.hasClass(lockedClass)){$body=$(document.body);paddingRight=parseInt($body.css('padding-right'),10)+getScrollbarWidth();$body.css('padding-right',paddingRight+'px');$html.addClass(lockedClass);}}
function unlockScreen(){if(IS_IOS){return;}
var $html=$('html');var lockedClass=namespacify('is-locked');var paddingRight;var $body;if($html.hasClass(lockedClass)){$body=$(document.body);paddingRight=parseInt($body.css('padding-right'),10)-getScrollbarWidth();$body.css('padding-right',paddingRight+'px');$html.removeClass(lockedClass);}}
function setState(instance,state,isSilent,reason){var newState=namespacify('is',state);var allStates=[namespacify('is',STATES.CLOSING),namespacify('is',STATES.OPENING),namespacify('is',STATES.CLOSED),namespacify('is',STATES.OPENED)].join(' ');instance.$bg.removeClass(allStates).addClass(newState);instance.$overlay.removeClass(allStates).addClass(newState);instance.$wrapper.removeClass(allStates).addClass(newState);instance.$modal.removeClass(allStates).addClass(newState);instance.state=state;!isSilent&&instance.$modal.trigger({type:state,reason:reason},[{reason:reason}]);}
function syncWithAnimation(doBeforeAnimation,doAfterAnimation,instance){var runningAnimationsCount=0;var handleAnimationStart=function(e){if(e.target!==this){return;}
runningAnimationsCount++;};var handleAnimationEnd=function(e){if(e.target!==this){return;}
if(--runningAnimationsCount===0){$.each(['$bg','$overlay','$wrapper','$modal'],function(index,elemName){instance[elemName].off(ANIMATIONSTART_EVENTS+' '+ANIMATIONEND_EVENTS);});doAfterAnimation();}};$.each(['$bg','$overlay','$wrapper','$modal'],function(index,elemName){instance[elemName].on(ANIMATIONSTART_EVENTS,handleAnimationStart).on(ANIMATIONEND_EVENTS,handleAnimationEnd);});doBeforeAnimation();if(getAnimationDuration(instance.$bg)===0&&getAnimationDuration(instance.$overlay)===0&&getAnimationDuration(instance.$wrapper)===0&&getAnimationDuration(instance.$modal)===0){$.each(['$bg','$overlay','$wrapper','$modal'],function(index,elemName){instance[elemName].off(ANIMATIONSTART_EVENTS+' '+ANIMATIONEND_EVENTS);});doAfterAnimation();}}
function halt(instance){if(instance.state===STATES.CLOSED){return;}
$.each(['$bg','$overlay','$wrapper','$modal'],function(index,elemName){instance[elemName].off(ANIMATIONSTART_EVENTS+' '+ANIMATIONEND_EVENTS);});instance.$bg.removeClass(instance.settings.modifier);instance.$overlay.removeClass(instance.settings.modifier).hide();instance.$wrapper.hide();unlockScreen();setState(instance,STATES.CLOSED,true);}
function parseOptions(str){var obj={};var arr;var len;var val;var i;str=str.replace(/\s*:\s*/g,':').replace(/\s*,\s*/g,',');arr=str.split(',');for(i=0,len=arr.length;i<len;i++){arr[i]=arr[i].split(':');val=arr[i][1];if(typeof val==='string'||val instanceof String){val=val==='true'||(val==='false'?false:val);}
if(typeof val==='string'||val instanceof String){val=!isNaN(val)?+val:val;}
obj[arr[i][0]]=val;}
return obj;}
function namespacify(){var result=NAMESPACE;for(var i=0;i<arguments.length;++i){result+='-'+arguments[i];}
return result;}
function handleHashChangeEvent(){var id=location.hash.replace('#','');var instance;var $elem;if(!id){if(current&&current.state===STATES.OPENED&&current.settings.hashTracking){current.close();}}else{try{$elem=$('[data-'+PLUGIN_NAME+'-id="'+id+'"]');}catch(err){}
if($elem&&$elem.length){instance=$[PLUGIN_NAME].lookup[$elem.data(PLUGIN_NAME)];if(instance&&instance.settings.hashTracking){instance.open();}}}}
function Remodal($modal,options){var $body=$(document.body);var $appendTo=$body;var remodal=this;remodal.settings=$.extend({},DEFAULTS,options);remodal.index=$[PLUGIN_NAME].lookup.push(remodal)-1;remodal.state=STATES.CLOSED;remodal.$overlay=$('.'+namespacify('overlay'));if(remodal.settings.appendTo!==null&&remodal.settings.appendTo.length){$appendTo=$(remodal.settings.appendTo);}
if(!remodal.$overlay.length){remodal.$overlay=$('<div>').addClass(namespacify('overlay')+' '+namespacify('is',STATES.CLOSED)).hide();$appendTo.append(remodal.$overlay);}
remodal.$bg=$('.'+namespacify('bg')).addClass(namespacify('is',STATES.CLOSED));remodal.$modal=$modal.addClass(NAMESPACE+' '+
namespacify('is-initialized')+' '+
remodal.settings.modifier+' '+
namespacify('is',STATES.CLOSED)).attr('tabindex','-1');remodal.$wrapper=$('<div>').addClass(namespacify('wrapper')+' '+
remodal.settings.modifier+' '+
namespacify('is',STATES.CLOSED)).hide().append(remodal.$modal);$appendTo.append(remodal.$wrapper);remodal.$wrapper.on('click.'+NAMESPACE,'[data-'+PLUGIN_NAME+'-action="close"]',function(e){e.preventDefault();remodal.close();});remodal.$wrapper.on('click.'+NAMESPACE,'[data-'+PLUGIN_NAME+'-action="cancel"]',function(e){e.preventDefault();remodal.$modal.trigger(STATE_CHANGE_REASONS.CANCELLATION);if(remodal.settings.closeOnCancel){remodal.close(STATE_CHANGE_REASONS.CANCELLATION);}});remodal.$wrapper.on('click.'+NAMESPACE,'[data-'+PLUGIN_NAME+'-action="confirm"]',function(e){e.preventDefault();remodal.$modal.trigger(STATE_CHANGE_REASONS.CONFIRMATION);if(remodal.settings.closeOnConfirm){remodal.close(STATE_CHANGE_REASONS.CONFIRMATION);}});remodal.$wrapper.on('click.'+NAMESPACE,function(e){var $target=$(e.target);if(!$target.hasClass(namespacify('wrapper'))){return;}
if(remodal.settings.closeOnOutsideClick){remodal.close();}});}
Remodal.prototype.open=function(){var remodal=this;var id;if(remodal.state===STATES.OPENING||remodal.state===STATES.CLOSING){return;}
id=remodal.$modal.attr('data-'+PLUGIN_NAME+'-id');if(id&&remodal.settings.hashTracking){scrollTop=$(window).scrollTop();location.hash=id;}
if(current&&current!==remodal){halt(current);}
current=remodal;lockScreen();remodal.$bg.addClass(remodal.settings.modifier);remodal.$overlay.addClass(remodal.settings.modifier).show();remodal.$wrapper.show().scrollTop(0);remodal.$modal.focus();syncWithAnimation(function(){setState(remodal,STATES.OPENING);},function(){setState(remodal,STATES.OPENED);},remodal);};Remodal.prototype.close=function(reason){var remodal=this;if(remodal.state===STATES.OPENING||remodal.state===STATES.CLOSING||remodal.state===STATES.CLOSED){return;}
if(remodal.settings.hashTracking&&remodal.$modal.attr('data-'+PLUGIN_NAME+'-id')===location.hash.substr(1)){location.hash='';$(window).scrollTop(scrollTop);}
syncWithAnimation(function(){setState(remodal,STATES.CLOSING,false,reason);},function(){remodal.$bg.removeClass(remodal.settings.modifier);remodal.$overlay.removeClass(remodal.settings.modifier).hide();remodal.$wrapper.hide();unlockScreen();setState(remodal,STATES.CLOSED,false,reason);},remodal);};Remodal.prototype.getState=function(){return this.state;};Remodal.prototype.destroy=function(){var lookup=$[PLUGIN_NAME].lookup;var instanceCount;halt(this);this.$wrapper.remove();delete lookup[this.index];instanceCount=$.grep(lookup,function(instance){return!!instance;}).length;if(instanceCount===0){this.$overlay.remove();this.$bg.removeClass(namespacify('is',STATES.CLOSING)+' '+
namespacify('is',STATES.OPENING)+' '+
namespacify('is',STATES.CLOSED)+' '+
namespacify('is',STATES.OPENED));}};$[PLUGIN_NAME]={lookup:[]};$.fn[PLUGIN_NAME]=function(opts){var instance;var $elem;this.each(function(index,elem){$elem=$(elem);if($elem.data(PLUGIN_NAME)==null){instance=new Remodal($elem,opts);$elem.data(PLUGIN_NAME,instance.index);if(instance.settings.hashTracking&&$elem.attr('data-'+PLUGIN_NAME+'-id')===location.hash.substr(1)){instance.open();}}else{instance=$[PLUGIN_NAME].lookup[$elem.data(PLUGIN_NAME)];}});return instance;};$(document).ready(function(){$(document).on('click','[data-'+PLUGIN_NAME+'-target]',function(e){e.preventDefault();var elem=e.currentTarget;var id=elem.getAttribute('data-'+PLUGIN_NAME+'-target');var $target=$('[data-'+PLUGIN_NAME+'-id="'+id+'"]');$[PLUGIN_NAME].lookup[$target.data(PLUGIN_NAME)].open();});$(document).find('.'+NAMESPACE).each(function(i,container){var $container=$(container);var options=$container.data(PLUGIN_NAME+'-options');if(!options){options={};}else if(typeof options==='string'||options instanceof String){options=parseOptions(options);}
$container[PLUGIN_NAME](options);});$(document).on('keydown.'+NAMESPACE,function(e){if(current&&current.settings.closeOnEscape&&current.state===STATES.OPENED&&e.keyCode===27){current.close();}});$(window).on('hashchange.'+NAMESPACE,handleHashChangeEvent);});});
/*!
 * Flickity PACKAGED v2.1.2
 * Touch, responsive, flickable carousels
 *
 * Licensed GPLv3 for open source use
 * or Flickity Commercial License for commercial use
 *
 * https://flickity.metafizzy.co
 * Copyright 2015-2018 Metafizzy
 */
(function(window,factory){if(typeof define=='function'&&define.amd){define('jquery-bridget/jquery-bridget',['jquery'],function(jQuery){return factory(window,jQuery);});}else if(typeof module=='object'&&module.exports){module.exports=factory(window,require('jquery'));}else{window.jQueryBridget=factory(window,window.jQuery);}}(window,function factory(window,jQuery){'use strict';var arraySlice=Array.prototype.slice;var console=window.console;var logError=typeof console=='undefined'?function(){}:function(message){console.error(message);};function jQueryBridget(namespace,PluginClass,$){$=$||jQuery||window.jQuery;if(!$){return;}
if(!PluginClass.prototype.option){PluginClass.prototype.option=function(opts){if(!$.isPlainObject(opts)){return;}
this.options=$.extend(true,this.options,opts);};}
$.fn[namespace]=function(arg0){if(typeof arg0=='string'){var args=arraySlice.call(arguments,1);return methodCall(this,arg0,args);}
plainCall(this,arg0);return this;};function methodCall($elems,methodName,args){var returnValue;var pluginMethodStr='$().'+namespace+'("'+methodName+'")';$elems.each(function(i,elem){var instance=$.data(elem,namespace);if(!instance){logError(namespace+' not initialized. Cannot call methods, i.e. '+
pluginMethodStr);return;}
var method=instance[methodName];if(!method||methodName.charAt(0)=='_'){logError(pluginMethodStr+' is not a valid method');return;}
var value=method.apply(instance,args);returnValue=returnValue===undefined?value:returnValue;});return returnValue!==undefined?returnValue:$elems;}
function plainCall($elems,options){$elems.each(function(i,elem){var instance=$.data(elem,namespace);if(instance){instance.option(options);instance._init();}else{instance=new PluginClass(elem,options);$.data(elem,namespace,instance);}});}
updateJQuery($);}
function updateJQuery($){if(!$||($&&$.bridget)){return;}
$.bridget=jQueryBridget;}
updateJQuery(jQuery||window.jQuery);return jQueryBridget;}));(function(global,factory){if(typeof define=='function'&&define.amd){define('ev-emitter/ev-emitter',factory);}else if(typeof module=='object'&&module.exports){module.exports=factory();}else{global.EvEmitter=factory();}}(typeof window!='undefined'?window:this,function(){function EvEmitter(){}
var proto=EvEmitter.prototype;proto.on=function(eventName,listener){if(!eventName||!listener){return;}
var events=this._events=this._events||{};var listeners=events[eventName]=events[eventName]||[];if(listeners.indexOf(listener)==-1){listeners.push(listener);}
return this;};proto.once=function(eventName,listener){if(!eventName||!listener){return;}
this.on(eventName,listener);var onceEvents=this._onceEvents=this._onceEvents||{};var onceListeners=onceEvents[eventName]=onceEvents[eventName]||{};onceListeners[listener]=true;return this;};proto.off=function(eventName,listener){var listeners=this._events&&this._events[eventName];if(!listeners||!listeners.length){return;}
var index=listeners.indexOf(listener);if(index!=-1){listeners.splice(index,1);}
return this;};proto.emitEvent=function(eventName,args){var listeners=this._events&&this._events[eventName];if(!listeners||!listeners.length){return;}
listeners=listeners.slice(0);args=args||[];var onceListeners=this._onceEvents&&this._onceEvents[eventName];for(var i=0;i<listeners.length;i++){var listener=listeners[i]
var isOnce=onceListeners&&onceListeners[listener];if(isOnce){this.off(eventName,listener);delete onceListeners[listener];}
listener.apply(this,args);}
return this;};proto.allOff=function(){delete this._events;delete this._onceEvents;};return EvEmitter;}));
/*!
 * getSize v2.0.3
 * measure size of elements
 * MIT license
 */
(function(window,factory){if(typeof define=='function'&&define.amd){define('get-size/get-size',factory);}else if(typeof module=='object'&&module.exports){module.exports=factory();}else{window.getSize=factory();}})(window,function factory(){'use strict';function getStyleSize(value){var num=parseFloat(value);var isValid=value.indexOf('%')==-1&&!isNaN(num);return isValid&&num;}
function noop(){}
var logError=typeof console=='undefined'?noop:function(message){console.error(message);};var measurements=['paddingLeft','paddingRight','paddingTop','paddingBottom','marginLeft','marginRight','marginTop','marginBottom','borderLeftWidth','borderRightWidth','borderTopWidth','borderBottomWidth'];var measurementsLength=measurements.length;function getZeroSize(){var size={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};for(var i=0;i<measurementsLength;i++){var measurement=measurements[i];size[measurement]=0;}
return size;}
function getStyle(elem){var style=getComputedStyle(elem);if(!style){logError('Style returned '+style+'. Are you running this code in a hidden iframe on Firefox? '+'See https://bit.ly/getsizebug1');}
return style;}
var isSetup=false;var isBoxSizeOuter;function setup(){if(isSetup){return;}
isSetup=true;var div=document.createElement('div');div.style.width='200px';div.style.padding='1px 2px 3px 4px';div.style.borderStyle='solid';div.style.borderWidth='1px 2px 3px 4px';div.style.boxSizing='border-box';var body=document.body||document.documentElement;body.appendChild(div);var style=getStyle(div);isBoxSizeOuter=Math.round(getStyleSize(style.width))==200;getSize.isBoxSizeOuter=isBoxSizeOuter;body.removeChild(div);}
function getSize(elem){setup();if(typeof elem=='string'){elem=document.querySelector(elem);}
if(!elem||typeof elem!='object'||!elem.nodeType){return;}
var style=getStyle(elem);if(style.display=='none'){return getZeroSize();}
var size={};size.width=elem.offsetWidth;size.height=elem.offsetHeight;var isBorderBox=size.isBorderBox=style.boxSizing=='border-box';for(var i=0;i<measurementsLength;i++){var measurement=measurements[i];var value=style[measurement];var num=parseFloat(value);size[measurement]=!isNaN(num)?num:0;}
var paddingWidth=size.paddingLeft+size.paddingRight;var paddingHeight=size.paddingTop+size.paddingBottom;var marginWidth=size.marginLeft+size.marginRight;var marginHeight=size.marginTop+size.marginBottom;var borderWidth=size.borderLeftWidth+size.borderRightWidth;var borderHeight=size.borderTopWidth+size.borderBottomWidth;var isBorderBoxSizeOuter=isBorderBox&&isBoxSizeOuter;var styleWidth=getStyleSize(style.width);if(styleWidth!==false){size.width=styleWidth+
(isBorderBoxSizeOuter?0:paddingWidth+borderWidth);}
var styleHeight=getStyleSize(style.height);if(styleHeight!==false){size.height=styleHeight+
(isBorderBoxSizeOuter?0:paddingHeight+borderHeight);}
size.innerWidth=size.width-(paddingWidth+borderWidth);size.innerHeight=size.height-(paddingHeight+borderHeight);size.outerWidth=size.width+marginWidth;size.outerHeight=size.height+marginHeight;return size;}
return getSize;});(function(window,factory){'use strict';if(typeof define=='function'&&define.amd){define('desandro-matches-selector/matches-selector',factory);}else if(typeof module=='object'&&module.exports){module.exports=factory();}else{window.matchesSelector=factory();}}(window,function factory(){'use strict';var matchesMethod=(function(){var ElemProto=window.Element.prototype;if(ElemProto.matches){return'matches';}
if(ElemProto.matchesSelector){return'matchesSelector';}
var prefixes=['webkit','moz','ms','o'];for(var i=0;i<prefixes.length;i++){var prefix=prefixes[i];var method=prefix+'MatchesSelector';if(ElemProto[method]){return method;}}})();return function matchesSelector(elem,selector){return elem[matchesMethod](selector);};}));(function(window,factory){if(typeof define=='function'&&define.amd){define('fizzy-ui-utils/utils',['desandro-matches-selector/matches-selector'],function(matchesSelector){return factory(window,matchesSelector);});}else if(typeof module=='object'&&module.exports){module.exports=factory(window,require('desandro-matches-selector'));}else{window.fizzyUIUtils=factory(window,window.matchesSelector);}}(window,function factory(window,matchesSelector){var utils={};utils.extend=function(a,b){for(var prop in b){a[prop]=b[prop];}
return a;};utils.modulo=function(num,div){return((num%div)+div)%div;};var arraySlice=Array.prototype.slice;utils.makeArray=function(obj){if(Array.isArray(obj)){return obj;}
if(obj===null||obj===undefined){return[];}
var isArrayLike=typeof obj=='object'&&typeof obj.length=='number';if(isArrayLike){return arraySlice.call(obj);}
return[obj];};utils.removeFrom=function(ary,obj){var index=ary.indexOf(obj);if(index!=-1){ary.splice(index,1);}};utils.getParent=function(elem,selector){while(elem.parentNode&&elem!=document.body){elem=elem.parentNode;if(matchesSelector(elem,selector)){return elem;}}};utils.getQueryElement=function(elem){if(typeof elem=='string'){return document.querySelector(elem);}
return elem;};utils.handleEvent=function(event){var method='on'+event.type;if(this[method]){this[method](event);}};utils.filterFindElements=function(elems,selector){elems=utils.makeArray(elems);var ffElems=[];elems.forEach(function(elem){if(!(elem instanceof HTMLElement)){return;}
if(!selector){ffElems.push(elem);return;}
if(matchesSelector(elem,selector)){ffElems.push(elem);}
var childElems=elem.querySelectorAll(selector);for(var i=0;i<childElems.length;i++){ffElems.push(childElems[i]);}});return ffElems;};utils.debounceMethod=function(_class,methodName,threshold){threshold=threshold||100;var method=_class.prototype[methodName];var timeoutName=methodName+'Timeout';_class.prototype[methodName]=function(){var timeout=this[timeoutName];clearTimeout(timeout);var args=arguments;var _this=this;this[timeoutName]=setTimeout(function(){method.apply(_this,args);delete _this[timeoutName];},threshold);};};utils.docReady=function(callback){var readyState=document.readyState;if(readyState=='complete'||readyState=='interactive'){setTimeout(callback);}else{document.addEventListener('DOMContentLoaded',callback);}};utils.toDashed=function(str){return str.replace(/(.)([A-Z])/g,function(match,$1,$2){return $1+'-'+$2;}).toLowerCase();};var console=window.console;utils.htmlInit=function(WidgetClass,namespace){utils.docReady(function(){var dashedNamespace=utils.toDashed(namespace);var dataAttr='data-'+dashedNamespace;var dataAttrElems=document.querySelectorAll('['+dataAttr+']');var jsDashElems=document.querySelectorAll('.js-'+dashedNamespace);var elems=utils.makeArray(dataAttrElems).concat(utils.makeArray(jsDashElems));var dataOptionsAttr=dataAttr+'-options';var jQuery=window.jQuery;elems.forEach(function(elem){var attr=elem.getAttribute(dataAttr)||elem.getAttribute(dataOptionsAttr);var options;try{options=attr&&JSON.parse(attr);}catch(error){if(console){console.error('Error parsing '+dataAttr+' on '+elem.className+': '+error);}
return;}
var instance=new WidgetClass(elem,options);if(jQuery){jQuery.data(elem,namespace,instance);}});});};return utils;}));(function(window,factory){if(typeof define=='function'&&define.amd){define('flickity/js/cell',['get-size/get-size'],function(getSize){return factory(window,getSize);});}else if(typeof module=='object'&&module.exports){module.exports=factory(window,require('get-size'));}else{window.Flickity=window.Flickity||{};window.Flickity.Cell=factory(window,window.getSize);}}(window,function factory(window,getSize){function Cell(elem,parent){this.element=elem;this.parent=parent;this.create();}
var proto=Cell.prototype;proto.create=function(){this.element.style.position='absolute';this.element.setAttribute('aria-selected','false');this.x=0;this.shift=0;};proto.destroy=function(){this.element.style.position='';var side=this.parent.originSide;this.element.removeAttribute('aria-selected');this.element.style[side]='';};proto.getSize=function(){this.size=getSize(this.element);};proto.setPosition=function(x){this.x=x;this.updateTarget();this.renderPosition(x);};proto.updateTarget=proto.setDefaultTarget=function(){var marginProperty=this.parent.originSide=='left'?'marginLeft':'marginRight';this.target=this.x+this.size[marginProperty]+
this.size.width*this.parent.cellAlign;};proto.renderPosition=function(x){var side=this.parent.originSide;this.element.style[side]=this.parent.getPositionValue(x);};proto.wrapShift=function(shift){this.shift=shift;this.renderPosition(this.x+this.parent.slideableWidth*shift);};proto.remove=function(){this.element.parentNode.removeChild(this.element);};return Cell;}));(function(window,factory){if(typeof define=='function'&&define.amd){define('flickity/js/slide',factory);}else if(typeof module=='object'&&module.exports){module.exports=factory();}else{window.Flickity=window.Flickity||{};window.Flickity.Slide=factory();}}(window,function factory(){'use strict';function Slide(parent){this.parent=parent;this.isOriginLeft=parent.originSide=='left';this.cells=[];this.outerWidth=0;this.height=0;}
var proto=Slide.prototype;proto.addCell=function(cell){this.cells.push(cell);this.outerWidth+=cell.size.outerWidth;this.height=Math.max(cell.size.outerHeight,this.height);if(this.cells.length==1){this.x=cell.x;var beginMargin=this.isOriginLeft?'marginLeft':'marginRight';this.firstMargin=cell.size[beginMargin];}};proto.updateTarget=function(){var endMargin=this.isOriginLeft?'marginRight':'marginLeft';var lastCell=this.getLastCell();var lastMargin=lastCell?lastCell.size[endMargin]:0;var slideWidth=this.outerWidth-(this.firstMargin+lastMargin);this.target=this.x+this.firstMargin+slideWidth*this.parent.cellAlign;};proto.getLastCell=function(){return this.cells[this.cells.length-1];};proto.select=function(){this.changeSelected(true);};proto.unselect=function(){this.changeSelected(false);};proto.changeSelected=function(isSelected){var classMethod=isSelected?'add':'remove';this.cells.forEach(function(cell){cell.element.classList[classMethod]('is-selected');cell.element.setAttribute('aria-selected',isSelected.toString());});};proto.getCellElements=function(){return this.cells.map(function(cell){return cell.element;});};return Slide;}));(function(window,factory){if(typeof define=='function'&&define.amd){define('flickity/js/animate',['fizzy-ui-utils/utils'],function(utils){return factory(window,utils);});}else if(typeof module=='object'&&module.exports){module.exports=factory(window,require('fizzy-ui-utils'));}else{window.Flickity=window.Flickity||{};window.Flickity.animatePrototype=factory(window,window.fizzyUIUtils);}}(window,function factory(window,utils){var proto={};proto.startAnimation=function(){if(this.isAnimating){return;}
this.isAnimating=true;this.restingFrames=0;this.animate();};proto.animate=function(){this.applyDragForce();this.applySelectedAttraction();var previousX=this.x;this.integratePhysics();this.positionSlider();this.settle(previousX);if(this.isAnimating){var _this=this;requestAnimationFrame(function animateFrame(){_this.animate();});}};proto.positionSlider=function(){var x=this.x;if(this.options.wrapAround&&this.cells.length>1){x=utils.modulo(x,this.slideableWidth);x=x-this.slideableWidth;this.shiftWrapCells(x);}
x=x+this.cursorPosition;x=this.options.rightToLeft?-x:x;var value=this.getPositionValue(x);this.slider.style.transform=this.isAnimating?'translate3d('+value+',0,0)':'translateX('+value+')';var firstSlide=this.slides[0];if(firstSlide){var positionX=-this.x-firstSlide.target;var progress=positionX/this.slidesWidth;this.dispatchEvent('scroll',null,[progress,positionX]);}};proto.positionSliderAtSelected=function(){if(!this.cells.length){return;}
this.x=-this.selectedSlide.target;this.velocity=0;this.positionSlider();};proto.getPositionValue=function(position){if(this.options.percentPosition){return(Math.round((position/this.size.innerWidth)*10000)*0.01)+'%';}else{return Math.round(position)+'px';}};proto.settle=function(previousX){if(!this.isPointerDown&&Math.round(this.x*100)==Math.round(previousX*100)){this.restingFrames++;}
if(this.restingFrames>2){this.isAnimating=false;delete this.isFreeScrolling;this.positionSlider();this.dispatchEvent('settle',null,[this.selectedIndex]);}};proto.shiftWrapCells=function(x){var beforeGap=this.cursorPosition+x;this._shiftCells(this.beforeShiftCells,beforeGap,-1);var afterGap=this.size.innerWidth-(x+this.slideableWidth+this.cursorPosition);this._shiftCells(this.afterShiftCells,afterGap,1);};proto._shiftCells=function(cells,gap,shift){for(var i=0;i<cells.length;i++){var cell=cells[i];var cellShift=gap>0?shift:0;cell.wrapShift(cellShift);gap-=cell.size.outerWidth;}};proto._unshiftCells=function(cells){if(!cells||!cells.length){return;}
for(var i=0;i<cells.length;i++){cells[i].wrapShift(0);}};proto.integratePhysics=function(){this.x+=this.velocity;this.velocity*=this.getFrictionFactor();};proto.applyForce=function(force){this.velocity+=force;};proto.getFrictionFactor=function(){return 1-this.options[this.isFreeScrolling?'freeScrollFriction':'friction'];};proto.getRestingPosition=function(){return this.x+this.velocity/(1-this.getFrictionFactor());};proto.applyDragForce=function(){if(!this.isDraggable||!this.isPointerDown){return;}
var dragVelocity=this.dragX-this.x;var dragForce=dragVelocity-this.velocity;this.applyForce(dragForce);};proto.applySelectedAttraction=function(){var dragDown=this.isDraggable&&this.isPointerDown;if(dragDown||this.isFreeScrolling||!this.slides.length){return;}
var distance=this.selectedSlide.target*-1-this.x;var force=distance*this.options.selectedAttraction;this.applyForce(force);};return proto;}));(function(window,factory){if(typeof define=='function'&&define.amd){define('flickity/js/flickity',['ev-emitter/ev-emitter','get-size/get-size','fizzy-ui-utils/utils','./cell','./slide','./animate'],function(EvEmitter,getSize,utils,Cell,Slide,animatePrototype){return factory(window,EvEmitter,getSize,utils,Cell,Slide,animatePrototype);});}else if(typeof module=='object'&&module.exports){module.exports=factory(window,require('ev-emitter'),require('get-size'),require('fizzy-ui-utils'),require('./cell'),require('./slide'),require('./animate'));}else{var _Flickity=window.Flickity;window.Flickity=factory(window,window.EvEmitter,window.getSize,window.fizzyUIUtils,_Flickity.Cell,_Flickity.Slide,_Flickity.animatePrototype);}}(window,function factory(window,EvEmitter,getSize,utils,Cell,Slide,animatePrototype){var jQuery=window.jQuery;var getComputedStyle=window.getComputedStyle;var console=window.console;function moveElements(elems,toElem){elems=utils.makeArray(elems);while(elems.length){toElem.appendChild(elems.shift());}}
var GUID=0;var instances={};function Flickity(element,options){var queryElement=utils.getQueryElement(element);if(!queryElement){if(console){console.error('Bad element for Flickity: '+(queryElement||element));}
return;}
this.element=queryElement;if(this.element.flickityGUID){var instance=instances[this.element.flickityGUID];instance.option(options);return instance;}
if(jQuery){this.$element=jQuery(this.element);}
this.options=utils.extend({},this.constructor.defaults);this.option(options);this._create();}
Flickity.defaults={accessibility:true,cellAlign:'center',freeScrollFriction:0.075,friction:0.28,namespaceJQueryEvents:true,percentPosition:true,resize:true,selectedAttraction:0.025,setGallerySize:true};Flickity.createMethods=[];var proto=Flickity.prototype;utils.extend(proto,EvEmitter.prototype);proto._create=function(){var id=this.guid=++GUID;this.element.flickityGUID=id;instances[id]=this;this.selectedIndex=0;this.restingFrames=0;this.x=0;this.velocity=0;this.originSide=this.options.rightToLeft?'right':'left';this.viewport=document.createElement('div');this.viewport.className='flickity-viewport';this._createSlider();if(this.options.resize||this.options.watchCSS){window.addEventListener('resize',this);}
for(var eventName in this.options.on){var listener=this.options.on[eventName];this.on(eventName,listener);}
Flickity.createMethods.forEach(function(method){this[method]();},this);if(this.options.watchCSS){this.watchCSS();}else{this.activate();}};proto.option=function(opts){utils.extend(this.options,opts);};proto.activate=function(){if(this.isActive){return;}
this.isActive=true;this.element.classList.add('flickity-enabled');if(this.options.rightToLeft){this.element.classList.add('flickity-rtl');}
this.getSize();var cellElems=this._filterFindCellElements(this.element.children);moveElements(cellElems,this.slider);this.viewport.appendChild(this.slider);this.element.appendChild(this.viewport);this.reloadCells();if(this.options.accessibility){this.element.tabIndex=0;this.element.addEventListener('keydown',this);}
this.emitEvent('activate');var index;var initialIndex=this.options.initialIndex;if(this.isInitActivated){index=this.selectedIndex;}else if(initialIndex!==undefined){index=this.cells[initialIndex]?initialIndex:0;}else{index=0;}
this.select(index,false,true);this.isInitActivated=true;this.dispatchEvent('ready');};proto._createSlider=function(){var slider=document.createElement('div');slider.className='flickity-slider';slider.style[this.originSide]=0;this.slider=slider;};proto._filterFindCellElements=function(elems){return utils.filterFindElements(elems,this.options.cellSelector);};proto.reloadCells=function(){this.cells=this._makeCells(this.slider.children);this.positionCells();this._getWrapShiftCells();this.setGallerySize();};proto._makeCells=function(elems){var cellElems=this._filterFindCellElements(elems);var cells=cellElems.map(function(cellElem){return new Cell(cellElem,this);},this);return cells;};proto.getLastCell=function(){return this.cells[this.cells.length-1];};proto.getLastSlide=function(){return this.slides[this.slides.length-1];};proto.positionCells=function(){this._sizeCells(this.cells);this._positionCells(0);};proto._positionCells=function(index){index=index||0;this.maxCellHeight=index?this.maxCellHeight||0:0;var cellX=0;if(index>0){var startCell=this.cells[index-1];cellX=startCell.x+startCell.size.outerWidth;}
var len=this.cells.length;for(var i=index;i<len;i++){var cell=this.cells[i];cell.setPosition(cellX);cellX+=cell.size.outerWidth;this.maxCellHeight=Math.max(cell.size.outerHeight,this.maxCellHeight);}
this.slideableWidth=cellX;this.updateSlides();this._containSlides();this.slidesWidth=len?this.getLastSlide().target-this.slides[0].target:0;};proto._sizeCells=function(cells){cells.forEach(function(cell){cell.getSize();});};proto.updateSlides=function(){this.slides=[];if(!this.cells.length){return;}
var slide=new Slide(this);this.slides.push(slide);var isOriginLeft=this.originSide=='left';var nextMargin=isOriginLeft?'marginRight':'marginLeft';var canCellFit=this._getCanCellFit();this.cells.forEach(function(cell,i){if(!slide.cells.length){slide.addCell(cell);return;}
var slideWidth=(slide.outerWidth-slide.firstMargin)+
(cell.size.outerWidth-cell.size[nextMargin]);if(canCellFit.call(this,i,slideWidth)){slide.addCell(cell);}else{slide.updateTarget();slide=new Slide(this);this.slides.push(slide);slide.addCell(cell);}},this);slide.updateTarget();this.updateSelectedSlide();};proto._getCanCellFit=function(){var groupCells=this.options.groupCells;if(!groupCells){return function(){return false;};}else if(typeof groupCells=='number'){var number=parseInt(groupCells,10);return function(i){return(i%number)!==0;};}
var percentMatch=typeof groupCells=='string'&&groupCells.match(/^(\d+)%$/);var percent=percentMatch?parseInt(percentMatch[1],10)/100:1;return function(i,slideWidth){return slideWidth<=(this.size.innerWidth+1)*percent;};};proto._init=proto.reposition=function(){this.positionCells();this.positionSliderAtSelected();};proto.getSize=function(){this.size=getSize(this.element);this.setCellAlign();this.cursorPosition=this.size.innerWidth*this.cellAlign;};var cellAlignShorthands={center:{left:0.5,right:0.5},left:{left:0,right:1},right:{right:0,left:1}};proto.setCellAlign=function(){var shorthand=cellAlignShorthands[this.options.cellAlign];this.cellAlign=shorthand?shorthand[this.originSide]:this.options.cellAlign;};proto.setGallerySize=function(){if(this.options.setGallerySize){var height=this.options.adaptiveHeight&&this.selectedSlide?this.selectedSlide.height:this.maxCellHeight;this.viewport.style.height=height+'px';}};proto._getWrapShiftCells=function(){if(!this.options.wrapAround){return;}
this._unshiftCells(this.beforeShiftCells);this._unshiftCells(this.afterShiftCells);var gapX=this.cursorPosition;var cellIndex=this.cells.length-1;this.beforeShiftCells=this._getGapCells(gapX,cellIndex,-1);gapX=this.size.innerWidth-this.cursorPosition;this.afterShiftCells=this._getGapCells(gapX,0,1);};proto._getGapCells=function(gapX,cellIndex,increment){var cells=[];while(gapX>0){var cell=this.cells[cellIndex];if(!cell){break;}
cells.push(cell);cellIndex+=increment;gapX-=cell.size.outerWidth;}
return cells;};proto._containSlides=function(){if(!this.options.contain||this.options.wrapAround||!this.cells.length){return;}
var isRightToLeft=this.options.rightToLeft;var beginMargin=isRightToLeft?'marginRight':'marginLeft';var endMargin=isRightToLeft?'marginLeft':'marginRight';var contentWidth=this.slideableWidth-this.getLastCell().size[endMargin];var isContentSmaller=contentWidth<this.size.innerWidth;var beginBound=this.cursorPosition+this.cells[0].size[beginMargin];var endBound=contentWidth-this.size.innerWidth*(1-this.cellAlign);this.slides.forEach(function(slide){if(isContentSmaller){slide.target=contentWidth*this.cellAlign;}else{slide.target=Math.max(slide.target,beginBound);slide.target=Math.min(slide.target,endBound);}},this);};proto.dispatchEvent=function(type,event,args){var emitArgs=event?[event].concat(args):args;this.emitEvent(type,emitArgs);if(jQuery&&this.$element){type+=this.options.namespaceJQueryEvents?'.flickity':'';var $event=type;if(event){var jQEvent=jQuery.Event(event);jQEvent.type=type;$event=jQEvent;}
this.$element.trigger($event,args);}};proto.select=function(index,isWrap,isInstant){if(!this.isActive){return;}
index=parseInt(index,10);this._wrapSelect(index);if(this.options.wrapAround||isWrap){index=utils.modulo(index,this.slides.length);}
if(!this.slides[index]){return;}
var prevIndex=this.selectedIndex;this.selectedIndex=index;this.updateSelectedSlide();if(isInstant){this.positionSliderAtSelected();}else{this.startAnimation();}
if(this.options.adaptiveHeight){this.setGallerySize();}
this.dispatchEvent('select',null,[index]);if(index!=prevIndex){this.dispatchEvent('change',null,[index]);}
this.dispatchEvent('cellSelect');};proto._wrapSelect=function(index){var len=this.slides.length;var isWrapping=this.options.wrapAround&&len>1;if(!isWrapping){return index;}
var wrapIndex=utils.modulo(index,len);var delta=Math.abs(wrapIndex-this.selectedIndex);var backWrapDelta=Math.abs((wrapIndex+len)-this.selectedIndex);var forewardWrapDelta=Math.abs((wrapIndex-len)-this.selectedIndex);if(!this.isDragSelect&&backWrapDelta<delta){index+=len;}else if(!this.isDragSelect&&forewardWrapDelta<delta){index-=len;}
if(index<0){this.x-=this.slideableWidth;}else if(index>=len){this.x+=this.slideableWidth;}};proto.previous=function(isWrap,isInstant){this.select(this.selectedIndex-1,isWrap,isInstant);};proto.next=function(isWrap,isInstant){this.select(this.selectedIndex+1,isWrap,isInstant);};proto.updateSelectedSlide=function(){var slide=this.slides[this.selectedIndex];if(!slide){return;}
this.unselectSelectedSlide();this.selectedSlide=slide;slide.select();this.selectedCells=slide.cells;this.selectedElements=slide.getCellElements();this.selectedCell=slide.cells[0];this.selectedElement=this.selectedElements[0];};proto.unselectSelectedSlide=function(){if(this.selectedSlide){this.selectedSlide.unselect();}};proto.selectCell=function(value,isWrap,isInstant){var cell=this.queryCell(value);if(!cell){return;}
var index=this.getCellSlideIndex(cell);this.select(index,isWrap,isInstant);};proto.getCellSlideIndex=function(cell){for(var i=0;i<this.slides.length;i++){var slide=this.slides[i];var index=slide.cells.indexOf(cell);if(index!=-1){return i;}}};proto.getCell=function(elem){for(var i=0;i<this.cells.length;i++){var cell=this.cells[i];if(cell.element==elem){return cell;}}};proto.getCells=function(elems){elems=utils.makeArray(elems);var cells=[];elems.forEach(function(elem){var cell=this.getCell(elem);if(cell){cells.push(cell);}},this);return cells;};proto.getCellElements=function(){return this.cells.map(function(cell){return cell.element;});};proto.getParentCell=function(elem){var cell=this.getCell(elem);if(cell){return cell;}
elem=utils.getParent(elem,'.flickity-slider > *');return this.getCell(elem);};proto.getAdjacentCellElements=function(adjCount,index){if(!adjCount){return this.selectedSlide.getCellElements();}
index=index===undefined?this.selectedIndex:index;var len=this.slides.length;if(1+(adjCount*2)>=len){return this.getCellElements();}
var cellElems=[];for(var i=index-adjCount;i<=index+adjCount;i++){var slideIndex=this.options.wrapAround?utils.modulo(i,len):i;var slide=this.slides[slideIndex];if(slide){cellElems=cellElems.concat(slide.getCellElements());}}
return cellElems;};proto.queryCell=function(selector){if(typeof selector=='number'){return this.cells[selector];}
if(typeof selector=='string'){selector=this.element.querySelector(selector);}
return this.getCell(selector);};proto.uiChange=function(){this.emitEvent('uiChange');};proto.childUIPointerDown=function(event){this.emitEvent('childUIPointerDown',[event]);};proto.onresize=function(){this.watchCSS();this.resize();};utils.debounceMethod(Flickity,'onresize',150);proto.resize=function(){if(!this.isActive){return;}
this.getSize();if(this.options.wrapAround){this.x=utils.modulo(this.x,this.slideableWidth);}
this.positionCells();this._getWrapShiftCells();this.setGallerySize();this.emitEvent('resize');var selectedElement=this.selectedElements&&this.selectedElements[0];this.selectCell(selectedElement,false,true);};proto.watchCSS=function(){var watchOption=this.options.watchCSS;if(!watchOption){return;}
var afterContent=getComputedStyle(this.element,':after').content;if(afterContent.indexOf('flickity')!=-1){this.activate();}else{this.deactivate();}};proto.onkeydown=function(event){var isNotFocused=document.activeElement&&document.activeElement!=this.element;if(!this.options.accessibility||isNotFocused){return;}
var handler=Flickity.keyboardHandlers[event.keyCode];if(handler){handler.call(this);}};Flickity.keyboardHandlers={37:function(){var leftMethod=this.options.rightToLeft?'next':'previous';this.uiChange();this[leftMethod]();},39:function(){var rightMethod=this.options.rightToLeft?'previous':'next';this.uiChange();this[rightMethod]();},};proto.focus=function(){var prevScrollY=window.pageYOffset;this.element.focus({preventScroll:true});if(window.pageYOffset!=prevScrollY){window.scrollTo(window.pageXOffset,prevScrollY);}};proto.deactivate=function(){if(!this.isActive){return;}
this.element.classList.remove('flickity-enabled');this.element.classList.remove('flickity-rtl');this.unselectSelectedSlide();this.cells.forEach(function(cell){cell.destroy();});this.element.removeChild(this.viewport);moveElements(this.slider.children,this.element);if(this.options.accessibility){this.element.removeAttribute('tabIndex');this.element.removeEventListener('keydown',this);}
this.isActive=false;this.emitEvent('deactivate');};proto.destroy=function(){this.deactivate();window.removeEventListener('resize',this);this.emitEvent('destroy');if(jQuery&&this.$element){jQuery.removeData(this.element,'flickity');}
delete this.element.flickityGUID;delete instances[this.guid];};utils.extend(proto,animatePrototype);Flickity.data=function(elem){elem=utils.getQueryElement(elem);var id=elem&&elem.flickityGUID;return id&&instances[id];};utils.htmlInit(Flickity,'flickity');if(jQuery&&jQuery.bridget){jQuery.bridget('flickity',Flickity);}
Flickity.setJQuery=function(jq){jQuery=jq;};Flickity.Cell=Cell;return Flickity;}));
/*!
 * Unipointer v2.3.0
 * base class for doing one thing with pointer event
 * MIT license
 */
(function(window,factory){if(typeof define=='function'&&define.amd){define('unipointer/unipointer',['ev-emitter/ev-emitter'],function(EvEmitter){return factory(window,EvEmitter);});}else if(typeof module=='object'&&module.exports){module.exports=factory(window,require('ev-emitter'));}else{window.Unipointer=factory(window,window.EvEmitter);}}(window,function factory(window,EvEmitter){function noop(){}
function Unipointer(){}
var proto=Unipointer.prototype=Object.create(EvEmitter.prototype);proto.bindStartEvent=function(elem){this._bindStartEvent(elem,true);};proto.unbindStartEvent=function(elem){this._bindStartEvent(elem,false);};proto._bindStartEvent=function(elem,isAdd){isAdd=isAdd===undefined?true:isAdd;var bindMethod=isAdd?'addEventListener':'removeEventListener';var startEvent='mousedown';if(window.PointerEvent){startEvent='pointerdown';}else if('ontouchstart'in window){startEvent='touchstart';}
elem[bindMethod](startEvent,this);};proto.handleEvent=function(event){var method='on'+event.type;if(this[method]){this[method](event);}};proto.getTouch=function(touches){for(var i=0;i<touches.length;i++){var touch=touches[i];if(touch.identifier==this.pointerIdentifier){return touch;}}};proto.onmousedown=function(event){var button=event.button;if(button&&(button!==0&&button!==1)){return;}
this._pointerDown(event,event);};proto.ontouchstart=function(event){this._pointerDown(event,event.changedTouches[0]);};proto.onpointerdown=function(event){this._pointerDown(event,event);};proto._pointerDown=function(event,pointer){if(event.button||this.isPointerDown){return;}
this.isPointerDown=true;this.pointerIdentifier=pointer.pointerId!==undefined?pointer.pointerId:pointer.identifier;this.pointerDown(event,pointer);};proto.pointerDown=function(event,pointer){this._bindPostStartEvents(event);this.emitEvent('pointerDown',[event,pointer]);};var postStartEvents={mousedown:['mousemove','mouseup'],touchstart:['touchmove','touchend','touchcancel'],pointerdown:['pointermove','pointerup','pointercancel'],};proto._bindPostStartEvents=function(event){if(!event){return;}
var events=postStartEvents[event.type];events.forEach(function(eventName){window.addEventListener(eventName,this);},this);this._boundPointerEvents=events;};proto._unbindPostStartEvents=function(){if(!this._boundPointerEvents){return;}
this._boundPointerEvents.forEach(function(eventName){window.removeEventListener(eventName,this);},this);delete this._boundPointerEvents;};proto.onmousemove=function(event){this._pointerMove(event,event);};proto.onpointermove=function(event){if(event.pointerId==this.pointerIdentifier){this._pointerMove(event,event);}};proto.ontouchmove=function(event){var touch=this.getTouch(event.changedTouches);if(touch){this._pointerMove(event,touch);}};proto._pointerMove=function(event,pointer){this.pointerMove(event,pointer);};proto.pointerMove=function(event,pointer){this.emitEvent('pointerMove',[event,pointer]);};proto.onmouseup=function(event){this._pointerUp(event,event);};proto.onpointerup=function(event){if(event.pointerId==this.pointerIdentifier){this._pointerUp(event,event);}};proto.ontouchend=function(event){var touch=this.getTouch(event.changedTouches);if(touch){this._pointerUp(event,touch);}};proto._pointerUp=function(event,pointer){this._pointerDone();this.pointerUp(event,pointer);};proto.pointerUp=function(event,pointer){this.emitEvent('pointerUp',[event,pointer]);};proto._pointerDone=function(){this._pointerReset();this._unbindPostStartEvents();this.pointerDone();};proto._pointerReset=function(){this.isPointerDown=false;delete this.pointerIdentifier;};proto.pointerDone=noop;proto.onpointercancel=function(event){if(event.pointerId==this.pointerIdentifier){this._pointerCancel(event,event);}};proto.ontouchcancel=function(event){var touch=this.getTouch(event.changedTouches);if(touch){this._pointerCancel(event,touch);}};proto._pointerCancel=function(event,pointer){this._pointerDone();this.pointerCancel(event,pointer);};proto.pointerCancel=function(event,pointer){this.emitEvent('pointerCancel',[event,pointer]);};Unipointer.getPointerPoint=function(pointer){return{x:pointer.pageX,y:pointer.pageY};};return Unipointer;}));
/*!
 * Unidragger v2.3.0
 * Draggable base class
 * MIT license
 */
(function(window,factory){if(typeof define=='function'&&define.amd){define('unidragger/unidragger',['unipointer/unipointer'],function(Unipointer){return factory(window,Unipointer);});}else if(typeof module=='object'&&module.exports){module.exports=factory(window,require('unipointer'));}else{window.Unidragger=factory(window,window.Unipointer);}}(window,function factory(window,Unipointer){function Unidragger(){}
var proto=Unidragger.prototype=Object.create(Unipointer.prototype);proto.bindHandles=function(){this._bindHandles(true);};proto.unbindHandles=function(){this._bindHandles(false);};proto._bindHandles=function(isAdd){isAdd=isAdd===undefined?true:isAdd;var bindMethod=isAdd?'addEventListener':'removeEventListener';var touchAction=isAdd?this._touchActionValue:'';for(var i=0;i<this.handles.length;i++){var handle=this.handles[i];this._bindStartEvent(handle,isAdd);handle[bindMethod]('click',this);if(window.PointerEvent){handle.style.touchAction=touchAction;}}};proto._touchActionValue='none';proto.pointerDown=function(event,pointer){var isOkay=this.okayPointerDown(event);if(!isOkay){return;}
this.pointerDownPointer=pointer;event.preventDefault();this.pointerDownBlur();this._bindPostStartEvents(event);this.emitEvent('pointerDown',[event,pointer]);};var cursorNodes={TEXTAREA:true,INPUT:true,SELECT:true,OPTION:true,};var clickTypes={radio:true,checkbox:true,button:true,submit:true,image:true,file:true,};proto.okayPointerDown=function(event){var isCursorNode=cursorNodes[event.target.nodeName];var isClickType=clickTypes[event.target.type];var isOkay=!isCursorNode||isClickType;if(!isOkay){this._pointerReset();}
return isOkay;};proto.pointerDownBlur=function(){var focused=document.activeElement;var canBlur=focused&&focused.blur&&focused!=document.body;if(canBlur){focused.blur();}};proto.pointerMove=function(event,pointer){var moveVector=this._dragPointerMove(event,pointer);this.emitEvent('pointerMove',[event,pointer,moveVector]);this._dragMove(event,pointer,moveVector);};proto._dragPointerMove=function(event,pointer){var moveVector={x:pointer.pageX-this.pointerDownPointer.pageX,y:pointer.pageY-this.pointerDownPointer.pageY};if(!this.isDragging&&this.hasDragStarted(moveVector)){this._dragStart(event,pointer);}
return moveVector;};proto.hasDragStarted=function(moveVector){return Math.abs(moveVector.x)>3||Math.abs(moveVector.y)>3;};proto.pointerUp=function(event,pointer){this.emitEvent('pointerUp',[event,pointer]);this._dragPointerUp(event,pointer);};proto._dragPointerUp=function(event,pointer){if(this.isDragging){this._dragEnd(event,pointer);}else{this._staticClick(event,pointer);}};proto._dragStart=function(event,pointer){this.isDragging=true;this.isPreventingClicks=true;this.dragStart(event,pointer);};proto.dragStart=function(event,pointer){this.emitEvent('dragStart',[event,pointer]);};proto._dragMove=function(event,pointer,moveVector){if(!this.isDragging){return;}
this.dragMove(event,pointer,moveVector);};proto.dragMove=function(event,pointer,moveVector){event.preventDefault();this.emitEvent('dragMove',[event,pointer,moveVector]);};proto._dragEnd=function(event,pointer){this.isDragging=false;setTimeout(function(){delete this.isPreventingClicks;}.bind(this));this.dragEnd(event,pointer);};proto.dragEnd=function(event,pointer){this.emitEvent('dragEnd',[event,pointer]);};proto.onclick=function(event){if(this.isPreventingClicks){event.preventDefault();}};proto._staticClick=function(event,pointer){if(this.isIgnoringMouseUp&&event.type=='mouseup'){return;}
this.staticClick(event,pointer);if(event.type!='mouseup'){this.isIgnoringMouseUp=true;setTimeout(function(){delete this.isIgnoringMouseUp;}.bind(this),400);}};proto.staticClick=function(event,pointer){this.emitEvent('staticClick',[event,pointer]);};Unidragger.getPointerPoint=Unipointer.getPointerPoint;return Unidragger;}));(function(window,factory){if(typeof define=='function'&&define.amd){define('flickity/js/drag',['./flickity','unidragger/unidragger','fizzy-ui-utils/utils'],function(Flickity,Unidragger,utils){return factory(window,Flickity,Unidragger,utils);});}else if(typeof module=='object'&&module.exports){module.exports=factory(window,require('./flickity'),require('unidragger'),require('fizzy-ui-utils'));}else{window.Flickity=factory(window,window.Flickity,window.Unidragger,window.fizzyUIUtils);}}(window,function factory(window,Flickity,Unidragger,utils){utils.extend(Flickity.defaults,{draggable:'>1',dragThreshold:3,});Flickity.createMethods.push('_createDrag');var proto=Flickity.prototype;utils.extend(proto,Unidragger.prototype);proto._touchActionValue='pan-y';var isTouch='createTouch'in document;var isTouchmoveScrollCanceled=false;proto._createDrag=function(){this.on('activate',this.onActivateDrag);this.on('uiChange',this._uiChangeDrag);this.on('childUIPointerDown',this._childUIPointerDownDrag);this.on('deactivate',this.onDeactivateDrag);this.on('cellChange',this.updateDraggable);if(isTouch&&!isTouchmoveScrollCanceled){window.addEventListener('touchmove',function(){});isTouchmoveScrollCanceled=true;}};proto.onActivateDrag=function(){this.handles=[this.viewport];this.bindHandles();this.updateDraggable();};proto.onDeactivateDrag=function(){this.unbindHandles();this.element.classList.remove('is-draggable');};proto.updateDraggable=function(){if(this.options.draggable=='>1'){this.isDraggable=this.slides.length>1;}else{this.isDraggable=this.options.draggable;}
if(this.isDraggable){this.element.classList.add('is-draggable');}else{this.element.classList.remove('is-draggable');}};proto.bindDrag=function(){this.options.draggable=true;this.updateDraggable();};proto.unbindDrag=function(){this.options.draggable=false;this.updateDraggable();};proto._uiChangeDrag=function(){delete this.isFreeScrolling;};proto._childUIPointerDownDrag=function(event){event.preventDefault();this.pointerDownFocus(event);};proto.pointerDown=function(event,pointer){if(!this.isDraggable){this._pointerDownDefault(event,pointer);return;}
var isOkay=this.okayPointerDown(event);if(!isOkay){return;}
this._pointerDownPreventDefault(event);this.pointerDownFocus(event);if(document.activeElement!=this.element){this.pointerDownBlur();}
this.dragX=this.x;this.viewport.classList.add('is-pointer-down');this.pointerDownScroll=getScrollPosition();window.addEventListener('scroll',this);this._pointerDownDefault(event,pointer);};proto._pointerDownDefault=function(event,pointer){this.pointerDownPointer=pointer;this._bindPostStartEvents(event);this.dispatchEvent('pointerDown',event,[pointer]);};var focusNodes={INPUT:true,TEXTAREA:true,SELECT:true,};proto.pointerDownFocus=function(event){var isFocusNode=focusNodes[event.target.nodeName];if(!isFocusNode){this.focus();}};proto._pointerDownPreventDefault=function(event){var isTouchStart=event.type=='touchstart';var isTouchPointer=event.pointerType=='touch';var isFocusNode=focusNodes[event.target.nodeName];if(!isTouchStart&&!isTouchPointer&&!isFocusNode){event.preventDefault();}};proto.hasDragStarted=function(moveVector){return Math.abs(moveVector.x)>this.options.dragThreshold;};proto.pointerUp=function(event,pointer){delete this.isTouchScrolling;this.viewport.classList.remove('is-pointer-down');this.dispatchEvent('pointerUp',event,[pointer]);this._dragPointerUp(event,pointer);};proto.pointerDone=function(){window.removeEventListener('scroll',this);delete this.pointerDownScroll;};proto.dragStart=function(event,pointer){if(!this.isDraggable){return;}
this.dragStartPosition=this.x;this.startAnimation();window.removeEventListener('scroll',this);this.dispatchEvent('dragStart',event,[pointer]);};proto.pointerMove=function(event,pointer){var moveVector=this._dragPointerMove(event,pointer);this.dispatchEvent('pointerMove',event,[pointer,moveVector]);this._dragMove(event,pointer,moveVector);};proto.dragMove=function(event,pointer,moveVector){if(!this.isDraggable){return;}
event.preventDefault();this.previousDragX=this.dragX;var direction=this.options.rightToLeft?-1:1;if(this.options.wrapAround){moveVector.x=moveVector.x%this.slideableWidth;}
var dragX=this.dragStartPosition+moveVector.x*direction;if(!this.options.wrapAround&&this.slides.length){var originBound=Math.max(-this.slides[0].target,this.dragStartPosition);dragX=dragX>originBound?(dragX+originBound)*0.5:dragX;var endBound=Math.min(-this.getLastSlide().target,this.dragStartPosition);dragX=dragX<endBound?(dragX+endBound)*0.5:dragX;}
this.dragX=dragX;this.dragMoveTime=new Date();this.dispatchEvent('dragMove',event,[pointer,moveVector]);};proto.dragEnd=function(event,pointer){if(!this.isDraggable){return;}
if(this.options.freeScroll){this.isFreeScrolling=true;}
var index=this.dragEndRestingSelect();if(this.options.freeScroll&&!this.options.wrapAround){var restingX=this.getRestingPosition();this.isFreeScrolling=-restingX>this.slides[0].target&&-restingX<this.getLastSlide().target;}else if(!this.options.freeScroll&&index==this.selectedIndex){index+=this.dragEndBoostSelect();}
delete this.previousDragX;this.isDragSelect=this.options.wrapAround;this.select(index);delete this.isDragSelect;this.dispatchEvent('dragEnd',event,[pointer]);};proto.dragEndRestingSelect=function(){var restingX=this.getRestingPosition();var distance=Math.abs(this.getSlideDistance(-restingX,this.selectedIndex));var positiveResting=this._getClosestResting(restingX,distance,1);var negativeResting=this._getClosestResting(restingX,distance,-1);var index=positiveResting.distance<negativeResting.distance?positiveResting.index:negativeResting.index;return index;};proto._getClosestResting=function(restingX,distance,increment){var index=this.selectedIndex;var minDistance=Infinity;var condition=this.options.contain&&!this.options.wrapAround?function(d,md){return d<=md;}:function(d,md){return d<md;};while(condition(distance,minDistance)){index+=increment;minDistance=distance;distance=this.getSlideDistance(-restingX,index);if(distance===null){break;}
distance=Math.abs(distance);}
return{distance:minDistance,index:index-increment};};proto.getSlideDistance=function(x,index){var len=this.slides.length;var isWrapAround=this.options.wrapAround&&len>1;var slideIndex=isWrapAround?utils.modulo(index,len):index;var slide=this.slides[slideIndex];if(!slide){return null;}
var wrap=isWrapAround?this.slideableWidth*Math.floor(index/len):0;return x-(slide.target+wrap);};proto.dragEndBoostSelect=function(){if(this.previousDragX===undefined||!this.dragMoveTime||new Date()-this.dragMoveTime>100){return 0;}
var distance=this.getSlideDistance(-this.dragX,this.selectedIndex);var delta=this.previousDragX-this.dragX;if(distance>0&&delta>0){return 1;}else if(distance<0&&delta<0){return-1;}
return 0;};proto.staticClick=function(event,pointer){var clickedCell=this.getParentCell(event.target);var cellElem=clickedCell&&clickedCell.element;var cellIndex=clickedCell&&this.cells.indexOf(clickedCell);this.dispatchEvent('staticClick',event,[pointer,cellElem,cellIndex]);};proto.onscroll=function(){var scroll=getScrollPosition();var scrollMoveX=this.pointerDownScroll.x-scroll.x;var scrollMoveY=this.pointerDownScroll.y-scroll.y;if(Math.abs(scrollMoveX)>3||Math.abs(scrollMoveY)>3){this._pointerDone();}};function getScrollPosition(){return{x:window.pageXOffset,y:window.pageYOffset};}
return Flickity;}));
/*!
 * Tap listener v2.0.0
 * listens to taps
 * MIT license
 */
(function(window,factory){if(typeof define=='function'&&define.amd){define('tap-listener/tap-listener',['unipointer/unipointer'],function(Unipointer){return factory(window,Unipointer);});}else if(typeof module=='object'&&module.exports){module.exports=factory(window,require('unipointer'));}else{window.TapListener=factory(window,window.Unipointer);}}(window,function factory(window,Unipointer){function TapListener(elem){this.bindTap(elem);}
var proto=TapListener.prototype=Object.create(Unipointer.prototype);proto.bindTap=function(elem){if(!elem){return;}
this.unbindTap();this.tapElement=elem;this._bindStartEvent(elem,true);};proto.unbindTap=function(){if(!this.tapElement){return;}
this._bindStartEvent(this.tapElement,true);delete this.tapElement;};proto.pointerUp=function(event,pointer){if(this.isIgnoringMouseUp&&event.type=='mouseup'){return;}
var pointerPoint=Unipointer.getPointerPoint(pointer);var boundingRect=this.tapElement.getBoundingClientRect();var scrollX=window.pageXOffset;var scrollY=window.pageYOffset;var isInside=pointerPoint.x>=boundingRect.left+scrollX&&pointerPoint.x<=boundingRect.right+scrollX&&pointerPoint.y>=boundingRect.top+scrollY&&pointerPoint.y<=boundingRect.bottom+scrollY;if(isInside){this.emitEvent('tap',[event,pointer]);}
if(event.type!='mouseup'){this.isIgnoringMouseUp=true;var _this=this;setTimeout(function(){delete _this.isIgnoringMouseUp;},400);}};proto.destroy=function(){this.pointerDone();this.unbindTap();};return TapListener;}));(function(window,factory){if(typeof define=='function'&&define.amd){define('flickity/js/prev-next-button',['./flickity','tap-listener/tap-listener','fizzy-ui-utils/utils'],function(Flickity,TapListener,utils){return factory(window,Flickity,TapListener,utils);});}else if(typeof module=='object'&&module.exports){module.exports=factory(window,require('./flickity'),require('tap-listener'),require('fizzy-ui-utils'));}else{factory(window,window.Flickity,window.TapListener,window.fizzyUIUtils);}}(window,function factory(window,Flickity,TapListener,utils){'use strict';var svgURI='http://www.w3.org/2000/svg';function PrevNextButton(direction,parent){this.direction=direction;this.parent=parent;this._create();}
PrevNextButton.prototype=Object.create(TapListener.prototype);PrevNextButton.prototype._create=function(){this.isEnabled=true;this.isPrevious=this.direction==-1;var leftDirection=this.parent.options.rightToLeft?1:-1;this.isLeft=this.direction==leftDirection;var element=this.element=document.createElement('button');element.className='flickity-button flickity-prev-next-button';element.className+=this.isPrevious?' previous':' next';element.setAttribute('type','button');this.disable();element.setAttribute('aria-label',this.isPrevious?'Previous':'Next');var svg=this.createSVG();element.appendChild(svg);this.on('tap',this.onTap);this.parent.on('select',this.update.bind(this));this.on('pointerDown',this.parent.childUIPointerDown.bind(this.parent));};PrevNextButton.prototype.activate=function(){this.bindTap(this.element);this.element.addEventListener('click',this);this.parent.element.appendChild(this.element);};PrevNextButton.prototype.deactivate=function(){this.parent.element.removeChild(this.element);TapListener.prototype.destroy.call(this);this.element.removeEventListener('click',this);};PrevNextButton.prototype.createSVG=function(){var svg=document.createElementNS(svgURI,'svg');svg.setAttribute('class','flickity-button-icon');svg.setAttribute('viewBox','0 0 100 100');var path=document.createElementNS(svgURI,'path');var pathMovements=getArrowMovements(this.parent.options.arrowShape);path.setAttribute('d',pathMovements);path.setAttribute('class','arrow');if(!this.isLeft){path.setAttribute('transform','translate(100, 100) rotate(180) ');}
svg.appendChild(path);return svg;};function getArrowMovements(shape){if(typeof shape=='string'){return shape;}
return'M '+shape.x0+',50'+' L '+shape.x1+','+(shape.y1+50)+' L '+shape.x2+','+(shape.y2+50)+' L '+shape.x3+',50 '+' L '+shape.x2+','+(50-shape.y2)+' L '+shape.x1+','+(50-shape.y1)+' Z';}
PrevNextButton.prototype.onTap=function(){if(!this.isEnabled){return;}
this.parent.uiChange();var method=this.isPrevious?'previous':'next';this.parent[method]();};PrevNextButton.prototype.handleEvent=utils.handleEvent;PrevNextButton.prototype.onclick=function(event){var focused=document.activeElement;if(focused&&focused==this.element){this.onTap(event,event);}};PrevNextButton.prototype.enable=function(){if(this.isEnabled){return;}
this.element.disabled=false;this.isEnabled=true;};PrevNextButton.prototype.disable=function(){if(!this.isEnabled){return;}
this.element.disabled=true;this.isEnabled=false;};PrevNextButton.prototype.update=function(){var slides=this.parent.slides;if(this.parent.options.wrapAround&&slides.length>1){this.enable();return;}
var lastIndex=slides.length?slides.length-1:0;var boundIndex=this.isPrevious?0:lastIndex;var method=this.parent.selectedIndex==boundIndex?'disable':'enable';this[method]();};PrevNextButton.prototype.destroy=function(){this.deactivate();};utils.extend(Flickity.defaults,{prevNextButtons:true,arrowShape:{x0:10,x1:60,y1:50,x2:70,y2:40,x3:30}});Flickity.createMethods.push('_createPrevNextButtons');var proto=Flickity.prototype;proto._createPrevNextButtons=function(){if(!this.options.prevNextButtons){return;}
this.prevButton=new PrevNextButton(-1,this);this.nextButton=new PrevNextButton(1,this);this.on('activate',this.activatePrevNextButtons);};proto.activatePrevNextButtons=function(){this.prevButton.activate();this.nextButton.activate();this.on('deactivate',this.deactivatePrevNextButtons);};proto.deactivatePrevNextButtons=function(){this.prevButton.deactivate();this.nextButton.deactivate();this.off('deactivate',this.deactivatePrevNextButtons);};Flickity.PrevNextButton=PrevNextButton;return Flickity;}));(function(window,factory){if(typeof define=='function'&&define.amd){define('flickity/js/page-dots',['./flickity','tap-listener/tap-listener','fizzy-ui-utils/utils'],function(Flickity,TapListener,utils){return factory(window,Flickity,TapListener,utils);});}else if(typeof module=='object'&&module.exports){module.exports=factory(window,require('./flickity'),require('tap-listener'),require('fizzy-ui-utils'));}else{factory(window,window.Flickity,window.TapListener,window.fizzyUIUtils);}}(window,function factory(window,Flickity,TapListener,utils){function PageDots(parent){this.parent=parent;this._create();}
PageDots.prototype=new TapListener();PageDots.prototype._create=function(){this.holder=document.createElement('ol');this.holder.className='flickity-page-dots';this.dots=[];this.on('tap',this.onTap);this.on('pointerDown',this.parent.childUIPointerDown.bind(this.parent));};PageDots.prototype.activate=function(){this.setDots();this.bindTap(this.holder);this.parent.element.appendChild(this.holder);};PageDots.prototype.deactivate=function(){this.parent.element.removeChild(this.holder);TapListener.prototype.destroy.call(this);};PageDots.prototype.setDots=function(){var delta=this.parent.slides.length-this.dots.length;if(delta>0){this.addDots(delta);}else if(delta<0){this.removeDots(-delta);}};PageDots.prototype.addDots=function(count){var fragment=document.createDocumentFragment();var newDots=[];var length=this.dots.length;var max=length+count;for(var i=length;i<max;i++){var dot=document.createElement('li');dot.className='dot';dot.setAttribute('aria-label','Page dot '+(i+1));fragment.appendChild(dot);newDots.push(dot);}
this.holder.appendChild(fragment);this.dots=this.dots.concat(newDots);};PageDots.prototype.removeDots=function(count){var removeDots=this.dots.splice(this.dots.length-count,count);removeDots.forEach(function(dot){this.holder.removeChild(dot);},this);};PageDots.prototype.updateSelected=function(){if(this.selectedDot){this.selectedDot.className='dot';this.selectedDot.removeAttribute('aria-current');}
if(!this.dots.length){return;}
this.selectedDot=this.dots[this.parent.selectedIndex];this.selectedDot.className='dot is-selected';this.selectedDot.setAttribute('aria-current','step');};PageDots.prototype.onTap=function(event){var target=event.target;if(target.nodeName!='LI'){return;}
this.parent.uiChange();var index=this.dots.indexOf(target);this.parent.select(index);};PageDots.prototype.destroy=function(){this.deactivate();};Flickity.PageDots=PageDots;utils.extend(Flickity.defaults,{pageDots:true});Flickity.createMethods.push('_createPageDots');var proto=Flickity.prototype;proto._createPageDots=function(){if(!this.options.pageDots){return;}
this.pageDots=new PageDots(this);this.on('activate',this.activatePageDots);this.on('select',this.updateSelectedPageDots);this.on('cellChange',this.updatePageDots);this.on('resize',this.updatePageDots);this.on('deactivate',this.deactivatePageDots);};proto.activatePageDots=function(){this.pageDots.activate();};proto.updateSelectedPageDots=function(){this.pageDots.updateSelected();};proto.updatePageDots=function(){this.pageDots.setDots();};proto.deactivatePageDots=function(){this.pageDots.deactivate();};Flickity.PageDots=PageDots;return Flickity;}));(function(window,factory){if(typeof define=='function'&&define.amd){define('flickity/js/player',['ev-emitter/ev-emitter','fizzy-ui-utils/utils','./flickity'],function(EvEmitter,utils,Flickity){return factory(EvEmitter,utils,Flickity);});}else if(typeof module=='object'&&module.exports){module.exports=factory(require('ev-emitter'),require('fizzy-ui-utils'),require('./flickity'));}else{factory(window.EvEmitter,window.fizzyUIUtils,window.Flickity);}}(window,function factory(EvEmitter,utils,Flickity){function Player(parent){this.parent=parent;this.state='stopped';this.onVisibilityChange=this.visibilityChange.bind(this);this.onVisibilityPlay=this.visibilityPlay.bind(this);}
Player.prototype=Object.create(EvEmitter.prototype);Player.prototype.play=function(){if(this.state=='playing'){return;}
var isPageHidden=document.hidden;if(isPageHidden){document.addEventListener('visibilitychange',this.onVisibilityPlay);return;}
this.state='playing';document.addEventListener('visibilitychange',this.onVisibilityChange);this.tick();};Player.prototype.tick=function(){if(this.state!='playing'){return;}
var time=this.parent.options.autoPlay;time=typeof time=='number'?time:3000;var _this=this;this.clear();this.timeout=setTimeout(function(){_this.parent.next(true);_this.tick();},time);};Player.prototype.stop=function(){this.state='stopped';this.clear();document.removeEventListener('visibilitychange',this.onVisibilityChange);};Player.prototype.clear=function(){clearTimeout(this.timeout);};Player.prototype.pause=function(){if(this.state=='playing'){this.state='paused';this.clear();}};Player.prototype.unpause=function(){if(this.state=='paused'){this.play();}};Player.prototype.visibilityChange=function(){var isPageHidden=document.hidden;this[isPageHidden?'pause':'unpause']();};Player.prototype.visibilityPlay=function(){this.play();document.removeEventListener('visibilitychange',this.onVisibilityPlay);};utils.extend(Flickity.defaults,{pauseAutoPlayOnHover:true});Flickity.createMethods.push('_createPlayer');var proto=Flickity.prototype;proto._createPlayer=function(){this.player=new Player(this);this.on('activate',this.activatePlayer);this.on('uiChange',this.stopPlayer);this.on('pointerDown',this.stopPlayer);this.on('deactivate',this.deactivatePlayer);};proto.activatePlayer=function(){if(!this.options.autoPlay){return;}
this.player.play();this.element.addEventListener('mouseenter',this);};proto.playPlayer=function(){this.player.play();};proto.stopPlayer=function(){this.player.stop();};proto.pausePlayer=function(){this.player.pause();};proto.unpausePlayer=function(){this.player.unpause();};proto.deactivatePlayer=function(){this.player.stop();this.element.removeEventListener('mouseenter',this);};proto.onmouseenter=function(){if(!this.options.pauseAutoPlayOnHover){return;}
this.player.pause();this.element.addEventListener('mouseleave',this);};proto.onmouseleave=function(){this.player.unpause();this.element.removeEventListener('mouseleave',this);};Flickity.Player=Player;return Flickity;}));(function(window,factory){if(typeof define=='function'&&define.amd){define('flickity/js/add-remove-cell',['./flickity','fizzy-ui-utils/utils'],function(Flickity,utils){return factory(window,Flickity,utils);});}else if(typeof module=='object'&&module.exports){module.exports=factory(window,require('./flickity'),require('fizzy-ui-utils'));}else{factory(window,window.Flickity,window.fizzyUIUtils);}}(window,function factory(window,Flickity,utils){function getCellsFragment(cells){var fragment=document.createDocumentFragment();cells.forEach(function(cell){fragment.appendChild(cell.element);});return fragment;}
var proto=Flickity.prototype;proto.insert=function(elems,index){var cells=this._makeCells(elems);if(!cells||!cells.length){return;}
var len=this.cells.length;index=index===undefined?len:index;var fragment=getCellsFragment(cells);var isAppend=index==len;if(isAppend){this.slider.appendChild(fragment);}else{var insertCellElement=this.cells[index].element;this.slider.insertBefore(fragment,insertCellElement);}
if(index===0){this.cells=cells.concat(this.cells);}else if(isAppend){this.cells=this.cells.concat(cells);}else{var endCells=this.cells.splice(index,len-index);this.cells=this.cells.concat(cells).concat(endCells);}
this._sizeCells(cells);this.cellChange(index,true);};proto.append=function(elems){this.insert(elems,this.cells.length);};proto.prepend=function(elems){this.insert(elems,0);};proto.remove=function(elems){var cells=this.getCells(elems);if(!cells||!cells.length){return;}
var minCellIndex=this.cells.length-1;cells.forEach(function(cell){cell.remove();var index=this.cells.indexOf(cell);minCellIndex=Math.min(index,minCellIndex);utils.removeFrom(this.cells,cell);},this);this.cellChange(minCellIndex,true);};proto.cellSizeChange=function(elem){var cell=this.getCell(elem);if(!cell){return;}
cell.getSize();var index=this.cells.indexOf(cell);this.cellChange(index);};proto.cellChange=function(changedCellIndex,isPositioningSlider){var prevSelectedElem=this.selectedElement;this._positionCells(changedCellIndex);this._getWrapShiftCells();this.setGallerySize();var cell=this.getCell(prevSelectedElem);if(cell){this.selectedIndex=this.getCellSlideIndex(cell);}
this.selectedIndex=Math.min(this.slides.length-1,this.selectedIndex);this.emitEvent('cellChange',[changedCellIndex]);this.select(this.selectedIndex);if(isPositioningSlider){this.positionSliderAtSelected();}};return Flickity;}));(function(window,factory){if(typeof define=='function'&&define.amd){define('flickity/js/lazyload',['./flickity','fizzy-ui-utils/utils'],function(Flickity,utils){return factory(window,Flickity,utils);});}else if(typeof module=='object'&&module.exports){module.exports=factory(window,require('./flickity'),require('fizzy-ui-utils'));}else{factory(window,window.Flickity,window.fizzyUIUtils);}}(window,function factory(window,Flickity,utils){'use strict';Flickity.createMethods.push('_createLazyload');var proto=Flickity.prototype;proto._createLazyload=function(){this.on('select',this.lazyLoad);};proto.lazyLoad=function(){var lazyLoad=this.options.lazyLoad;if(!lazyLoad){return;}
var adjCount=typeof lazyLoad=='number'?lazyLoad:0;var cellElems=this.getAdjacentCellElements(adjCount);var lazyImages=[];cellElems.forEach(function(cellElem){var lazyCellImages=getCellLazyImages(cellElem);lazyImages=lazyImages.concat(lazyCellImages);});lazyImages.forEach(function(img){new LazyLoader(img,this);},this);};function getCellLazyImages(cellElem){if(cellElem.nodeName=='IMG'){var lazyloadAttr=cellElem.getAttribute('data-flickity-lazyload');var srcAttr=cellElem.getAttribute('data-flickity-lazyload-src');var srcsetAttr=cellElem.getAttribute('data-flickity-lazyload-srcset');if(lazyloadAttr||srcAttr||srcsetAttr){return[cellElem];}}
var lazySelector='img[data-flickity-lazyload], '+'img[data-flickity-lazyload-src], img[data-flickity-lazyload-srcset]';var imgs=cellElem.querySelectorAll(lazySelector);return utils.makeArray(imgs);}
function LazyLoader(img,flickity){this.img=img;this.flickity=flickity;this.load();}
LazyLoader.prototype.handleEvent=utils.handleEvent;LazyLoader.prototype.load=function(){this.img.addEventListener('load',this);this.img.addEventListener('error',this);var src=this.img.getAttribute('data-flickity-lazyload')||this.img.getAttribute('data-flickity-lazyload-src');var srcset=this.img.getAttribute('data-flickity-lazyload-srcset');this.img.src=src;if(srcset){this.img.setAttribute('srcset',srcset);}
this.img.removeAttribute('data-flickity-lazyload');this.img.removeAttribute('data-flickity-lazyload-src');this.img.removeAttribute('data-flickity-lazyload-srcset');};LazyLoader.prototype.onload=function(event){this.complete(event,'flickity-lazyloaded');};LazyLoader.prototype.onerror=function(event){this.complete(event,'flickity-lazyerror');};LazyLoader.prototype.complete=function(event,className){this.img.removeEventListener('load',this);this.img.removeEventListener('error',this);var cell=this.flickity.getParentCell(this.img);var cellElem=cell&&cell.element;this.flickity.cellSizeChange(cellElem);this.img.classList.add(className);this.flickity.dispatchEvent('lazyLoad',event,cellElem);};Flickity.LazyLoader=LazyLoader;return Flickity;}));
/*!
 * Flickity v2.1.2
 * Touch, responsive, flickable carousels
 *
 * Licensed GPLv3 for open source use
 * or Flickity Commercial License for commercial use
 *
 * https://flickity.metafizzy.co
 * Copyright 2015-2018 Metafizzy
 */
(function(window,factory){if(typeof define=='function'&&define.amd){define('flickity/js/index',['./flickity','./drag','./prev-next-button','./page-dots','./player','./add-remove-cell','./lazyload'],factory);}else if(typeof module=='object'&&module.exports){module.exports=factory(require('./flickity'),require('./drag'),require('./prev-next-button'),require('./page-dots'),require('./player'),require('./add-remove-cell'),require('./lazyload'));}})(window,function factory(Flickity){return Flickity;});
/*!
 * Flickity asNavFor v2.0.1
 * enable asNavFor for Flickity
 */
(function(window,factory){if(typeof define=='function'&&define.amd){define('flickity-as-nav-for/as-nav-for',['flickity/js/index','fizzy-ui-utils/utils'],factory);}else if(typeof module=='object'&&module.exports){module.exports=factory(require('flickity'),require('fizzy-ui-utils'));}else{window.Flickity=factory(window.Flickity,window.fizzyUIUtils);}}(window,function factory(Flickity,utils){Flickity.createMethods.push('_createAsNavFor');var proto=Flickity.prototype;proto._createAsNavFor=function(){this.on('activate',this.activateAsNavFor);this.on('deactivate',this.deactivateAsNavFor);this.on('destroy',this.destroyAsNavFor);var asNavForOption=this.options.asNavFor;if(!asNavForOption){return;}
var _this=this;setTimeout(function initNavCompanion(){_this.setNavCompanion(asNavForOption);});};proto.setNavCompanion=function(elem){elem=utils.getQueryElement(elem);var companion=Flickity.data(elem);if(!companion||companion==this){return;}
this.navCompanion=companion;var _this=this;this.onNavCompanionSelect=function(){_this.navCompanionSelect();};companion.on('select',this.onNavCompanionSelect);this.on('staticClick',this.onNavStaticClick);this.navCompanionSelect(true);};proto.navCompanionSelect=function(isInstant){if(!this.navCompanion){return;}
var selectedCell=this.navCompanion.selectedCells[0];var firstIndex=this.navCompanion.cells.indexOf(selectedCell);var lastIndex=firstIndex+this.navCompanion.selectedCells.length-1;var selectIndex=Math.floor(lerp(firstIndex,lastIndex,this.navCompanion.cellAlign));this.selectCell(selectIndex,false,isInstant);this.removeNavSelectedElements();if(selectIndex>=this.cells.length){return;}
var selectedCells=this.cells.slice(firstIndex,lastIndex+1);this.navSelectedElements=selectedCells.map(function(cell){return cell.element;});this.changeNavSelectedClass('add');};function lerp(a,b,t){return(b-a)*t+a;}
proto.changeNavSelectedClass=function(method){this.navSelectedElements.forEach(function(navElem){navElem.classList[method]('is-nav-selected');});};proto.activateAsNavFor=function(){this.navCompanionSelect(true);};proto.removeNavSelectedElements=function(){if(!this.navSelectedElements){return;}
this.changeNavSelectedClass('remove');delete this.navSelectedElements;};proto.onNavStaticClick=function(event,pointer,cellElement,cellIndex){if(typeof cellIndex=='number'){this.navCompanion.selectCell(cellIndex);}};proto.deactivateAsNavFor=function(){this.removeNavSelectedElements();};proto.destroyAsNavFor=function(){if(!this.navCompanion){return;}
this.navCompanion.off('select',this.onNavCompanionSelect);this.off('staticClick',this.onNavStaticClick);delete this.navCompanion;};return Flickity;}));
/*!
 * imagesLoaded v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
(function(window,factory){'use strict';if(typeof define=='function'&&define.amd){define('imagesloaded/imagesloaded',['ev-emitter/ev-emitter'],function(EvEmitter){return factory(window,EvEmitter);});}else if(typeof module=='object'&&module.exports){module.exports=factory(window,require('ev-emitter'));}else{window.imagesLoaded=factory(window,window.EvEmitter);}})(typeof window!=='undefined'?window:this,function factory(window,EvEmitter){var $=window.jQuery;var console=window.console;function extend(a,b){for(var prop in b){a[prop]=b[prop];}
return a;}
var arraySlice=Array.prototype.slice;function makeArray(obj){if(Array.isArray(obj)){return obj;}
var isArrayLike=typeof obj=='object'&&typeof obj.length=='number';if(isArrayLike){return arraySlice.call(obj);}
return[obj];}
function ImagesLoaded(elem,options,onAlways){if(!(this instanceof ImagesLoaded)){return new ImagesLoaded(elem,options,onAlways);}
var queryElem=elem;if(typeof elem=='string'){queryElem=document.querySelectorAll(elem);}
if(!queryElem){console.error('Bad element for imagesLoaded '+(queryElem||elem));return;}
this.elements=makeArray(queryElem);this.options=extend({},this.options);if(typeof options=='function'){onAlways=options;}else{extend(this.options,options);}
if(onAlways){this.on('always',onAlways);}
this.getImages();if($){this.jqDeferred=new $.Deferred();}
setTimeout(this.check.bind(this));}
ImagesLoaded.prototype=Object.create(EvEmitter.prototype);ImagesLoaded.prototype.options={};ImagesLoaded.prototype.getImages=function(){this.images=[];this.elements.forEach(this.addElementImages,this);};ImagesLoaded.prototype.addElementImages=function(elem){if(elem.nodeName=='IMG'){this.addImage(elem);}
if(this.options.background===true){this.addElementBackgroundImages(elem);}
var nodeType=elem.nodeType;if(!nodeType||!elementNodeTypes[nodeType]){return;}
var childImgs=elem.querySelectorAll('img');for(var i=0;i<childImgs.length;i++){var img=childImgs[i];this.addImage(img);}
if(typeof this.options.background=='string'){var children=elem.querySelectorAll(this.options.background);for(i=0;i<children.length;i++){var child=children[i];this.addElementBackgroundImages(child);}}};var elementNodeTypes={1:true,9:true,11:true};ImagesLoaded.prototype.addElementBackgroundImages=function(elem){var style=getComputedStyle(elem);if(!style){return;}
var reURL=/url\((['"])?(.*?)\1\)/gi;var matches=reURL.exec(style.backgroundImage);while(matches!==null){var url=matches&&matches[2];if(url){this.addBackground(url,elem);}
matches=reURL.exec(style.backgroundImage);}};ImagesLoaded.prototype.addImage=function(img){var loadingImage=new LoadingImage(img);this.images.push(loadingImage);};ImagesLoaded.prototype.addBackground=function(url,elem){var background=new Background(url,elem);this.images.push(background);};ImagesLoaded.prototype.check=function(){var _this=this;this.progressedCount=0;this.hasAnyBroken=false;if(!this.images.length){this.complete();return;}
function onProgress(image,elem,message){setTimeout(function(){_this.progress(image,elem,message);});}
this.images.forEach(function(loadingImage){loadingImage.once('progress',onProgress);loadingImage.check();});};ImagesLoaded.prototype.progress=function(image,elem,message){this.progressedCount++;this.hasAnyBroken=this.hasAnyBroken||!image.isLoaded;this.emitEvent('progress',[this,image,elem]);if(this.jqDeferred&&this.jqDeferred.notify){this.jqDeferred.notify(this,image);}
if(this.progressedCount==this.images.length){this.complete();}
if(this.options.debug&&console){console.log('progress: '+message,image,elem);}};ImagesLoaded.prototype.complete=function(){var eventName=this.hasAnyBroken?'fail':'done';this.isComplete=true;this.emitEvent(eventName,[this]);this.emitEvent('always',[this]);if(this.jqDeferred){var jqMethod=this.hasAnyBroken?'reject':'resolve';this.jqDeferred[jqMethod](this);}};function LoadingImage(img){this.img=img;}
LoadingImage.prototype=Object.create(EvEmitter.prototype);LoadingImage.prototype.check=function(){var isComplete=this.getIsImageComplete();if(isComplete){this.confirm(this.img.naturalWidth!==0,'naturalWidth');return;}
this.proxyImage=new Image();this.proxyImage.addEventListener('load',this);this.proxyImage.addEventListener('error',this);this.img.addEventListener('load',this);this.img.addEventListener('error',this);this.proxyImage.src=this.img.src;};LoadingImage.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth;};LoadingImage.prototype.confirm=function(isLoaded,message){this.isLoaded=isLoaded;this.emitEvent('progress',[this,this.img,message]);};LoadingImage.prototype.handleEvent=function(event){var method='on'+event.type;if(this[method]){this[method](event);}};LoadingImage.prototype.onload=function(){this.confirm(true,'onload');this.unbindEvents();};LoadingImage.prototype.onerror=function(){this.confirm(false,'onerror');this.unbindEvents();};LoadingImage.prototype.unbindEvents=function(){this.proxyImage.removeEventListener('load',this);this.proxyImage.removeEventListener('error',this);this.img.removeEventListener('load',this);this.img.removeEventListener('error',this);};function Background(url,element){this.url=url;this.element=element;this.img=new Image();}
Background.prototype=Object.create(LoadingImage.prototype);Background.prototype.check=function(){this.img.addEventListener('load',this);this.img.addEventListener('error',this);this.img.src=this.url;var isComplete=this.getIsImageComplete();if(isComplete){this.confirm(this.img.naturalWidth!==0,'naturalWidth');this.unbindEvents();}};Background.prototype.unbindEvents=function(){this.img.removeEventListener('load',this);this.img.removeEventListener('error',this);};Background.prototype.confirm=function(isLoaded,message){this.isLoaded=isLoaded;this.emitEvent('progress',[this,this.element,message]);};ImagesLoaded.makeJQueryPlugin=function(jQuery){jQuery=jQuery||window.jQuery;if(!jQuery){return;}
$=jQuery;$.fn.imagesLoaded=function(options,callback){var instance=new ImagesLoaded(this,options,callback);return instance.jqDeferred.promise($(this));};};ImagesLoaded.makeJQueryPlugin();return ImagesLoaded;});
/*!
 * Flickity imagesLoaded v2.0.0
 * enables imagesLoaded option for Flickity
 */
(function(window,factory){if(typeof define=='function'&&define.amd){define(['flickity/js/index','imagesloaded/imagesloaded'],function(Flickity,imagesLoaded){return factory(window,Flickity,imagesLoaded);});}else if(typeof module=='object'&&module.exports){module.exports=factory(window,require('flickity'),require('imagesloaded'));}else{window.Flickity=factory(window,window.Flickity,window.imagesLoaded);}}(window,function factory(window,Flickity,imagesLoaded){'use strict';Flickity.createMethods.push('_createImagesLoaded');var proto=Flickity.prototype;proto._createImagesLoaded=function(){this.on('activate',this.imagesLoaded);};proto.imagesLoaded=function(){if(!this.options.imagesLoaded){return;}
var _this=this;function onImagesLoadedProgress(instance,image){var cell=_this.getParentCell(image.img);_this.cellSizeChange(cell&&cell.element);if(!_this.options.freeScroll){_this.positionSliderAtSelected();}}
imagesLoaded(this.slider).on('progress',onImagesLoadedProgress);};return Flickity;}));
/*!
 * Flickity hash v1.0.3
 * Enable hash navigation for Flickity
 */
(function(window,factory){if(typeof define=='function'&&define.amd){define(['flickity/js/index',],factory);}else if(typeof module=='object'&&module.exports){module.exports=factory(require('flickity'));}else{factory(window.Flickity);}}(window,function factory(Flickity){'use strict';Flickity.createMethods.push('_createHash');var proto=Flickity.prototype;proto._createHash=function(){if(!this.options.hash){return;}
this.connectedHashLinks=[];this.onHashLinkClick=function(event){event.preventDefault();this.selectCell(event.currentTarget.hash);history.replaceState(null,'',event.currentTarget.hash);}.bind(this);this.on('activate',this.activateHash);this.on('deactivate',this.deactivateHash);};proto.activateHash=function(){this.on('change',this.onChangeHash);if(this.options.initialIndex===undefined&&location.hash){var cell=this.queryCell(location.hash);if(cell){this.options.initialIndex=this.getCellSlideIndex(cell);}}
this.connectHashLinks();};proto.deactivateHash=function(){this.off('change',this.onChangeHash);this.disconnectHashLinks();};proto.onChangeHash=function(){var id=this.selectedElement.id;if(id){var url='#'+id;history.replaceState(null,'',url);}};proto.connectHashLinks=function(){var links=document.querySelectorAll('a');for(var i=0;i<links.length;i++){this.connectHashLink(links[i]);}};var proxyLink=document.createElement('a');proto.connectHashLink=function(link){if(!link.hash){return;}
proxyLink.href=link.href;if(proxyLink.pathname!=location.pathname){return;}
var cell=this.queryCell(link.hash);if(!cell){return;}
link.addEventListener('click',this.onHashLinkClick);this.connectedHashLinks.push(link);};proto.disconnectHashLinks=function(){this.connectedHashLinks.forEach(function(link){link.removeEventListener('click',this.onHashLinkClick);},this);this.connectedHashLinks=[];};return Flickity;}));
/*! http://www.imgix.com imgix.js - v2.2.4 - 2016-07-11 
 _                    _             _
(_)                  (_)           (_)
 _  _ __ ___    __ _  _ __  __      _  ___
| || '_ ` _ \  / _` || |\ \/ /     | |/ __|
| || | | | | || (_| || | >  <  _   | |\__ \
|_||_| |_| |_| \__, ||_|/_/\_\(_)  | ||___/
                __/ |             _/ |
               |___/             |__/

*/
(function(){function initPolyfills(){if(!Object.freeze){Object.freeze=function freeze(object){return object;};}
if(!Array.prototype.filter||Array.prototype.filter.name=='findAll'){Array.prototype.filter=function(fun){if(this===void 0||this===null){throw new TypeError();}
var t=Object(this);var len=t.length>>>0;if(typeof fun!=='function'){throw new TypeError();}
var res=[];var thisArg=arguments.length>=2?arguments[1]:void 0;for(var i=0;i<len;i++){if(i in t){var val=t[i];if(fun.call(thisArg,val,i,t)){res.push(val);}}}
return res;};}
if(!Array.prototype.map){Array.prototype.map=function(callback,thisArg){var T,A,k;if(this==null){throw new TypeError(" this is null or not defined");}
var O=Object(this);var len=O.length>>>0;if(typeof callback!=="function"){throw new TypeError(callback+" is not a function");}
if(arguments.length>1){T=thisArg;}
A=new Array(len);k=0;while(k<len){var kValue,mappedValue;if(k in O){kValue=O[k];mappedValue=callback.call(T,kValue,k,O);A[k]=mappedValue;}
k++;}
return A;};}
if(!document.querySelectorAll){document.querySelectorAll=function(selectors){var style=document.createElement('style'),elements=[],element;document.documentElement.firstChild.appendChild(style);document._qsa=[];style.styleSheet.cssText=selectors+'{x-qsa:expression(document._qsa && document._qsa.push(this))}';window.scrollBy(0,0);style.parentNode.removeChild(style);while(document._qsa.length){element=document._qsa.shift();element.style.removeAttribute('x-qsa');elements.push(element);}
document._qsa=null;return elements;};}
if(!document.querySelector){document.querySelector=function(selectors){var elements=document.querySelectorAll(selectors);return(elements.length)?elements[0]:null;};}
if(!Array.prototype.indexOf){Array.prototype.indexOf=function(needle){for(var i=0;i<this.length;i++){if(this[i]===needle){return i;}}
return-1;};}
if(!Array.isArray){Array.isArray=function(arg){return Object.prototype.toString.call(arg)==='[object Array]';};}
if(!Object.keys){Object.keys=(function(){var hasOwnProperty=Object.prototype.hasOwnProperty,hasDontEnumBug=!({toString:null}).propertyIsEnumerable('toString'),dontEnums=['toString','toLocaleString','valueOf','hasOwnProperty','isPrototypeOf','propertyIsEnumerable','constructor'],dontEnumsLength=dontEnums.length;return function(obj){if(typeof obj!=='object'&&(typeof obj!=='function'||obj===null)){throw new TypeError('Object.keys called on non-object');}
var result=[],prop,i;for(prop in obj){if(hasOwnProperty.call(obj,prop)){result.push(prop);}}
if(hasDontEnumBug){for(i=0;i<dontEnumsLength;i++){if(hasOwnProperty.call(obj,dontEnums[i])){result.push(dontEnums[i]);}}}
return result;};}());}
!('getComputedStyle'in window)&&(window.getComputedStyle=(function(){function getPixelSize(element,style,property,fontSize){var
sizeWithSuffix=style[property],size=parseFloat(sizeWithSuffix),suffix=sizeWithSuffix.split(/\d/)[0],rootSize;fontSize=fontSize!=null?fontSize:/%|em/.test(suffix)&&element.parentElement?getPixelSize(element.parentElement,element.parentElement.currentStyle,'fontSize',null):16;rootSize=property=='fontSize'?fontSize:/width/i.test(property)?element.clientWidth:element.clientHeight;return(suffix=='em')?size*fontSize:(suffix=='in')?size*96:(suffix=='pt')?size*96/72:(suffix=='%')?size/100*rootSize:size;}
function setShortStyleProperty(style,property){var
borderSuffix=property=='border'?'Width':'',t=property+'Top'+borderSuffix,r=property+'Right'+borderSuffix,b=property+'Bottom'+borderSuffix,l=property+'Left'+borderSuffix;style[property]=(style[t]==style[r]==style[b]==style[l]?[style[t]]:style[t]==style[b]&&style[l]==style[r]?[style[t],style[r]]:style[l]==style[r]?[style[t],style[r],style[b]]:[style[t],style[r],style[b],style[l]]).join(' ');}
function CSSStyleDeclaration(element){var
currentStyle=element.currentStyle,style=this,fontSize=getPixelSize(element,currentStyle,'fontSize',null);for(property in currentStyle){if(/width|height|margin.|padding.|border.+W/.test(property)&&style[property]!=='auto'){style[property]=getPixelSize(element,currentStyle,property,fontSize)+'px';}else if(property==='styleFloat'){style['float']=currentStyle[property];}else{style[property]=currentStyle[property];}}
setShortStyleProperty(style,'margin');setShortStyleProperty(style,'padding');setShortStyleProperty(style,'border');style.fontSize=fontSize+'px';return style;}
CSSStyleDeclaration.prototype={constructor:CSSStyleDeclaration,getPropertyPriority:function(){},getPropertyValue:function(prop){return this[prop]||'';},item:function(){},removeProperty:function(){},setProperty:function(){},getPropertyCSSValue:function(){}};function getComputedStyle(element){return new CSSStyleDeclaration(element);}
return getComputedStyle;})(window));}
if(typeof window!=='undefined'){initPolyfills();}'use strict';var root=this;var imgix={version:'2.2.4'};if(typeof exports!=='undefined'){if(typeof module!=='undefined'&&module.exports){exports=module.exports=imgix;}
exports.imgix=imgix;}else{root.imgix=imgix;}
var IMGIX_USABLE_CLASS='imgix-usable';imgix.isImageElement=function(el){return(el&&el.tagName&&el.tagName.toLowerCase()==='img');};imgix.setElementImageAfterLoad=function(el,imgUrl,callback){var img=new Image();img.onload=img.onerror=function(){var isImageElement=imgix.isImageElement(el);if(isImageElement){el.onload=img.onerror=function(){if(typeof callback==='function'){callback(el,imgUrl);}};}
imgix.setElementImage(el,imgUrl);if(!isImageElement){if(typeof callback==='function'){callback(el,imgUrl);}}};if(el.hasAttribute('crossorigin')){img.setAttribute('crossorigin',el.getAttribute('crossorigin'));}
img.src=imgUrl;};imgix.setElementImage=function(el,imgUrl){if(!el){return false;}
if(imgix.isImageElement(el)){if(el.src!==imgUrl){el.src=imgUrl;}
return true;}else{var curBg=imgix.getBackgroundImage(el);if(curBg!==imgUrl){if(curBg){el.style.cssText=el.style.cssText.replace(curBg,imgUrl);return true;}else{if(document.addEventListener){el.style.backgroundImage='url('+imgUrl+')';}else{el.style.cssText='background-image:url('+imgUrl+')';}
return true;}}}
return false;};imgix.getEmptyImage=function(){return imgix.versionifyUrl('https://assets.imgix.net/pixel.gif');};imgix.getElementImage=function(el){if(imgix.isImageElement(el)){return el.src;}else{return imgix.getBackgroundImage(el);}};imgix.getBackgroundImage=function(el){var regex=/\burl\s*\(\s*["']?([^"'\r\n,]+)["']?\s*\)/gi,style,matches;if(window.getComputedStyle){style=window.getComputedStyle(el);}else if(document.documentElement.currentStyle){style=el.currentStyle;}
if(!style||!style.backgroundImage){style=el.style;}
matches=regex.exec(style.backgroundImage);if(matches&&matches.length>1){return matches[1];}else{return'';}};imgix.getElementsWithImages=function(){imgix.markElementsWithImages();return document.querySelectorAll('.'+IMGIX_USABLE_CLASS);};imgix.hasImage=function(el){var toCheck=el.style.cssText?el.style.cssText.toLowerCase():el.style.cssText;return el&&(imgix.isImageElement(el)||toCheck.indexOf('background-image')!==-1);};imgix.markElementsWithImages=function(){var all=document.getElementsByTagName('*');for(var i=0,max=all.length;i<max;i++){if(imgix.hasImage(all[i])){imgix.setImgixClass(all[i]);}}};imgix.hasClass=function(elem,name){return(' '+elem.className+' ').indexOf(' '+name+' ')>-1;};imgix.setImgixClass=function(el){if(imgix.hasClass(el,IMGIX_USABLE_CLASS)){return imgix.getImgixClass(el);}
var cls=imgix.getXPathClass(imgix.getElementTreeXPath(el));el.classList.add(cls);el.classList.add(IMGIX_USABLE_CLASS);return imgix.getImgixClass(el);};imgix.getImgixClass=function(el){if(imgix.hasClass(el,IMGIX_USABLE_CLASS)){return el.className.match(/imgix-el-[^\s]+/)[0];}};imgix.getXPathClass=function(xpath){var suffix;if(xpath){suffix=imgix.hashCode(xpath);}else{suffix=(new Date()).getTime().toString(36);}
return'imgix-el-'+suffix;};imgix.getElementImageSize=function(el){var w=0,h=0;if(imgix.isImageElement(el)){w=el.naturalWidth;h=el.naturalHeight;}else{w=imgix.helpers.extractInt(imgix.getCssProperty(el,'width'));h=imgix.helpers.extractInt(imgix.getCssProperty(el,'height'));}
return{width:w,height:h};};imgix.getCssPropertyById=function(elmId,property){var elem=document.getElementById(elmId);return imgix.helpers.getElementCssProperty(elem,property);};imgix.getCssProperty=function(el,property){return imgix.helpers.getElementCssProperty(el,property);};imgix.getCssPropertyBySelector=function(sel,property){var elem=document.querySelector(sel);return imgix.helpers.getElementCssProperty(elem,property);};imgix.instanceOfImgixURL=function(x){return x&&x.toString()==='[object imgixURL]';};imgix.setGradientOnElement=function(el,colors,baseColor){var baseColors=[];if(typeof baseColor==='undefined'){baseColors=['transparent','transparent'];}else{var base=imgix.hexToRGB(baseColor);if(base.slice(0,4)==='rgba'){baseColors.push(base);baseColors.push(imgix.applyAlphaToRGB(base,0));}else{baseColors.push(imgix.applyAlphaToRGB(base,0.5));baseColors.push(imgix.applyAlphaToRGB(base,0));}}
var backgroundGradients=['-ms-linear-gradient(top, '+baseColors[0]+' 0%, '+baseColors[1]+' 100%),-ms-linear-gradient(bottom left, '+colors[2]+' 0%,'+colors[4]+' 25%, '+colors[6]+' 50%, '+colors[8]+' 75%,'+colors[10]+' 100%)','-webkit-gradient(linear, 50% 0%, 50% 100%, color-stop(0%, '+baseColors[1]+'), color-stop(100%, '+baseColors[0]+')),-webkit-gradient(linear, 0% 100%, 100% 0%, color-stop(0%, '+colors[2]+'), color-stop(25%, '+colors[4]+'), color-stop(50%, '+colors[6]+'), color-stop(75%, '+colors[7]+'), color-stop(100%, '+colors[10]+'))','-webkit-linear-gradient(top, '+baseColors[0]+', '+baseColors[1]+' 100%),-webkit-linear-gradient(bottom left, '+colors[2]+', '+colors[4]+', '+colors[6]+','+colors[8]+')','-moz-linear-gradient(top, '+baseColors[0]+', '+baseColors[1]+' ),-moz-linear-gradient(bottom left, '+colors[2]+', '+colors[4]+', '+colors[6]+','+colors[8]+')','-o-linear-gradient(top, '+baseColors[0]+','+baseColors[1]+'),-o-linear-gradient(bottom left, '+colors[2]+', '+colors[4]+', '+colors[6]+','+colors[8]+')','linear-gradient(top, '+baseColors[0]+','+baseColors[1]+'),linear-gradient(bottom left, '+colors[2]+', '+colors[4]+', '+colors[6]+','+colors[8]+')'];for(var x=0;x<backgroundGradients.length;x++){el.style.backgroundImage=backgroundGradients[x];}};imgix.isDef=function(obj){return(typeof obj!=='undefined');};imgix.hashCode=function(str){var i,l,hval=0x811c9dc5;for(i=0,l=str.length;i<l;i++){hval^=str.charCodeAt(i);hval+=(hval<<1)+(hval<<4)+(hval<<7)+(hval<<8)+(hval<<24);}
return("0000000"+(hval>>>0).toString(16)).substr(-8);};'use strict';imgix.helpers={debouncer:function(func,wait){var timeoutRef;return function(){var self=this,args=arguments,later=function(){timeoutRef=null;func.apply(self,args);};window.clearTimeout(timeoutRef);timeoutRef=window.setTimeout(later,wait);};},throttler:function(func,wait){var timeoutRef;return function(){var self=this,args=arguments,later;if(!timeoutRef){later=function(){timeoutRef=null;func.apply(self,args);};timeoutRef=window.setTimeout(later,wait);}};},urlParser:(function(){function isNumeric(arg){return!isNaN(parseFloat(arg))&&isFinite(arg);}
return function(arg,url){var _ls=url||window.location.toString();if(!arg){return _ls;}else{arg=arg.toString();}
if(_ls.substring(0,2)==='//'){_ls='http:'+_ls;}else if(_ls.split('://').length===1){_ls='http://'+_ls;}
url=_ls.split('/');var _l={auth:''},host=url[2].split('@');if(host.length===1){host=host[0].split(':');}else{_l.auth=host[0];host=host[1].split(':');}
_l.protocol=url[0];_l.hostname=host[0];_l.port=(host[1]||((_l.protocol.split(':')[0].toLowerCase()==='https')?'443':'80'));_l.pathname=((url.length>3?'/':'')+url.slice(3,url.length).join('/').split('?')[0].split('#')[0]);var _p=_l.pathname;if(_p.charAt(_p.length-1)==='/'){_p=_p.substring(0,_p.length-1);}
var _h=_l.hostname,_hs=_h.split('.'),_ps=_p.split('/');if(arg==='hostname'){return _h;}else if(arg==='domain'){if(/^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$/.test(_h)){return _h;}else{return _hs.slice(-2).join('.');}}else if(arg==='sub'){return _hs.slice(0,_hs.length-2).join('.');}else if(arg==='port'){return _l.port;}else if(arg==='protocol'){return _l.protocol.split(':')[0];}else if(arg==='auth'){return _l.auth;}else if(arg==='user'){return _l.auth.split(':')[0];}else if(arg==='pass'){return _l.auth.split(':')[1]||'';}else if(arg==='path'){return _l.pathname;}else if(arg.charAt(0)==='.'){arg=arg.substring(1);if(isNumeric(arg)){arg=parseInt(arg,10);return _hs[arg<0?_hs.length+arg:arg-1]||'';}}else if(isNumeric(arg)){arg=parseInt(arg,10);return _ps[arg<0?_ps.length+arg:arg]||'';}else if(arg==='file'){return _ps.slice(-1)[0];}else if(arg==='filename'){return _ps.slice(-1)[0].split('.')[0];}else if(arg==='fileext'){return _ps.slice(-1)[0].split('.')[1]||'';}else if(arg.charAt(0)==='?'||arg.charAt(0)==='#'){var params=_ls,param=null;if(arg.charAt(0)==='?'){params=(params.split('?')[1]||'').split('#')[0];}else if(arg.charAt(0)==='#'){params=(params.split('#')[1]||'');}
if(!arg.charAt(1)){return params;}
arg=arg.substring(1);params=params.split('&');for(var i=0,ii=params.length;i<ii;i++){param=params[i].split('=');if(param[0]===arg){return param[1]||'';}}
return null;}
return'';};})(),mergeObject:function(){var obj={},i=0,il=arguments.length,key;for(;i<il;i++){for(key in arguments[i]){if(arguments[i].hasOwnProperty(key)){obj[key]=arguments[i][key];}}}
return obj;},pixelRound:function(pixelSize,pixelStep){return Math.ceil(pixelSize/pixelStep)*pixelStep;},isNumber:function(value){return!isNaN(parseFloat(value))&&isFinite(value);},getWindowDPR:function(){var dpr=window.devicePixelRatio?window.devicePixelRatio:1;if(dpr%1!==0){var tmpStr=dpr.toString();tmpStr=tmpStr.split('.')[1];dpr=(tmpStr.length>1&&tmpStr.slice(1,2)!=='0')?dpr.toFixed(2):dpr.toFixed(1);}
return dpr;},getWindowWidth:function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)||1024;},getWindowHeight:function(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)||768;},getImgSrc:function(elem){return elem.getAttribute('data-src')||elem.getAttribute('src');},calculateElementSize:function(elem){var val={width:elem.offsetWidth,height:elem.offsetHeight};if(elem.parentNode===null||elem===document.body){val.width=this.getWindowWidth();val.height=this.getWindowHeight();return val;}
if(val.width!==0||val.height!==0){if(elem.alt&&!elem.fluid){elem.fluid=true;return this.calculateElementSize(elem.parentNode);}
return val;}else{var found,prop,past={},visProp={position:'absolute',visibility:'hidden',display:'block'};for(prop in visProp){if(visProp.hasOwnProperty(prop)){past[prop]=elem.style[prop];elem.style[prop]=visProp[prop];}}
found={width:elem.offsetWidth,height:elem.offsetHeight};for(prop in visProp){if(visProp.hasOwnProperty(prop)){elem.style[prop]=past[prop];}}
if(found.width===0||found.height===0){return this.calculateElementSize(elem.parentNode);}else{return found;}}},isReallyObject:function(elem){return elem&&typeof elem==='object'&&(elem.toString())==='[object Object]';},isFluidSet:function(elem){return elem&&typeof elem==='object'&&(elem.toString())==='[object FluidSet]';},extractInt:function(str){if(str===undefined){return 0;}else if(typeof str==='number'){return str;}
return parseInt(str.replace(/\D/g,''),10)||0;},camelize:function(str){return str.replace(/[-_\s]+(.)?/g,function(match,c){return c?c.toUpperCase():'';});},getElementCssProperty:function(elem,prop){if(window.getComputedStyle){return window.getComputedStyle(elem,null).getPropertyValue(prop);}else{if(elem&&elem.style&&prop){return elem.style[this.camelize(prop)];}}
return'';},matchesSelector:function(elem,selector){var children=(elem.parentNode||document).querySelectorAll(selector);return Array.prototype.slice.call(children).indexOf(elem)>-1;},warn:function(message){if(window.console){window.console.warn(message);}}};'use strict';imgix.URL=function(url,imgParams){this._autoUpdateSel=null;this._autoUpdateCallback=null;if(url&&url.slice(0,2)==='//'&&window&&window.location){url=window.location.protocol+url;}
this.setUrl(url);if(typeof imgParams==='object'){this.setParams(imgParams);}
this.paramAliases={};};imgix.URL.prototype.attachGradientTo=function(elemOrSel,baseColor,callback){this.getColors(16,function(colors){if(colors&&colors.length<9){imgix.helpers.warn('not enough colors to create a gradient');if(callback&&typeof callback==='function'){callback(false);}
return;}
if(typeof elemOrSel==='string'){var results=document.querySelectorAll(elemOrSel);if(results&&results.length>0){for(var i=0;i<results.length;i++){imgix.setGradientOnElement(results[i],colors,baseColor);}}}else{imgix.setGradientOnElement(elemOrSel,colors,baseColor);}
if(callback&&typeof callback==='function'){callback(true);}});};imgix.URL.prototype.attachImageTo=function(elemOrSel,callback){if(typeof elemOrSel==='string'){var results=document.querySelectorAll(elemOrSel);if(results&&results.length>0){for(var i=0;i<results.length;i++){imgix.setElementImageAfterLoad(results[i],this.getUrl(),callback);}}}else{imgix.setElementImageAfterLoad(elemOrSel,this.getUrl(),callback);}};imgix.createParamString=function(){return new imgix.URL('');};imgix.updateVersion={};var cssColorCache={};imgix.URL.prototype.getColors=function(num,callback){var DEFAULT_COLOR_COUNT=10,paletteUrlObj=new imgix.URL(this.getUrl()),jsonUrl;function processPaletteData(data){var colors=[],i,rgb;if(!data||!data.colors){return undefined;}
for(i=0;i<data.colors.length;i++){rgb=[Math.round(data.colors[i].red*255),Math.round(data.colors[i].green*255),Math.round(data.colors[i].blue*255),];colors.push('rgb('+rgb.join(', ')+')');}
return colors;}
function requestPaletteData(){var xhr=new XMLHttpRequest();xhr.onreadystatechange=function(){var data;if(xhr.readyState===4){if(xhr.status===200){data=JSON.parse(xhr.response);}else{data={colors:[{red:1,green:1,blue:1}]};}
cssColorCache[jsonUrl]=processPaletteData(data);callback(cssColorCache[jsonUrl]);}};xhr.open('get',jsonUrl,true);xhr.send();}
if(typeof num==='function'){if(typeof callback==='number'){var tmpNum=callback;callback=num;num=tmpNum;}else{callback=num;num=DEFAULT_COLOR_COUNT;}}
paletteUrlObj.setParams({palette:'json',colors:num});jsonUrl=paletteUrlObj.getUrl();if(cssColorCache.hasOwnProperty(jsonUrl)){if(callback){callback(cssColorCache[jsonUrl]);}}else{requestPaletteData();}};imgix.URL.prototype._handleAutoUpdate=function(){var self=this,totalImages=0,loadedImages=0,curSel=this._autoUpdateSel,imgToEls={};if(!imgix.isDef(imgix.updateVersion[curSel])){imgix.updateVersion[curSel]=1;}else{imgix.updateVersion[curSel]++;}
function isVersionFresh(v){return curSel===self._autoUpdateSel&&v===imgix.updateVersion[curSel];}
function setImage(el,imgUrl){if(!(imgUrl in imgToEls)){imgToEls[imgUrl]=[];(function(){var img=new Image(),curV=imgix.updateVersion[curSel],startTime=(new Date()).getTime();img.onload=img.onerror=function(){if(!isVersionFresh(curV)){return;}
for(var i=0;i<imgToEls[imgUrl].length;i++){imgix.setElementImage(imgToEls[imgUrl][i],imgUrl);loadedImages++;if(typeof self._autoUpdateCallback==='function'){var obj={element:imgToEls[imgUrl][i],isComplete:loadedImages===totalImages,percentComplete:(loadedImages/totalImages)*100,totalComplete:loadedImages,loadTime:(new Date()).getTime()-startTime,total:totalImages};self._autoUpdateCallback(obj);}}};if(el.hasAttribute('crossorigin')){img.setAttribute('crossorigin',el.getAttribute('crossorigin'));}
img.src=imgUrl;})();}
imgToEls[imgUrl].push(el);}
function applyImg(el){var elImg=imgix.getElementImage(el),elBaseUrl=elImg;if(elImg&&elImg.indexOf('?')!==-1){elBaseUrl=elImg.split('?')[0];}
if(self.getBaseUrl()){setImage(el,self.getUrl());}else if(elBaseUrl&&self.getQueryString()){setImage(el,elBaseUrl+'?'+self.getQueryString());}else{loadedImages++;}}
if(this._autoUpdateSel!==null){var el=document.querySelectorAll(this._autoUpdateSel);totalImages=el.length;if(el&&totalImages===1){applyImg(el[0]);}else{for(var i=0;i<totalImages;i++){applyImg(el[i]);}}}};imgix.URL.prototype.autoUpdateImg=function(sel,callback){this._autoUpdateSel=sel;this._autoUpdateCallback=callback;this._handleAutoUpdate();};imgix.URL.prototype.setUrl=function(url){if(!url||typeof url!=='string'||url.length===0){url=imgix.getEmptyImage();}
this.urlParts=imgix.parseUrl(url);};imgix.URL.prototype.setURL=function(url){return this.setUrl(url);};imgix.URL.prototype.getURL=function(){return this.getUrl();};imgix.URL.prototype.toString=function(){return'[object imgixURL]';};imgix.URL.prototype.getUrl=function(){var url=imgix.buildUrl(this.urlParts);if(!url||url.length===0){return imgix.getEmptyImage();}
return url;};imgix.URL.prototype.removeParam=function(param){if(this.urlParts.paramValues.hasOwnProperty(param)){delete this.urlParts.paramValues[param];this.urlParts.params=Object.keys(this.urlParts.paramValues);}};imgix.URL.prototype.clearThenSetParams=function(params){this.clearParams(false);this.setParams(params);};imgix.URL.prototype.clearParams=function(runUpdate){runUpdate=!imgix.isDef(runUpdate)?true:runUpdate;for(var k in this.urlParts.paramValues){if(this.urlParts.paramValues.hasOwnProperty(k)){this.removeParam(k);}}
if(runUpdate){this._handleAutoUpdate();}};imgix.URL.prototype.setParams=function(dict,doOverride){if(imgix.instanceOfImgixURL(dict)){imgix.helpers.warn('setParams warning: dictionary of imgix params expectd. imgix URL instance passed instead');return;}
for(var k in dict){if(dict.hasOwnProperty(k)){this.setParam(k,dict[k],doOverride,true);}}
this._handleAutoUpdate();};imgix.URL.prototype.setParam=function(param,value,doOverride,noUpdate){param=param.toLowerCase();doOverride=!imgix.isDef(doOverride)?true:doOverride;noUpdate=!imgix.isDef(noUpdate)?false:noUpdate;if(param==='col'||param==='colorize'||param==='blend'||param==='mono'||param==='monochrome'){if(value.slice(0,3)==='rgb'){value=imgix.rgbToHex(value);}}
if(!doOverride&&this.urlParts.paramValues[param]){return this;}
if(!imgix.isDef(value)||value===null||value.length===0){this.removeParam(param);return this;}
if(this.urlParts.params.indexOf(param)===-1){this.urlParts.params.push(param);}
if(decodeURIComponent(value)===value){value=encodeURIComponent(value);}
this.urlParts.paramValues[param]=String(value);if(!noUpdate){this._handleAutoUpdate();}
return this;};imgix.URL.prototype.getParam=function(param){if(param==='mark'||param==='mask'){var result=this.urlParts.paramValues[param];if(decodeURIComponent(result)!==result){return decodeURIComponent(result);}
return result;}
return this.urlParts.paramValues[param];};imgix.URL.prototype.getParams=function(){if(this.urlParts.paramValues){return this.urlParts.paramValues;}
return{};};imgix.URL.prototype.getBaseUrl=function(){var url=this.getUrl();if(url.indexOf('?')!==-1){url=this.getUrl().split('?')[0];}
return url!==window.location.href?url:'';};imgix.URL.prototype.getQueryString=function(){var url=this.getUrl();if(url.indexOf('?')!==-1){return this.getUrl().split('?')[1];}
return'';};imgix.parseUrl=function(url){var
pkeys=['protocol','hostname','port','path','?','#','hostname'],keys=['protocol','hostname','port','pathname','search','hash','host'],result={};for(var i=0;i<keys.length;i++){result[keys[i]]=imgix.helpers.urlParser(pkeys[i],url);}
var qs=result.search;result.paramValues={};result.params=[];result.baseUrl=url.split('?')[0];if(qs&&qs.length>0){if(qs[0]==='?'){qs=qs.substr(1,qs.length);}
var parts=qs.split('&');for(var y=0;y<parts.length;y++){var tmp=parts[y].split('=');if(tmp[0]&&tmp[0].length&&tmp[0]!=='s'){result.paramValues[tmp[0]]=(tmp.length===2?tmp[1]:'');if(result.params.indexOf(tmp[0])===-1){result.params.push(tmp[0]);}}}}
return result;};imgix.buildUrl=function(parsed){var result=parsed.protocol+'://'+parsed.host;if(parsed.port!==null&&parsed.port!=='80'&&parsed.port!=='443'){result+=':'+parsed.port;}
result+=parsed.pathname;imgix.versionifyUrl(parsed);if(parsed.params.length>0){parsed.params=parsed.params.map(function(e){return e.toLowerCase();});parsed.params=parsed.params.filter(function(value,index,self){return self.indexOf(value)===index;});parsed.params=parsed.params.sort(function(a,b){if(a<b){return-1;}else if(a>b){return 1;}else{return 0;}});var qs=[];for(var i=0;i<parsed.params.length;i++){if(parsed.paramValues[parsed.params[i]].length>0){qs.push(parsed.params[i]+'='+parsed.paramValues[parsed.params[i]]);}}
if(result.indexOf('?')!==-1){result=result.split('?')[0];}
result+='?'+qs.join('&');}
return result;};imgix.versionifyUrl=function(target){var versionParam='ixjsv',splitUrl,result;if(typeof target==='string'){return imgix.versionifyStringUrl(target);}else{return imgix.versionifyParsedUrl(target);}};imgix.versionifyStringUrl=function(url){var versionParam='ixjsv',splitUrl,result;splitUrl=url.split('?');result=splitUrl[0]+'?'+versionParam+'='+imgix.version;if(!!splitUrl[1]){result+='&'+splitUrl[1];}
return result;}
imgix.versionifyParsedUrl=function(parsed){var versionParam='ixjsv';if(!parsed.paramValues[versionParam]){parsed.params.push(versionParam);}
parsed.paramValues[versionParam]=imgix.version;return parsed;};'use strict';var fluidDefaults={fluidClass:'imgix-fluid',updateOnResize:true,updateOnResizeDown:false,updateOnPinchZoom:false,highDPRAutoScaleQuality:true,onChangeParamOverride:null,autoInsertCSSBestPractices:false,fitImgTagToContainerWidth:true,fitImgTagToContainerHeight:false,ignoreDPR:false,pixelStep:10,debounce:200,lazyLoad:false,lazyLoadColor:null,lazyLoadOffsetVertical:20,lazyLoadOffsetHorizontal:20,lazyLoadScrollContainers:[typeof window==='undefined'?null:window],throttle:200,maxHeight:5000,maxWidth:5000,onLoad:null};function getFluidDefaults(){return fluidDefaults;}
imgix.FluidSet=function(options){if(imgix.helpers.isReallyObject(options)){this.options=imgix.helpers.mergeObject(getFluidDefaults(),options);}else{this.options=imgix.helpers.mergeObject(getFluidDefaults(),{});}
this.lazyLoadOffsets={t:Math.max(this.options.lazyLoadOffsetVertical,0),b:Math.max(this.options.lazyLoadOffsetVertical,0),l:Math.max(this.options.lazyLoadOffsetHorizontal,0),r:Math.max(this.options.lazyLoadOffsetHorizontal,0)};this.namespace=Math.random().toString(36).substring(7);this.windowResizeEventBound=false;this.windowScrollEventBound=false;this.windowLastWidth=0;this.windowLastHeight=0;};imgix.FluidSet.prototype.updateSrc=function(elem,pinchScale){if(elem.hasAttribute('src')&&elem.getAttribute('src')===''){elem.setAttribute('src',imgix.getEmptyImage());}
if(!elem.offsetWidth&&!elem.offsetHeight&&!elem.getClientRects().length){return;}
var details=this.getImgDetails(elem,pinchScale||1),newUrl=details.url,currentElemWidth=details.width,currentElemHeight=details.height;if(this.options.lazyLoad){var r=elem.getBoundingClientRect(),view={left:0-this.lazyLoadOffsets.l,top:0-this.lazyLoadOffsets.t,bottom:(window.innerHeight||document.documentElement.clientHeight)+this.lazyLoadOffsets.b,right:(window.innerWidth||document.documentElement.clientWidth)+this.lazyLoadOffsets.r};if((r.top>view.bottom)||(r.left>view.right)||(r.top+currentElemHeight<view.top)||(r.left+currentElemWidth<view.left)){if(!elem.fluidLazyColored&&this.options.lazyLoadColor){elem.fluidLazyColored=1;var self=this,llcType=typeof this.options.lazyLoadColor,i=new imgix.URL(imgix.helpers.getImgSrc(elem));i.getColors(16,function(colors){if(!colors){imgix.helpers.warn('No colors found for',i.getURL(),'for element',elem);return;}
var useColor=null;if(llcType==='boolean'){useColor=colors[0];}else if(llcType==='number'&&self.options.lazyLoadColor<colors.length){useColor=colors[self.options.lazyLoadColor];}else if(llcType==='function'){useColor=self.options.lazyLoadColor(elem,colors);}
if(useColor!==null){if(imgix.isImageElement(elem)&&elem.parentNode&&elem.parentNode.tagName.toLowerCase()!=='body'){elem.parentNode.style.backgroundColor=useColor;}else{elem.style.backgroundColor=useColor;}}});}
return;}}
elem.lastWidth=elem.lastWidth||0;elem.lastHeight=elem.lastHeight||0;if(this.options.updateOnResizeDown===false&&elem.lastWidth>=currentElemWidth&&elem.lastHeight>=currentElemHeight){return;}
if(!elem.fluidUpdateCount){elem.fluidUpdateCount=0;}
var onLoad=function(){};if(this.options.onLoad&&typeof this.options.onLoad==='function'){onLoad=this.options.onLoad;}
var wrappedOnLoad=function(el,imgUrl){el.fluidUpdateCount=parseInt(el.fluidUpdateCount,10)+1;onLoad(el,imgUrl);};imgix.setElementImageAfterLoad(elem,newUrl,wrappedOnLoad);elem.lastWidth=currentElemWidth;elem.lastHeight=currentElemHeight;};imgix.FluidSet.prototype.getImgDetails=function(elem,zoomMultiplier){if(!elem){return;}
var dpr=imgix.helpers.getWindowDPR(),pixelStep=this.options.pixelStep,elemSize=imgix.helpers.calculateElementSize(imgix.isImageElement(elem)?elem.parentNode:elem),elemWidth=imgix.helpers.pixelRound(elemSize.width*zoomMultiplier,pixelStep),elemHeight=imgix.helpers.pixelRound(elemSize.height*zoomMultiplier,pixelStep);if(!elem.url){elem.url=new imgix.URL(imgix.helpers.getImgSrc(elem));}
elem.url.setParams({h:'',w:''});elemWidth=Math.min(elemWidth,this.options.maxWidth);elemHeight=Math.min(elemHeight,this.options.maxHeight);if(dpr!==1&&!this.options.ignoreDPR){elem.url.setParam('dpr',dpr);}
if(this.options.highDPRAutoScaleQuality&&dpr>1){elem.url.setParam('q',Math.min(Math.max(parseInt((100/dpr),10),30),75));}
if(this.options.fitImgTagToContainerHeight&&this.options.fitImgTagToContainerWidth){elem.url.setParam('fit','crop');}
if(elem.url.getParam('fit')==='crop'){if(elemHeight>0&&(!imgix.isImageElement(elem)||(imgix.isImageElement(elem)&&this.options.fitImgTagToContainerHeight))){elem.url.setParam('h',elemHeight);}
if(elemWidth>0&&(!imgix.isImageElement(elem)||(imgix.isImageElement(elem)&&this.options.fitImgTagToContainerWidth))){elem.url.setParam('w',elemWidth);}}else{if(elemHeight<=elemWidth){elem.url.setParam('w',elemWidth);}else{elem.url.setParam('h',elemHeight);}}
if(!imgix.isImageElement(elem)&&this.options.autoInsertCSSBestPractices&&elem.style){elem.style.backgroundRepeat='no-repeat';elem.style.backgroundSize='cover';elem.style.backgroundPosition='50% 50%';}
var overrides={};if(this.options.onChangeParamOverride!==null&&typeof this.options.onChangeParamOverride==='function'){overrides=this.options.onChangeParamOverride(elemWidth,elemHeight,elem.url.getParams(),elem);}
for(var k in overrides){if(overrides.hasOwnProperty(k)){elem.url.setParam(k,overrides[k]);}}
return{url:elem.url.getURL(),width:elemWidth,height:elemHeight};};imgix.FluidSet.prototype.toString=function(){return'[object FluidSet]';};imgix.FluidSet.prototype.reload=function(){imgix.fluid(this);this.windowLastWidth=imgix.helpers.getWindowWidth();this.windowLastHeight=imgix.helpers.getWindowHeight();};imgix.FluidSet.prototype.attachGestureEvent=function(elem){var self=this;if(elem.addEventListener&&!elem.listenerAttached){elem.addEventListener('gestureend',function(e){self.updateSrc(this,e.scale);},false);elem.addEventListener('gesturechange',function(){self.updateSrc(this);},false);elem.listenerAttached=true;}};var scrollInstances={},resizeInstances={};imgix.FluidSet.prototype.attachScrollListener=function(){var th=this;scrollInstances[this.namespace]=imgix.helpers.throttler(function(){th.reload();},this.options.throttle);var handler,event;if(document.addEventListener){handler='addEventListener';event='scroll';}else{handler='attachEvent';event='onscroll';}
for(var i=0;i<this.options.lazyLoadScrollContainers.length;i++){this.options.lazyLoadScrollContainers[i][handler](event,scrollInstances[this.namespace],false);}
this.windowScrollEventBound=true;};imgix.FluidSet.prototype.attachWindowResizer=function(){var th=this;resizeInstances[this.namespace]=imgix.helpers.debouncer(function(){if(this.windowLastWidth!==imgix.helpers.getWindowWidth()||this.windowLastHeight!==imgix.helpers.getWindowHeight()){th.reload();}},this.options.debounce);if(window.addEventListener){window.addEventListener('resize',resizeInstances[this.namespace],false);}else if(window.attachEvent){window.attachEvent('onresize',resizeInstances[this.namespace]);}
this.windowResizeEventBound=true;};imgix.fluid=function(){var elem,node;if(arguments.length>0&&arguments[0].nodeType===1){node=arguments[0];elem=arguments[1];}else{elem=arguments[0];}
if(elem===null){return;}
var options,fluidSet;if(imgix.helpers.isReallyObject(elem)){var passedKeys=Object.keys(elem),goodKeys=Object.keys(getFluidDefaults());for(var i=0;i<passedKeys.length;i++){if(goodKeys.indexOf(passedKeys[i])===-1){imgix.helpers.warn('\''+passedKeys[i]+'\' is not a valid imgix.fluid config option. See https://github.com/imgix/imgix.js/blob/master/docs/api.md#imgix.fluid for a list of valid options.');}}
options=imgix.helpers.mergeObject(getFluidDefaults(),elem);fluidSet=new imgix.FluidSet(options);elem=null;}else if(imgix.helpers.isFluidSet(elem)){fluidSet=elem;options=fluidSet.options;}else{options=imgix.helpers.mergeObject(getFluidDefaults(),{});fluidSet=new imgix.FluidSet(options);}
var fluidElements;if(elem&&!imgix.helpers.isFluidSet(elem)){fluidElements=Array.isArray(elem)?elem:[elem];}else{var cls=options.fluidClass.toString();cls=cls.slice(0,1)==='.'?cls:('.'+cls);fluidElements=(node||document).querySelectorAll(cls);if(node&&imgix.helpers.matchesSelector(node,cls)){fluidElements=Array.prototype.slice.call(fluidElements);fluidElements.unshift(node);}}
for(var j=0;j<fluidElements.length;j++){if(fluidElements[j]===null){continue;}
if(options.updateOnPinchZoom){fluidSet.attachGestureEvent(fluidElements[j]);}
fluidSet.updateSrc(fluidElements[j]);}
if(options.lazyLoad&&!fluidSet.windowScrollEventBound){fluidSet.attachScrollListener();}
if(options.updateOnResize&&!fluidSet.windowResizeEventBound){fluidSet.attachWindowResizer();}
return fluidSet;};'use strict';if(typeof window!=='undefined'){imgix.onready=(function(){var ready,listener,callbacks=[],ieHack=document.documentElement.doScroll,loadedRgx=ieHack?/^loaded|^c/:/^loaded|c/,loaded=loadedRgx.test(document.readyState);function flush(){var callback;loaded=true;while(callback=callbacks.shift()){callback();}}
if(document.addEventListener){listener=function(){document.removeEventListener('DOMContentLoaded',listener,false);flush();}
document.addEventListener('DOMContentLoaded',listener,false);}else if(document.attachEvent){listener=function(){if(/^c/.test(document.readyState)){document.detachEvent('onreadystatechange',listener);flush();}}
document.attachEvent('onreadystatechange',listener);}
if(!!ieHack){ready=function(callback){if(window.self!=window.top){if(loaded){callback();}else{callbacks.push(callback);}}else{(function(){try{document.documentElement.doScroll('left');}catch(e){return setTimeout(function(){ready(callback);},50);}
callback();})();}};}else{ready=function(callback){if(loaded){callback();}else{callbacks.push(callback);}};}
return ready;})();}'use strict';imgix.rgbToHex=function(value){var parts=value.split(',');parts=parts.map(function(a){return imgix.componentToHex(parseInt(a.replace(/\D/g,'')));});return parts.join('');};imgix.componentToHex=function(c){var hex=c.toString(16);return hex.length===1?'0'+hex:hex;};imgix.getColorBrightness=function(c){if(c){if(c.slice(0,1)==='#'){c=imgix.hexToRGB(c);}}else{return 0;}
var parts=c.replace(/[^0-9,]+/g,'').split(','),r=parseInt(parts[0],10),g=parseInt(parts[1],10),b=parseInt(parts[2],10);return Math.sqrt((r*r*0.241)+(g*g*0.691)+(b*b*0.068));};imgix.applyAlphaToRGB=function(rgb,alpha){var pushAlpha=rgb.slice(0,4)!=='rgba',parts=rgb.split(',');parts=parts.map(function(a){return parseInt(a.replace(/\D/g,''),10);});if(pushAlpha){parts.push(alpha);}else if(parts.length===4){parts[3]=alpha;}
return'rgba('+parts.join(', ')+')';};imgix.hexToRGB=function(hex){if(hex){if(hex.slice(0,1)==='#'){hex=hex.slice(1,hex.length);}else if(hex.slice(0,3)==='rgb'){return hex;}}
var r=0,g=0,b=0;function dupe(x){return(x+x).toString();}
if(hex.length===3){r=parseInt(dupe(hex.slice(0,1)),16);g=parseInt(dupe(hex.slice(1,2)),16);b=parseInt(dupe(hex.slice(2,3)),16);}else if(hex.length===6){r=parseInt(hex.slice(0,2),16);g=parseInt(hex.slice(2,4),16);b=parseInt(hex.slice(4,6),16);}else{imgix.helpers.warn('invalid hex color:',hex);}
return'rgb('+r+', '+g+', '+b+')';};'use strict';imgix.getElementByXPathClassName=function(xpath){return document.querySelector('.'+imgix.getXPathClass(xpath));};imgix.getElementImageByXPathClassName=function(xpath){return imgix.getElementImage(imgix.getElementByXPathClassName(xpath));};imgix.getElementTreeXPath=function(element){var paths=[];for(;element&&element.nodeType===Node.ELEMENT_NODE;element=element.parentNode){var index=0;for(var sibling=element.previousSibling;sibling;sibling=sibling.previousSibling){if(sibling.nodeType===Node.DOCUMENT_TYPE_NODE){continue;}
if(sibling.nodeName===element.nodeName){++index;}}
var tagName=(element.prefix?element.prefix+':':'')+element.localName,pathIndex=(index?'['+(index+1)+']':'');paths.splice(0,0,tagName+pathIndex);}
return paths.length?'/'+paths.join('/'):null;};if(typeof define==='function'&&define.amd){define('imgix',[],function(){return imgix;});}}).call(this);
var CN=CN||{};CN.AjaxModal=function(el){this.elements={base:el,modal:$('.js-modal'),modalContent:$('.remodal-content'),allAjaxEl:$('[data-module="ajax-modal"]'),filteredAjaxEl:$('[data-module="ajax-modal"]'),currentEl:''};this.xhr=null;this.thisRemodal=null;this.currentIndex=0;this.init();this.eventHandlers();};CN.AjaxModal.prototype.init=function(){var _this=this;_this.thisRemodal=_this.elements.modal.remodal();};CN.AjaxModal.prototype.eventHandlers=function(){var _this=this;$(_this.elements.base).on('click',function(e){e.preventDefault();$(document.body).prepend('<div class="c-loading-overlay"><div class="c-loading__container"><div class="c-loading c-loading--white"></div></div></div>');_this.elements.currentEl=$(this);_this.elements.filteredAjaxEl=_this.elements.allAjaxEl.filter(function(){return!$(this).parent().hasClass('isotope-hidden');});_this.currentIndex=_this.elements.filteredAjaxEl.index(_this.elements.currentEl);setTimeout(function(){_this.thisRemodal.open();_this.updateModalContent(_this.elements.base.attr('href'));},100);});if(typeof CN.ajaxModalExists==='undefined'){CN.ajaxModalExists=true;_this.elements.modal.on('click','.remodal-prev',function(){if(_this.currentIndex-1<0){_this.currentIndex=_this.elements.filteredAjaxEl.length-1;}else{_this.currentIndex=_this.currentIndex-1;}
_this.updateModalContent(_this.elements.filteredAjaxEl.eq(_this.currentIndex).attr('href'));});_this.elements.modal.on('click','.remodal-next',function(){if(_this.currentIndex+1>=_this.elements.filteredAjaxEl.length){_this.currentIndex=0;}else{_this.currentIndex=_this.currentIndex+1;}
_this.updateModalContent(_this.elements.filteredAjaxEl.eq(_this.currentIndex).attr('href'));});$(document).on('closed','.js-modal',function(){_this.elements.modalContent.html('');if(_this.xhr&&_this.xhr.readyState!==4){_this.xhr.abort();}});}};CN.AjaxModal.prototype.updateModalContent=function(requestUrl){var _this=this;if(_this.xhr&&_this.xhr.readyState!==4){_this.xhr.abort();}
_this.xhr=$.ajax({async:false,type:'GET',url:requestUrl,success:function(data){var siteoriginStyles=data.match(/<style.*?id="siteorigin-panels-grids-wp_head".*?>[\s\S]*?<\/style>/ig);if(siteoriginStyles){$('head').append(siteoriginStyles.join('').replace('id="siteorigin-panels-grids-wp_head"',''));}
var pageWrapEl=$(data).find('.s-page-wrap');if(pageWrapEl){data=pageWrapEl;_this.elements.modal.attr('data-content-post-type',pageWrapEl.attr('data-post-type'));}
_this.elements.modalContent.html(data);_this.reinitJS();$('body').trigger('ajaxModalHasLoaded');$(window).trigger('resize');setTimeout(function(){$('.c-loading-overlay').remove();},100);},error:function(data){setTimeout(function(){$('.c-loading-overlay').remove();},100);}});};CN.AjaxModal.prototype.reinitJS=function(){var _this=this;$(document).trigger('cnInitSliders',{element:_this.elements.modalContent});$(document).trigger('cnInitWidgetWaypoints',{element:_this.elements.modalContent});$(document).trigger('cnInitAnchorMenu',{element:_this.elements.modalContent});$(document).trigger('cnInitModules',{element:_this.elements.modalContent});$(document).trigger('cnInitGallery',{element:_this.elements.modalContent});$(document).trigger('cnInitMap',{element:_this.elements.modalContent});};
var CN=CN||{};CN.ClassToggle=function(el){this.elements={base:el};this.customOptions=el.data('module-options');if('object'===typeof this.customOptions){this.target=this.customOptions.target;this.targetClass=this.customOptions.class;}
this.init();};CN.ClassToggle.prototype.init=function(){var _this=this;if('undefined'!==typeof _this.target&&'undefined'!==typeof _this.targetClass){$(_this.elements.base).on('click',function(e){e.preventDefault();$(_this.target).toggleClass(_this.targetClass);});}};
var CN=CN||{};CN.EqualHeightWidgets=function(baseEl,watchEl){this.elements={base:baseEl,watch:watchEl,uniqueId:this.uniqueId()};if(this.elements.base.length>0&&this.elements.watch.length>0){this.init();}};CN.EqualHeightWidgets.prototype.init=function(){var _this=this;_this.elements.base.attr('data-equalizer',_this.elements.uniqueId).attr('data-equalize-on','medium');_this.elements.watch.attr('data-equalizer-watch',_this.elements.uniqueId);};CN.EqualHeightWidgets.prototype.uniqueId=function(){return'id-'+Math.random().toString(36).substr(2,16);};
var CN=CN||{};CN.OnScroll=function(){this.elements={base:$('body')};this.targetElements=[];this.init();};CN.OnScroll.prototype.init=function(){var _this=this;$(window).on('scroll',function(){if(!window.requestAnimationFrame){_this.windowScrolled(_this.targetElements);}else{window.requestAnimationFrame(function(){_this.windowScrolled(_this.targetElements)});}});if(window.pageYOffset>0){if(!window.requestAnimationFrame){_this.windowScrolled(this.targetElements);}else{window.requestAnimationFrame(function(){_this.windowScrolled(_this.targetElements)});}}};CN.OnScroll.prototype.addElement=function(name,element,offset){var newTargetEl=$(element);if(newTargetEl.length>0){this.targetElements.push({name:name,element:newTargetEl,offset:offset});newTargetEl.wrap('<div class="c-onscroll-wrapper" style="min-height: '+newTargetEl.height()+'px"></div>');}};CN.OnScroll.prototype.windowScrolled=function(targetElements){var bodyEl=$('body'),offsetTop=40,scrollTop=window.pageYOffset,pageHeaderHeight=$('header.c-page-header').height();if(scrollTop>=offsetTop){bodyEl.addClass('page-is-scrolled');}else{bodyEl.removeClass('page-is-scrolled');}
$.each(targetElements,function(index,element){var elOffsetTop=$(element.element).parent().offset().top;if(element.offset){elOffsetTop+=element.offset;}
if(scrollTop>=(elOffsetTop-pageHeaderHeight)){bodyEl.addClass(element.name+'-has-passed');}else{bodyEl.removeClass(element.name+'-has-passed');}});};
var CN=CN||{};CN.ScrollTo=function(el){this.elements={base:el,parent:el.closest('.panel-grid')};this.init();};CN.ScrollTo.prototype.init=function(){var _this=this;this.elements.base.on('click',function(e){e.preventDefault();var target=$(this).attr('href'),targetEl=[],headerScrollOffset=$('header.c-page-header').data('scroll-offset');if(typeof(headerScrollOffset)!='undefined'){offset=headerScrollOffset;}else{offset=$('header.c-page-header').height();}
switch(target){case'#main-content':var smoothScrollEl=$(this).parents('.c-smoothscroll');if(smoothScrollEl.length>0){targetEl=smoothScrollEl.find('.c-smoothscroll__section').next();}else{targetEl=_this.elements.parent.next('.panel-grid');}
break;default:targetEl=$(target);}
var y=targetEl.offset().top-offset;$('html,body').animate({scrollTop:y},500);});};
var CN=CN||{};CN.SelectRedirect=function(el){this.elements={base:el};this.init();};CN.SelectRedirect.prototype.init=function(){var _this=this;$(_this.elements.base).on('change',function(e){var thisEl=$(this),target=thisEl.find(':selected').val();window.location=target;});};
(function($){'use strict';var sliderEl=$('.js-flickity');sliderEl.on('change.flickity',function(event,index){var sliderNavButton=$(event.target).parent().find('.c-slider__buttons-nav__button');if(sliderNavButton.length){sliderNavButton.removeClass('is-active');sliderNavButton.eq(index).addClass('is-active');}});$(document).foundation();setTimeout(function(){imgix.onready(imgixOnReady);},100);var imgixOnReady=function(){var fluidDefaults={pixelStep:1,onChangeParamOverride:function(w,h,params,elem){var _this=$(elem);params.w=w;if(params.ratio){params.h=w*params.ratio;}
if(_this.parent().hasClass('crop')||_this.hasClass('crop')){params.h=h;params.fit='crop';if('undefined'!==typeof _this.data('crop')&&''!==_this.data('crop')&&'auto'!==_this.data('crop')){if('manual'===_this.data('crop')&&'undefined'!==typeof _this.data('focus-horizontal')){params.crop='focalpoint';params['fp-x']=(_this.data('focus-horizontal')/100);params['fp-y']=(_this.data('focus-vertical')/100);_this.css({'background-position':_this.data('focus-horizontal')+'% '+_this.data('focus-vertical')+'%'});}else{params.crop='centre';}}else{params.crop='faces,edges';}}else if(_this.parent().hasClass('img-fit')||_this.hasClass('img-fit')){params.w=null;params.h=h;params.crop=null;params.fit='clip';}else if(_this.hasClass('original')){params.w=null;params.h=null;params.crop=null;params.fit='clip';}
params.q=65;params.auto='format';params.ch='DPR,Width';return params;},onLoad:function(el){$(el).addClass('has-loaded');var flickityAutoHeightEl=$(el).parents('.js-flickity.c-slider--auto-height');if(flickityAutoHeightEl.length>0){flickityAutoHeightEl.flickity('resize');}
if(jQuery().magnify){$('[data-magnify-src]').magnify();}}};imgix.fluid($.extend({},fluidDefaults,{lazyLoad:true,lazyLoadOffsetVertical:150,pixelStep:10}));sliderEl.on('settle.flickity',function(event,index){var next=$(this).find('.js-flickity-cell').eq(index+1);imgix.fluid($(this)[0],fluidDefaults);if(next.length){setTimeout(function(){imgix.fluid(next[0],fluidDefaults);},750);}});$('[class="panel-grid"]').waypoint({handler:function(direction){$(this.element).find('.js-flickity').each(function(){if(!$(this).hasClass('slider-is-visible')){$(this).trigger('change.flickity',[0]);$(this).addClass('slider-is-visible');}});},offset:'80%'});$('.js-grid-container').on('arrangeComplete',function(){imgix.fluid(this,fluidDefaults);});$('[data-trigger-lazyload]').on('click',function(){var elementClass=$(this).data('trigger-lazyload');imgix.fluid($(elementClass)[0],fluidDefaults);});$('body').on('quickbook revealOffcanvas ajaxModalHasLoaded',function(){imgix.fluid(this,fluidDefaults);});$('.js-layout-builder-tabbed').on('easytabs:after',function(){var _this=this;setTimeout(function(){imgix.fluid(_this,fluidDefaults);$('.js-flickity').flickity('resize');},100);});$(document).on('cnFullPageLoad',function(event,element){$(element).find('.c-image').addClass('imgix-fluid');imgix.fluid(element,fluidDefaults);});setTimeout(function(){$(document).trigger('cnImgixReady');});};window.cnOnScroll=new CN.OnScroll();$(document).on('cnInitModules',function(event,data){var element=data&&data.element||document;$(element).find('[data-module]').each(function(){var el=$(this);switch(el.data('module')){case'ajax-modal':new CN.AjaxModal(el);break;case'class-toggle':new CN.ClassToggle(el);break;case'scroll-to':new CN.ScrollTo(el);break;case'select-redirect':new CN.SelectRedirect(el);break;}});});$(document).trigger('cnInitModules');$(document).on('cnInitSliders',function(event,data){var element=data&&data.element||document;var flickityEl=$(element).find('.js-flickity');if(flickityEl){flickityEl.each(function(){var thisEl=$(this);thisEl.flickity(thisEl.data('flickity-options'));});}});$(document).on('cnInitWidgetWaypoints',function(event,data){var element=data&&data.element||document;$(element).find('[class*=so-widget]').waypoint({handler:function(direction){$(this.element).addClass('widget-is-visible');},offset:'80%'});});$(document).trigger('cnInitWidgetWaypoints');$(document).on('cnInitRowWaypoints',function(event,data){var element=data&&data.element||document;$(element).find('.panel-grid').waypoint({handler:function(direction){$(this.element).addClass('row-is-visible');},offset:'80%'});});$(document).trigger('cnInitRowWaypoints');$(window).on('cnVideoEnded',function(event){var remodalEl=$('.js-modal');if(remodalEl.length>0){remodalEl.remodal().close();}});$('body').on('submit','.c-form form',function(){$(this).find('.gform_button').prop('disabled',true);});function rTapPostReplacement(){$('a[href*="tel:"]').each(function(){var rTapNumberEl=$(this).find('span[class^="rTapNumber"]');if(rTapNumberEl.length>0){var rTapNumber=rTapNumberEl.text().replace(/\s+/g,'');$(this).attr('href','tel:'+rTapNumber);}});}})(jQuery);
(function($){'use strict';if(window.cnThirdPartyScripts.triptease.enabled){$(window).one('scroll',function(){$.getScript('https://static.triptease.io/paperboy/paperboy.js?hotelkey='+window.cnThirdPartyScripts.triptease.hotel_key);});}})(jQuery);
var CN=CN||{};CN.ElementCycle=function(el){this.elements=el.children();this.interval=el.data('element-cycle-interval');this.currentElement=0;this.init();};CN.ElementCycle.prototype.init=function(){var _this=this;this.nextElement();setInterval(function(){_this.nextElement();},this.interval);};CN.ElementCycle.prototype.nextElement=function(){var _this=this;$.each(this.elements,function(element){if(_this.currentElement===element){$(this).addClass('is-active');}else{$(this).removeClass('is-active');}});this.currentElement++;if(this.currentElement>=this.elements.length){this.currentElement=0;}};
(function($){'use strict';$('.c-hero').each(function(){var heroEl=$(this),videoEl=heroEl.find('.js-hero-video');if(videoEl.length){var player=new Plyr(videoEl[0]);}});$('.c-hero__backgrounds').each(function(){new CN.ElementCycle($(this));});})(jQuery);
/*! PhotoSwipe - v4.1.2 - 2017-04-05
* http://photoswipe.com
* Copyright (c) 2017 Dmitry Semenov; */
(function(root,factory){if(typeof define==='function'&&define.amd){define(factory);}else if(typeof exports==='object'){module.exports=factory();}else{root.PhotoSwipe=factory();}})(this,function(){'use strict';var PhotoSwipe=function(template,UiClass,items,options){var framework={features:null,bind:function(target,type,listener,unbind){var methodName=(unbind?'remove':'add')+'EventListener';type=type.split(' ');for(var i=0;i<type.length;i++){if(type[i]){target[methodName](type[i],listener,false);}}},isArray:function(obj){return(obj instanceof Array);},createEl:function(classes,tag){var el=document.createElement(tag||'div');if(classes){el.className=classes;}
return el;},getScrollY:function(){var yOffset=window.pageYOffset;return yOffset!==undefined?yOffset:document.documentElement.scrollTop;},unbind:function(target,type,listener){framework.bind(target,type,listener,true);},removeClass:function(el,className){var reg=new RegExp('(\\s|^)'+className+'(\\s|$)');el.className=el.className.replace(reg,' ').replace(/^\s\s*/,'').replace(/\s\s*$/,'');},addClass:function(el,className){if(!framework.hasClass(el,className)){el.className+=(el.className?' ':'')+className;}},hasClass:function(el,className){return el.className&&new RegExp('(^|\\s)'+className+'(\\s|$)').test(el.className);},getChildByClass:function(parentEl,childClassName){var node=parentEl.firstChild;while(node){if(framework.hasClass(node,childClassName)){return node;}
node=node.nextSibling;}},arraySearch:function(array,value,key){var i=array.length;while(i--){if(array[i][key]===value){return i;}}
return-1;},extend:function(o1,o2,preventOverwrite){for(var prop in o2){if(o2.hasOwnProperty(prop)){if(preventOverwrite&&o1.hasOwnProperty(prop)){continue;}
o1[prop]=o2[prop];}}},easing:{sine:{out:function(k){return Math.sin(k*(Math.PI/2));},inOut:function(k){return-(Math.cos(Math.PI*k)-1)/2;}},cubic:{out:function(k){return--k*k*k+1;}}},detectFeatures:function(){if(framework.features){return framework.features;}
var helperEl=framework.createEl(),helperStyle=helperEl.style,vendor='',features={};features.oldIE=document.all&&!document.addEventListener;features.touch='ontouchstart'in window;if(window.requestAnimationFrame){features.raf=window.requestAnimationFrame;features.caf=window.cancelAnimationFrame;}
features.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled;if(!features.pointerEvent){var ua=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var v=(navigator.appVersion).match(/OS (\d+)_(\d+)_?(\d+)?/);if(v&&v.length>0){v=parseInt(v[1],10);if(v>=1&&v<8){features.isOldIOSPhone=true;}}}
var match=ua.match(/Android\s([0-9\.]*)/);var androidversion=match?match[1]:0;androidversion=parseFloat(androidversion);if(androidversion>=1){if(androidversion<4.4){features.isOldAndroid=true;}
features.androidVersion=androidversion;}
features.isMobileOpera=/opera mini|opera mobi/i.test(ua);}
var styleChecks=['transform','perspective','animationName'],vendors=['','webkit','Moz','ms','O'],styleCheckItem,styleName;for(var i=0;i<4;i++){vendor=vendors[i];for(var a=0;a<3;a++){styleCheckItem=styleChecks[a];styleName=vendor+(vendor?styleCheckItem.charAt(0).toUpperCase()+styleCheckItem.slice(1):styleCheckItem);if(!features[styleCheckItem]&&styleName in helperStyle){features[styleCheckItem]=styleName;}}
if(vendor&&!features.raf){vendor=vendor.toLowerCase();features.raf=window[vendor+'RequestAnimationFrame'];if(features.raf){features.caf=window[vendor+'CancelAnimationFrame']||window[vendor+'CancelRequestAnimationFrame'];}}}
if(!features.raf){var lastTime=0;features.raf=function(fn){var currTime=new Date().getTime();var timeToCall=Math.max(0,16-(currTime-lastTime));var id=window.setTimeout(function(){fn(currTime+timeToCall);},timeToCall);lastTime=currTime+timeToCall;return id;};features.caf=function(id){clearTimeout(id);};}
features.svg=!!document.createElementNS&&!!document.createElementNS('http://www.w3.org/2000/svg','svg').createSVGRect;framework.features=features;return features;}};framework.detectFeatures();if(framework.features.oldIE){framework.bind=function(target,type,listener,unbind){type=type.split(' ');var methodName=(unbind?'detach':'attach')+'Event',evName,_handleEv=function(){listener.handleEvent.call(listener);};for(var i=0;i<type.length;i++){evName=type[i];if(evName){if(typeof listener==='object'&&listener.handleEvent){if(!unbind){listener['oldIE'+evName]=_handleEv;}else{if(!listener['oldIE'+evName]){return false;}}
target[methodName]('on'+evName,listener['oldIE'+evName]);}else{target[methodName]('on'+evName,listener);}}}};}
var self=this;var DOUBLE_TAP_RADIUS=25,NUM_HOLDERS=3;var _options={allowPanToNext:true,spacing:0.12,bgOpacity:1,mouseUsed:false,loop:true,pinchToClose:true,closeOnScroll:true,closeOnVerticalDrag:true,verticalDragRange:0.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:false,focus:true,escKey:true,arrowKeys:true,mainScrollEndFriction:0.35,panEndFriction:0.35,isClickableElement:function(el){return el.tagName==='A';},getDoubleTapZoom:function(isMouseClick,item){if(isMouseClick){return 1;}else{return item.initialZoomLevel<0.7?1:1.33;}},maxSpreadZoom:1.33,modal:true,scaleMode:'fit'};framework.extend(_options,options);var _getEmptyPoint=function(){return{x:0,y:0};};var _isOpen,_isDestroying,_closedByScroll,_currentItemIndex,_containerStyle,_containerShiftIndex,_currPanDist=_getEmptyPoint(),_startPanOffset=_getEmptyPoint(),_panOffset=_getEmptyPoint(),_upMoveEvents,_downEvents,_globalEventHandlers,_viewportSize={},_currZoomLevel,_startZoomLevel,_translatePrefix,_translateSufix,_updateSizeInterval,_itemsNeedUpdate,_currPositionIndex=0,_offset={},_slideSize=_getEmptyPoint(),_itemHolders,_prevItemIndex,_indexDiff=0,_dragStartEvent,_dragMoveEvent,_dragEndEvent,_dragCancelEvent,_transformKey,_pointerEventEnabled,_isFixedPosition=true,_likelyTouchDevice,_modules=[],_requestAF,_cancelAF,_initalClassName,_initalWindowScrollY,_oldIE,_currentWindowScrollY,_features,_windowVisibleSize={},_renderMaxResolution=false,_orientationChangeTimeout,_registerModule=function(name,module){framework.extend(self,module.publicMethods);_modules.push(name);},_getLoopedId=function(index){var numSlides=_getNumItems();if(index>numSlides-1){return index-numSlides;}else if(index<0){return numSlides+index;}
return index;},_listeners={},_listen=function(name,fn){if(!_listeners[name]){_listeners[name]=[];}
return _listeners[name].push(fn);},_shout=function(name){var listeners=_listeners[name];if(listeners){var args=Array.prototype.slice.call(arguments);args.shift();for(var i=0;i<listeners.length;i++){listeners[i].apply(self,args);}}},_getCurrentTime=function(){return new Date().getTime();},_applyBgOpacity=function(opacity){_bgOpacity=opacity;self.bg.style.opacity=opacity*_options.bgOpacity;},_applyZoomTransform=function(styleObj,x,y,zoom,item){if(!_renderMaxResolution||(item&&item!==self.currItem)){zoom=zoom/(item?item.fitRatio:self.currItem.fitRatio);}
styleObj[_transformKey]=_translatePrefix+x+'px, '+y+'px'+_translateSufix+' scale('+zoom+')';},_applyCurrentZoomPan=function(allowRenderResolution){if(_currZoomElementStyle){if(allowRenderResolution){if(_currZoomLevel>self.currItem.fitRatio){if(!_renderMaxResolution){_setImageSize(self.currItem,false,true);_renderMaxResolution=true;}}else{if(_renderMaxResolution){_setImageSize(self.currItem);_renderMaxResolution=false;}}}
_applyZoomTransform(_currZoomElementStyle,_panOffset.x,_panOffset.y,_currZoomLevel);}},_applyZoomPanToItem=function(item){if(item.container){_applyZoomTransform(item.container.style,item.initialPosition.x,item.initialPosition.y,item.initialZoomLevel,item);}},_setTranslateX=function(x,elStyle){elStyle[_transformKey]=_translatePrefix+x+'px, 0px'+_translateSufix;},_moveMainScroll=function(x,dragging){if(!_options.loop&&dragging){var newSlideIndexOffset=_currentItemIndex+(_slideSize.x*_currPositionIndex-x)/_slideSize.x,delta=Math.round(x-_mainScrollPos.x);if((newSlideIndexOffset<0&&delta>0)||(newSlideIndexOffset>=_getNumItems()-1&&delta<0)){x=_mainScrollPos.x+delta*_options.mainScrollEndFriction;}}
_mainScrollPos.x=x;_setTranslateX(x,_containerStyle);},_calculatePanOffset=function(axis,zoomLevel){var m=_midZoomPoint[axis]-_offset[axis];return _startPanOffset[axis]+_currPanDist[axis]+m-m*(zoomLevel/_startZoomLevel);},_equalizePoints=function(p1,p2){p1.x=p2.x;p1.y=p2.y;if(p2.id){p1.id=p2.id;}},_roundPoint=function(p){p.x=Math.round(p.x);p.y=Math.round(p.y);},_mouseMoveTimeout=null,_onFirstMouseMove=function(){if(_mouseMoveTimeout){framework.unbind(document,'mousemove',_onFirstMouseMove);framework.addClass(template,'pswp--has_mouse');_options.mouseUsed=true;_shout('mouseUsed');}
_mouseMoveTimeout=setTimeout(function(){_mouseMoveTimeout=null;},100);},_bindEvents=function(){framework.bind(document,'keydown',self);if(_features.transform){framework.bind(self.scrollWrap,'click',self);}
if(!_options.mouseUsed){framework.bind(document,'mousemove',_onFirstMouseMove);}
framework.bind(window,'resize scroll orientationchange',self);_shout('bindEvents');},_unbindEvents=function(){framework.unbind(window,'resize scroll orientationchange',self);framework.unbind(window,'scroll',_globalEventHandlers.scroll);framework.unbind(document,'keydown',self);framework.unbind(document,'mousemove',_onFirstMouseMove);if(_features.transform){framework.unbind(self.scrollWrap,'click',self);}
if(_isDragging){framework.unbind(window,_upMoveEvents,self);}
clearTimeout(_orientationChangeTimeout);_shout('unbindEvents');},_calculatePanBounds=function(zoomLevel,update){var bounds=_calculateItemSize(self.currItem,_viewportSize,zoomLevel);if(update){_currPanBounds=bounds;}
return bounds;},_getMinZoomLevel=function(item){if(!item){item=self.currItem;}
return item.initialZoomLevel;},_getMaxZoomLevel=function(item){if(!item){item=self.currItem;}
return item.w>0?_options.maxSpreadZoom:1;},_modifyDestPanOffset=function(axis,destPanBounds,destPanOffset,destZoomLevel){if(destZoomLevel===self.currItem.initialZoomLevel){destPanOffset[axis]=self.currItem.initialPosition[axis];return true;}else{destPanOffset[axis]=_calculatePanOffset(axis,destZoomLevel);if(destPanOffset[axis]>destPanBounds.min[axis]){destPanOffset[axis]=destPanBounds.min[axis];return true;}else if(destPanOffset[axis]<destPanBounds.max[axis]){destPanOffset[axis]=destPanBounds.max[axis];return true;}}
return false;},_setupTransforms=function(){if(_transformKey){var allow3dTransform=_features.perspective&&!_likelyTouchDevice;_translatePrefix='translate'+(allow3dTransform?'3d(':'(');_translateSufix=_features.perspective?', 0px)':')';return;}
_transformKey='left';framework.addClass(template,'pswp--ie');_setTranslateX=function(x,elStyle){elStyle.left=x+'px';};_applyZoomPanToItem=function(item){var zoomRatio=item.fitRatio>1?1:item.fitRatio,s=item.container.style,w=zoomRatio*item.w,h=zoomRatio*item.h;s.width=w+'px';s.height=h+'px';s.left=item.initialPosition.x+'px';s.top=item.initialPosition.y+'px';};_applyCurrentZoomPan=function(){if(_currZoomElementStyle){var s=_currZoomElementStyle,item=self.currItem,zoomRatio=item.fitRatio>1?1:item.fitRatio,w=zoomRatio*item.w,h=zoomRatio*item.h;s.width=w+'px';s.height=h+'px';s.left=_panOffset.x+'px';s.top=_panOffset.y+'px';}};},_onKeyDown=function(e){var keydownAction='';if(_options.escKey&&e.keyCode===27){keydownAction='close';}else if(_options.arrowKeys){if(e.keyCode===37){keydownAction='prev';}else if(e.keyCode===39){keydownAction='next';}}
if(keydownAction){if(!e.ctrlKey&&!e.altKey&&!e.shiftKey&&!e.metaKey){if(e.preventDefault){e.preventDefault();}else{e.returnValue=false;}
self[keydownAction]();}}},_onGlobalClick=function(e){if(!e){return;}
if(_moved||_zoomStarted||_mainScrollAnimating||_verticalDragInitiated){e.preventDefault();e.stopPropagation();}},_updatePageScrollOffset=function(){self.setScrollOffset(0,framework.getScrollY());};var _animations={},_numAnimations=0,_stopAnimation=function(name){if(_animations[name]){if(_animations[name].raf){_cancelAF(_animations[name].raf);}
_numAnimations--;delete _animations[name];}},_registerStartAnimation=function(name){if(_animations[name]){_stopAnimation(name);}
if(!_animations[name]){_numAnimations++;_animations[name]={};}},_stopAllAnimations=function(){for(var prop in _animations){if(_animations.hasOwnProperty(prop)){_stopAnimation(prop);}}},_animateProp=function(name,b,endProp,d,easingFn,onUpdate,onComplete){var startAnimTime=_getCurrentTime(),t;_registerStartAnimation(name);var animloop=function(){if(_animations[name]){t=_getCurrentTime()-startAnimTime;if(t>=d){_stopAnimation(name);onUpdate(endProp);if(onComplete){onComplete();}
return;}
onUpdate((endProp-b)*easingFn(t/d)+b);_animations[name].raf=_requestAF(animloop);}};animloop();};var publicMethods={shout:_shout,listen:_listen,viewportSize:_viewportSize,options:_options,isMainScrollAnimating:function(){return _mainScrollAnimating;},getZoomLevel:function(){return _currZoomLevel;},getCurrentIndex:function(){return _currentItemIndex;},isDragging:function(){return _isDragging;},isZooming:function(){return _isZooming;},setScrollOffset:function(x,y){_offset.x=x;_currentWindowScrollY=_offset.y=y;_shout('updateScrollOffset',_offset);},applyZoomPan:function(zoomLevel,panX,panY,allowRenderResolution){_panOffset.x=panX;_panOffset.y=panY;_currZoomLevel=zoomLevel;_applyCurrentZoomPan(allowRenderResolution);},init:function(){if(_isOpen||_isDestroying){return;}
var i;self.framework=framework;self.template=template;self.bg=framework.getChildByClass(template,'pswp__bg');_initalClassName=template.className;_isOpen=true;_features=framework.detectFeatures();_requestAF=_features.raf;_cancelAF=_features.caf;_transformKey=_features.transform;_oldIE=_features.oldIE;self.scrollWrap=framework.getChildByClass(template,'pswp__scroll-wrap');self.container=framework.getChildByClass(self.scrollWrap,'pswp__container');_containerStyle=self.container.style;self.itemHolders=_itemHolders=[{el:self.container.children[0],wrap:0,index:-1},{el:self.container.children[1],wrap:0,index:-1},{el:self.container.children[2],wrap:0,index:-1}];_itemHolders[0].el.style.display=_itemHolders[2].el.style.display='none';_setupTransforms();_globalEventHandlers={resize:self.updateSize,orientationchange:function(){clearTimeout(_orientationChangeTimeout);_orientationChangeTimeout=setTimeout(function(){if(_viewportSize.x!==self.scrollWrap.clientWidth){self.updateSize();}},500);},scroll:_updatePageScrollOffset,keydown:_onKeyDown,click:_onGlobalClick};var oldPhone=_features.isOldIOSPhone||_features.isOldAndroid||_features.isMobileOpera;if(!_features.animationName||!_features.transform||oldPhone){_options.showAnimationDuration=_options.hideAnimationDuration=0;}
for(i=0;i<_modules.length;i++){self['init'+_modules[i]]();}
if(UiClass){var ui=self.ui=new UiClass(self,framework);ui.init();}
_shout('firstUpdate');_currentItemIndex=_currentItemIndex||_options.index||0;if(isNaN(_currentItemIndex)||_currentItemIndex<0||_currentItemIndex>=_getNumItems()){_currentItemIndex=0;}
self.currItem=_getItemAt(_currentItemIndex);if(_features.isOldIOSPhone||_features.isOldAndroid){_isFixedPosition=false;}
template.setAttribute('aria-hidden','false');if(_options.modal){if(!_isFixedPosition){template.style.position='absolute';template.style.top=framework.getScrollY()+'px';}else{template.style.position='fixed';}}
if(_currentWindowScrollY===undefined){_shout('initialLayout');_currentWindowScrollY=_initalWindowScrollY=framework.getScrollY();}
var rootClasses='pswp--open ';if(_options.mainClass){rootClasses+=_options.mainClass+' ';}
if(_options.showHideOpacity){rootClasses+='pswp--animate_opacity ';}
rootClasses+=_likelyTouchDevice?'pswp--touch':'pswp--notouch';rootClasses+=_features.animationName?' pswp--css_animation':'';rootClasses+=_features.svg?' pswp--svg':'';framework.addClass(template,rootClasses);self.updateSize();_containerShiftIndex=-1;_indexDiff=null;for(i=0;i<NUM_HOLDERS;i++){_setTranslateX((i+_containerShiftIndex)*_slideSize.x,_itemHolders[i].el.style);}
if(!_oldIE){framework.bind(self.scrollWrap,_downEvents,self);}
_listen('initialZoomInEnd',function(){self.setContent(_itemHolders[0],_currentItemIndex-1);self.setContent(_itemHolders[2],_currentItemIndex+1);_itemHolders[0].el.style.display=_itemHolders[2].el.style.display='block';if(_options.focus){template.focus();}
_bindEvents();});self.setContent(_itemHolders[1],_currentItemIndex);self.updateCurrItem();_shout('afterInit');if(!_isFixedPosition){_updateSizeInterval=setInterval(function(){if(!_numAnimations&&!_isDragging&&!_isZooming&&(_currZoomLevel===self.currItem.initialZoomLevel)){self.updateSize();}},1000);}
framework.addClass(template,'pswp--visible');},close:function(){if(!_isOpen){return;}
_isOpen=false;_isDestroying=true;_shout('close');_unbindEvents();_showOrHide(self.currItem,null,true,self.destroy);},destroy:function(){_shout('destroy');if(_showOrHideTimeout){clearTimeout(_showOrHideTimeout);}
template.setAttribute('aria-hidden','true');template.className=_initalClassName;if(_updateSizeInterval){clearInterval(_updateSizeInterval);}
framework.unbind(self.scrollWrap,_downEvents,self);framework.unbind(window,'scroll',self);_stopDragUpdateLoop();_stopAllAnimations();_listeners=null;},panTo:function(x,y,force){if(!force){if(x>_currPanBounds.min.x){x=_currPanBounds.min.x;}else if(x<_currPanBounds.max.x){x=_currPanBounds.max.x;}
if(y>_currPanBounds.min.y){y=_currPanBounds.min.y;}else if(y<_currPanBounds.max.y){y=_currPanBounds.max.y;}}
_panOffset.x=x;_panOffset.y=y;_applyCurrentZoomPan();},handleEvent:function(e){e=e||window.event;if(_globalEventHandlers[e.type]){_globalEventHandlers[e.type](e);}},goTo:function(index){index=_getLoopedId(index);var diff=index-_currentItemIndex;_indexDiff=diff;_currentItemIndex=index;self.currItem=_getItemAt(_currentItemIndex);_currPositionIndex-=diff;_moveMainScroll(_slideSize.x*_currPositionIndex);_stopAllAnimations();_mainScrollAnimating=false;self.updateCurrItem();},next:function(){self.goTo(_currentItemIndex+1);},prev:function(){self.goTo(_currentItemIndex-1);},updateCurrZoomItem:function(emulateSetContent){if(emulateSetContent){_shout('beforeChange',0);}
if(_itemHolders[1].el.children.length){var zoomElement=_itemHolders[1].el.children[0];if(framework.hasClass(zoomElement,'pswp__zoom-wrap')){_currZoomElementStyle=zoomElement.style;}else{_currZoomElementStyle=null;}}else{_currZoomElementStyle=null;}
_currPanBounds=self.currItem.bounds;_startZoomLevel=_currZoomLevel=self.currItem.initialZoomLevel;_panOffset.x=_currPanBounds.center.x;_panOffset.y=_currPanBounds.center.y;if(emulateSetContent){_shout('afterChange');}},invalidateCurrItems:function(){_itemsNeedUpdate=true;for(var i=0;i<NUM_HOLDERS;i++){if(_itemHolders[i].item){_itemHolders[i].item.needsUpdate=true;}}},updateCurrItem:function(beforeAnimation){if(_indexDiff===0){return;}
var diffAbs=Math.abs(_indexDiff),tempHolder;if(beforeAnimation&&diffAbs<2){return;}
self.currItem=_getItemAt(_currentItemIndex);_renderMaxResolution=false;_shout('beforeChange',_indexDiff);if(diffAbs>=NUM_HOLDERS){_containerShiftIndex+=_indexDiff+(_indexDiff>0?-NUM_HOLDERS:NUM_HOLDERS);diffAbs=NUM_HOLDERS;}
for(var i=0;i<diffAbs;i++){if(_indexDiff>0){tempHolder=_itemHolders.shift();_itemHolders[NUM_HOLDERS-1]=tempHolder;_containerShiftIndex++;_setTranslateX((_containerShiftIndex+2)*_slideSize.x,tempHolder.el.style);self.setContent(tempHolder,_currentItemIndex-diffAbs+i+1+1);}else{tempHolder=_itemHolders.pop();_itemHolders.unshift(tempHolder);_containerShiftIndex--;_setTranslateX(_containerShiftIndex*_slideSize.x,tempHolder.el.style);self.setContent(tempHolder,_currentItemIndex+diffAbs-i-1-1);}}
if(_currZoomElementStyle&&Math.abs(_indexDiff)===1){var prevItem=_getItemAt(_prevItemIndex);if(prevItem.initialZoomLevel!==_currZoomLevel){_calculateItemSize(prevItem,_viewportSize);_setImageSize(prevItem);_applyZoomPanToItem(prevItem);}}
_indexDiff=0;self.updateCurrZoomItem();_prevItemIndex=_currentItemIndex;_shout('afterChange');},updateSize:function(force){if(!_isFixedPosition&&_options.modal){var windowScrollY=framework.getScrollY();if(_currentWindowScrollY!==windowScrollY){template.style.top=windowScrollY+'px';_currentWindowScrollY=windowScrollY;}
if(!force&&_windowVisibleSize.x===window.innerWidth&&_windowVisibleSize.y===window.innerHeight){return;}
_windowVisibleSize.x=window.innerWidth;_windowVisibleSize.y=window.innerHeight;template.style.height=_windowVisibleSize.y+'px';}
_viewportSize.x=self.scrollWrap.clientWidth;_viewportSize.y=self.scrollWrap.clientHeight;_updatePageScrollOffset();_slideSize.x=_viewportSize.x+Math.round(_viewportSize.x*_options.spacing);_slideSize.y=_viewportSize.y;_moveMainScroll(_slideSize.x*_currPositionIndex);_shout('beforeResize');if(_containerShiftIndex!==undefined){var holder,item,hIndex;for(var i=0;i<NUM_HOLDERS;i++){holder=_itemHolders[i];_setTranslateX((i+_containerShiftIndex)*_slideSize.x,holder.el.style);hIndex=_currentItemIndex+i-1;if(_options.loop&&_getNumItems()>2){hIndex=_getLoopedId(hIndex);}
item=_getItemAt(hIndex);if(item&&(_itemsNeedUpdate||item.needsUpdate||!item.bounds)){self.cleanSlide(item);self.setContent(holder,hIndex);if(i===1){self.currItem=item;self.updateCurrZoomItem(true);}
item.needsUpdate=false;}else if(holder.index===-1&&hIndex>=0){self.setContent(holder,hIndex);}
if(item&&item.container){_calculateItemSize(item,_viewportSize);_setImageSize(item);_applyZoomPanToItem(item);}}
_itemsNeedUpdate=false;}
_startZoomLevel=_currZoomLevel=self.currItem.initialZoomLevel;_currPanBounds=self.currItem.bounds;if(_currPanBounds){_panOffset.x=_currPanBounds.center.x;_panOffset.y=_currPanBounds.center.y;_applyCurrentZoomPan(true);}
_shout('resize');},zoomTo:function(destZoomLevel,centerPoint,speed,easingFn,updateFn){if(centerPoint){_startZoomLevel=_currZoomLevel;_midZoomPoint.x=Math.abs(centerPoint.x)-_panOffset.x;_midZoomPoint.y=Math.abs(centerPoint.y)-_panOffset.y;_equalizePoints(_startPanOffset,_panOffset);}
var destPanBounds=_calculatePanBounds(destZoomLevel,false),destPanOffset={};_modifyDestPanOffset('x',destPanBounds,destPanOffset,destZoomLevel);_modifyDestPanOffset('y',destPanBounds,destPanOffset,destZoomLevel);var initialZoomLevel=_currZoomLevel;var initialPanOffset={x:_panOffset.x,y:_panOffset.y};_roundPoint(destPanOffset);var onUpdate=function(now){if(now===1){_currZoomLevel=destZoomLevel;_panOffset.x=destPanOffset.x;_panOffset.y=destPanOffset.y;}else{_currZoomLevel=(destZoomLevel-initialZoomLevel)*now+initialZoomLevel;_panOffset.x=(destPanOffset.x-initialPanOffset.x)*now+initialPanOffset.x;_panOffset.y=(destPanOffset.y-initialPanOffset.y)*now+initialPanOffset.y;}
if(updateFn){updateFn(now);}
_applyCurrentZoomPan(now===1);};if(speed){_animateProp('customZoomTo',0,1,speed,easingFn||framework.easing.sine.inOut,onUpdate);}else{onUpdate(1);}}};var MIN_SWIPE_DISTANCE=30,DIRECTION_CHECK_OFFSET=10;var _gestureStartTime,_gestureCheckSpeedTime,p={},p2={},delta={},_currPoint={},_startPoint={},_currPointers=[],_startMainScrollPos={},_releaseAnimData,_posPoints=[],_tempPoint={},_isZoomingIn,_verticalDragInitiated,_oldAndroidTouchEndTimeout,_currZoomedItemIndex=0,_centerPoint=_getEmptyPoint(),_lastReleaseTime=0,_isDragging,_isMultitouch,_zoomStarted,_moved,_dragAnimFrame,_mainScrollShifted,_currentPoints,_isZooming,_currPointsDistance,_startPointsDistance,_currPanBounds,_mainScrollPos=_getEmptyPoint(),_currZoomElementStyle,_mainScrollAnimating,_midZoomPoint=_getEmptyPoint(),_currCenterPoint=_getEmptyPoint(),_direction,_isFirstMove,_opacityChanged,_bgOpacity,_wasOverInitialZoom,_isEqualPoints=function(p1,p2){return p1.x===p2.x&&p1.y===p2.y;},_isNearbyPoints=function(touch0,touch1){return Math.abs(touch0.x-touch1.x)<DOUBLE_TAP_RADIUS&&Math.abs(touch0.y-touch1.y)<DOUBLE_TAP_RADIUS;},_calculatePointsDistance=function(p1,p2){_tempPoint.x=Math.abs(p1.x-p2.x);_tempPoint.y=Math.abs(p1.y-p2.y);return Math.sqrt(_tempPoint.x*_tempPoint.x+_tempPoint.y*_tempPoint.y);},_stopDragUpdateLoop=function(){if(_dragAnimFrame){_cancelAF(_dragAnimFrame);_dragAnimFrame=null;}},_dragUpdateLoop=function(){if(_isDragging){_dragAnimFrame=_requestAF(_dragUpdateLoop);_renderMovement();}},_canPan=function(){return!(_options.scaleMode==='fit'&&_currZoomLevel===self.currItem.initialZoomLevel);},_closestElement=function(el,fn){if(!el||el===document){return false;}
if(el.getAttribute('class')&&el.getAttribute('class').indexOf('pswp__scroll-wrap')>-1){return false;}
if(fn(el)){return el;}
return _closestElement(el.parentNode,fn);},_preventObj={},_preventDefaultEventBehaviour=function(e,isDown){_preventObj.prevent=!_closestElement(e.target,_options.isClickableElement);_shout('preventDragEvent',e,isDown,_preventObj);return _preventObj.prevent;},_convertTouchToPoint=function(touch,p){p.x=touch.pageX;p.y=touch.pageY;p.id=touch.identifier;return p;},_findCenterOfPoints=function(p1,p2,pCenter){pCenter.x=(p1.x+p2.x)*0.5;pCenter.y=(p1.y+p2.y)*0.5;},_pushPosPoint=function(time,x,y){if(time-_gestureCheckSpeedTime>50){var o=_posPoints.length>2?_posPoints.shift():{};o.x=x;o.y=y;_posPoints.push(o);_gestureCheckSpeedTime=time;}},_calculateVerticalDragOpacityRatio=function(){var yOffset=_panOffset.y-self.currItem.initialPosition.y;return 1-Math.abs(yOffset/(_viewportSize.y/2));},_ePoint1={},_ePoint2={},_tempPointsArr=[],_tempCounter,_getTouchPoints=function(e){while(_tempPointsArr.length>0){_tempPointsArr.pop();}
if(!_pointerEventEnabled){if(e.type.indexOf('touch')>-1){if(e.touches&&e.touches.length>0){_tempPointsArr[0]=_convertTouchToPoint(e.touches[0],_ePoint1);if(e.touches.length>1){_tempPointsArr[1]=_convertTouchToPoint(e.touches[1],_ePoint2);}}}else{_ePoint1.x=e.pageX;_ePoint1.y=e.pageY;_ePoint1.id='';_tempPointsArr[0]=_ePoint1;}}else{_tempCounter=0;_currPointers.forEach(function(p){if(_tempCounter===0){_tempPointsArr[0]=p;}else if(_tempCounter===1){_tempPointsArr[1]=p;}
_tempCounter++;});}
return _tempPointsArr;},_panOrMoveMainScroll=function(axis,delta){var panFriction,overDiff=0,newOffset=_panOffset[axis]+delta[axis],startOverDiff,dir=delta[axis]>0,newMainScrollPosition=_mainScrollPos.x+delta.x,mainScrollDiff=_mainScrollPos.x-_startMainScrollPos.x,newPanPos,newMainScrollPos;if(newOffset>_currPanBounds.min[axis]||newOffset<_currPanBounds.max[axis]){panFriction=_options.panEndFriction;}else{panFriction=1;}
newOffset=_panOffset[axis]+delta[axis]*panFriction;if(_options.allowPanToNext||_currZoomLevel===self.currItem.initialZoomLevel){if(!_currZoomElementStyle){newMainScrollPos=newMainScrollPosition;}else if(_direction==='h'&&axis==='x'&&!_zoomStarted){if(dir){if(newOffset>_currPanBounds.min[axis]){panFriction=_options.panEndFriction;overDiff=_currPanBounds.min[axis]-newOffset;startOverDiff=_currPanBounds.min[axis]-_startPanOffset[axis];}
if((startOverDiff<=0||mainScrollDiff<0)&&_getNumItems()>1){newMainScrollPos=newMainScrollPosition;if(mainScrollDiff<0&&newMainScrollPosition>_startMainScrollPos.x){newMainScrollPos=_startMainScrollPos.x;}}else{if(_currPanBounds.min.x!==_currPanBounds.max.x){newPanPos=newOffset;}}}else{if(newOffset<_currPanBounds.max[axis]){panFriction=_options.panEndFriction;overDiff=newOffset-_currPanBounds.max[axis];startOverDiff=_startPanOffset[axis]-_currPanBounds.max[axis];}
if((startOverDiff<=0||mainScrollDiff>0)&&_getNumItems()>1){newMainScrollPos=newMainScrollPosition;if(mainScrollDiff>0&&newMainScrollPosition<_startMainScrollPos.x){newMainScrollPos=_startMainScrollPos.x;}}else{if(_currPanBounds.min.x!==_currPanBounds.max.x){newPanPos=newOffset;}}}}
if(axis==='x'){if(newMainScrollPos!==undefined){_moveMainScroll(newMainScrollPos,true);if(newMainScrollPos===_startMainScrollPos.x){_mainScrollShifted=false;}else{_mainScrollShifted=true;}}
if(_currPanBounds.min.x!==_currPanBounds.max.x){if(newPanPos!==undefined){_panOffset.x=newPanPos;}else if(!_mainScrollShifted){_panOffset.x+=delta.x*panFriction;}}
return newMainScrollPos!==undefined;}}
if(!_mainScrollAnimating){if(!_mainScrollShifted){if(_currZoomLevel>self.currItem.fitRatio){_panOffset[axis]+=delta[axis]*panFriction;}}}},_onDragStart=function(e){if(e.type==='mousedown'&&e.button>0){return;}
if(_initialZoomRunning){e.preventDefault();return;}
if(_oldAndroidTouchEndTimeout&&e.type==='mousedown'){return;}
if(_preventDefaultEventBehaviour(e,true)){e.preventDefault();}
_shout('pointerDown');if(_pointerEventEnabled){var pointerIndex=framework.arraySearch(_currPointers,e.pointerId,'id');if(pointerIndex<0){pointerIndex=_currPointers.length;}
_currPointers[pointerIndex]={x:e.pageX,y:e.pageY,id:e.pointerId};}
var startPointsList=_getTouchPoints(e),numPoints=startPointsList.length;_currentPoints=null;_stopAllAnimations();if(!_isDragging||numPoints===1){_isDragging=_isFirstMove=true;framework.bind(window,_upMoveEvents,self);_isZoomingIn=_wasOverInitialZoom=_opacityChanged=_verticalDragInitiated=_mainScrollShifted=_moved=_isMultitouch=_zoomStarted=false;_direction=null;_shout('firstTouchStart',startPointsList);_equalizePoints(_startPanOffset,_panOffset);_currPanDist.x=_currPanDist.y=0;_equalizePoints(_currPoint,startPointsList[0]);_equalizePoints(_startPoint,_currPoint);_startMainScrollPos.x=_slideSize.x*_currPositionIndex;_posPoints=[{x:_currPoint.x,y:_currPoint.y}];_gestureCheckSpeedTime=_gestureStartTime=_getCurrentTime();_calculatePanBounds(_currZoomLevel,true);_stopDragUpdateLoop();_dragUpdateLoop();}
if(!_isZooming&&numPoints>1&&!_mainScrollAnimating&&!_mainScrollShifted){_startZoomLevel=_currZoomLevel;_zoomStarted=false;_isZooming=_isMultitouch=true;_currPanDist.y=_currPanDist.x=0;_equalizePoints(_startPanOffset,_panOffset);_equalizePoints(p,startPointsList[0]);_equalizePoints(p2,startPointsList[1]);_findCenterOfPoints(p,p2,_currCenterPoint);_midZoomPoint.x=Math.abs(_currCenterPoint.x)-_panOffset.x;_midZoomPoint.y=Math.abs(_currCenterPoint.y)-_panOffset.y;_currPointsDistance=_startPointsDistance=_calculatePointsDistance(p,p2);}},_onDragMove=function(e){e.preventDefault();if(_pointerEventEnabled){var pointerIndex=framework.arraySearch(_currPointers,e.pointerId,'id');if(pointerIndex>-1){var p=_currPointers[pointerIndex];p.x=e.pageX;p.y=e.pageY;}}
if(_isDragging){var touchesList=_getTouchPoints(e);if(!_direction&&!_moved&&!_isZooming){if(_mainScrollPos.x!==_slideSize.x*_currPositionIndex){_direction='h';}else{var diff=Math.abs(touchesList[0].x-_currPoint.x)-Math.abs(touchesList[0].y-_currPoint.y);if(Math.abs(diff)>=DIRECTION_CHECK_OFFSET){_direction=diff>0?'h':'v';_currentPoints=touchesList;}}}else{_currentPoints=touchesList;}}},_renderMovement=function(){if(!_currentPoints){return;}
var numPoints=_currentPoints.length;if(numPoints===0){return;}
_equalizePoints(p,_currentPoints[0]);delta.x=p.x-_currPoint.x;delta.y=p.y-_currPoint.y;if(_isZooming&&numPoints>1){_currPoint.x=p.x;_currPoint.y=p.y;if(!delta.x&&!delta.y&&_isEqualPoints(_currentPoints[1],p2)){return;}
_equalizePoints(p2,_currentPoints[1]);if(!_zoomStarted){_zoomStarted=true;_shout('zoomGestureStarted');}
var pointsDistance=_calculatePointsDistance(p,p2);var zoomLevel=_calculateZoomLevel(pointsDistance);if(zoomLevel>self.currItem.initialZoomLevel+self.currItem.initialZoomLevel/15){_wasOverInitialZoom=true;}
var zoomFriction=1,minZoomLevel=_getMinZoomLevel(),maxZoomLevel=_getMaxZoomLevel();if(zoomLevel<minZoomLevel){if(_options.pinchToClose&&!_wasOverInitialZoom&&_startZoomLevel<=self.currItem.initialZoomLevel){var minusDiff=minZoomLevel-zoomLevel;var percent=1-minusDiff/(minZoomLevel/1.2);_applyBgOpacity(percent);_shout('onPinchClose',percent);_opacityChanged=true;}else{zoomFriction=(minZoomLevel-zoomLevel)/minZoomLevel;if(zoomFriction>1){zoomFriction=1;}
zoomLevel=minZoomLevel-zoomFriction*(minZoomLevel/3);}}else if(zoomLevel>maxZoomLevel){zoomFriction=(zoomLevel-maxZoomLevel)/(minZoomLevel*6);if(zoomFriction>1){zoomFriction=1;}
zoomLevel=maxZoomLevel+zoomFriction*minZoomLevel;}
if(zoomFriction<0){zoomFriction=0;}
_currPointsDistance=pointsDistance;_findCenterOfPoints(p,p2,_centerPoint);_currPanDist.x+=_centerPoint.x-_currCenterPoint.x;_currPanDist.y+=_centerPoint.y-_currCenterPoint.y;_equalizePoints(_currCenterPoint,_centerPoint);_panOffset.x=_calculatePanOffset('x',zoomLevel);_panOffset.y=_calculatePanOffset('y',zoomLevel);_isZoomingIn=zoomLevel>_currZoomLevel;_currZoomLevel=zoomLevel;_applyCurrentZoomPan();}else{if(!_direction){return;}
if(_isFirstMove){_isFirstMove=false;if(Math.abs(delta.x)>=DIRECTION_CHECK_OFFSET){delta.x-=_currentPoints[0].x-_startPoint.x;}
if(Math.abs(delta.y)>=DIRECTION_CHECK_OFFSET){delta.y-=_currentPoints[0].y-_startPoint.y;}}
_currPoint.x=p.x;_currPoint.y=p.y;if(delta.x===0&&delta.y===0){return;}
if(_direction==='v'&&_options.closeOnVerticalDrag){if(!_canPan()){_currPanDist.y+=delta.y;_panOffset.y+=delta.y;var opacityRatio=_calculateVerticalDragOpacityRatio();_verticalDragInitiated=true;_shout('onVerticalDrag',opacityRatio);_applyBgOpacity(opacityRatio);_applyCurrentZoomPan();return;}}
_pushPosPoint(_getCurrentTime(),p.x,p.y);_moved=true;_currPanBounds=self.currItem.bounds;var mainScrollChanged=_panOrMoveMainScroll('x',delta);if(!mainScrollChanged){_panOrMoveMainScroll('y',delta);_roundPoint(_panOffset);_applyCurrentZoomPan();}}},_onDragRelease=function(e){if(_features.isOldAndroid){if(_oldAndroidTouchEndTimeout&&e.type==='mouseup'){return;}
if(e.type.indexOf('touch')>-1){clearTimeout(_oldAndroidTouchEndTimeout);_oldAndroidTouchEndTimeout=setTimeout(function(){_oldAndroidTouchEndTimeout=0;},600);}}
_shout('pointerUp');if(_preventDefaultEventBehaviour(e,false)){e.preventDefault();}
var releasePoint;if(_pointerEventEnabled){var pointerIndex=framework.arraySearch(_currPointers,e.pointerId,'id');if(pointerIndex>-1){releasePoint=_currPointers.splice(pointerIndex,1)[0];if(navigator.pointerEnabled){releasePoint.type=e.pointerType||'mouse';}else{var MSPOINTER_TYPES={4:'mouse',2:'touch',3:'pen'};releasePoint.type=MSPOINTER_TYPES[e.pointerType];if(!releasePoint.type){releasePoint.type=e.pointerType||'mouse';}}}}
var touchList=_getTouchPoints(e),gestureType,numPoints=touchList.length;if(e.type==='mouseup'){numPoints=0;}
if(numPoints===2){_currentPoints=null;return true;}
if(numPoints===1){_equalizePoints(_startPoint,touchList[0]);}
if(numPoints===0&&!_direction&&!_mainScrollAnimating){if(!releasePoint){if(e.type==='mouseup'){releasePoint={x:e.pageX,y:e.pageY,type:'mouse'};}else if(e.changedTouches&&e.changedTouches[0]){releasePoint={x:e.changedTouches[0].pageX,y:e.changedTouches[0].pageY,type:'touch'};}}
_shout('touchRelease',e,releasePoint);}
var releaseTimeDiff=-1;if(numPoints===0){_isDragging=false;framework.unbind(window,_upMoveEvents,self);_stopDragUpdateLoop();if(_isZooming){releaseTimeDiff=0;}else if(_lastReleaseTime!==-1){releaseTimeDiff=_getCurrentTime()-_lastReleaseTime;}}
_lastReleaseTime=numPoints===1?_getCurrentTime():-1;if(releaseTimeDiff!==-1&&releaseTimeDiff<150){gestureType='zoom';}else{gestureType='swipe';}
if(_isZooming&&numPoints<2){_isZooming=false;if(numPoints===1){gestureType='zoomPointerUp';}
_shout('zoomGestureEnded');}
_currentPoints=null;if(!_moved&&!_zoomStarted&&!_mainScrollAnimating&&!_verticalDragInitiated){return;}
_stopAllAnimations();if(!_releaseAnimData){_releaseAnimData=_initDragReleaseAnimationData();}
_releaseAnimData.calculateSwipeSpeed('x');if(_verticalDragInitiated){var opacityRatio=_calculateVerticalDragOpacityRatio();if(opacityRatio<_options.verticalDragRange){self.close();}else{var initalPanY=_panOffset.y,initialBgOpacity=_bgOpacity;_animateProp('verticalDrag',0,1,300,framework.easing.cubic.out,function(now){_panOffset.y=(self.currItem.initialPosition.y-initalPanY)*now+initalPanY;_applyBgOpacity((1-initialBgOpacity)*now+initialBgOpacity);_applyCurrentZoomPan();});_shout('onVerticalDrag',1);}
return;}
if((_mainScrollShifted||_mainScrollAnimating)&&numPoints===0){var itemChanged=_finishSwipeMainScrollGesture(gestureType,_releaseAnimData);if(itemChanged){return;}
gestureType='zoomPointerUp';}
if(_mainScrollAnimating){return;}
if(gestureType!=='swipe'){_completeZoomGesture();return;}
if(!_mainScrollShifted&&_currZoomLevel>self.currItem.fitRatio){_completePanGesture(_releaseAnimData);}},_initDragReleaseAnimationData=function(){var lastFlickDuration,tempReleasePos;var s={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(axis){if(_posPoints.length>1){lastFlickDuration=_getCurrentTime()-_gestureCheckSpeedTime+50;tempReleasePos=_posPoints[_posPoints.length-2][axis];}else{lastFlickDuration=_getCurrentTime()-_gestureStartTime;tempReleasePos=_startPoint[axis];}
s.lastFlickOffset[axis]=_currPoint[axis]-tempReleasePos;s.lastFlickDist[axis]=Math.abs(s.lastFlickOffset[axis]);if(s.lastFlickDist[axis]>20){s.lastFlickSpeed[axis]=s.lastFlickOffset[axis]/lastFlickDuration;}else{s.lastFlickSpeed[axis]=0;}
if(Math.abs(s.lastFlickSpeed[axis])<0.1){s.lastFlickSpeed[axis]=0;}
s.slowDownRatio[axis]=0.95;s.slowDownRatioReverse[axis]=1-s.slowDownRatio[axis];s.speedDecelerationRatio[axis]=1;},calculateOverBoundsAnimOffset:function(axis,speed){if(!s.backAnimStarted[axis]){if(_panOffset[axis]>_currPanBounds.min[axis]){s.backAnimDestination[axis]=_currPanBounds.min[axis];}else if(_panOffset[axis]<_currPanBounds.max[axis]){s.backAnimDestination[axis]=_currPanBounds.max[axis];}
if(s.backAnimDestination[axis]!==undefined){s.slowDownRatio[axis]=0.7;s.slowDownRatioReverse[axis]=1-s.slowDownRatio[axis];if(s.speedDecelerationRatioAbs[axis]<0.05){s.lastFlickSpeed[axis]=0;s.backAnimStarted[axis]=true;_animateProp('bounceZoomPan'+axis,_panOffset[axis],s.backAnimDestination[axis],speed||300,framework.easing.sine.out,function(pos){_panOffset[axis]=pos;_applyCurrentZoomPan();});}}}},calculateAnimOffset:function(axis){if(!s.backAnimStarted[axis]){s.speedDecelerationRatio[axis]=s.speedDecelerationRatio[axis]*(s.slowDownRatio[axis]+
s.slowDownRatioReverse[axis]-
s.slowDownRatioReverse[axis]*s.timeDiff/10);s.speedDecelerationRatioAbs[axis]=Math.abs(s.lastFlickSpeed[axis]*s.speedDecelerationRatio[axis]);s.distanceOffset[axis]=s.lastFlickSpeed[axis]*s.speedDecelerationRatio[axis]*s.timeDiff;_panOffset[axis]+=s.distanceOffset[axis];}},panAnimLoop:function(){if(_animations.zoomPan){_animations.zoomPan.raf=_requestAF(s.panAnimLoop);s.now=_getCurrentTime();s.timeDiff=s.now-s.lastNow;s.lastNow=s.now;s.calculateAnimOffset('x');s.calculateAnimOffset('y');_applyCurrentZoomPan();s.calculateOverBoundsAnimOffset('x');s.calculateOverBoundsAnimOffset('y');if(s.speedDecelerationRatioAbs.x<0.05&&s.speedDecelerationRatioAbs.y<0.05){_panOffset.x=Math.round(_panOffset.x);_panOffset.y=Math.round(_panOffset.y);_applyCurrentZoomPan();_stopAnimation('zoomPan');return;}}}};return s;},_completePanGesture=function(animData){animData.calculateSwipeSpeed('y');_currPanBounds=self.currItem.bounds;animData.backAnimDestination={};animData.backAnimStarted={};if(Math.abs(animData.lastFlickSpeed.x)<=0.05&&Math.abs(animData.lastFlickSpeed.y)<=0.05){animData.speedDecelerationRatioAbs.x=animData.speedDecelerationRatioAbs.y=0;animData.calculateOverBoundsAnimOffset('x');animData.calculateOverBoundsAnimOffset('y');return true;}
_registerStartAnimation('zoomPan');animData.lastNow=_getCurrentTime();animData.panAnimLoop();},_finishSwipeMainScrollGesture=function(gestureType,_releaseAnimData){var itemChanged;if(!_mainScrollAnimating){_currZoomedItemIndex=_currentItemIndex;}
var itemsDiff;if(gestureType==='swipe'){var totalShiftDist=_currPoint.x-_startPoint.x,isFastLastFlick=_releaseAnimData.lastFlickDist.x<10;if(totalShiftDist>MIN_SWIPE_DISTANCE&&(isFastLastFlick||_releaseAnimData.lastFlickOffset.x>20)){itemsDiff=-1;}else if(totalShiftDist<-MIN_SWIPE_DISTANCE&&(isFastLastFlick||_releaseAnimData.lastFlickOffset.x<-20)){itemsDiff=1;}}
var nextCircle;if(itemsDiff){_currentItemIndex+=itemsDiff;if(_currentItemIndex<0){_currentItemIndex=_options.loop?_getNumItems()-1:0;nextCircle=true;}else if(_currentItemIndex>=_getNumItems()){_currentItemIndex=_options.loop?0:_getNumItems()-1;nextCircle=true;}
if(!nextCircle||_options.loop){_indexDiff+=itemsDiff;_currPositionIndex-=itemsDiff;itemChanged=true;}}
var animateToX=_slideSize.x*_currPositionIndex;var animateToDist=Math.abs(animateToX-_mainScrollPos.x);var finishAnimDuration;if(!itemChanged&&animateToX>_mainScrollPos.x!==_releaseAnimData.lastFlickSpeed.x>0){finishAnimDuration=333;}else{finishAnimDuration=Math.abs(_releaseAnimData.lastFlickSpeed.x)>0?animateToDist/Math.abs(_releaseAnimData.lastFlickSpeed.x):333;finishAnimDuration=Math.min(finishAnimDuration,400);finishAnimDuration=Math.max(finishAnimDuration,250);}
if(_currZoomedItemIndex===_currentItemIndex){itemChanged=false;}
_mainScrollAnimating=true;_shout('mainScrollAnimStart');_animateProp('mainScroll',_mainScrollPos.x,animateToX,finishAnimDuration,framework.easing.cubic.out,_moveMainScroll,function(){_stopAllAnimations();_mainScrollAnimating=false;_currZoomedItemIndex=-1;if(itemChanged||_currZoomedItemIndex!==_currentItemIndex){self.updateCurrItem();}
_shout('mainScrollAnimComplete');});if(itemChanged){self.updateCurrItem(true);}
return itemChanged;},_calculateZoomLevel=function(touchesDistance){return 1/_startPointsDistance*touchesDistance*_startZoomLevel;},_completeZoomGesture=function(){var destZoomLevel=_currZoomLevel,minZoomLevel=_getMinZoomLevel(),maxZoomLevel=_getMaxZoomLevel();if(_currZoomLevel<minZoomLevel){destZoomLevel=minZoomLevel;}else if(_currZoomLevel>maxZoomLevel){destZoomLevel=maxZoomLevel;}
var destOpacity=1,onUpdate,initialOpacity=_bgOpacity;if(_opacityChanged&&!_isZoomingIn&&!_wasOverInitialZoom&&_currZoomLevel<minZoomLevel){self.close();return true;}
if(_opacityChanged){onUpdate=function(now){_applyBgOpacity((destOpacity-initialOpacity)*now+initialOpacity);};}
self.zoomTo(destZoomLevel,0,200,framework.easing.cubic.out,onUpdate);return true;};_registerModule('Gestures',{publicMethods:{initGestures:function(){var addEventNames=function(pref,down,move,up,cancel){_dragStartEvent=pref+down;_dragMoveEvent=pref+move;_dragEndEvent=pref+up;if(cancel){_dragCancelEvent=pref+cancel;}else{_dragCancelEvent='';}};_pointerEventEnabled=_features.pointerEvent;if(_pointerEventEnabled&&_features.touch){_features.touch=false;}
if(_pointerEventEnabled){if(navigator.pointerEnabled){addEventNames('pointer','down','move','up','cancel');}else{addEventNames('MSPointer','Down','Move','Up','Cancel');}}else if(_features.touch){addEventNames('touch','start','move','end','cancel');_likelyTouchDevice=true;}else{addEventNames('mouse','down','move','up');}
_upMoveEvents=_dragMoveEvent+' '+_dragEndEvent+' '+_dragCancelEvent;_downEvents=_dragStartEvent;if(_pointerEventEnabled&&!_likelyTouchDevice){_likelyTouchDevice=(navigator.maxTouchPoints>1)||(navigator.msMaxTouchPoints>1);}
self.likelyTouchDevice=_likelyTouchDevice;_globalEventHandlers[_dragStartEvent]=_onDragStart;_globalEventHandlers[_dragMoveEvent]=_onDragMove;_globalEventHandlers[_dragEndEvent]=_onDragRelease;if(_dragCancelEvent){_globalEventHandlers[_dragCancelEvent]=_globalEventHandlers[_dragEndEvent];}
if(_features.touch){_downEvents+=' mousedown';_upMoveEvents+=' mousemove mouseup';_globalEventHandlers.mousedown=_globalEventHandlers[_dragStartEvent];_globalEventHandlers.mousemove=_globalEventHandlers[_dragMoveEvent];_globalEventHandlers.mouseup=_globalEventHandlers[_dragEndEvent];}
if(!_likelyTouchDevice){_options.allowPanToNext=false;}}}});var _showOrHideTimeout,_showOrHide=function(item,img,out,completeFn){if(_showOrHideTimeout){clearTimeout(_showOrHideTimeout);}
_initialZoomRunning=true;_initialContentSet=true;var thumbBounds;if(item.initialLayout){thumbBounds=item.initialLayout;item.initialLayout=null;}else{thumbBounds=_options.getThumbBoundsFn&&_options.getThumbBoundsFn(_currentItemIndex);}
var duration=out?_options.hideAnimationDuration:_options.showAnimationDuration;var onComplete=function(){_stopAnimation('initialZoom');if(!out){_applyBgOpacity(1);if(img){img.style.display='block';}
framework.addClass(template,'pswp--animated-in');_shout('initialZoom'+(out?'OutEnd':'InEnd'));}else{self.template.removeAttribute('style');self.bg.removeAttribute('style');}
if(completeFn){completeFn();}
_initialZoomRunning=false;};if(!duration||!thumbBounds||thumbBounds.x===undefined){_shout('initialZoom'+(out?'Out':'In'));_currZoomLevel=item.initialZoomLevel;_equalizePoints(_panOffset,item.initialPosition);_applyCurrentZoomPan();template.style.opacity=out?0:1;_applyBgOpacity(1);if(duration){setTimeout(function(){onComplete();},duration);}else{onComplete();}
return;}
var startAnimation=function(){var closeWithRaf=_closedByScroll,fadeEverything=!self.currItem.src||self.currItem.loadError||_options.showHideOpacity;if(item.miniImg){item.miniImg.style.webkitBackfaceVisibility='hidden';}
if(!out){_currZoomLevel=thumbBounds.w/item.w;_panOffset.x=thumbBounds.x;_panOffset.y=thumbBounds.y-_initalWindowScrollY;self[fadeEverything?'template':'bg'].style.opacity=0.001;_applyCurrentZoomPan();}
_registerStartAnimation('initialZoom');if(out&&!closeWithRaf){framework.removeClass(template,'pswp--animated-in');}
if(fadeEverything){if(out){framework[(closeWithRaf?'remove':'add')+'Class'](template,'pswp--animate_opacity');}else{setTimeout(function(){framework.addClass(template,'pswp--animate_opacity');},30);}}
_showOrHideTimeout=setTimeout(function(){_shout('initialZoom'+(out?'Out':'In'));if(!out){_currZoomLevel=item.initialZoomLevel;_equalizePoints(_panOffset,item.initialPosition);_applyCurrentZoomPan();_applyBgOpacity(1);if(fadeEverything){template.style.opacity=1;}else{_applyBgOpacity(1);}
_showOrHideTimeout=setTimeout(onComplete,duration+20);}else{var destZoomLevel=thumbBounds.w/item.w,initialPanOffset={x:_panOffset.x,y:_panOffset.y},initialZoomLevel=_currZoomLevel,initalBgOpacity=_bgOpacity,onUpdate=function(now){if(now===1){_currZoomLevel=destZoomLevel;_panOffset.x=thumbBounds.x;_panOffset.y=thumbBounds.y-_currentWindowScrollY;}else{_currZoomLevel=(destZoomLevel-initialZoomLevel)*now+initialZoomLevel;_panOffset.x=(thumbBounds.x-initialPanOffset.x)*now+initialPanOffset.x;_panOffset.y=(thumbBounds.y-_currentWindowScrollY-initialPanOffset.y)*now+initialPanOffset.y;}
_applyCurrentZoomPan();if(fadeEverything){template.style.opacity=1-now;}else{_applyBgOpacity(initalBgOpacity-now*initalBgOpacity);}};if(closeWithRaf){_animateProp('initialZoom',0,1,duration,framework.easing.cubic.out,onUpdate,onComplete);}else{onUpdate(1);_showOrHideTimeout=setTimeout(onComplete,duration+20);}}},out?25:90);};startAnimation();};var _items,_tempPanAreaSize={},_imagesToAppendPool=[],_initialContentSet,_initialZoomRunning,_controllerDefaultOptions={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:false,preload:[1,1],getNumItemsFn:function(){return _items.length;}};var _getItemAt,_getNumItems,_initialIsLoop,_getZeroBounds=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}};},_calculateSingleItemPanBounds=function(item,realPanElementW,realPanElementH){var bounds=item.bounds;bounds.center.x=Math.round((_tempPanAreaSize.x-realPanElementW)/2);bounds.center.y=Math.round((_tempPanAreaSize.y-realPanElementH)/2)+item.vGap.top;bounds.max.x=(realPanElementW>_tempPanAreaSize.x)?Math.round(_tempPanAreaSize.x-realPanElementW):bounds.center.x;bounds.max.y=(realPanElementH>_tempPanAreaSize.y)?Math.round(_tempPanAreaSize.y-realPanElementH)+item.vGap.top:bounds.center.y;bounds.min.x=(realPanElementW>_tempPanAreaSize.x)?0:bounds.center.x;bounds.min.y=(realPanElementH>_tempPanAreaSize.y)?item.vGap.top:bounds.center.y;},_calculateItemSize=function(item,viewportSize,zoomLevel){if(item.src&&!item.loadError){var isInitial=!zoomLevel;if(isInitial){if(!item.vGap){item.vGap={top:0,bottom:0};}
_shout('parseVerticalMargin',item);}
_tempPanAreaSize.x=viewportSize.x;_tempPanAreaSize.y=viewportSize.y-item.vGap.top-item.vGap.bottom;if(isInitial){var hRatio=_tempPanAreaSize.x/item.w;var vRatio=_tempPanAreaSize.y/item.h;item.fitRatio=hRatio<vRatio?hRatio:vRatio;var scaleMode=_options.scaleMode;if(scaleMode==='orig'){zoomLevel=1;}else if(scaleMode==='fit'){zoomLevel=item.fitRatio;}
if(zoomLevel>1){zoomLevel=1;}
item.initialZoomLevel=zoomLevel;if(!item.bounds){item.bounds=_getZeroBounds();}}
if(!zoomLevel){return;}
_calculateSingleItemPanBounds(item,item.w*zoomLevel,item.h*zoomLevel);if(isInitial&&zoomLevel===item.initialZoomLevel){item.initialPosition=item.bounds.center;}
return item.bounds;}else{item.w=item.h=0;item.initialZoomLevel=item.fitRatio=1;item.bounds=_getZeroBounds();item.initialPosition=item.bounds.center;return item.bounds;}},_appendImage=function(index,item,baseDiv,img,preventAnimation,keepPlaceholder){if(item.loadError){return;}
if(img){item.imageAppended=true;_setImageSize(item,img,(item===self.currItem&&_renderMaxResolution));baseDiv.appendChild(img);if(keepPlaceholder){setTimeout(function(){if(item&&item.loaded&&item.placeholder){item.placeholder.style.display='none';item.placeholder=null;}},500);}}},_preloadImage=function(item){item.loading=true;item.loaded=false;var img=item.img=framework.createEl('pswp__img','img');var onComplete=function(){item.loading=false;item.loaded=true;if(item.loadComplete){item.loadComplete(item);}else{item.img=null;}
img.onload=img.onerror=null;img=null;};img.onload=onComplete;img.onerror=function(){item.loadError=true;onComplete();};img.src=item.src;return img;},_checkForError=function(item,cleanUp){if(item.src&&item.loadError&&item.container){if(cleanUp){item.container.innerHTML='';}
item.container.innerHTML=_options.errorMsg.replace('%url%',item.src);return true;}},_setImageSize=function(item,img,maxRes){if(!item.src){return;}
if(!img){img=item.container.lastChild;}
var w=maxRes?item.w:Math.round(item.w*item.fitRatio),h=maxRes?item.h:Math.round(item.h*item.fitRatio);if(item.placeholder&&!item.loaded){item.placeholder.style.width=w+'px';item.placeholder.style.height=h+'px';}
img.style.width=w+'px';img.style.height=h+'px';},_appendImagesPool=function(){if(_imagesToAppendPool.length){var poolItem;for(var i=0;i<_imagesToAppendPool.length;i++){poolItem=_imagesToAppendPool[i];if(poolItem.holder.index===poolItem.index){_appendImage(poolItem.index,poolItem.item,poolItem.baseDiv,poolItem.img,false,poolItem.clearPlaceholder);}}
_imagesToAppendPool=[];}};_registerModule('Controller',{publicMethods:{lazyLoadItem:function(index){index=_getLoopedId(index);var item=_getItemAt(index);if(!item||((item.loaded||item.loading)&&!_itemsNeedUpdate)){return;}
_shout('gettingData',index,item);if(!item.src){return;}
_preloadImage(item);},initController:function(){framework.extend(_options,_controllerDefaultOptions,true);self.items=_items=items;_getItemAt=self.getItemAt;_getNumItems=_options.getNumItemsFn;_initialIsLoop=_options.loop;if(_getNumItems()<3){_options.loop=false;}
_listen('beforeChange',function(diff){var p=_options.preload,isNext=diff===null?true:(diff>=0),preloadBefore=Math.min(p[0],_getNumItems()),preloadAfter=Math.min(p[1],_getNumItems()),i;for(i=1;i<=(isNext?preloadAfter:preloadBefore);i++){self.lazyLoadItem(_currentItemIndex+i);}
for(i=1;i<=(isNext?preloadBefore:preloadAfter);i++){self.lazyLoadItem(_currentItemIndex-i);}});_listen('initialLayout',function(){self.currItem.initialLayout=_options.getThumbBoundsFn&&_options.getThumbBoundsFn(_currentItemIndex);});_listen('mainScrollAnimComplete',_appendImagesPool);_listen('initialZoomInEnd',_appendImagesPool);_listen('destroy',function(){var item;for(var i=0;i<_items.length;i++){item=_items[i];if(item.container){item.container=null;}
if(item.placeholder){item.placeholder=null;}
if(item.img){item.img=null;}
if(item.preloader){item.preloader=null;}
if(item.loadError){item.loaded=item.loadError=false;}}
_imagesToAppendPool=null;});},getItemAt:function(index){if(index>=0){return _items[index]!==undefined?_items[index]:false;}
return false;},allowProgressiveImg:function(){return _options.forceProgressiveLoading||!_likelyTouchDevice||_options.mouseUsed||screen.width>1200;},setContent:function(holder,index){if(_options.loop){index=_getLoopedId(index);}
var prevItem=self.getItemAt(holder.index);if(prevItem){prevItem.container=null;}
var item=self.getItemAt(index),img;if(!item){holder.el.innerHTML='';return;}
_shout('gettingData',index,item);holder.index=index;holder.item=item;var baseDiv=item.container=framework.createEl('pswp__zoom-wrap');if(!item.src&&item.html){if(item.html.tagName){baseDiv.appendChild(item.html);}else{baseDiv.innerHTML=item.html;}}
_checkForError(item);_calculateItemSize(item,_viewportSize);if(item.src&&!item.loadError&&!item.loaded){item.loadComplete=function(item){if(!_isOpen){return;}
if(holder&&holder.index===index){if(_checkForError(item,true)){item.loadComplete=item.img=null;_calculateItemSize(item,_viewportSize);_applyZoomPanToItem(item);if(holder.index===_currentItemIndex){self.updateCurrZoomItem();}
return;}
if(!item.imageAppended){if(_features.transform&&(_mainScrollAnimating||_initialZoomRunning)){_imagesToAppendPool.push({item:item,baseDiv:baseDiv,img:item.img,index:index,holder:holder,clearPlaceholder:true});}else{_appendImage(index,item,baseDiv,item.img,_mainScrollAnimating||_initialZoomRunning,true);}}else{if(!_initialZoomRunning&&item.placeholder){item.placeholder.style.display='none';item.placeholder=null;}}}
item.loadComplete=null;item.img=null;_shout('imageLoadComplete',index,item);};if(framework.features.transform){var placeholderClassName='pswp__img pswp__img--placeholder';placeholderClassName+=(item.msrc?'':' pswp__img--placeholder--blank');var placeholder=framework.createEl(placeholderClassName,item.msrc?'img':'');if(item.msrc){placeholder.src=item.msrc;}
_setImageSize(item,placeholder);baseDiv.appendChild(placeholder);item.placeholder=placeholder;}
if(!item.loading){_preloadImage(item);}
if(self.allowProgressiveImg()){if(!_initialContentSet&&_features.transform){_imagesToAppendPool.push({item:item,baseDiv:baseDiv,img:item.img,index:index,holder:holder});}else{_appendImage(index,item,baseDiv,item.img,true,true);}}}else if(item.src&&!item.loadError){img=framework.createEl('pswp__img','img');img.style.opacity=1;img.src=item.src;_setImageSize(item,img);_appendImage(index,item,baseDiv,img,true);}
if(!_initialContentSet&&index===_currentItemIndex){_currZoomElementStyle=baseDiv.style;_showOrHide(item,(img||item.img));}else{_applyZoomPanToItem(item);}
holder.el.innerHTML='';holder.el.appendChild(baseDiv);},cleanSlide:function(item){if(item.img){item.img.onload=item.img.onerror=null;}
item.loaded=item.loading=item.img=item.imageAppended=false;}}});var tapTimer,tapReleasePoint={},_dispatchTapEvent=function(origEvent,releasePoint,pointerType){var e=document.createEvent('CustomEvent'),eDetail={origEvent:origEvent,target:origEvent.target,releasePoint:releasePoint,pointerType:pointerType||'touch'};e.initCustomEvent('pswpTap',true,true,eDetail);origEvent.target.dispatchEvent(e);};_registerModule('Tap',{publicMethods:{initTap:function(){_listen('firstTouchStart',self.onTapStart);_listen('touchRelease',self.onTapRelease);_listen('destroy',function(){tapReleasePoint={};tapTimer=null;});},onTapStart:function(touchList){if(touchList.length>1){clearTimeout(tapTimer);tapTimer=null;}},onTapRelease:function(e,releasePoint){if(!releasePoint){return;}
if(!_moved&&!_isMultitouch&&!_numAnimations){var p0=releasePoint;if(tapTimer){clearTimeout(tapTimer);tapTimer=null;if(_isNearbyPoints(p0,tapReleasePoint)){_shout('doubleTap',p0);return;}}
if(releasePoint.type==='mouse'){_dispatchTapEvent(e,releasePoint,'mouse');return;}
var clickedTagName=e.target.tagName.toUpperCase();if(clickedTagName==='BUTTON'||framework.hasClass(e.target,'pswp__single-tap')){_dispatchTapEvent(e,releasePoint);return;}
_equalizePoints(tapReleasePoint,p0);tapTimer=setTimeout(function(){_dispatchTapEvent(e,releasePoint);tapTimer=null;},300);}}}});var _wheelDelta;_registerModule('DesktopZoom',{publicMethods:{initDesktopZoom:function(){if(_oldIE){return;}
if(_likelyTouchDevice){_listen('mouseUsed',function(){self.setupDesktopZoom();});}else{self.setupDesktopZoom(true);}},setupDesktopZoom:function(onInit){_wheelDelta={};var events='wheel mousewheel DOMMouseScroll';_listen('bindEvents',function(){framework.bind(template,events,self.handleMouseWheel);});_listen('unbindEvents',function(){if(_wheelDelta){framework.unbind(template,events,self.handleMouseWheel);}});self.mouseZoomedIn=false;var hasDraggingClass,updateZoomable=function(){if(self.mouseZoomedIn){framework.removeClass(template,'pswp--zoomed-in');self.mouseZoomedIn=false;}
if(_currZoomLevel<1){framework.addClass(template,'pswp--zoom-allowed');}else{framework.removeClass(template,'pswp--zoom-allowed');}
removeDraggingClass();},removeDraggingClass=function(){if(hasDraggingClass){framework.removeClass(template,'pswp--dragging');hasDraggingClass=false;}};_listen('resize',updateZoomable);_listen('afterChange',updateZoomable);_listen('pointerDown',function(){if(self.mouseZoomedIn){hasDraggingClass=true;framework.addClass(template,'pswp--dragging');}});_listen('pointerUp',removeDraggingClass);if(!onInit){updateZoomable();}},handleMouseWheel:function(e){if(_currZoomLevel<=self.currItem.fitRatio){if(_options.modal){if(!_options.closeOnScroll||_numAnimations||_isDragging){e.preventDefault();}else if(_transformKey&&Math.abs(e.deltaY)>2){_closedByScroll=true;self.close();}}
return true;}
e.stopPropagation();_wheelDelta.x=0;if('deltaX'in e){if(e.deltaMode===1){_wheelDelta.x=e.deltaX*18;_wheelDelta.y=e.deltaY*18;}else{_wheelDelta.x=e.deltaX;_wheelDelta.y=e.deltaY;}}else if('wheelDelta'in e){if(e.wheelDeltaX){_wheelDelta.x=-0.16*e.wheelDeltaX;}
if(e.wheelDeltaY){_wheelDelta.y=-0.16*e.wheelDeltaY;}else{_wheelDelta.y=-0.16*e.wheelDelta;}}else if('detail'in e){_wheelDelta.y=e.detail;}else{return;}
_calculatePanBounds(_currZoomLevel,true);var newPanX=_panOffset.x-_wheelDelta.x,newPanY=_panOffset.y-_wheelDelta.y;if(_options.modal||(newPanX<=_currPanBounds.min.x&&newPanX>=_currPanBounds.max.x&&newPanY<=_currPanBounds.min.y&&newPanY>=_currPanBounds.max.y)){e.preventDefault();}
self.panTo(newPanX,newPanY);},toggleDesktopZoom:function(centerPoint){centerPoint=centerPoint||{x:_viewportSize.x/2+_offset.x,y:_viewportSize.y/2+_offset.y};var doubleTapZoomLevel=_options.getDoubleTapZoom(true,self.currItem);var zoomOut=_currZoomLevel===doubleTapZoomLevel;self.mouseZoomedIn=!zoomOut;self.zoomTo(zoomOut?self.currItem.initialZoomLevel:doubleTapZoomLevel,centerPoint,333);framework[(!zoomOut?'add':'remove')+'Class'](template,'pswp--zoomed-in');}}});var _historyDefaultOptions={history:true,galleryUID:1};var _historyUpdateTimeout,_hashChangeTimeout,_hashAnimCheckTimeout,_hashChangedByScript,_hashChangedByHistory,_hashReseted,_initialHash,_historyChanged,_closedFromURL,_urlChangedOnce,_windowLoc,_supportsPushState,_getHash=function(){return _windowLoc.hash.substring(1);},_cleanHistoryTimeouts=function(){if(_historyUpdateTimeout){clearTimeout(_historyUpdateTimeout);}
if(_hashAnimCheckTimeout){clearTimeout(_hashAnimCheckTimeout);}},_parseItemIndexFromURL=function(){var hash=_getHash(),params={};if(hash.length<5){return params;}
var i,vars=hash.split('&');for(i=0;i<vars.length;i++){if(!vars[i]){continue;}
var pair=vars[i].split('=');if(pair.length<2){continue;}
params[pair[0]]=pair[1];}
if(_options.galleryPIDs){var searchfor=params.pid;params.pid=0;for(i=0;i<_items.length;i++){if(_items[i].pid===searchfor){params.pid=i;break;}}}else{params.pid=parseInt(params.pid,10)-1;}
if(params.pid<0){params.pid=0;}
return params;},_updateHash=function(){if(_hashAnimCheckTimeout){clearTimeout(_hashAnimCheckTimeout);}
if(_numAnimations||_isDragging){_hashAnimCheckTimeout=setTimeout(_updateHash,500);return;}
if(_hashChangedByScript){clearTimeout(_hashChangeTimeout);}else{_hashChangedByScript=true;}
var pid=(_currentItemIndex+1);var item=_getItemAt(_currentItemIndex);if(item.hasOwnProperty('pid')){pid=item.pid;}
var newHash=_initialHash+'&'+'gid='+_options.galleryUID+'&'+'pid='+pid;if(!_historyChanged){if(_windowLoc.hash.indexOf(newHash)===-1){_urlChangedOnce=true;}}
var newURL=_windowLoc.href.split('#')[0]+'#'+newHash;if(_supportsPushState){if('#'+newHash!==window.location.hash){history[_historyChanged?'replaceState':'pushState']('',document.title,newURL);}}else{if(_historyChanged){_windowLoc.replace(newURL);}else{_windowLoc.hash=newHash;}}
_historyChanged=true;_hashChangeTimeout=setTimeout(function(){_hashChangedByScript=false;},60);};_registerModule('History',{publicMethods:{initHistory:function(){framework.extend(_options,_historyDefaultOptions,true);if(!_options.history){return;}
_windowLoc=window.location;_urlChangedOnce=false;_closedFromURL=false;_historyChanged=false;_initialHash=_getHash();_supportsPushState=('pushState'in history);if(_initialHash.indexOf('gid=')>-1){_initialHash=_initialHash.split('&gid=')[0];_initialHash=_initialHash.split('?gid=')[0];}
_listen('afterChange',self.updateURL);_listen('unbindEvents',function(){framework.unbind(window,'hashchange',self.onHashChange);});var returnToOriginal=function(){_hashReseted=true;if(!_closedFromURL){if(_urlChangedOnce){history.back();}else{if(_initialHash){_windowLoc.hash=_initialHash;}else{if(_supportsPushState){history.pushState('',document.title,_windowLoc.pathname+_windowLoc.search);}else{_windowLoc.hash='';}}}}
_cleanHistoryTimeouts();};_listen('unbindEvents',function(){if(_closedByScroll){returnToOriginal();}});_listen('destroy',function(){if(!_hashReseted){returnToOriginal();}});_listen('firstUpdate',function(){_currentItemIndex=_parseItemIndexFromURL().pid;});var index=_initialHash.indexOf('pid=');if(index>-1){_initialHash=_initialHash.substring(0,index);if(_initialHash.slice(-1)==='&'){_initialHash=_initialHash.slice(0,-1);}}
setTimeout(function(){if(_isOpen){framework.bind(window,'hashchange',self.onHashChange);}},40);},onHashChange:function(){if(_getHash()===_initialHash){_closedFromURL=true;self.close();return;}
if(!_hashChangedByScript){_hashChangedByHistory=true;self.goTo(_parseItemIndexFromURL().pid);_hashChangedByHistory=false;}},updateURL:function(){_cleanHistoryTimeouts();if(_hashChangedByHistory){return;}
if(!_historyChanged){_updateHash();}else{_historyUpdateTimeout=setTimeout(_updateHash,800);}}}});framework.extend(self,publicMethods);};return PhotoSwipe;});
/*! PhotoSwipe Default UI - 4.1.2 - 2017-04-05
* http://photoswipe.com
* Copyright (c) 2017 Dmitry Semenov; */
(function(root,factory){if(typeof define==='function'&&define.amd){define(factory);}else if(typeof exports==='object'){module.exports=factory();}else{root.PhotoSwipeUI_Default=factory();}})(this,function(){'use strict';var PhotoSwipeUI_Default=function(pswp,framework){var ui=this;var _overlayUIUpdated=false,_controlsVisible=true,_fullscrenAPI,_controls,_captionContainer,_fakeCaptionContainer,_indexIndicator,_shareButton,_shareModal,_shareModalHidden=true,_initalCloseOnScrollValue,_isIdle,_listen,_loadingIndicator,_loadingIndicatorHidden,_loadingIndicatorTimeout,_galleryHasOneSlide,_options,_defaultUIOptions={barsSize:{top:44,bottom:'auto'},closeElClasses:['item','caption','zoom-wrap','ui','top-bar'],timeToIdle:4000,timeToIdleOutside:1000,loadingIndicatorDelay:1000,addCaptionHTMLFn:function(item,captionEl){if(!item.title){captionEl.children[0].innerHTML='';return false;}
captionEl.children[0].innerHTML=item.title;return true;},closeEl:true,captionEl:true,fullscreenEl:true,zoomEl:true,shareEl:true,counterEl:true,arrowEl:true,preloaderEl:true,tapToClose:false,tapToToggleControls:true,clickToCloseNonZoomable:true,shareButtons:[{id:'facebook',label:'Share on Facebook',url:'https://www.facebook.com/sharer/sharer.php?u={{url}}'},{id:'twitter',label:'Tweet',url:'https://twitter.com/intent/tweet?text={{text}}&url={{url}}'},{id:'pinterest',label:'Pin it',url:'http://www.pinterest.com/pin/create/button/'+'?url={{url}}&media={{image_url}}&description={{text}}'},{id:'download',label:'Download image',url:'{{raw_image_url}}',download:true}],getImageURLForShare:function(){return pswp.currItem.src||'';},getPageURLForShare:function(){return window.location.href;},getTextForShare:function(){return pswp.currItem.title||'';},indexIndicatorSep:' / ',fitControlsWidth:1200},_blockControlsTap,_blockControlsTapTimeout;var _onControlsTap=function(e){if(_blockControlsTap){return true;}
e=e||window.event;if(_options.timeToIdle&&_options.mouseUsed&&!_isIdle){_onIdleMouseMove();}
var target=e.target||e.srcElement,uiElement,clickedClass=target.getAttribute('class')||'',found;for(var i=0;i<_uiElements.length;i++){uiElement=_uiElements[i];if(uiElement.onTap&&clickedClass.indexOf('pswp__'+uiElement.name)>-1){uiElement.onTap();found=true;}}
if(found){if(e.stopPropagation){e.stopPropagation();}
_blockControlsTap=true;var tapDelay=framework.features.isOldAndroid?600:30;_blockControlsTapTimeout=setTimeout(function(){_blockControlsTap=false;},tapDelay);}},_fitControlsInViewport=function(){return!pswp.likelyTouchDevice||_options.mouseUsed||screen.width>_options.fitControlsWidth;},_togglePswpClass=function(el,cName,add){framework[(add?'add':'remove')+'Class'](el,'pswp__'+cName);},_countNumItems=function(){var hasOneSlide=(_options.getNumItemsFn()===1);if(hasOneSlide!==_galleryHasOneSlide){_togglePswpClass(_controls,'ui--one-slide',hasOneSlide);_galleryHasOneSlide=hasOneSlide;}},_toggleShareModalClass=function(){_togglePswpClass(_shareModal,'share-modal--hidden',_shareModalHidden);},_toggleShareModal=function(){_shareModalHidden=!_shareModalHidden;if(!_shareModalHidden){_toggleShareModalClass();setTimeout(function(){if(!_shareModalHidden){framework.addClass(_shareModal,'pswp__share-modal--fade-in');}},30);}else{framework.removeClass(_shareModal,'pswp__share-modal--fade-in');setTimeout(function(){if(_shareModalHidden){_toggleShareModalClass();}},300);}
if(!_shareModalHidden){_updateShareURLs();}
return false;},_openWindowPopup=function(e){e=e||window.event;var target=e.target||e.srcElement;pswp.shout('shareLinkClick',e,target);if(!target.href){return false;}
if(target.hasAttribute('download')){return true;}
window.open(target.href,'pswp_share','scrollbars=yes,resizable=yes,toolbar=no,'+'location=yes,width=550,height=420,top=100,left='+
(window.screen?Math.round(screen.width/2-275):100));if(!_shareModalHidden){_toggleShareModal();}
return false;},_updateShareURLs=function(){var shareButtonOut='',shareButtonData,shareURL,image_url,page_url,share_text;for(var i=0;i<_options.shareButtons.length;i++){shareButtonData=_options.shareButtons[i];image_url=_options.getImageURLForShare(shareButtonData);page_url=_options.getPageURLForShare(shareButtonData);share_text=_options.getTextForShare(shareButtonData);shareURL=shareButtonData.url.replace('{{url}}',encodeURIComponent(page_url)).replace('{{image_url}}',encodeURIComponent(image_url)).replace('{{raw_image_url}}',image_url).replace('{{text}}',encodeURIComponent(share_text));shareButtonOut+='<a href="'+shareURL+'" target="_blank" '+'class="pswp__share--'+shareButtonData.id+'"'+
(shareButtonData.download?'download':'')+'>'+
shareButtonData.label+'</a>';if(_options.parseShareButtonOut){shareButtonOut=_options.parseShareButtonOut(shareButtonData,shareButtonOut);}}
_shareModal.children[0].innerHTML=shareButtonOut;_shareModal.children[0].onclick=_openWindowPopup;},_hasCloseClass=function(target){for(var i=0;i<_options.closeElClasses.length;i++){if(framework.hasClass(target,'pswp__'+_options.closeElClasses[i])){return true;}}},_idleInterval,_idleTimer,_idleIncrement=0,_onIdleMouseMove=function(){clearTimeout(_idleTimer);_idleIncrement=0;if(_isIdle){ui.setIdle(false);}},_onMouseLeaveWindow=function(e){e=e?e:window.event;var from=e.relatedTarget||e.toElement;if(!from||from.nodeName==='HTML'){clearTimeout(_idleTimer);_idleTimer=setTimeout(function(){ui.setIdle(true);},_options.timeToIdleOutside);}},_setupFullscreenAPI=function(){if(_options.fullscreenEl&&!framework.features.isOldAndroid){if(!_fullscrenAPI){_fullscrenAPI=ui.getFullscreenAPI();}
if(_fullscrenAPI){framework.bind(document,_fullscrenAPI.eventK,ui.updateFullscreen);ui.updateFullscreen();framework.addClass(pswp.template,'pswp--supports-fs');}else{framework.removeClass(pswp.template,'pswp--supports-fs');}}},_setupLoadingIndicator=function(){if(_options.preloaderEl){_toggleLoadingIndicator(true);_listen('beforeChange',function(){clearTimeout(_loadingIndicatorTimeout);_loadingIndicatorTimeout=setTimeout(function(){if(pswp.currItem&&pswp.currItem.loading){if(!pswp.allowProgressiveImg()||(pswp.currItem.img&&!pswp.currItem.img.naturalWidth)){_toggleLoadingIndicator(false);}}else{_toggleLoadingIndicator(true);}},_options.loadingIndicatorDelay);});_listen('imageLoadComplete',function(index,item){if(pswp.currItem===item){_toggleLoadingIndicator(true);}});}},_toggleLoadingIndicator=function(hide){if(_loadingIndicatorHidden!==hide){_togglePswpClass(_loadingIndicator,'preloader--active',!hide);_loadingIndicatorHidden=hide;}},_applyNavBarGaps=function(item){var gap=item.vGap;if(_fitControlsInViewport()){var bars=_options.barsSize;if(_options.captionEl&&bars.bottom==='auto'){if(!_fakeCaptionContainer){_fakeCaptionContainer=framework.createEl('pswp__caption pswp__caption--fake');_fakeCaptionContainer.appendChild(framework.createEl('pswp__caption__center'));_controls.insertBefore(_fakeCaptionContainer,_captionContainer);framework.addClass(_controls,'pswp__ui--fit');}
if(_options.addCaptionHTMLFn(item,_fakeCaptionContainer,true)){var captionSize=_fakeCaptionContainer.clientHeight;gap.bottom=parseInt(captionSize,10)||44;}else{gap.bottom=bars.top;}}else{gap.bottom=bars.bottom==='auto'?0:bars.bottom;}
gap.top=bars.top;}else{gap.top=gap.bottom=0;}},_setupIdle=function(){if(_options.timeToIdle){_listen('mouseUsed',function(){framework.bind(document,'mousemove',_onIdleMouseMove);framework.bind(document,'mouseout',_onMouseLeaveWindow);_idleInterval=setInterval(function(){_idleIncrement++;if(_idleIncrement===2){ui.setIdle(true);}},_options.timeToIdle/2);});}},_setupHidingControlsDuringGestures=function(){_listen('onVerticalDrag',function(now){if(_controlsVisible&&now<0.95){ui.hideControls();}else if(!_controlsVisible&&now>=0.95){ui.showControls();}});var pinchControlsHidden;_listen('onPinchClose',function(now){if(_controlsVisible&&now<0.9){ui.hideControls();pinchControlsHidden=true;}else if(pinchControlsHidden&&!_controlsVisible&&now>0.9){ui.showControls();}});_listen('zoomGestureEnded',function(){pinchControlsHidden=false;if(pinchControlsHidden&&!_controlsVisible){ui.showControls();}});};var _uiElements=[{name:'caption',option:'captionEl',onInit:function(el){_captionContainer=el;}},{name:'share-modal',option:'shareEl',onInit:function(el){_shareModal=el;},onTap:function(){_toggleShareModal();}},{name:'button--share',option:'shareEl',onInit:function(el){_shareButton=el;},onTap:function(){_toggleShareModal();}},{name:'button--zoom',option:'zoomEl',onTap:pswp.toggleDesktopZoom},{name:'counter',option:'counterEl',onInit:function(el){_indexIndicator=el;}},{name:'button--close',option:'closeEl',onTap:pswp.close},{name:'button--arrow--left',option:'arrowEl',onTap:pswp.prev},{name:'button--arrow--right',option:'arrowEl',onTap:pswp.next},{name:'button--fs',option:'fullscreenEl',onTap:function(){if(_fullscrenAPI.isFullscreen()){_fullscrenAPI.exit();}else{_fullscrenAPI.enter();}}},{name:'preloader',option:'preloaderEl',onInit:function(el){_loadingIndicator=el;}}];var _setupUIElements=function(){var item,classAttr,uiElement;var loopThroughChildElements=function(sChildren){if(!sChildren){return;}
var l=sChildren.length;for(var i=0;i<l;i++){item=sChildren[i];classAttr=item.className;for(var a=0;a<_uiElements.length;a++){uiElement=_uiElements[a];if(classAttr.indexOf('pswp__'+uiElement.name)>-1){if(_options[uiElement.option]){framework.removeClass(item,'pswp__element--disabled');if(uiElement.onInit){uiElement.onInit(item);}}else{framework.addClass(item,'pswp__element--disabled');}}}}};loopThroughChildElements(_controls.children);var topBar=framework.getChildByClass(_controls,'pswp__top-bar');if(topBar){loopThroughChildElements(topBar.children);}};ui.init=function(){framework.extend(pswp.options,_defaultUIOptions,true);_options=pswp.options;_controls=framework.getChildByClass(pswp.scrollWrap,'pswp__ui');_listen=pswp.listen;_setupHidingControlsDuringGestures();_listen('beforeChange',ui.update);_listen('doubleTap',function(point){var initialZoomLevel=pswp.currItem.initialZoomLevel;if(pswp.getZoomLevel()!==initialZoomLevel){pswp.zoomTo(initialZoomLevel,point,333);}else{pswp.zoomTo(_options.getDoubleTapZoom(false,pswp.currItem),point,333);}});_listen('preventDragEvent',function(e,isDown,preventObj){var t=e.target||e.srcElement;if(t&&t.getAttribute('class')&&e.type.indexOf('mouse')>-1&&(t.getAttribute('class').indexOf('__caption')>0||(/(SMALL|STRONG|EM)/i).test(t.tagName))){preventObj.prevent=false;}});_listen('bindEvents',function(){framework.bind(_controls,'pswpTap click',_onControlsTap);framework.bind(pswp.scrollWrap,'pswpTap',ui.onGlobalTap);if(!pswp.likelyTouchDevice){framework.bind(pswp.scrollWrap,'mouseover',ui.onMouseOver);}});_listen('unbindEvents',function(){if(!_shareModalHidden){_toggleShareModal();}
if(_idleInterval){clearInterval(_idleInterval);}
framework.unbind(document,'mouseout',_onMouseLeaveWindow);framework.unbind(document,'mousemove',_onIdleMouseMove);framework.unbind(_controls,'pswpTap click',_onControlsTap);framework.unbind(pswp.scrollWrap,'pswpTap',ui.onGlobalTap);framework.unbind(pswp.scrollWrap,'mouseover',ui.onMouseOver);if(_fullscrenAPI){framework.unbind(document,_fullscrenAPI.eventK,ui.updateFullscreen);if(_fullscrenAPI.isFullscreen()){_options.hideAnimationDuration=0;_fullscrenAPI.exit();}
_fullscrenAPI=null;}});_listen('destroy',function(){if(_options.captionEl){if(_fakeCaptionContainer){_controls.removeChild(_fakeCaptionContainer);}
framework.removeClass(_captionContainer,'pswp__caption--empty');}
if(_shareModal){_shareModal.children[0].onclick=null;}
framework.removeClass(_controls,'pswp__ui--over-close');framework.addClass(_controls,'pswp__ui--hidden');ui.setIdle(false);});if(!_options.showAnimationDuration){framework.removeClass(_controls,'pswp__ui--hidden');}
_listen('initialZoomIn',function(){if(_options.showAnimationDuration){framework.removeClass(_controls,'pswp__ui--hidden');}});_listen('initialZoomOut',function(){framework.addClass(_controls,'pswp__ui--hidden');});_listen('parseVerticalMargin',_applyNavBarGaps);_setupUIElements();if(_options.shareEl&&_shareButton&&_shareModal){_shareModalHidden=true;}
_countNumItems();_setupIdle();_setupFullscreenAPI();_setupLoadingIndicator();};ui.setIdle=function(isIdle){_isIdle=isIdle;_togglePswpClass(_controls,'ui--idle',isIdle);};ui.update=function(){if(_controlsVisible&&pswp.currItem){ui.updateIndexIndicator();if(_options.captionEl){_options.addCaptionHTMLFn(pswp.currItem,_captionContainer);_togglePswpClass(_captionContainer,'caption--empty',!pswp.currItem.title);}
_overlayUIUpdated=true;}else{_overlayUIUpdated=false;}
if(!_shareModalHidden){_toggleShareModal();}
_countNumItems();};ui.updateFullscreen=function(e){if(e){setTimeout(function(){pswp.setScrollOffset(0,framework.getScrollY());},50);}
framework[(_fullscrenAPI.isFullscreen()?'add':'remove')+'Class'](pswp.template,'pswp--fs');};ui.updateIndexIndicator=function(){if(_options.counterEl){_indexIndicator.innerHTML=(pswp.getCurrentIndex()+1)+
_options.indexIndicatorSep+
_options.getNumItemsFn();}};ui.onGlobalTap=function(e){e=e||window.event;var target=e.target||e.srcElement;if(_blockControlsTap){return;}
if(e.detail&&e.detail.pointerType==='mouse'){if(_hasCloseClass(target)){pswp.close();return;}
if(framework.hasClass(target,'pswp__img')){if(pswp.getZoomLevel()===1&&pswp.getZoomLevel()<=pswp.currItem.fitRatio){if(_options.clickToCloseNonZoomable){pswp.close();}}else{pswp.toggleDesktopZoom(e.detail.releasePoint);}}}else{if(_options.tapToToggleControls){if(_controlsVisible){ui.hideControls();}else{ui.showControls();}}
if(_options.tapToClose&&(framework.hasClass(target,'pswp__img')||_hasCloseClass(target))){pswp.close();return;}}};ui.onMouseOver=function(e){e=e||window.event;var target=e.target||e.srcElement;_togglePswpClass(_controls,'ui--over-close',_hasCloseClass(target));};ui.hideControls=function(){framework.addClass(_controls,'pswp__ui--hidden');_controlsVisible=false;};ui.showControls=function(){_controlsVisible=true;if(!_overlayUIUpdated){ui.update();}
framework.removeClass(_controls,'pswp__ui--hidden');};ui.supportsFullscreen=function(){var d=document;return!!(d.exitFullscreen||d.mozCancelFullScreen||d.webkitExitFullscreen||d.msExitFullscreen);};ui.getFullscreenAPI=function(){var dE=document.documentElement,api,tF='fullscreenchange';if(dE.requestFullscreen){api={enterK:'requestFullscreen',exitK:'exitFullscreen',elementK:'fullscreenElement',eventK:tF};}else if(dE.mozRequestFullScreen){api={enterK:'mozRequestFullScreen',exitK:'mozCancelFullScreen',elementK:'mozFullScreenElement',eventK:'moz'+tF};}else if(dE.webkitRequestFullscreen){api={enterK:'webkitRequestFullscreen',exitK:'webkitExitFullscreen',elementK:'webkitFullscreenElement',eventK:'webkit'+tF};}else if(dE.msRequestFullscreen){api={enterK:'msRequestFullscreen',exitK:'msExitFullscreen',elementK:'msFullscreenElement',eventK:'MSFullscreenChange'};}
if(api){api.enter=function(){_initalCloseOnScrollValue=_options.closeOnScroll;_options.closeOnScroll=false;if(this.enterK==='webkitRequestFullscreen'){pswp.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT);}else{return pswp.template[this.enterK]();}};api.exit=function(){_options.closeOnScroll=_initalCloseOnScrollValue;return document[this.exitK]();};api.isFullscreen=function(){return document[this.elementK];};}
return api;};};return PhotoSwipeUI_Default;});
/*!
 * Isotope PACKAGED v3.0.6
 *
 * Licensed GPLv3 for open source use
 * or Isotope Commercial License for commercial use
 *
 * https://isotope.metafizzy.co
 * Copyright 2010-2018 Metafizzy
 */
(function(window,factory){if(typeof define=='function'&&define.amd){define('jquery-bridget/jquery-bridget',['jquery'],function(jQuery){return factory(window,jQuery);});}else if(typeof module=='object'&&module.exports){module.exports=factory(window,require('jquery'));}else{window.jQueryBridget=factory(window,window.jQuery);}}(window,function factory(window,jQuery){'use strict';var arraySlice=Array.prototype.slice;var console=window.console;var logError=typeof console=='undefined'?function(){}:function(message){console.error(message);};function jQueryBridget(namespace,PluginClass,$){$=$||jQuery||window.jQuery;if(!$){return;}
if(!PluginClass.prototype.option){PluginClass.prototype.option=function(opts){if(!$.isPlainObject(opts)){return;}
this.options=$.extend(true,this.options,opts);};}
$.fn[namespace]=function(arg0){if(typeof arg0=='string'){var args=arraySlice.call(arguments,1);return methodCall(this,arg0,args);}
plainCall(this,arg0);return this;};function methodCall($elems,methodName,args){var returnValue;var pluginMethodStr='$().'+namespace+'("'+methodName+'")';$elems.each(function(i,elem){var instance=$.data(elem,namespace);if(!instance){logError(namespace+' not initialized. Cannot call methods, i.e. '+
pluginMethodStr);return;}
var method=instance[methodName];if(!method||methodName.charAt(0)=='_'){logError(pluginMethodStr+' is not a valid method');return;}
var value=method.apply(instance,args);returnValue=returnValue===undefined?value:returnValue;});return returnValue!==undefined?returnValue:$elems;}
function plainCall($elems,options){$elems.each(function(i,elem){var instance=$.data(elem,namespace);if(instance){instance.option(options);instance._init();}else{instance=new PluginClass(elem,options);$.data(elem,namespace,instance);}});}
updateJQuery($);}
function updateJQuery($){if(!$||($&&$.bridget)){return;}
$.bridget=jQueryBridget;}
updateJQuery(jQuery||window.jQuery);return jQueryBridget;}));(function(global,factory){if(typeof define=='function'&&define.amd){define('ev-emitter/ev-emitter',factory);}else if(typeof module=='object'&&module.exports){module.exports=factory();}else{global.EvEmitter=factory();}}(typeof window!='undefined'?window:this,function(){function EvEmitter(){}
var proto=EvEmitter.prototype;proto.on=function(eventName,listener){if(!eventName||!listener){return;}
var events=this._events=this._events||{};var listeners=events[eventName]=events[eventName]||[];if(listeners.indexOf(listener)==-1){listeners.push(listener);}
return this;};proto.once=function(eventName,listener){if(!eventName||!listener){return;}
this.on(eventName,listener);var onceEvents=this._onceEvents=this._onceEvents||{};var onceListeners=onceEvents[eventName]=onceEvents[eventName]||{};onceListeners[listener]=true;return this;};proto.off=function(eventName,listener){var listeners=this._events&&this._events[eventName];if(!listeners||!listeners.length){return;}
var index=listeners.indexOf(listener);if(index!=-1){listeners.splice(index,1);}
return this;};proto.emitEvent=function(eventName,args){var listeners=this._events&&this._events[eventName];if(!listeners||!listeners.length){return;}
listeners=listeners.slice(0);args=args||[];var onceListeners=this._onceEvents&&this._onceEvents[eventName];for(var i=0;i<listeners.length;i++){var listener=listeners[i]
var isOnce=onceListeners&&onceListeners[listener];if(isOnce){this.off(eventName,listener);delete onceListeners[listener];}
listener.apply(this,args);}
return this;};proto.allOff=function(){delete this._events;delete this._onceEvents;};return EvEmitter;}));
/*!
 * getSize v2.0.3
 * measure size of elements
 * MIT license
 */
(function(window,factory){if(typeof define=='function'&&define.amd){define('get-size/get-size',factory);}else if(typeof module=='object'&&module.exports){module.exports=factory();}else{window.getSize=factory();}})(window,function factory(){'use strict';function getStyleSize(value){var num=parseFloat(value);var isValid=value.indexOf('%')==-1&&!isNaN(num);return isValid&&num;}
function noop(){}
var logError=typeof console=='undefined'?noop:function(message){console.error(message);};var measurements=['paddingLeft','paddingRight','paddingTop','paddingBottom','marginLeft','marginRight','marginTop','marginBottom','borderLeftWidth','borderRightWidth','borderTopWidth','borderBottomWidth'];var measurementsLength=measurements.length;function getZeroSize(){var size={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0};for(var i=0;i<measurementsLength;i++){var measurement=measurements[i];size[measurement]=0;}
return size;}
function getStyle(elem){var style=getComputedStyle(elem);if(!style){logError('Style returned '+style+'. Are you running this code in a hidden iframe on Firefox? '+'See https://bit.ly/getsizebug1');}
return style;}
var isSetup=false;var isBoxSizeOuter;function setup(){if(isSetup){return;}
isSetup=true;var div=document.createElement('div');div.style.width='200px';div.style.padding='1px 2px 3px 4px';div.style.borderStyle='solid';div.style.borderWidth='1px 2px 3px 4px';div.style.boxSizing='border-box';var body=document.body||document.documentElement;body.appendChild(div);var style=getStyle(div);isBoxSizeOuter=Math.round(getStyleSize(style.width))==200;getSize.isBoxSizeOuter=isBoxSizeOuter;body.removeChild(div);}
function getSize(elem){setup();if(typeof elem=='string'){elem=document.querySelector(elem);}
if(!elem||typeof elem!='object'||!elem.nodeType){return;}
var style=getStyle(elem);if(style.display=='none'){return getZeroSize();}
var size={};size.width=elem.offsetWidth;size.height=elem.offsetHeight;var isBorderBox=size.isBorderBox=style.boxSizing=='border-box';for(var i=0;i<measurementsLength;i++){var measurement=measurements[i];var value=style[measurement];var num=parseFloat(value);size[measurement]=!isNaN(num)?num:0;}
var paddingWidth=size.paddingLeft+size.paddingRight;var paddingHeight=size.paddingTop+size.paddingBottom;var marginWidth=size.marginLeft+size.marginRight;var marginHeight=size.marginTop+size.marginBottom;var borderWidth=size.borderLeftWidth+size.borderRightWidth;var borderHeight=size.borderTopWidth+size.borderBottomWidth;var isBorderBoxSizeOuter=isBorderBox&&isBoxSizeOuter;var styleWidth=getStyleSize(style.width);if(styleWidth!==false){size.width=styleWidth+
(isBorderBoxSizeOuter?0:paddingWidth+borderWidth);}
var styleHeight=getStyleSize(style.height);if(styleHeight!==false){size.height=styleHeight+
(isBorderBoxSizeOuter?0:paddingHeight+borderHeight);}
size.innerWidth=size.width-(paddingWidth+borderWidth);size.innerHeight=size.height-(paddingHeight+borderHeight);size.outerWidth=size.width+marginWidth;size.outerHeight=size.height+marginHeight;return size;}
return getSize;});(function(window,factory){'use strict';if(typeof define=='function'&&define.amd){define('desandro-matches-selector/matches-selector',factory);}else if(typeof module=='object'&&module.exports){module.exports=factory();}else{window.matchesSelector=factory();}}(window,function factory(){'use strict';var matchesMethod=(function(){var ElemProto=window.Element.prototype;if(ElemProto.matches){return'matches';}
if(ElemProto.matchesSelector){return'matchesSelector';}
var prefixes=['webkit','moz','ms','o'];for(var i=0;i<prefixes.length;i++){var prefix=prefixes[i];var method=prefix+'MatchesSelector';if(ElemProto[method]){return method;}}})();return function matchesSelector(elem,selector){return elem[matchesMethod](selector);};}));(function(window,factory){if(typeof define=='function'&&define.amd){define('fizzy-ui-utils/utils',['desandro-matches-selector/matches-selector'],function(matchesSelector){return factory(window,matchesSelector);});}else if(typeof module=='object'&&module.exports){module.exports=factory(window,require('desandro-matches-selector'));}else{window.fizzyUIUtils=factory(window,window.matchesSelector);}}(window,function factory(window,matchesSelector){var utils={};utils.extend=function(a,b){for(var prop in b){a[prop]=b[prop];}
return a;};utils.modulo=function(num,div){return((num%div)+div)%div;};var arraySlice=Array.prototype.slice;utils.makeArray=function(obj){if(Array.isArray(obj)){return obj;}
if(obj===null||obj===undefined){return[];}
var isArrayLike=typeof obj=='object'&&typeof obj.length=='number';if(isArrayLike){return arraySlice.call(obj);}
return[obj];};utils.removeFrom=function(ary,obj){var index=ary.indexOf(obj);if(index!=-1){ary.splice(index,1);}};utils.getParent=function(elem,selector){while(elem.parentNode&&elem!=document.body){elem=elem.parentNode;if(matchesSelector(elem,selector)){return elem;}}};utils.getQueryElement=function(elem){if(typeof elem=='string'){return document.querySelector(elem);}
return elem;};utils.handleEvent=function(event){var method='on'+event.type;if(this[method]){this[method](event);}};utils.filterFindElements=function(elems,selector){elems=utils.makeArray(elems);var ffElems=[];elems.forEach(function(elem){if(!(elem instanceof HTMLElement)){return;}
if(!selector){ffElems.push(elem);return;}
if(matchesSelector(elem,selector)){ffElems.push(elem);}
var childElems=elem.querySelectorAll(selector);for(var i=0;i<childElems.length;i++){ffElems.push(childElems[i]);}});return ffElems;};utils.debounceMethod=function(_class,methodName,threshold){threshold=threshold||100;var method=_class.prototype[methodName];var timeoutName=methodName+'Timeout';_class.prototype[methodName]=function(){var timeout=this[timeoutName];clearTimeout(timeout);var args=arguments;var _this=this;this[timeoutName]=setTimeout(function(){method.apply(_this,args);delete _this[timeoutName];},threshold);};};utils.docReady=function(callback){var readyState=document.readyState;if(readyState=='complete'||readyState=='interactive'){setTimeout(callback);}else{document.addEventListener('DOMContentLoaded',callback);}};utils.toDashed=function(str){return str.replace(/(.)([A-Z])/g,function(match,$1,$2){return $1+'-'+$2;}).toLowerCase();};var console=window.console;utils.htmlInit=function(WidgetClass,namespace){utils.docReady(function(){var dashedNamespace=utils.toDashed(namespace);var dataAttr='data-'+dashedNamespace;var dataAttrElems=document.querySelectorAll('['+dataAttr+']');var jsDashElems=document.querySelectorAll('.js-'+dashedNamespace);var elems=utils.makeArray(dataAttrElems).concat(utils.makeArray(jsDashElems));var dataOptionsAttr=dataAttr+'-options';var jQuery=window.jQuery;elems.forEach(function(elem){var attr=elem.getAttribute(dataAttr)||elem.getAttribute(dataOptionsAttr);var options;try{options=attr&&JSON.parse(attr);}catch(error){if(console){console.error('Error parsing '+dataAttr+' on '+elem.className+': '+error);}
return;}
var instance=new WidgetClass(elem,options);if(jQuery){jQuery.data(elem,namespace,instance);}});});};return utils;}));(function(window,factory){if(typeof define=='function'&&define.amd){define('outlayer/item',['ev-emitter/ev-emitter','get-size/get-size'],factory);}else if(typeof module=='object'&&module.exports){module.exports=factory(require('ev-emitter'),require('get-size'));}else{window.Outlayer={};window.Outlayer.Item=factory(window.EvEmitter,window.getSize);}}(window,function factory(EvEmitter,getSize){'use strict';function isEmptyObj(obj){for(var prop in obj){return false;}
prop=null;return true;}
var docElemStyle=document.documentElement.style;var transitionProperty=typeof docElemStyle.transition=='string'?'transition':'WebkitTransition';var transformProperty=typeof docElemStyle.transform=='string'?'transform':'WebkitTransform';var transitionEndEvent={WebkitTransition:'webkitTransitionEnd',transition:'transitionend'}[transitionProperty];var vendorProperties={transform:transformProperty,transition:transitionProperty,transitionDuration:transitionProperty+'Duration',transitionProperty:transitionProperty+'Property',transitionDelay:transitionProperty+'Delay'};function Item(element,layout){if(!element){return;}
this.element=element;this.layout=layout;this.position={x:0,y:0};this._create();}
var proto=Item.prototype=Object.create(EvEmitter.prototype);proto.constructor=Item;proto._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}};this.css({position:'absolute'});};proto.handleEvent=function(event){var method='on'+event.type;if(this[method]){this[method](event);}};proto.getSize=function(){this.size=getSize(this.element);};proto.css=function(style){var elemStyle=this.element.style;for(var prop in style){var supportedProp=vendorProperties[prop]||prop;elemStyle[supportedProp]=style[prop];}};proto.getPosition=function(){var style=getComputedStyle(this.element);var isOriginLeft=this.layout._getOption('originLeft');var isOriginTop=this.layout._getOption('originTop');var xValue=style[isOriginLeft?'left':'right'];var yValue=style[isOriginTop?'top':'bottom'];var x=parseFloat(xValue);var y=parseFloat(yValue);var layoutSize=this.layout.size;if(xValue.indexOf('%')!=-1){x=(x/100)*layoutSize.width;}
if(yValue.indexOf('%')!=-1){y=(y/100)*layoutSize.height;}
x=isNaN(x)?0:x;y=isNaN(y)?0:y;x-=isOriginLeft?layoutSize.paddingLeft:layoutSize.paddingRight;y-=isOriginTop?layoutSize.paddingTop:layoutSize.paddingBottom;this.position.x=x;this.position.y=y;};proto.layoutPosition=function(){var layoutSize=this.layout.size;var style={};var isOriginLeft=this.layout._getOption('originLeft');var isOriginTop=this.layout._getOption('originTop');var xPadding=isOriginLeft?'paddingLeft':'paddingRight';var xProperty=isOriginLeft?'left':'right';var xResetProperty=isOriginLeft?'right':'left';var x=this.position.x+layoutSize[xPadding];style[xProperty]=this.getXValue(x);style[xResetProperty]='';var yPadding=isOriginTop?'paddingTop':'paddingBottom';var yProperty=isOriginTop?'top':'bottom';var yResetProperty=isOriginTop?'bottom':'top';var y=this.position.y+layoutSize[yPadding];style[yProperty]=this.getYValue(y);style[yResetProperty]='';this.css(style);this.emitEvent('layout',[this]);};proto.getXValue=function(x){var isHorizontal=this.layout._getOption('horizontal');return this.layout.options.percentPosition&&!isHorizontal?((x/this.layout.size.width)*100)+'%':x+'px';};proto.getYValue=function(y){var isHorizontal=this.layout._getOption('horizontal');return this.layout.options.percentPosition&&isHorizontal?((y/this.layout.size.height)*100)+'%':y+'px';};proto._transitionTo=function(x,y){this.getPosition();var curX=this.position.x;var curY=this.position.y;var didNotMove=x==this.position.x&&y==this.position.y;this.setPosition(x,y);if(didNotMove&&!this.isTransitioning){this.layoutPosition();return;}
var transX=x-curX;var transY=y-curY;var transitionStyle={};transitionStyle.transform=this.getTranslate(transX,transY);this.transition({to:transitionStyle,onTransitionEnd:{transform:this.layoutPosition},isCleaning:true});};proto.getTranslate=function(x,y){var isOriginLeft=this.layout._getOption('originLeft');var isOriginTop=this.layout._getOption('originTop');x=isOriginLeft?x:-x;y=isOriginTop?y:-y;return'translate3d('+x+'px, '+y+'px, 0)';};proto.goTo=function(x,y){this.setPosition(x,y);this.layoutPosition();};proto.moveTo=proto._transitionTo;proto.setPosition=function(x,y){this.position.x=parseFloat(x);this.position.y=parseFloat(y);};proto._nonTransition=function(args){this.css(args.to);if(args.isCleaning){this._removeStyles(args.to);}
for(var prop in args.onTransitionEnd){args.onTransitionEnd[prop].call(this);}};proto.transition=function(args){if(!parseFloat(this.layout.options.transitionDuration)){this._nonTransition(args);return;}
var _transition=this._transn;for(var prop in args.onTransitionEnd){_transition.onEnd[prop]=args.onTransitionEnd[prop];}
for(prop in args.to){_transition.ingProperties[prop]=true;if(args.isCleaning){_transition.clean[prop]=true;}}
if(args.from){this.css(args.from);var h=this.element.offsetHeight;h=null;}
this.enableTransition(args.to);this.css(args.to);this.isTransitioning=true;};function toDashedAll(str){return str.replace(/([A-Z])/g,function($1){return'-'+$1.toLowerCase();});}
var transitionProps='opacity,'+toDashedAll(transformProperty);proto.enableTransition=function(){if(this.isTransitioning){return;}
var duration=this.layout.options.transitionDuration;duration=typeof duration=='number'?duration+'ms':duration;this.css({transitionProperty:transitionProps,transitionDuration:duration,transitionDelay:this.staggerDelay||0});this.element.addEventListener(transitionEndEvent,this,false);};proto.onwebkitTransitionEnd=function(event){this.ontransitionend(event);};proto.onotransitionend=function(event){this.ontransitionend(event);};var dashedVendorProperties={'-webkit-transform':'transform'};proto.ontransitionend=function(event){if(event.target!==this.element){return;}
var _transition=this._transn;var propertyName=dashedVendorProperties[event.propertyName]||event.propertyName;delete _transition.ingProperties[propertyName];if(isEmptyObj(_transition.ingProperties)){this.disableTransition();}
if(propertyName in _transition.clean){this.element.style[event.propertyName]='';delete _transition.clean[propertyName];}
if(propertyName in _transition.onEnd){var onTransitionEnd=_transition.onEnd[propertyName];onTransitionEnd.call(this);delete _transition.onEnd[propertyName];}
this.emitEvent('transitionEnd',[this]);};proto.disableTransition=function(){this.removeTransitionStyles();this.element.removeEventListener(transitionEndEvent,this,false);this.isTransitioning=false;};proto._removeStyles=function(style){var cleanStyle={};for(var prop in style){cleanStyle[prop]='';}
this.css(cleanStyle);};var cleanTransitionStyle={transitionProperty:'',transitionDuration:'',transitionDelay:''};proto.removeTransitionStyles=function(){this.css(cleanTransitionStyle);};proto.stagger=function(delay){delay=isNaN(delay)?0:delay;this.staggerDelay=delay+'ms';};proto.removeElem=function(){this.element.parentNode.removeChild(this.element);this.css({display:''});this.emitEvent('remove',[this]);};proto.remove=function(){if(!transitionProperty||!parseFloat(this.layout.options.transitionDuration)){this.removeElem();return;}
this.once('transitionEnd',function(){this.removeElem();});this.hide();};proto.reveal=function(){delete this.isHidden;this.css({display:''});var options=this.layout.options;var onTransitionEnd={};var transitionEndProperty=this.getHideRevealTransitionEndProperty('visibleStyle');onTransitionEnd[transitionEndProperty]=this.onRevealTransitionEnd;this.transition({from:options.hiddenStyle,to:options.visibleStyle,isCleaning:true,onTransitionEnd:onTransitionEnd});};proto.onRevealTransitionEnd=function(){if(!this.isHidden){this.emitEvent('reveal');}};proto.getHideRevealTransitionEndProperty=function(styleProperty){var optionStyle=this.layout.options[styleProperty];if(optionStyle.opacity){return'opacity';}
for(var prop in optionStyle){return prop;}};proto.hide=function(){this.isHidden=true;this.css({display:''});var options=this.layout.options;var onTransitionEnd={};var transitionEndProperty=this.getHideRevealTransitionEndProperty('hiddenStyle');onTransitionEnd[transitionEndProperty]=this.onHideTransitionEnd;this.transition({from:options.visibleStyle,to:options.hiddenStyle,isCleaning:true,onTransitionEnd:onTransitionEnd});};proto.onHideTransitionEnd=function(){if(this.isHidden){this.css({display:'none'});this.emitEvent('hide');}};proto.destroy=function(){this.css({position:'',left:'',right:'',top:'',bottom:'',transition:'',transform:''});};return Item;}));
/*!
 * Outlayer v2.1.1
 * the brains and guts of a layout library
 * MIT license
 */
(function(window,factory){'use strict';if(typeof define=='function'&&define.amd){define('outlayer/outlayer',['ev-emitter/ev-emitter','get-size/get-size','fizzy-ui-utils/utils','./item'],function(EvEmitter,getSize,utils,Item){return factory(window,EvEmitter,getSize,utils,Item);});}else if(typeof module=='object'&&module.exports){module.exports=factory(window,require('ev-emitter'),require('get-size'),require('fizzy-ui-utils'),require('./item'));}else{window.Outlayer=factory(window,window.EvEmitter,window.getSize,window.fizzyUIUtils,window.Outlayer.Item);}}(window,function factory(window,EvEmitter,getSize,utils,Item){'use strict';var console=window.console;var jQuery=window.jQuery;var noop=function(){};var GUID=0;var instances={};function Outlayer(element,options){var queryElement=utils.getQueryElement(element);if(!queryElement){if(console){console.error('Bad element for '+this.constructor.namespace+': '+(queryElement||element));}
return;}
this.element=queryElement;if(jQuery){this.$element=jQuery(this.element);}
this.options=utils.extend({},this.constructor.defaults);this.option(options);var id=++GUID;this.element.outlayerGUID=id;instances[id]=this;this._create();var isInitLayout=this._getOption('initLayout');if(isInitLayout){this.layout();}}
Outlayer.namespace='outlayer';Outlayer.Item=Item;Outlayer.defaults={containerStyle:{position:'relative'},initLayout:true,originLeft:true,originTop:true,resize:true,resizeContainer:true,transitionDuration:'0.4s',hiddenStyle:{opacity:0,transform:'scale(0.001)'},visibleStyle:{opacity:1,transform:'scale(1)'}};var proto=Outlayer.prototype;utils.extend(proto,EvEmitter.prototype);proto.option=function(opts){utils.extend(this.options,opts);};proto._getOption=function(option){var oldOption=this.constructor.compatOptions[option];return oldOption&&this.options[oldOption]!==undefined?this.options[oldOption]:this.options[option];};Outlayer.compatOptions={initLayout:'isInitLayout',horizontal:'isHorizontal',layoutInstant:'isLayoutInstant',originLeft:'isOriginLeft',originTop:'isOriginTop',resize:'isResizeBound',resizeContainer:'isResizingContainer'};proto._create=function(){this.reloadItems();this.stamps=[];this.stamp(this.options.stamp);utils.extend(this.element.style,this.options.containerStyle);var canBindResize=this._getOption('resize');if(canBindResize){this.bindResize();}};proto.reloadItems=function(){this.items=this._itemize(this.element.children);};proto._itemize=function(elems){var itemElems=this._filterFindItemElements(elems);var Item=this.constructor.Item;var items=[];for(var i=0;i<itemElems.length;i++){var elem=itemElems[i];var item=new Item(elem,this);items.push(item);}
return items;};proto._filterFindItemElements=function(elems){return utils.filterFindElements(elems,this.options.itemSelector);};proto.getItemElements=function(){return this.items.map(function(item){return item.element;});};proto.layout=function(){this._resetLayout();this._manageStamps();var layoutInstant=this._getOption('layoutInstant');var isInstant=layoutInstant!==undefined?layoutInstant:!this._isLayoutInited;this.layoutItems(this.items,isInstant);this._isLayoutInited=true;};proto._init=proto.layout;proto._resetLayout=function(){this.getSize();};proto.getSize=function(){this.size=getSize(this.element);};proto._getMeasurement=function(measurement,size){var option=this.options[measurement];var elem;if(!option){this[measurement]=0;}else{if(typeof option=='string'){elem=this.element.querySelector(option);}else if(option instanceof HTMLElement){elem=option;}
this[measurement]=elem?getSize(elem)[size]:option;}};proto.layoutItems=function(items,isInstant){items=this._getItemsForLayout(items);this._layoutItems(items,isInstant);this._postLayout();};proto._getItemsForLayout=function(items){return items.filter(function(item){return!item.isIgnored;});};proto._layoutItems=function(items,isInstant){this._emitCompleteOnItems('layout',items);if(!items||!items.length){return;}
var queue=[];items.forEach(function(item){var position=this._getItemLayoutPosition(item);position.item=item;position.isInstant=isInstant||item.isLayoutInstant;queue.push(position);},this);this._processLayoutQueue(queue);};proto._getItemLayoutPosition=function(){return{x:0,y:0};};proto._processLayoutQueue=function(queue){this.updateStagger();queue.forEach(function(obj,i){this._positionItem(obj.item,obj.x,obj.y,obj.isInstant,i);},this);};proto.updateStagger=function(){var stagger=this.options.stagger;if(stagger===null||stagger===undefined){this.stagger=0;return;}
this.stagger=getMilliseconds(stagger);return this.stagger;};proto._positionItem=function(item,x,y,isInstant,i){if(isInstant){item.goTo(x,y);}else{item.stagger(i*this.stagger);item.moveTo(x,y);}};proto._postLayout=function(){this.resizeContainer();};proto.resizeContainer=function(){var isResizingContainer=this._getOption('resizeContainer');if(!isResizingContainer){return;}
var size=this._getContainerSize();if(size){this._setContainerMeasure(size.width,true);this._setContainerMeasure(size.height,false);}};proto._getContainerSize=noop;proto._setContainerMeasure=function(measure,isWidth){if(measure===undefined){return;}
var elemSize=this.size;if(elemSize.isBorderBox){measure+=isWidth?elemSize.paddingLeft+elemSize.paddingRight+
elemSize.borderLeftWidth+elemSize.borderRightWidth:elemSize.paddingBottom+elemSize.paddingTop+
elemSize.borderTopWidth+elemSize.borderBottomWidth;}
measure=Math.max(measure,0);this.element.style[isWidth?'width':'height']=measure+'px';};proto._emitCompleteOnItems=function(eventName,items){var _this=this;function onComplete(){_this.dispatchEvent(eventName+'Complete',null,[items]);}
var count=items.length;if(!items||!count){onComplete();return;}
var doneCount=0;function tick(){doneCount++;if(doneCount==count){onComplete();}}
items.forEach(function(item){item.once(eventName,tick);});};proto.dispatchEvent=function(type,event,args){var emitArgs=event?[event].concat(args):args;this.emitEvent(type,emitArgs);if(jQuery){this.$element=this.$element||jQuery(this.element);if(event){var $event=jQuery.Event(event);$event.type=type;this.$element.trigger($event,args);}else{this.$element.trigger(type,args);}}};proto.ignore=function(elem){var item=this.getItem(elem);if(item){item.isIgnored=true;}};proto.unignore=function(elem){var item=this.getItem(elem);if(item){delete item.isIgnored;}};proto.stamp=function(elems){elems=this._find(elems);if(!elems){return;}
this.stamps=this.stamps.concat(elems);elems.forEach(this.ignore,this);};proto.unstamp=function(elems){elems=this._find(elems);if(!elems){return;}
elems.forEach(function(elem){utils.removeFrom(this.stamps,elem);this.unignore(elem);},this);};proto._find=function(elems){if(!elems){return;}
if(typeof elems=='string'){elems=this.element.querySelectorAll(elems);}
elems=utils.makeArray(elems);return elems;};proto._manageStamps=function(){if(!this.stamps||!this.stamps.length){return;}
this._getBoundingRect();this.stamps.forEach(this._manageStamp,this);};proto._getBoundingRect=function(){var boundingRect=this.element.getBoundingClientRect();var size=this.size;this._boundingRect={left:boundingRect.left+size.paddingLeft+size.borderLeftWidth,top:boundingRect.top+size.paddingTop+size.borderTopWidth,right:boundingRect.right-(size.paddingRight+size.borderRightWidth),bottom:boundingRect.bottom-(size.paddingBottom+size.borderBottomWidth)};};proto._manageStamp=noop;proto._getElementOffset=function(elem){var boundingRect=elem.getBoundingClientRect();var thisRect=this._boundingRect;var size=getSize(elem);var offset={left:boundingRect.left-thisRect.left-size.marginLeft,top:boundingRect.top-thisRect.top-size.marginTop,right:thisRect.right-boundingRect.right-size.marginRight,bottom:thisRect.bottom-boundingRect.bottom-size.marginBottom};return offset;};proto.handleEvent=utils.handleEvent;proto.bindResize=function(){window.addEventListener('resize',this);this.isResizeBound=true;};proto.unbindResize=function(){window.removeEventListener('resize',this);this.isResizeBound=false;};proto.onresize=function(){this.resize();};utils.debounceMethod(Outlayer,'onresize',100);proto.resize=function(){if(!this.isResizeBound||!this.needsResizeLayout()){return;}
this.layout();};proto.needsResizeLayout=function(){var size=getSize(this.element);var hasSizes=this.size&&size;return hasSizes&&size.innerWidth!==this.size.innerWidth;};proto.addItems=function(elems){var items=this._itemize(elems);if(items.length){this.items=this.items.concat(items);}
return items;};proto.appended=function(elems){var items=this.addItems(elems);if(!items.length){return;}
this.layoutItems(items,true);this.reveal(items);};proto.prepended=function(elems){var items=this._itemize(elems);if(!items.length){return;}
var previousItems=this.items.slice(0);this.items=items.concat(previousItems);this._resetLayout();this._manageStamps();this.layoutItems(items,true);this.reveal(items);this.layoutItems(previousItems);};proto.reveal=function(items){this._emitCompleteOnItems('reveal',items);if(!items||!items.length){return;}
var stagger=this.updateStagger();items.forEach(function(item,i){item.stagger(i*stagger);item.reveal();});};proto.hide=function(items){this._emitCompleteOnItems('hide',items);if(!items||!items.length){return;}
var stagger=this.updateStagger();items.forEach(function(item,i){item.stagger(i*stagger);item.hide();});};proto.revealItemElements=function(elems){var items=this.getItems(elems);this.reveal(items);};proto.hideItemElements=function(elems){var items=this.getItems(elems);this.hide(items);};proto.getItem=function(elem){for(var i=0;i<this.items.length;i++){var item=this.items[i];if(item.element==elem){return item;}}};proto.getItems=function(elems){elems=utils.makeArray(elems);var items=[];elems.forEach(function(elem){var item=this.getItem(elem);if(item){items.push(item);}},this);return items;};proto.remove=function(elems){var removeItems=this.getItems(elems);this._emitCompleteOnItems('remove',removeItems);if(!removeItems||!removeItems.length){return;}
removeItems.forEach(function(item){item.remove();utils.removeFrom(this.items,item);},this);};proto.destroy=function(){var style=this.element.style;style.height='';style.position='';style.width='';this.items.forEach(function(item){item.destroy();});this.unbindResize();var id=this.element.outlayerGUID;delete instances[id];delete this.element.outlayerGUID;if(jQuery){jQuery.removeData(this.element,this.constructor.namespace);}};Outlayer.data=function(elem){elem=utils.getQueryElement(elem);var id=elem&&elem.outlayerGUID;return id&&instances[id];};Outlayer.create=function(namespace,options){var Layout=subclass(Outlayer);Layout.defaults=utils.extend({},Outlayer.defaults);utils.extend(Layout.defaults,options);Layout.compatOptions=utils.extend({},Outlayer.compatOptions);Layout.namespace=namespace;Layout.data=Outlayer.data;Layout.Item=subclass(Item);utils.htmlInit(Layout,namespace);if(jQuery&&jQuery.bridget){jQuery.bridget(namespace,Layout);}
return Layout;};function subclass(Parent){function SubClass(){Parent.apply(this,arguments);}
SubClass.prototype=Object.create(Parent.prototype);SubClass.prototype.constructor=SubClass;return SubClass;}
var msUnits={ms:1,s:1000};function getMilliseconds(time){if(typeof time=='number'){return time;}
var matches=time.match(/(^\d*\.?\d*)(\w*)/);var num=matches&&matches[1];var unit=matches&&matches[2];if(!num.length){return 0;}
num=parseFloat(num);var mult=msUnits[unit]||1;return num*mult;}
Outlayer.Item=Item;return Outlayer;}));(function(window,factory){if(typeof define=='function'&&define.amd){define('isotope-layout/js/item',['outlayer/outlayer'],factory);}else if(typeof module=='object'&&module.exports){module.exports=factory(require('outlayer'));}else{window.Isotope=window.Isotope||{};window.Isotope.Item=factory(window.Outlayer);}}(window,function factory(Outlayer){'use strict';function Item(){Outlayer.Item.apply(this,arguments);}
var proto=Item.prototype=Object.create(Outlayer.Item.prototype);var _create=proto._create;proto._create=function(){this.id=this.layout.itemGUID++;_create.call(this);this.sortData={};};proto.updateSortData=function(){if(this.isIgnored){return;}
this.sortData.id=this.id;this.sortData['original-order']=this.id;this.sortData.random=Math.random();var getSortData=this.layout.options.getSortData;var sorters=this.layout._sorters;for(var key in getSortData){var sorter=sorters[key];this.sortData[key]=sorter(this.element,this);}};var _destroy=proto.destroy;proto.destroy=function(){_destroy.apply(this,arguments);this.css({display:''});};return Item;}));(function(window,factory){if(typeof define=='function'&&define.amd){define('isotope-layout/js/layout-mode',['get-size/get-size','outlayer/outlayer'],factory);}else if(typeof module=='object'&&module.exports){module.exports=factory(require('get-size'),require('outlayer'));}else{window.Isotope=window.Isotope||{};window.Isotope.LayoutMode=factory(window.getSize,window.Outlayer);}}(window,function factory(getSize,Outlayer){'use strict';function LayoutMode(isotope){this.isotope=isotope;if(isotope){this.options=isotope.options[this.namespace];this.element=isotope.element;this.items=isotope.filteredItems;this.size=isotope.size;}}
var proto=LayoutMode.prototype;var facadeMethods=['_resetLayout','_getItemLayoutPosition','_manageStamp','_getContainerSize','_getElementOffset','needsResizeLayout','_getOption'];facadeMethods.forEach(function(methodName){proto[methodName]=function(){return Outlayer.prototype[methodName].apply(this.isotope,arguments);};});proto.needsVerticalResizeLayout=function(){var size=getSize(this.isotope.element);var hasSizes=this.isotope.size&&size;return hasSizes&&size.innerHeight!=this.isotope.size.innerHeight;};proto._getMeasurement=function(){this.isotope._getMeasurement.apply(this,arguments);};proto.getColumnWidth=function(){this.getSegmentSize('column','Width');};proto.getRowHeight=function(){this.getSegmentSize('row','Height');};proto.getSegmentSize=function(segment,size){var segmentName=segment+size;var outerSize='outer'+size;this._getMeasurement(segmentName,outerSize);if(this[segmentName]){return;}
var firstItemSize=this.getFirstItemSize();this[segmentName]=firstItemSize&&firstItemSize[outerSize]||this.isotope.size['inner'+size];};proto.getFirstItemSize=function(){var firstItem=this.isotope.filteredItems[0];return firstItem&&firstItem.element&&getSize(firstItem.element);};proto.layout=function(){this.isotope.layout.apply(this.isotope,arguments);};proto.getSize=function(){this.isotope.getSize();this.size=this.isotope.size;};LayoutMode.modes={};LayoutMode.create=function(namespace,options){function Mode(){LayoutMode.apply(this,arguments);}
Mode.prototype=Object.create(proto);Mode.prototype.constructor=Mode;if(options){Mode.options=options;}
Mode.prototype.namespace=namespace;LayoutMode.modes[namespace]=Mode;return Mode;};return LayoutMode;}));
/*!
 * Masonry v4.2.1
 * Cascading grid layout library
 * https://masonry.desandro.com
 * MIT License
 * by David DeSandro
 */
(function(window,factory){if(typeof define=='function'&&define.amd){define('masonry-layout/masonry',['outlayer/outlayer','get-size/get-size'],factory);}else if(typeof module=='object'&&module.exports){module.exports=factory(require('outlayer'),require('get-size'));}else{window.Masonry=factory(window.Outlayer,window.getSize);}}(window,function factory(Outlayer,getSize){var Masonry=Outlayer.create('masonry');Masonry.compatOptions.fitWidth='isFitWidth';var proto=Masonry.prototype;proto._resetLayout=function(){this.getSize();this._getMeasurement('columnWidth','outerWidth');this._getMeasurement('gutter','outerWidth');this.measureColumns();this.colYs=[];for(var i=0;i<this.cols;i++){this.colYs.push(0);}
this.maxY=0;this.horizontalColIndex=0;};proto.measureColumns=function(){this.getContainerWidth();if(!this.columnWidth){var firstItem=this.items[0];var firstItemElem=firstItem&&firstItem.element;this.columnWidth=firstItemElem&&getSize(firstItemElem).outerWidth||this.containerWidth;}
var columnWidth=this.columnWidth+=this.gutter;var containerWidth=this.containerWidth+this.gutter;var cols=containerWidth/columnWidth;var excess=columnWidth-containerWidth%columnWidth;var mathMethod=excess&&excess<1?'round':'floor';cols=Math[mathMethod](cols);this.cols=Math.max(cols,1);};proto.getContainerWidth=function(){var isFitWidth=this._getOption('fitWidth');var container=isFitWidth?this.element.parentNode:this.element;var size=getSize(container);this.containerWidth=size&&size.innerWidth;};proto._getItemLayoutPosition=function(item){item.getSize();var remainder=item.size.outerWidth%this.columnWidth;var mathMethod=remainder&&remainder<1?'round':'ceil';var colSpan=Math[mathMethod](item.size.outerWidth/this.columnWidth);colSpan=Math.min(colSpan,this.cols);var colPosMethod=this.options.horizontalOrder?'_getHorizontalColPosition':'_getTopColPosition';var colPosition=this[colPosMethod](colSpan,item);var position={x:this.columnWidth*colPosition.col,y:colPosition.y};var setHeight=colPosition.y+item.size.outerHeight;var setMax=colSpan+colPosition.col;for(var i=colPosition.col;i<setMax;i++){this.colYs[i]=setHeight;}
return position;};proto._getTopColPosition=function(colSpan){var colGroup=this._getTopColGroup(colSpan);var minimumY=Math.min.apply(Math,colGroup);return{col:colGroup.indexOf(minimumY),y:minimumY,};};proto._getTopColGroup=function(colSpan){if(colSpan<2){return this.colYs;}
var colGroup=[];var groupCount=this.cols+1-colSpan;for(var i=0;i<groupCount;i++){colGroup[i]=this._getColGroupY(i,colSpan);}
return colGroup;};proto._getColGroupY=function(col,colSpan){if(colSpan<2){return this.colYs[col];}
var groupColYs=this.colYs.slice(col,col+colSpan);return Math.max.apply(Math,groupColYs);};proto._getHorizontalColPosition=function(colSpan,item){var col=this.horizontalColIndex%this.cols;var isOver=colSpan>1&&col+colSpan>this.cols;col=isOver?0:col;var hasSize=item.size.outerWidth&&item.size.outerHeight;this.horizontalColIndex=hasSize?col+colSpan:this.horizontalColIndex;return{col:col,y:this._getColGroupY(col,colSpan),};};proto._manageStamp=function(stamp){var stampSize=getSize(stamp);var offset=this._getElementOffset(stamp);var isOriginLeft=this._getOption('originLeft');var firstX=isOriginLeft?offset.left:offset.right;var lastX=firstX+stampSize.outerWidth;var firstCol=Math.floor(firstX/this.columnWidth);firstCol=Math.max(0,firstCol);var lastCol=Math.floor(lastX/this.columnWidth);lastCol-=lastX%this.columnWidth?0:1;lastCol=Math.min(this.cols-1,lastCol);var isOriginTop=this._getOption('originTop');var stampMaxY=(isOriginTop?offset.top:offset.bottom)+
stampSize.outerHeight;for(var i=firstCol;i<=lastCol;i++){this.colYs[i]=Math.max(stampMaxY,this.colYs[i]);}};proto._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var size={height:this.maxY};if(this._getOption('fitWidth')){size.width=this._getContainerFitWidth();}
return size;};proto._getContainerFitWidth=function(){var unusedCols=0;var i=this.cols;while(--i){if(this.colYs[i]!==0){break;}
unusedCols++;}
return(this.cols-unusedCols)*this.columnWidth-this.gutter;};proto.needsResizeLayout=function(){var previousWidth=this.containerWidth;this.getContainerWidth();return previousWidth!=this.containerWidth;};return Masonry;}));
/*!
 * Masonry layout mode
 * sub-classes Masonry
 * https://masonry.desandro.com
 */
(function(window,factory){if(typeof define=='function'&&define.amd){define('isotope-layout/js/layout-modes/masonry',['../layout-mode','masonry-layout/masonry'],factory);}else if(typeof module=='object'&&module.exports){module.exports=factory(require('../layout-mode'),require('masonry-layout'));}else{factory(window.Isotope.LayoutMode,window.Masonry);}}(window,function factory(LayoutMode,Masonry){'use strict';var MasonryMode=LayoutMode.create('masonry');var proto=MasonryMode.prototype;var keepModeMethods={_getElementOffset:true,layout:true,_getMeasurement:true};for(var method in Masonry.prototype){if(!keepModeMethods[method]){proto[method]=Masonry.prototype[method];}}
var measureColumns=proto.measureColumns;proto.measureColumns=function(){this.items=this.isotope.filteredItems;measureColumns.call(this);};var _getOption=proto._getOption;proto._getOption=function(option){if(option=='fitWidth'){return this.options.isFitWidth!==undefined?this.options.isFitWidth:this.options.fitWidth;}
return _getOption.apply(this.isotope,arguments);};return MasonryMode;}));(function(window,factory){if(typeof define=='function'&&define.amd){define('isotope-layout/js/layout-modes/fit-rows',['../layout-mode'],factory);}else if(typeof exports=='object'){module.exports=factory(require('../layout-mode'));}else{factory(window.Isotope.LayoutMode);}}(window,function factory(LayoutMode){'use strict';var FitRows=LayoutMode.create('fitRows');var proto=FitRows.prototype;proto._resetLayout=function(){this.x=0;this.y=0;this.maxY=0;this._getMeasurement('gutter','outerWidth');};proto._getItemLayoutPosition=function(item){item.getSize();var itemWidth=item.size.outerWidth+this.gutter;var containerWidth=this.isotope.size.innerWidth+this.gutter;if(this.x!==0&&itemWidth+this.x>containerWidth){this.x=0;this.y=this.maxY;}
var position={x:this.x,y:this.y};this.maxY=Math.max(this.maxY,this.y+item.size.outerHeight);this.x+=itemWidth;return position;};proto._getContainerSize=function(){return{height:this.maxY};};return FitRows;}));(function(window,factory){if(typeof define=='function'&&define.amd){define('isotope-layout/js/layout-modes/vertical',['../layout-mode'],factory);}else if(typeof module=='object'&&module.exports){module.exports=factory(require('../layout-mode'));}else{factory(window.Isotope.LayoutMode);}}(window,function factory(LayoutMode){'use strict';var Vertical=LayoutMode.create('vertical',{horizontalAlignment:0});var proto=Vertical.prototype;proto._resetLayout=function(){this.y=0;};proto._getItemLayoutPosition=function(item){item.getSize();var x=(this.isotope.size.innerWidth-item.size.outerWidth)*this.options.horizontalAlignment;var y=this.y;this.y+=item.size.outerHeight;return{x:x,y:y};};proto._getContainerSize=function(){return{height:this.y};};return Vertical;}));
/*!
 * Isotope v3.0.6
 *
 * Licensed GPLv3 for open source use
 * or Isotope Commercial License for commercial use
 *
 * https://isotope.metafizzy.co
 * Copyright 2010-2018 Metafizzy
 */
(function(window,factory){if(typeof define=='function'&&define.amd){define(['outlayer/outlayer','get-size/get-size','desandro-matches-selector/matches-selector','fizzy-ui-utils/utils','isotope-layout/js/item','isotope-layout/js/layout-mode','isotope-layout/js/layout-modes/masonry','isotope-layout/js/layout-modes/fit-rows','isotope-layout/js/layout-modes/vertical'],function(Outlayer,getSize,matchesSelector,utils,Item,LayoutMode){return factory(window,Outlayer,getSize,matchesSelector,utils,Item,LayoutMode);});}else if(typeof module=='object'&&module.exports){module.exports=factory(window,require('outlayer'),require('get-size'),require('desandro-matches-selector'),require('fizzy-ui-utils'),require('isotope-layout/js/item'),require('isotope-layout/js/layout-mode'),require('isotope-layout/js/layout-modes/masonry'),require('isotope-layout/js/layout-modes/fit-rows'),require('isotope-layout/js/layout-modes/vertical'));}else{window.Isotope=factory(window,window.Outlayer,window.getSize,window.matchesSelector,window.fizzyUIUtils,window.Isotope.Item,window.Isotope.LayoutMode);}}(window,function factory(window,Outlayer,getSize,matchesSelector,utils,Item,LayoutMode){var jQuery=window.jQuery;var trim=String.prototype.trim?function(str){return str.trim();}:function(str){return str.replace(/^\s+|\s+$/g,'');};var Isotope=Outlayer.create('isotope',{layoutMode:'masonry',isJQueryFiltering:true,sortAscending:true});Isotope.Item=Item;Isotope.LayoutMode=LayoutMode;var proto=Isotope.prototype;proto._create=function(){this.itemGUID=0;this._sorters={};this._getSorters();Outlayer.prototype._create.call(this);this.modes={};this.filteredItems=this.items;this.sortHistory=['original-order'];for(var name in LayoutMode.modes){this._initLayoutMode(name);}};proto.reloadItems=function(){this.itemGUID=0;Outlayer.prototype.reloadItems.call(this);};proto._itemize=function(){var items=Outlayer.prototype._itemize.apply(this,arguments);for(var i=0;i<items.length;i++){var item=items[i];item.id=this.itemGUID++;}
this._updateItemsSortData(items);return items;};proto._initLayoutMode=function(name){var Mode=LayoutMode.modes[name];var initialOpts=this.options[name]||{};this.options[name]=Mode.options?utils.extend(Mode.options,initialOpts):initialOpts;this.modes[name]=new Mode(this);};proto.layout=function(){if(!this._isLayoutInited&&this._getOption('initLayout')){this.arrange();return;}
this._layout();};proto._layout=function(){var isInstant=this._getIsInstant();this._resetLayout();this._manageStamps();this.layoutItems(this.filteredItems,isInstant);this._isLayoutInited=true;};proto.arrange=function(opts){this.option(opts);this._getIsInstant();var filtered=this._filter(this.items);this.filteredItems=filtered.matches;this._bindArrangeComplete();if(this._isInstant){this._noTransition(this._hideReveal,[filtered]);}else{this._hideReveal(filtered);}
this._sort();this._layout();};proto._init=proto.arrange;proto._hideReveal=function(filtered){this.reveal(filtered.needReveal);this.hide(filtered.needHide);};proto._getIsInstant=function(){var isLayoutInstant=this._getOption('layoutInstant');var isInstant=isLayoutInstant!==undefined?isLayoutInstant:!this._isLayoutInited;this._isInstant=isInstant;return isInstant;};proto._bindArrangeComplete=function(){var isLayoutComplete,isHideComplete,isRevealComplete;var _this=this;function arrangeParallelCallback(){if(isLayoutComplete&&isHideComplete&&isRevealComplete){_this.dispatchEvent('arrangeComplete',null,[_this.filteredItems]);}}
this.once('layoutComplete',function(){isLayoutComplete=true;arrangeParallelCallback();});this.once('hideComplete',function(){isHideComplete=true;arrangeParallelCallback();});this.once('revealComplete',function(){isRevealComplete=true;arrangeParallelCallback();});};proto._filter=function(items){var filter=this.options.filter;filter=filter||'*';var matches=[];var hiddenMatched=[];var visibleUnmatched=[];var test=this._getFilterTest(filter);for(var i=0;i<items.length;i++){var item=items[i];if(item.isIgnored){continue;}
var isMatched=test(item);if(isMatched){matches.push(item);}
if(isMatched&&item.isHidden){hiddenMatched.push(item);}else if(!isMatched&&!item.isHidden){visibleUnmatched.push(item);}}
return{matches:matches,needReveal:hiddenMatched,needHide:visibleUnmatched};};proto._getFilterTest=function(filter){if(jQuery&&this.options.isJQueryFiltering){return function(item){return jQuery(item.element).is(filter);};}
if(typeof filter=='function'){return function(item){return filter(item.element);};}
return function(item){return matchesSelector(item.element,filter);};};proto.updateSortData=function(elems){var items;if(elems){elems=utils.makeArray(elems);items=this.getItems(elems);}else{items=this.items;}
this._getSorters();this._updateItemsSortData(items);};proto._getSorters=function(){var getSortData=this.options.getSortData;for(var key in getSortData){var sorter=getSortData[key];this._sorters[key]=mungeSorter(sorter);}};proto._updateItemsSortData=function(items){var len=items&&items.length;for(var i=0;len&&i<len;i++){var item=items[i];item.updateSortData();}};var mungeSorter=(function(){function mungeSorter(sorter){if(typeof sorter!='string'){return sorter;}
var args=trim(sorter).split(' ');var query=args[0];var attrMatch=query.match(/^\[(.+)\]$/);var attr=attrMatch&&attrMatch[1];var getValue=getValueGetter(attr,query);var parser=Isotope.sortDataParsers[args[1]];sorter=parser?function(elem){return elem&&parser(getValue(elem));}:function(elem){return elem&&getValue(elem);};return sorter;}
function getValueGetter(attr,query){if(attr){return function getAttribute(elem){return elem.getAttribute(attr);};}
return function getChildText(elem){var child=elem.querySelector(query);return child&&child.textContent;};}
return mungeSorter;})();Isotope.sortDataParsers={'parseInt':function(val){return parseInt(val,10);},'parseFloat':function(val){return parseFloat(val);}};proto._sort=function(){if(!this.options.sortBy){return;}
var sortBys=utils.makeArray(this.options.sortBy);if(!this._getIsSameSortBy(sortBys)){this.sortHistory=sortBys.concat(this.sortHistory);}
var itemSorter=getItemSorter(this.sortHistory,this.options.sortAscending);this.filteredItems.sort(itemSorter);};proto._getIsSameSortBy=function(sortBys){for(var i=0;i<sortBys.length;i++){if(sortBys[i]!=this.sortHistory[i]){return false;}}
return true;};function getItemSorter(sortBys,sortAsc){return function sorter(itemA,itemB){for(var i=0;i<sortBys.length;i++){var sortBy=sortBys[i];var a=itemA.sortData[sortBy];var b=itemB.sortData[sortBy];if(a>b||a<b){var isAscending=sortAsc[sortBy]!==undefined?sortAsc[sortBy]:sortAsc;var direction=isAscending?1:-1;return(a>b?1:-1)*direction;}}
return 0;};}
proto._mode=function(){var layoutMode=this.options.layoutMode;var mode=this.modes[layoutMode];if(!mode){throw new Error('No layout mode: '+layoutMode);}
mode.options=this.options[layoutMode];return mode;};proto._resetLayout=function(){Outlayer.prototype._resetLayout.call(this);this._mode()._resetLayout();};proto._getItemLayoutPosition=function(item){return this._mode()._getItemLayoutPosition(item);};proto._manageStamp=function(stamp){this._mode()._manageStamp(stamp);};proto._getContainerSize=function(){return this._mode()._getContainerSize();};proto.needsResizeLayout=function(){return this._mode().needsResizeLayout();};proto.appended=function(elems){var items=this.addItems(elems);if(!items.length){return;}
var filteredItems=this._filterRevealAdded(items);this.filteredItems=this.filteredItems.concat(filteredItems);};proto.prepended=function(elems){var items=this._itemize(elems);if(!items.length){return;}
this._resetLayout();this._manageStamps();var filteredItems=this._filterRevealAdded(items);this.layoutItems(this.filteredItems);this.filteredItems=filteredItems.concat(this.filteredItems);this.items=items.concat(this.items);};proto._filterRevealAdded=function(items){var filtered=this._filter(items);this.hide(filtered.needHide);this.reveal(filtered.matches);this.layoutItems(filtered.matches,true);return filtered.matches;};proto.insert=function(elems){var items=this.addItems(elems);if(!items.length){return;}
var i,item;var len=items.length;for(i=0;i<len;i++){item=items[i];this.element.appendChild(item.element);}
var filteredInsertItems=this._filter(items).matches;for(i=0;i<len;i++){items[i].isLayoutInstant=true;}
this.arrange();for(i=0;i<len;i++){delete items[i].isLayoutInstant;}
this.reveal(filteredInsertItems);};var _remove=proto.remove;proto.remove=function(elems){elems=utils.makeArray(elems);var removeItems=this.getItems(elems);_remove.call(this,elems);var len=removeItems&&removeItems.length;for(var i=0;len&&i<len;i++){var item=removeItems[i];utils.removeFrom(this.filteredItems,item);}};proto.shuffle=function(){for(var i=0;i<this.items.length;i++){var item=this.items[i];item.sortData.random=Math.random();}
this.options.sortBy='random';this._sort();this._layout();};proto._noTransition=function(fn,args){var transitionDuration=this.options.transitionDuration;this.options.transitionDuration=0;var returnValue=fn.apply(this,args);this.options.transitionDuration=transitionDuration;return returnValue;};proto.getFilteredItemElements=function(){return this.filteredItems.map(function(item){return item.element;});};return Isotope;}));
var CN=CN||{};CN.ImageGallery=function(el){this.elements={base:el,photoswipe:$('.js-photoswipe-container')};this.init();};CN.ImageGallery.prototype.init=function(){var _this=this;_this.elements.base.on('click','.js-gallery-trigger',function(e){e.preventDefault();var _thisEl=$(this),parentEl=_thisEl.parents('.js-thumbnail'),thumbnailsEl=_this.elements.base.find('.js-thumbnail:not(.isotope-hidden)'),index=thumbnailsEl.index(parentEl);var images=thumbnailsEl.get().map(function(item){var itemEl=$(item),dataEl=itemEl.children().first();if(dataEl.data('media-type')==='video'){var data={html:dataEl.data('html')};}else{var data={title:dataEl.data('caption'),src:dataEl.attr('href'),w:dataEl.data('width'),h:dataEl.data('height')};}
return data;});var options={index:index,history:false,showHideOpacity:true,getThumbBoundsFn:function(index){var thumbnailEl=_thisEl.find('img, .c-image')[0];if(thumbnailEl){var pageYScroll=window.pageYOffset||document.documentElement.scrollTop;var rect=thumbnailEl.getBoundingClientRect();return{x:rect.left,y:rect.top+pageYScroll,w:rect.width};}}};var photoswipe=new PhotoSwipe(_this.elements.photoswipe[0],PhotoSwipeUI_Default,images,options);photoswipe.listen('beforeChange',function(){var currentItem=photoswipe.currItem;if(currentItem.hasOwnProperty('html')&&window.currentVideoPlayer){try{window.currentVideoPlayer.stop();}
catch(err){}}});photoswipe.listen('afterChange',function(){var currentItem=photoswipe.currItem;if(currentItem.hasOwnProperty('html')){var videoEl=$(currentItem.container).find('> div');if(!videoEl.hasClass('plyr')){window.currentVideoPlayer=new Plyr(videoEl);}
setTimeout(function(){window.currentVideoPlayer.play();},1000);}});photoswipe.init();});};
var CN=CN||{};CN.GridFilter=function(el,customSettings){this.customSettings=customSettings||{};this.elements={base:el,};this.setupOptions();this.grid={};this.init();};CN.GridFilter.prototype.init=function(){var _this=this;_this.grid=_this.elements.container.isotope({itemSelector:_this.customSettings.itemSelector,layoutMode:_this.customSettings.layoutMode,stagger:_this.customSettings.stagger,transitionDuration:_this.customSettings.transitionDuration,masonry:{columnWidth:'.grid-sizer'}});var itemHide=Isotope.Item.prototype.hide;var itemReveal=Isotope.Item.prototype.reveal;Isotope.Item.prototype.hide=function(){itemHide.apply(this,arguments);$(this.element).addClass('isotope-hidden');};Isotope.Item.prototype.reveal=function(){itemReveal.apply(this,arguments);$(this.element).removeClass('isotope-hidden');};_this.filter();_this.elements.filterEl.on('change',function(){_this.filter();});(function(grid){return $(window).on('panelsStretchRows',function(){if(grid&&grid.data('isotope')){grid.isotope('layout');}});})(_this.grid);};CN.GridFilter.prototype.filter=function(){var _this=this,filter=_this.customSettings.defaultFilter;_this.elements.filterSelect.each(function(index){var filterType=$(this).data('grid-filter'),filterValue=$(this).val(),filterNode=$(this).prop('nodeName');switch(filterNode){case'SELECT':if(filterValue&&filterValue!=='*'){if(filterValue&&typeof filterValue==='object'){$.each(filterValue,function(key,value){filter+='[data-filter-'+filterType+'*='+value+']';});}else{filter+='[data-filter-'+filterType+'*='+filterValue+']';}
_this.elements.base.find('[data-filter-term]').removeClass('is-active');_this.elements.base.find('[data-filter-term="'+filterValue+'"]').addClass('is-active');}
break;case'INPUT':if(filterValue==='*'){_this.elements.base.find('[data-filter-term]').removeClass('is-active');}
if($(this).prop('checked')&&filterValue!=='*'){filter+='[data-filter-'+filterType+'*='+filterValue+'], ';_this.elements.base.find('[data-filter-term]').removeClass('is-active');_this.elements.base.find('[data-filter-term="'+filterValue+'"]').addClass('is-active');}
if(filterValue==='*'){_this.elements.base.find('[data-filter-term="'+filterValue+'"]').addClass('is-active');}
break;}});var separatorPosition=filter.lastIndexOf(', ');filter=filter.substring(0,separatorPosition)+filter.substring(separatorPosition+1)
_this.grid.isotope({filter:filter});$(_this.customSettings.itemSelector).removeAttr('data-grid-item-index');$.each(_this.grid.data('isotope').filteredItems,function(index,item){var el=$(item.element);el.attr('data-grid-item-index',index);});var noResultsText=_this.elements.base.find('.js-no-results');if(noResultsText){if(_this.grid.data('isotope').filteredItems.length<1){noResultsText.show();}else{noResultsText.hide();}}};CN.GridFilter.prototype.setupOptions=function(){var _this=this;if(typeof _this.customSettings.container==='undefined'){_this.elements.container=_this.elements.base.find('.js-grid-container');}else{_this.elements.container=_this.customSettings.container;}
if(typeof _this.customSettings.item==='undefined'){_this.elements.item=_this.elements.base.find('.js-grid-item');}else{_this.elements.item=_this.customSettings.item;}
if(typeof _this.customSettings.filterEl==='undefined'){_this.elements.filterEl=_this.elements.base.find('.js-filter');}else{_this.elements.filterEl=_this.customSettings.filterEl;}
if(typeof _this.customSettings.filterSelect==='undefined'){_this.elements.filterSelect=_this.elements.base.find('[data-grid-filter]');}else{_this.elements.filterSelect=_this.customSettings.filterSelect;}
if(typeof _this.customSettings.defaultFilter==='undefined'){_this.customSettings.defaultFilter='';}
if(typeof _this.customSettings.itemSelector==='undefined'){_this.customSettings.itemSelector='.js-grid-item';}
if(typeof _this.customSettings.layoutMode==='undefined'){_this.customSettings.layoutMode='fitRows';}
if(typeof _this.customSettings.stagger==='undefined'){_this.customSettings.stagger=50;}
if(typeof _this.customSettings.transitionDuration==='undefined'){_this.customSettings.transitionDuration=400;}};
(function($){'use strict';$(document).on('cnInitGallery',function(event,data){var element=data&&data.element||document;$(element).find('[data-module="grid-image-filter"]').each(function(){new CN.GridFilter($(this),{'itemSelector':'.js-thumbnail','layoutMode':'masonry'});});$(element).find('[data-module="image-gallery"]').each(function(){new CN.ImageGallery($(this));});});$(document).trigger('cnInitGallery');})(jQuery);
(function(root,factory){if(typeof define==='function'&&define.amd){define('sifter',factory);}else if(typeof exports==='object'){module.exports=factory();}else{root.Sifter=factory();}}(this,function(){var Sifter=function(items,settings){this.items=items;this.settings=settings||{diacritics:true};};Sifter.prototype.tokenize=function(query){query=trim(String(query||'').toLowerCase());if(!query||!query.length)return[];var i,n,regex,letter;var tokens=[];var words=query.split(/ +/);for(i=0,n=words.length;i<n;i++){regex=escape_regex(words[i]);if(this.settings.diacritics){for(letter in DIACRITICS){if(DIACRITICS.hasOwnProperty(letter)){regex=regex.replace(new RegExp(letter,'g'),DIACRITICS[letter]);}}}
tokens.push({string:words[i],regex:new RegExp(regex,'i')});}
return tokens;};Sifter.prototype.iterator=function(object,callback){var iterator;if(is_array(object)){iterator=Array.prototype.forEach||function(callback){for(var i=0,n=this.length;i<n;i++){callback(this[i],i,this);}};}else{iterator=function(callback){for(var key in this){if(this.hasOwnProperty(key)){callback(this[key],key,this);}}};}
iterator.apply(object,[callback]);};Sifter.prototype.getScoreFunction=function(search,options){var self,fields,tokens,token_count,nesting;self=this;search=self.prepareSearch(search,options);tokens=search.tokens;fields=search.options.fields;token_count=tokens.length;nesting=search.options.nesting;var scoreValue=function(value,token){var score,pos;if(!value)return 0;value=String(value||'');pos=value.search(token.regex);if(pos===-1)return 0;score=token.string.length/value.length;if(pos===0)score+=0.5;return score;};var scoreObject=(function(){var field_count=fields.length;if(!field_count){return function(){return 0;};}
if(field_count===1){return function(token,data){return scoreValue(getattr(data,fields[0],nesting),token);};}
return function(token,data){for(var i=0,sum=0;i<field_count;i++){sum+=scoreValue(getattr(data,fields[i],nesting),token);}
return sum/field_count;};})();if(!token_count){return function(){return 0;};}
if(token_count===1){return function(data){return scoreObject(tokens[0],data);};}
if(search.options.conjunction==='and'){return function(data){var score;for(var i=0,sum=0;i<token_count;i++){score=scoreObject(tokens[i],data);if(score<=0)return 0;sum+=score;}
return sum/token_count;};}else{return function(data){for(var i=0,sum=0;i<token_count;i++){sum+=scoreObject(tokens[i],data);}
return sum/token_count;};}};Sifter.prototype.getSortFunction=function(search,options){var i,n,self,field,fields,fields_count,multiplier,multipliers,get_field,implicit_score,sort;self=this;search=self.prepareSearch(search,options);sort=(!search.query&&options.sort_empty)||options.sort;get_field=function(name,result){if(name==='$score')return result.score;return getattr(self.items[result.id],name,options.nesting);};fields=[];if(sort){for(i=0,n=sort.length;i<n;i++){if(search.query||sort[i].field!=='$score'){fields.push(sort[i]);}}}
if(search.query){implicit_score=true;for(i=0,n=fields.length;i<n;i++){if(fields[i].field==='$score'){implicit_score=false;break;}}
if(implicit_score){fields.unshift({field:'$score',direction:'desc'});}}else{for(i=0,n=fields.length;i<n;i++){if(fields[i].field==='$score'){fields.splice(i,1);break;}}}
multipliers=[];for(i=0,n=fields.length;i<n;i++){multipliers.push(fields[i].direction==='desc'?-1:1);}
fields_count=fields.length;if(!fields_count){return null;}else if(fields_count===1){field=fields[0].field;multiplier=multipliers[0];return function(a,b){return multiplier*cmp(get_field(field,a),get_field(field,b));};}else{return function(a,b){var i,result,a_value,b_value,field;for(i=0;i<fields_count;i++){field=fields[i].field;result=multipliers[i]*cmp(get_field(field,a),get_field(field,b));if(result)return result;}
return 0;};}};Sifter.prototype.prepareSearch=function(query,options){if(typeof query==='object')return query;options=extend({},options);var option_fields=options.fields;var option_sort=options.sort;var option_sort_empty=options.sort_empty;if(option_fields&&!is_array(option_fields))options.fields=[option_fields];if(option_sort&&!is_array(option_sort))options.sort=[option_sort];if(option_sort_empty&&!is_array(option_sort_empty))options.sort_empty=[option_sort_empty];return{options:options,query:String(query||'').toLowerCase(),tokens:this.tokenize(query),total:0,items:[]};};Sifter.prototype.search=function(query,options){var self=this,value,score,search,calculateScore;var fn_sort;var fn_score;search=this.prepareSearch(query,options);options=search.options;query=search.query;fn_score=options.score||self.getScoreFunction(search);if(query.length){self.iterator(self.items,function(item,id){score=fn_score(item);if(options.filter===false||score>0){search.items.push({'score':score,'id':id});}});}else{self.iterator(self.items,function(item,id){search.items.push({'score':1,'id':id});});}
fn_sort=self.getSortFunction(search,options);if(fn_sort)search.items.sort(fn_sort);search.total=search.items.length;if(typeof options.limit==='number'){search.items=search.items.slice(0,options.limit);}
return search;};var cmp=function(a,b){if(typeof a==='number'&&typeof b==='number'){return a>b?1:(a<b?-1:0);}
a=asciifold(String(a||''));b=asciifold(String(b||''));if(a>b)return 1;if(b>a)return-1;return 0;};var extend=function(a,b){var i,n,k,object;for(i=1,n=arguments.length;i<n;i++){object=arguments[i];if(!object)continue;for(k in object){if(object.hasOwnProperty(k)){a[k]=object[k];}}}
return a;};var getattr=function(obj,name,nesting){if(!obj||!name)return;if(!nesting)return obj[name];var names=name.split(".");while(names.length&&(obj=obj[names.shift()]));return obj;};var trim=function(str){return(str+'').replace(/^\s+|\s+$|/g,'');};var escape_regex=function(str){return(str+'').replace(/([.?*+^$[\]\\(){}|-])/g,'\\$1');};var is_array=Array.isArray||(typeof $!=='undefined'&&$.isArray)||function(object){return Object.prototype.toString.call(object)==='[object Array]';};var DIACRITICS={'a':'[aḀḁĂăÂâǍǎȺⱥȦȧẠạÄäÀàÁáĀāÃãÅåąĄÃąĄ]','b':'[b␢βΒB฿𐌁ᛒ]','c':'[cĆćĈĉČčĊċC̄c̄ÇçḈḉȻȼƇƈɕᴄＣｃ]','d':'[dĎďḊḋḐḑḌḍḒḓḎḏĐđD̦d̦ƉɖƊɗƋƌᵭᶁᶑȡᴅＤｄð]','e':'[eÉéÈèÊêḘḙĚěĔĕẼẽḚḛẺẻĖėËëĒēȨȩĘęᶒɆɇȄȅẾếỀềỄễỂểḜḝḖḗḔḕȆȇẸẹỆệⱸᴇＥｅɘǝƏƐε]','f':'[fƑƒḞḟ]','g':'[gɢ₲ǤǥĜĝĞğĢģƓɠĠġ]','h':'[hĤĥĦħḨḩẖẖḤḥḢḣɦʰǶƕ]','i':'[iÍíÌìĬĭÎîǏǐÏïḮḯĨĩĮįĪīỈỉȈȉȊȋỊịḬḭƗɨɨ̆ᵻᶖİiIıɪＩｉ]','j':'[jȷĴĵɈɉʝɟʲ]','k':'[kƘƙꝀꝁḰḱǨǩḲḳḴḵκϰ₭]','l':'[lŁłĽľĻļĹĺḶḷḸḹḼḽḺḻĿŀȽƚⱠⱡⱢɫɬᶅɭȴʟＬｌ]','n':'[nŃńǸǹŇňÑñṄṅŅņṆṇṊṋṈṉN̈n̈ƝɲȠƞᵰᶇɳȵɴＮｎŊŋ]','o':'[oØøÖöÓóÒòÔôǑǒŐőŎŏȮȯỌọƟɵƠơỎỏŌōÕõǪǫȌȍՕօ]','p':'[pṔṕṖṗⱣᵽƤƥᵱ]','q':'[qꝖꝗʠɊɋꝘꝙq̃]','r':'[rŔŕɌɍŘřŖŗṘṙȐȑȒȓṚṛⱤɽ]','s':'[sŚśṠṡṢṣꞨꞩŜŝŠšŞşȘșS̈s̈]','t':'[tŤťṪṫŢţṬṭƮʈȚțṰṱṮṯƬƭ]','u':'[uŬŭɄʉỤụÜüÚúÙùÛûǓǔŰűŬŭƯưỦủŪūŨũŲųȔȕ∪]','v':'[vṼṽṾṿƲʋꝞꝟⱱʋ]','w':'[wẂẃẀẁŴŵẄẅẆẇẈẉ]','x':'[xẌẍẊẋχ]','y':'[yÝýỲỳŶŷŸÿỸỹẎẏỴỵɎɏƳƴ]','z':'[zŹźẐẑŽžŻżẒẓẔẕƵƶ]'};var asciifold=(function(){var i,n,k,chunk;var foreignletters='';var lookup={};for(k in DIACRITICS){if(DIACRITICS.hasOwnProperty(k)){chunk=DIACRITICS[k].substring(2,DIACRITICS[k].length-1);foreignletters+=chunk;for(i=0,n=chunk.length;i<n;i++){lookup[chunk.charAt(i)]=k;}}}
var regexp=new RegExp('['+foreignletters+']','g');return function(str){return str.replace(regexp,function(foreignletter){return lookup[foreignletter];}).toLowerCase();};})();return Sifter;}));(function(root,factory){if(typeof define==='function'&&define.amd){define('microplugin',factory);}else if(typeof exports==='object'){module.exports=factory();}else{root.MicroPlugin=factory();}}(this,function(){var MicroPlugin={};MicroPlugin.mixin=function(Interface){Interface.plugins={};Interface.prototype.initializePlugins=function(plugins){var i,n,key;var self=this;var queue=[];self.plugins={names:[],settings:{},requested:{},loaded:{}};if(utils.isArray(plugins)){for(i=0,n=plugins.length;i<n;i++){if(typeof plugins[i]==='string'){queue.push(plugins[i]);}else{self.plugins.settings[plugins[i].name]=plugins[i].options;queue.push(plugins[i].name);}}}else if(plugins){for(key in plugins){if(plugins.hasOwnProperty(key)){self.plugins.settings[key]=plugins[key];queue.push(key);}}}
while(queue.length){self.require(queue.shift());}};Interface.prototype.loadPlugin=function(name){var self=this;var plugins=self.plugins;var plugin=Interface.plugins[name];if(!Interface.plugins.hasOwnProperty(name)){throw new Error('Unable to find "'+name+'" plugin');}
plugins.requested[name]=true;plugins.loaded[name]=plugin.fn.apply(self,[self.plugins.settings[name]||{}]);plugins.names.push(name);};Interface.prototype.require=function(name){var self=this;var plugins=self.plugins;if(!self.plugins.loaded.hasOwnProperty(name)){if(plugins.requested[name]){throw new Error('Plugin has circular dependency ("'+name+'")');}
self.loadPlugin(name);}
return plugins.loaded[name];};Interface.define=function(name,fn){Interface.plugins[name]={'name':name,'fn':fn};};};var utils={isArray:Array.isArray||function(vArg){return Object.prototype.toString.call(vArg)==='[object Array]';}};return MicroPlugin;}));(function(root,factory){if(typeof define==='function'&&define.amd){define('selectize',['jquery','sifter','microplugin'],factory);}else if(typeof exports==='object'){module.exports=factory(require('jquery'),require('sifter'),require('microplugin'));}else{root.Selectize=factory(root.jQuery,root.Sifter,root.MicroPlugin);}}(this,function($,Sifter,MicroPlugin){'use strict';var highlight=function($element,pattern){if(typeof pattern==='string'&&!pattern.length)return;var regex=(typeof pattern==='string')?new RegExp(pattern,'i'):pattern;var highlight=function(node){var skip=0;if(node.nodeType===3){var pos=node.data.search(regex);if(pos>=0&&node.data.length>0){var match=node.data.match(regex);var spannode=document.createElement('span');spannode.className='highlight';var middlebit=node.splitText(pos);var endbit=middlebit.splitText(match[0].length);var middleclone=middlebit.cloneNode(true);spannode.appendChild(middleclone);middlebit.parentNode.replaceChild(spannode,middlebit);skip=1;}}
else if(node.nodeType===1&&node.childNodes&&!/(script|style)/i.test(node.tagName)&&(node.className!=='highlight'||node.tagName!=='SPAN')){for(var i=0;i<node.childNodes.length;++i){i+=highlight(node.childNodes[i]);}}
return skip;};return $element.each(function(){highlight(this);});};$.fn.removeHighlight=function(){return this.find("span.highlight").each(function(){this.parentNode.firstChild.nodeName;var parent=this.parentNode;parent.replaceChild(this.firstChild,this);parent.normalize();}).end();};var MicroEvent=function(){};MicroEvent.prototype={on:function(event,fct){this._events=this._events||{};this._events[event]=this._events[event]||[];this._events[event].push(fct);},off:function(event,fct){var n=arguments.length;if(n===0)return delete this._events;if(n===1)return delete this._events[event];this._events=this._events||{};if(event in this._events===false)return;this._events[event].splice(this._events[event].indexOf(fct),1);},trigger:function(event){this._events=this._events||{};if(event in this._events===false)return;for(var i=0;i<this._events[event].length;i++){this._events[event][i].apply(this,Array.prototype.slice.call(arguments,1));}}};MicroEvent.mixin=function(destObject){var props=['on','off','trigger'];for(var i=0;i<props.length;i++){destObject.prototype[props[i]]=MicroEvent.prototype[props[i]];}};var IS_MAC=/Mac/.test(navigator.userAgent);var KEY_A=65;var KEY_COMMA=188;var KEY_RETURN=13;var KEY_ESC=27;var KEY_LEFT=37;var KEY_UP=38;var KEY_P=80;var KEY_RIGHT=39;var KEY_DOWN=40;var KEY_N=78;var KEY_BACKSPACE=8;var KEY_DELETE=46;var KEY_SHIFT=16;var KEY_CMD=IS_MAC?91:17;var KEY_CTRL=IS_MAC?18:17;var KEY_TAB=9;var TAG_SELECT=1;var TAG_INPUT=2;var SUPPORTS_VALIDITY_API=!/android/i.test(window.navigator.userAgent)&&!!document.createElement('input').validity;var isset=function(object){return typeof object!=='undefined';};var hash_key=function(value){if(typeof value==='undefined'||value===null)return null;if(typeof value==='boolean')return value?'1':'0';return value+'';};var escape_html=function(str){return(str+'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;');};var escape_replace=function(str){return(str+'').replace(/\$/g,'$$$$');};var hook={};hook.before=function(self,method,fn){var original=self[method];self[method]=function(){fn.apply(self,arguments);return original.apply(self,arguments);};};hook.after=function(self,method,fn){var original=self[method];self[method]=function(){var result=original.apply(self,arguments);fn.apply(self,arguments);return result;};};var once=function(fn){var called=false;return function(){if(called)return;called=true;fn.apply(this,arguments);};};var debounce=function(fn,delay){var timeout;return function(){var self=this;var args=arguments;window.clearTimeout(timeout);timeout=window.setTimeout(function(){fn.apply(self,args);},delay);};};var debounce_events=function(self,types,fn){var type;var trigger=self.trigger;var event_args={};self.trigger=function(){var type=arguments[0];if(types.indexOf(type)!==-1){event_args[type]=arguments;}else{return trigger.apply(self,arguments);}};fn.apply(self,[]);self.trigger=trigger;for(type in event_args){if(event_args.hasOwnProperty(type)){trigger.apply(self,event_args[type]);}}};var watchChildEvent=function($parent,event,selector,fn){$parent.on(event,selector,function(e){var child=e.target;while(child&&child.parentNode!==$parent[0]){child=child.parentNode;}
e.currentTarget=child;return fn.apply(this,[e]);});};var getSelection=function(input){var result={};if('selectionStart'in input){result.start=input.selectionStart;result.length=input.selectionEnd-result.start;}else if(document.selection){input.focus();var sel=document.selection.createRange();var selLen=document.selection.createRange().text.length;sel.moveStart('character',-input.value.length);result.start=sel.text.length-selLen;result.length=selLen;}
return result;};var transferStyles=function($from,$to,properties){var i,n,styles={};if(properties){for(i=0,n=properties.length;i<n;i++){styles[properties[i]]=$from.css(properties[i]);}}else{styles=$from.css();}
$to.css(styles);};var measureString=function(str,$parent){if(!str){return 0;}
if(!Selectize.$testInput){Selectize.$testInput=$('<span />').css({position:'absolute',top:-99999,left:-99999,width:'auto',padding:0,whiteSpace:'pre'}).appendTo('body');}
Selectize.$testInput.text(str);transferStyles($parent,Selectize.$testInput,['letterSpacing','fontSize','fontFamily','fontWeight','textTransform']);return Selectize.$testInput.width();};var autoGrow=function($input){var currentWidth=null;var update=function(e,options){var value,keyCode,printable,placeholder,width;var shift,character,selection;e=e||window.event||{};options=options||{};if(e.metaKey||e.altKey)return;if(!options.force&&$input.data('grow')===false)return;value=$input.val();if(e.type&&e.type.toLowerCase()==='keydown'){keyCode=e.keyCode;printable=((keyCode>=48&&keyCode<=57)||(keyCode>=65&&keyCode<=90)||(keyCode>=96&&keyCode<=111)||(keyCode>=186&&keyCode<=222)||keyCode===32);if(keyCode===KEY_DELETE||keyCode===KEY_BACKSPACE){selection=getSelection($input[0]);if(selection.length){value=value.substring(0,selection.start)+value.substring(selection.start+selection.length);}else if(keyCode===KEY_BACKSPACE&&selection.start){value=value.substring(0,selection.start-1)+value.substring(selection.start+1);}else if(keyCode===KEY_DELETE&&typeof selection.start!=='undefined'){value=value.substring(0,selection.start)+value.substring(selection.start+1);}}else if(printable){shift=e.shiftKey;character=String.fromCharCode(e.keyCode);if(shift)character=character.toUpperCase();else character=character.toLowerCase();value+=character;}}
placeholder=$input.attr('placeholder');if(!value&&placeholder){value=placeholder;}
width=measureString(value,$input)+4;if(width!==currentWidth){currentWidth=width;$input.width(width);$input.triggerHandler('resize');}};$input.on('keydown keyup update blur',update);update();};var domToString=function(d){var tmp=document.createElement('div');tmp.appendChild(d.cloneNode(true));return tmp.innerHTML;};var logError=function(message,options){if(!options)options={};var component="Selectize";console.error(component+": "+message)
if(options.explanation){if(console.group)console.group();console.error(options.explanation);if(console.group)console.groupEnd();}}
var Selectize=function($input,settings){var key,i,n,dir,input,self=this;input=$input[0];input.selectize=self;var computedStyle=window.getComputedStyle&&window.getComputedStyle(input,null);dir=computedStyle?computedStyle.getPropertyValue('direction'):input.currentStyle&&input.currentStyle.direction;dir=dir||$input.parents('[dir]:first').attr('dir')||'';$.extend(self,{order:0,settings:settings,$input:$input,tabIndex:$input.attr('tabindex')||'',tagType:input.tagName.toLowerCase()==='select'?TAG_SELECT:TAG_INPUT,rtl:/rtl/i.test(dir),eventNS:'.selectize'+(++Selectize.count),highlightedValue:null,isBlurring:false,isOpen:false,isDisabled:false,isRequired:$input.is('[required]'),isInvalid:false,isLocked:false,isFocused:false,isInputHidden:false,isSetup:false,isShiftDown:false,isCmdDown:false,isCtrlDown:false,ignoreFocus:false,ignoreBlur:false,ignoreHover:false,hasOptions:false,currentResults:null,lastValue:'',caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:settings.loadThrottle===null?self.onSearchChange:debounce(self.onSearchChange,settings.loadThrottle)});self.sifter=new Sifter(this.options,{diacritics:settings.diacritics});if(self.settings.options){for(i=0,n=self.settings.options.length;i<n;i++){self.registerOption(self.settings.options[i]);}
delete self.settings.options;}
if(self.settings.optgroups){for(i=0,n=self.settings.optgroups.length;i<n;i++){self.registerOptionGroup(self.settings.optgroups[i]);}
delete self.settings.optgroups;}
self.settings.mode=self.settings.mode||(self.settings.maxItems===1?'single':'multi');if(typeof self.settings.hideSelected!=='boolean'){self.settings.hideSelected=self.settings.mode==='multi';}
self.initializePlugins(self.settings.plugins);self.setupCallbacks();self.setupTemplates();self.setup();};MicroEvent.mixin(Selectize);if(typeof MicroPlugin!=="undefined"){MicroPlugin.mixin(Selectize);}else{logError("Dependency MicroPlugin is missing",{explanation:"Make sure you either: (1) are using the \"standalone\" "+"version of Selectize, or (2) require MicroPlugin before you "+"load Selectize."});}
$.extend(Selectize.prototype,{setup:function(){var self=this;var settings=self.settings;var eventNS=self.eventNS;var $window=$(window);var $document=$(document);var $input=self.$input;var $wrapper;var $control;var $control_input;var $dropdown;var $dropdown_content;var $dropdown_parent;var inputMode;var timeout_blur;var timeout_focus;var classes;var classes_plugins;var inputId;inputMode=self.settings.mode;classes=$input.attr('class')||'';$wrapper=$('<div>').addClass(settings.wrapperClass).addClass(classes).addClass(inputMode);$control=$('<div>').addClass(settings.inputClass).addClass('items').appendTo($wrapper);$control_input=$('<input type="text" autocomplete="off" />').appendTo($control).attr('tabindex',$input.is(':disabled')?'-1':self.tabIndex);$dropdown_parent=$(settings.dropdownParent||$wrapper);$dropdown=$('<div>').addClass(settings.dropdownClass).addClass(inputMode).hide().appendTo($dropdown_parent);$dropdown_content=$('<div>').addClass(settings.dropdownContentClass).appendTo($dropdown);if(inputId=$input.attr('id')){$control_input.attr('id',inputId+'-selectized');$("label[for='"+inputId+"']").attr('for',inputId+'-selectized');}
if(self.settings.copyClassesToDropdown){$dropdown.addClass(classes);}
$wrapper.css({width:$input[0].style.width});if(self.plugins.names.length){classes_plugins='plugin-'+self.plugins.names.join(' plugin-');$wrapper.addClass(classes_plugins);$dropdown.addClass(classes_plugins);}
if((settings.maxItems===null||settings.maxItems>1)&&self.tagType===TAG_SELECT){$input.attr('multiple','multiple');}
if(self.settings.placeholder){$control_input.attr('placeholder',settings.placeholder);}
if(!self.settings.splitOn&&self.settings.delimiter){var delimiterEscaped=self.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,'\\$&');self.settings.splitOn=new RegExp('\\s*'+delimiterEscaped+'+\\s*');}
if($input.attr('autocorrect')){$control_input.attr('autocorrect',$input.attr('autocorrect'));}
if($input.attr('autocapitalize')){$control_input.attr('autocapitalize',$input.attr('autocapitalize'));}
$control_input[0].type=$input[0].type;self.$wrapper=$wrapper;self.$control=$control;self.$control_input=$control_input;self.$dropdown=$dropdown;self.$dropdown_content=$dropdown_content;$dropdown.on('mouseenter mousedown click','[data-disabled]>[data-selectable]',function(e){e.stopImmediatePropagation();});$dropdown.on('mouseenter','[data-selectable]',function(){return self.onOptionHover.apply(self,arguments);});$dropdown.on('mousedown click','[data-selectable]',function(){return self.onOptionSelect.apply(self,arguments);});watchChildEvent($control,'mousedown','*:not(input)',function(){return self.onItemSelect.apply(self,arguments);});autoGrow($control_input);$control.on({mousedown:function(){return self.onMouseDown.apply(self,arguments);},click:function(){return self.onClick.apply(self,arguments);}});$control_input.on({mousedown:function(e){e.stopPropagation();},keydown:function(){return self.onKeyDown.apply(self,arguments);},keyup:function(){return self.onKeyUp.apply(self,arguments);},keypress:function(){return self.onKeyPress.apply(self,arguments);},resize:function(){self.positionDropdown.apply(self,[]);},blur:function(){return self.onBlur.apply(self,arguments);},focus:function(){self.ignoreBlur=false;return self.onFocus.apply(self,arguments);},paste:function(){return self.onPaste.apply(self,arguments);}});$document.on('keydown'+eventNS,function(e){self.isCmdDown=e[IS_MAC?'metaKey':'ctrlKey'];self.isCtrlDown=e[IS_MAC?'altKey':'ctrlKey'];self.isShiftDown=e.shiftKey;});$document.on('keyup'+eventNS,function(e){if(e.keyCode===KEY_CTRL)self.isCtrlDown=false;if(e.keyCode===KEY_SHIFT)self.isShiftDown=false;if(e.keyCode===KEY_CMD)self.isCmdDown=false;});$document.on('mousedown'+eventNS,function(e){if(self.isFocused){if(e.target===self.$dropdown[0]||e.target.parentNode===self.$dropdown[0]){return false;}
if(!self.$control.has(e.target).length&&e.target!==self.$control[0]){self.blur(e.target);}}});$window.on(['scroll'+eventNS,'resize'+eventNS].join(' '),function(){if(self.isOpen){self.positionDropdown.apply(self,arguments);}});$window.on('mousemove'+eventNS,function(){self.ignoreHover=false;});this.revertSettings={$children:$input.children().detach(),tabindex:$input.attr('tabindex')};$input.attr('tabindex',-1).hide().after(self.$wrapper);if($.isArray(settings.items)){self.setValue(settings.items);delete settings.items;}
if(SUPPORTS_VALIDITY_API){$input.on('invalid'+eventNS,function(e){e.preventDefault();self.isInvalid=true;self.refreshState();});}
self.updateOriginalInput();self.refreshItems();self.refreshState();self.updatePlaceholder();self.isSetup=true;if($input.is(':disabled')){self.disable();}
self.on('change',this.onChange);$input.data('selectize',self);$input.addClass('selectized');self.trigger('initialize');if(settings.preload===true){self.onSearchChange('');}},setupTemplates:function(){var self=this;var field_label=self.settings.labelField;var field_optgroup=self.settings.optgroupLabelField;var templates={'optgroup':function(data){return'<div class="optgroup">'+data.html+'</div>';},'optgroup_header':function(data,escape){return'<div class="optgroup-header">'+escape(data[field_optgroup])+'</div>';},'option':function(data,escape){return'<div class="option">'+escape(data[field_label])+'</div>';},'item':function(data,escape){return'<div class="item">'+escape(data[field_label])+'</div>';},'option_create':function(data,escape){return'<div class="create">Add <strong>'+escape(data.input)+'</strong>&hellip;</div>';}};self.settings.render=$.extend({},templates,self.settings.render);},setupCallbacks:function(){var key,fn,callbacks={'initialize':'onInitialize','change':'onChange','item_add':'onItemAdd','item_remove':'onItemRemove','clear':'onClear','option_add':'onOptionAdd','option_remove':'onOptionRemove','option_clear':'onOptionClear','optgroup_add':'onOptionGroupAdd','optgroup_remove':'onOptionGroupRemove','optgroup_clear':'onOptionGroupClear','dropdown_open':'onDropdownOpen','dropdown_close':'onDropdownClose','type':'onType','load':'onLoad','focus':'onFocus','blur':'onBlur'};for(key in callbacks){if(callbacks.hasOwnProperty(key)){fn=this.settings[callbacks[key]];if(fn)this.on(key,fn);}}},onClick:function(e){var self=this;if(!self.isFocused||!self.isOpen){self.focus();e.preventDefault();}},onMouseDown:function(e){var self=this;var defaultPrevented=e.isDefaultPrevented();var $target=$(e.target);if(self.isFocused){if(e.target!==self.$control_input[0]){if(self.settings.mode==='single'){self.isOpen?self.close():self.open();}else if(!defaultPrevented){self.setActiveItem(null);}
return false;}}else{if(!defaultPrevented){window.setTimeout(function(){self.focus();},0);}}},onChange:function(){this.$input.trigger('change');},onPaste:function(e){var self=this;if(self.isFull()||self.isInputHidden||self.isLocked){e.preventDefault();return;}
if(self.settings.splitOn){setTimeout(function(){var pastedText=self.$control_input.val();if(!pastedText.match(self.settings.splitOn)){return}
var splitInput=$.trim(pastedText).split(self.settings.splitOn);for(var i=0,n=splitInput.length;i<n;i++){self.createItem(splitInput[i]);}},0);}},onKeyPress:function(e){if(this.isLocked)return e&&e.preventDefault();var character=String.fromCharCode(e.keyCode||e.which);if(this.settings.create&&this.settings.mode==='multi'&&character===this.settings.delimiter){this.createItem();e.preventDefault();return false;}},onKeyDown:function(e){var isInput=e.target===this.$control_input[0];var self=this;if(self.isLocked){if(e.keyCode!==KEY_TAB){e.preventDefault();}
return;}
switch(e.keyCode){case KEY_A:if(self.isCmdDown){self.selectAll();return;}
break;case KEY_ESC:if(self.isOpen){e.preventDefault();e.stopPropagation();self.close();}
return;case KEY_N:if(!e.ctrlKey||e.altKey)break;case KEY_DOWN:if(!self.isOpen&&self.hasOptions){self.open();}else if(self.$activeOption){self.ignoreHover=true;var $next=self.getAdjacentOption(self.$activeOption,1);if($next.length)self.setActiveOption($next,true,true);}
e.preventDefault();return;case KEY_P:if(!e.ctrlKey||e.altKey)break;case KEY_UP:if(self.$activeOption){self.ignoreHover=true;var $prev=self.getAdjacentOption(self.$activeOption,-1);if($prev.length)self.setActiveOption($prev,true,true);}
e.preventDefault();return;case KEY_RETURN:if(self.isOpen&&self.$activeOption){self.onOptionSelect({currentTarget:self.$activeOption});e.preventDefault();}
return;case KEY_LEFT:self.advanceSelection(-1,e);return;case KEY_RIGHT:self.advanceSelection(1,e);return;case KEY_TAB:if(self.settings.selectOnTab&&self.isOpen&&self.$activeOption){self.onOptionSelect({currentTarget:self.$activeOption});if(!self.isFull()){e.preventDefault();}}
if(self.settings.create&&self.createItem()){e.preventDefault();}
return;case KEY_BACKSPACE:case KEY_DELETE:self.deleteSelection(e);return;}
if((self.isFull()||self.isInputHidden)&&!(IS_MAC?e.metaKey:e.ctrlKey)){e.preventDefault();return;}},onKeyUp:function(e){var self=this;if(self.isLocked)return e&&e.preventDefault();var value=self.$control_input.val()||'';if(self.lastValue!==value){self.lastValue=value;self.onSearchChange(value);self.refreshOptions();self.trigger('type',value);}},onSearchChange:function(value){var self=this;var fn=self.settings.load;if(!fn)return;if(self.loadedSearches.hasOwnProperty(value))return;self.loadedSearches[value]=true;self.load(function(callback){fn.apply(self,[value,callback]);});},onFocus:function(e){var self=this;var wasFocused=self.isFocused;if(self.isDisabled){self.blur();e&&e.preventDefault();return false;}
if(self.ignoreFocus)return;self.isFocused=true;if(self.settings.preload==='focus')self.onSearchChange('');if(!wasFocused)self.trigger('focus');if(!self.$activeItems.length){self.showInput();self.setActiveItem(null);self.refreshOptions(!!self.settings.openOnFocus);}
self.refreshState();},onBlur:function(e,dest){var self=this;if(!self.isFocused)return;self.isFocused=false;if(self.ignoreFocus){return;}else if(!self.ignoreBlur&&document.activeElement===self.$dropdown_content[0]){self.ignoreBlur=true;self.onFocus(e);return;}
var deactivate=function(){self.close();self.setTextboxValue('');self.setActiveItem(null);self.setActiveOption(null);self.setCaret(self.items.length);self.refreshState();dest&&dest.focus&&dest.focus();self.isBlurring=false;self.ignoreFocus=false;self.trigger('blur');};self.isBlurring=true;self.ignoreFocus=true;if(self.settings.create&&self.settings.createOnBlur){self.createItem(null,false,deactivate);}else{deactivate();}},onOptionHover:function(e){if(this.ignoreHover)return;this.setActiveOption(e.currentTarget,false);},onOptionSelect:function(e){var value,$target,$option,self=this;if(e.preventDefault){e.preventDefault();e.stopPropagation();}
$target=$(e.currentTarget);if($target.hasClass('create')){self.createItem(null,function(){if(self.settings.closeAfterSelect){self.close();}});}else{value=$target.attr('data-value');if(typeof value!=='undefined'){self.lastQuery=null;self.setTextboxValue('');self.addItem(value);if(self.settings.closeAfterSelect){self.close();}else if(!self.settings.hideSelected&&e.type&&/mouse/.test(e.type)){self.setActiveOption(self.getOption(value));}}}},onItemSelect:function(e){var self=this;if(self.isLocked)return;if(self.settings.mode==='multi'){e.preventDefault();self.setActiveItem(e.currentTarget,e);}},load:function(fn){var self=this;var $wrapper=self.$wrapper.addClass(self.settings.loadingClass);self.loading++;fn.apply(self,[function(results){self.loading=Math.max(self.loading-1,0);if(results&&results.length){self.addOption(results);self.refreshOptions(self.isFocused&&!self.isInputHidden);}
if(!self.loading){$wrapper.removeClass(self.settings.loadingClass);}
self.trigger('load',results);}]);},setTextboxValue:function(value){var $input=this.$control_input;var changed=$input.val()!==value;if(changed){$input.val(value).triggerHandler('update');this.lastValue=value;}},getValue:function(){if(this.tagType===TAG_SELECT&&this.$input.attr('multiple')){return this.items;}else{return this.items.join(this.settings.delimiter);}},setValue:function(value,silent){var events=silent?[]:['change'];debounce_events(this,events,function(){this.clear(silent);this.addItems(value,silent);});},setActiveItem:function($item,e){var self=this;var eventName;var i,idx,begin,end,item,swap;var $last;if(self.settings.mode==='single')return;$item=$($item);if(!$item.length){$(self.$activeItems).removeClass('active');self.$activeItems=[];if(self.isFocused){self.showInput();}
return;}
eventName=e&&e.type.toLowerCase();if(eventName==='mousedown'&&self.isShiftDown&&self.$activeItems.length){$last=self.$control.children('.active:last');begin=Array.prototype.indexOf.apply(self.$control[0].childNodes,[$last[0]]);end=Array.prototype.indexOf.apply(self.$control[0].childNodes,[$item[0]]);if(begin>end){swap=begin;begin=end;end=swap;}
for(i=begin;i<=end;i++){item=self.$control[0].childNodes[i];if(self.$activeItems.indexOf(item)===-1){$(item).addClass('active');self.$activeItems.push(item);}}
e.preventDefault();}else if((eventName==='mousedown'&&self.isCtrlDown)||(eventName==='keydown'&&this.isShiftDown)){if($item.hasClass('active')){idx=self.$activeItems.indexOf($item[0]);self.$activeItems.splice(idx,1);$item.removeClass('active');}else{self.$activeItems.push($item.addClass('active')[0]);}}else{$(self.$activeItems).removeClass('active');self.$activeItems=[$item.addClass('active')[0]];}
self.hideInput();if(!this.isFocused){self.focus();}},setActiveOption:function($option,scroll,animate){var height_menu,height_item,y;var scroll_top,scroll_bottom;var self=this;if(self.$activeOption)self.$activeOption.removeClass('active');self.$activeOption=null;$option=$($option);if(!$option.length)return;self.$activeOption=$option.addClass('active');if(scroll||!isset(scroll)){height_menu=self.$dropdown_content.height();height_item=self.$activeOption.outerHeight(true);scroll=self.$dropdown_content.scrollTop()||0;y=self.$activeOption.offset().top-self.$dropdown_content.offset().top+scroll;scroll_top=y;scroll_bottom=y-height_menu+height_item;if(y+height_item>height_menu+scroll){self.$dropdown_content.stop().animate({scrollTop:scroll_bottom},animate?self.settings.scrollDuration:0);}else if(y<scroll){self.$dropdown_content.stop().animate({scrollTop:scroll_top},animate?self.settings.scrollDuration:0);}}},selectAll:function(){var self=this;if(self.settings.mode==='single')return;self.$activeItems=Array.prototype.slice.apply(self.$control.children(':not(input)').addClass('active'));if(self.$activeItems.length){self.hideInput();self.close();}
self.focus();},hideInput:function(){var self=this;self.setTextboxValue('');self.$control_input.css({opacity:0,position:'absolute',left:self.rtl?10000:-10000});self.isInputHidden=true;},showInput:function(){this.$control_input.css({opacity:1,position:'relative',left:0});this.isInputHidden=false;},focus:function(){var self=this;if(self.isDisabled)return;self.ignoreFocus=true;self.$control_input[0].focus();window.setTimeout(function(){self.ignoreFocus=false;self.onFocus();},0);},blur:function(dest){this.$control_input[0].blur();this.onBlur(null,dest);},getScoreFunction:function(query){return this.sifter.getScoreFunction(query,this.getSearchOptions());},getSearchOptions:function(){var settings=this.settings;var sort=settings.sortField;if(typeof sort==='string'){sort=[{field:sort}];}
return{fields:settings.searchField,conjunction:settings.searchConjunction,sort:sort,nesting:settings.nesting};},search:function(query){var i,value,score,result,calculateScore;var self=this;var settings=self.settings;var options=this.getSearchOptions();if(settings.score){calculateScore=self.settings.score.apply(this,[query]);if(typeof calculateScore!=='function'){throw new Error('Selectize "score" setting must be a function that returns a function');}}
if(query!==self.lastQuery){self.lastQuery=query;result=self.sifter.search(query,$.extend(options,{score:calculateScore}));self.currentResults=result;}else{result=$.extend(true,{},self.currentResults);}
if(settings.hideSelected){for(i=result.items.length-1;i>=0;i--){if(self.items.indexOf(hash_key(result.items[i].id))!==-1){result.items.splice(i,1);}}}
return result;},refreshOptions:function(triggerDropdown){var i,j,k,n,groups,groups_order,option,option_html,optgroup,optgroups,html,html_children,has_create_option;var $active,$active_before,$create;if(typeof triggerDropdown==='undefined'){triggerDropdown=true;}
var self=this;var query=$.trim(self.$control_input.val());var results=self.search(query);var $dropdown_content=self.$dropdown_content;var active_before=self.$activeOption&&hash_key(self.$activeOption.attr('data-value'));n=results.items.length;if(typeof self.settings.maxOptions==='number'){n=Math.min(n,self.settings.maxOptions);}
groups={};groups_order=[];for(i=0;i<n;i++){option=self.options[results.items[i].id];option_html=self.render('option',option);optgroup=option[self.settings.optgroupField]||'';optgroups=$.isArray(optgroup)?optgroup:[optgroup];for(j=0,k=optgroups&&optgroups.length;j<k;j++){optgroup=optgroups[j];if(!self.optgroups.hasOwnProperty(optgroup)){optgroup='';}
if(!groups.hasOwnProperty(optgroup)){groups[optgroup]=document.createDocumentFragment();groups_order.push(optgroup);}
groups[optgroup].appendChild(option_html);}}
if(this.settings.lockOptgroupOrder){groups_order.sort(function(a,b){var a_order=self.optgroups[a].$order||0;var b_order=self.optgroups[b].$order||0;return a_order-b_order;});}
html=document.createDocumentFragment();for(i=0,n=groups_order.length;i<n;i++){optgroup=groups_order[i];if(self.optgroups.hasOwnProperty(optgroup)&&groups[optgroup].childNodes.length){html_children=document.createDocumentFragment();html_children.appendChild(self.render('optgroup_header',self.optgroups[optgroup]));html_children.appendChild(groups[optgroup]);html.appendChild(self.render('optgroup',$.extend({},self.optgroups[optgroup],{html:domToString(html_children),dom:html_children})));}else{html.appendChild(groups[optgroup]);}}
$dropdown_content.html(html);if(self.settings.highlight){$dropdown_content.removeHighlight();if(results.query.length&&results.tokens.length){for(i=0,n=results.tokens.length;i<n;i++){highlight($dropdown_content,results.tokens[i].regex);}}}
if(!self.settings.hideSelected){for(i=0,n=self.items.length;i<n;i++){self.getOption(self.items[i]).addClass('selected');}}
has_create_option=self.canCreate(query);if(has_create_option){$dropdown_content.prepend(self.render('option_create',{input:query}));$create=$($dropdown_content[0].childNodes[0]);}
self.hasOptions=results.items.length>0||has_create_option;if(self.hasOptions){if(results.items.length>0){$active_before=active_before&&self.getOption(active_before);if($active_before&&$active_before.length){$active=$active_before;}else if(self.settings.mode==='single'&&self.items.length){$active=self.getOption(self.items[0]);}
if(!$active||!$active.length){if($create&&!self.settings.addPrecedence){$active=self.getAdjacentOption($create,1);}else{$active=$dropdown_content.find('[data-selectable]:first');}}}else{$active=$create;}
self.setActiveOption($active);if(triggerDropdown&&!self.isOpen){self.open();}}else{self.setActiveOption(null);if(triggerDropdown&&self.isOpen){self.close();}}},addOption:function(data){var i,n,value,self=this;if($.isArray(data)){for(i=0,n=data.length;i<n;i++){self.addOption(data[i]);}
return;}
if(value=self.registerOption(data)){self.userOptions[value]=true;self.lastQuery=null;self.trigger('option_add',value,data);}},registerOption:function(data){var key=hash_key(data[this.settings.valueField]);if(typeof key==='undefined'||key===null||this.options.hasOwnProperty(key))return false;data.$order=data.$order||++this.order;this.options[key]=data;return key;},registerOptionGroup:function(data){var key=hash_key(data[this.settings.optgroupValueField]);if(!key)return false;data.$order=data.$order||++this.order;this.optgroups[key]=data;return key;},addOptionGroup:function(id,data){data[this.settings.optgroupValueField]=id;if(id=this.registerOptionGroup(data)){this.trigger('optgroup_add',id,data);}},removeOptionGroup:function(id){if(this.optgroups.hasOwnProperty(id)){delete this.optgroups[id];this.renderCache={};this.trigger('optgroup_remove',id);}},clearOptionGroups:function(){this.optgroups={};this.renderCache={};this.trigger('optgroup_clear');},updateOption:function(value,data){var self=this;var $item,$item_new;var value_new,index_item,cache_items,cache_options,order_old;value=hash_key(value);value_new=hash_key(data[self.settings.valueField]);if(value===null)return;if(!self.options.hasOwnProperty(value))return;if(typeof value_new!=='string')throw new Error('Value must be set in option data');order_old=self.options[value].$order;if(value_new!==value){delete self.options[value];index_item=self.items.indexOf(value);if(index_item!==-1){self.items.splice(index_item,1,value_new);}}
data.$order=data.$order||order_old;self.options[value_new]=data;cache_items=self.renderCache['item'];cache_options=self.renderCache['option'];if(cache_items){delete cache_items[value];delete cache_items[value_new];}
if(cache_options){delete cache_options[value];delete cache_options[value_new];}
if(self.items.indexOf(value_new)!==-1){$item=self.getItem(value);$item_new=$(self.render('item',data));if($item.hasClass('active'))$item_new.addClass('active');$item.replaceWith($item_new);}
self.lastQuery=null;if(self.isOpen){self.refreshOptions(false);}},removeOption:function(value,silent){var self=this;value=hash_key(value);var cache_items=self.renderCache['item'];var cache_options=self.renderCache['option'];if(cache_items)delete cache_items[value];if(cache_options)delete cache_options[value];delete self.userOptions[value];delete self.options[value];self.lastQuery=null;self.trigger('option_remove',value);self.removeItem(value,silent);},clearOptions:function(){var self=this;self.loadedSearches={};self.userOptions={};self.renderCache={};var options=self.options;$.each(self.options,function(key,value){if(self.items.indexOf(key)==-1){delete options[key];}});self.options=self.sifter.items=options;self.lastQuery=null;self.trigger('option_clear');},getOption:function(value){return this.getElementWithValue(value,this.$dropdown_content.find('[data-selectable]'));},getAdjacentOption:function($option,direction){var $options=this.$dropdown.find('[data-selectable]');var index=$options.index($option)+direction;return index>=0&&index<$options.length?$options.eq(index):$();},getElementWithValue:function(value,$els){value=hash_key(value);if(typeof value!=='undefined'&&value!==null){for(var i=0,n=$els.length;i<n;i++){if($els[i].getAttribute('data-value')===value){return $($els[i]);}}}
return $();},getItem:function(value){return this.getElementWithValue(value,this.$control.children());},addItems:function(values,silent){this.buffer=document.createDocumentFragment();var childNodes=this.$control[0].childNodes;for(var i=0;i<childNodes.length;i++){this.buffer.appendChild(childNodes[i]);}
var items=$.isArray(values)?values:[values];for(var i=0,n=items.length;i<n;i++){this.isPending=(i<n-1);this.addItem(items[i],silent);}
var control=this.$control[0];control.insertBefore(this.buffer,control.firstChild);this.buffer=null;},addItem:function(value,silent){var events=silent?[]:['change'];debounce_events(this,events,function(){var $item,$option,$options;var self=this;var inputMode=self.settings.mode;var i,active,value_next,wasFull;value=hash_key(value);if(self.items.indexOf(value)!==-1){if(inputMode==='single')self.close();return;}
if(!self.options.hasOwnProperty(value))return;if(inputMode==='single')self.clear(silent);if(inputMode==='multi'&&self.isFull())return;$item=$(self.render('item',self.options[value]));wasFull=self.isFull();self.items.splice(self.caretPos,0,value);self.insertAtCaret($item);if(!self.isPending||(!wasFull&&self.isFull())){self.refreshState();}
if(self.isSetup){$options=self.$dropdown_content.find('[data-selectable]');if(!self.isPending){$option=self.getOption(value);value_next=self.getAdjacentOption($option,1).attr('data-value');self.refreshOptions(self.isFocused&&inputMode!=='single');if(value_next){self.setActiveOption(self.getOption(value_next));}}
if(!$options.length||self.isFull()){self.close();}else if(!self.isPending){self.positionDropdown();}
self.updatePlaceholder();self.trigger('item_add',value,$item);if(!self.isPending){self.updateOriginalInput({silent:silent});}}});},removeItem:function(value,silent){var self=this;var $item,i,idx;$item=(value instanceof $)?value:self.getItem(value);value=hash_key($item.attr('data-value'));i=self.items.indexOf(value);if(i!==-1){$item.remove();if($item.hasClass('active')){idx=self.$activeItems.indexOf($item[0]);self.$activeItems.splice(idx,1);}
self.items.splice(i,1);self.lastQuery=null;if(!self.settings.persist&&self.userOptions.hasOwnProperty(value)){self.removeOption(value,silent);}
if(i<self.caretPos){self.setCaret(self.caretPos-1);}
self.refreshState();self.updatePlaceholder();self.updateOriginalInput({silent:silent});self.positionDropdown();self.trigger('item_remove',value,$item);}},createItem:function(input,triggerDropdown){var self=this;var caret=self.caretPos;input=input||$.trim(self.$control_input.val()||'');var callback=arguments[arguments.length-1];if(typeof callback!=='function')callback=function(){};if(typeof triggerDropdown!=='boolean'){triggerDropdown=true;}
if(!self.canCreate(input)){callback();return false;}
self.lock();var setup=(typeof self.settings.create==='function')?this.settings.create:function(input){var data={};data[self.settings.labelField]=input;data[self.settings.valueField]=input;return data;};var create=once(function(data){self.unlock();if(!data||typeof data!=='object')return callback();var value=hash_key(data[self.settings.valueField]);if(typeof value!=='string')return callback();self.setTextboxValue('');self.addOption(data);self.setCaret(caret);self.addItem(value);self.refreshOptions(triggerDropdown&&self.settings.mode!=='single');callback(data);});var output=setup.apply(this,[input,create]);if(typeof output!=='undefined'){create(output);}
return true;},refreshItems:function(){this.lastQuery=null;if(this.isSetup){this.addItem(this.items);}
this.refreshState();this.updateOriginalInput();},refreshState:function(){this.refreshValidityState();this.refreshClasses();},refreshValidityState:function(){if(!this.isRequired)return false;var invalid=!this.items.length;this.isInvalid=invalid;this.$control_input.prop('required',invalid);this.$input.prop('required',!invalid);},refreshClasses:function(){var self=this;var isFull=self.isFull();var isLocked=self.isLocked;self.$wrapper.toggleClass('rtl',self.rtl);self.$control.toggleClass('focus',self.isFocused).toggleClass('disabled',self.isDisabled).toggleClass('required',self.isRequired).toggleClass('invalid',self.isInvalid).toggleClass('locked',isLocked).toggleClass('full',isFull).toggleClass('not-full',!isFull).toggleClass('input-active',self.isFocused&&!self.isInputHidden).toggleClass('dropdown-active',self.isOpen).toggleClass('has-options',!$.isEmptyObject(self.options)).toggleClass('has-items',self.items.length>0);self.$control_input.data('grow',!isFull&&!isLocked);},isFull:function(){return this.settings.maxItems!==null&&this.items.length>=this.settings.maxItems;},updateOriginalInput:function(opts){var i,n,options,label,self=this;opts=opts||{};if(self.tagType===TAG_SELECT){options=[];for(i=0,n=self.items.length;i<n;i++){label=self.options[self.items[i]][self.settings.labelField]||'';options.push('<option value="'+escape_html(self.items[i])+'" selected="selected">'+escape_html(label)+'</option>');}
if(!options.length&&!this.$input.attr('multiple')){options.push('<option value="" selected="selected"></option>');}
self.$input.html(options.join(''));}else{self.$input.val(self.getValue());self.$input.attr('value',self.$input.val());}
if(self.isSetup){if(!opts.silent){self.trigger('change',self.$input.val());}}},updatePlaceholder:function(){if(!this.settings.placeholder)return;var $input=this.$control_input;if(this.items.length){$input.removeAttr('placeholder');}else{$input.attr('placeholder',this.settings.placeholder);}
$input.triggerHandler('update',{force:true});},open:function(){var self=this;if(self.isLocked||self.isOpen||(self.settings.mode==='multi'&&self.isFull()))return;self.focus();self.isOpen=true;self.refreshState();self.$dropdown.css({visibility:'hidden',display:'block'});self.positionDropdown();self.$dropdown.css({visibility:'visible'});self.trigger('dropdown_open',self.$dropdown);},close:function(){var self=this;var trigger=self.isOpen;if(self.settings.mode==='single'&&self.items.length){self.hideInput();if(!self.isBlurring){self.$control_input.blur();}}
self.isOpen=false;self.$dropdown.hide();self.setActiveOption(null);self.refreshState();if(trigger)self.trigger('dropdown_close',self.$dropdown);},positionDropdown:function(){var $control=this.$control;var offset=this.settings.dropdownParent==='body'?$control.offset():$control.position();offset.top+=$control.outerHeight(true);this.$dropdown.css({width:$control[0].getBoundingClientRect().width,top:offset.top,left:offset.left});},clear:function(silent){var self=this;if(!self.items.length)return;self.$control.children(':not(input)').remove();self.items=[];self.lastQuery=null;self.setCaret(0);self.setActiveItem(null);self.updatePlaceholder();self.updateOriginalInput({silent:silent});self.refreshState();self.showInput();self.trigger('clear');},insertAtCaret:function($el){var caret=Math.min(this.caretPos,this.items.length);var el=$el[0];var target=this.buffer||this.$control[0];if(caret===0){target.insertBefore(el,target.firstChild);}else{target.insertBefore(el,target.childNodes[caret]);}
this.setCaret(caret+1);},deleteSelection:function(e){var i,n,direction,selection,values,caret,option_select,$option_select,$tail;var self=this;direction=(e&&e.keyCode===KEY_BACKSPACE)?-1:1;selection=getSelection(self.$control_input[0]);if(self.$activeOption&&!self.settings.hideSelected){option_select=self.getAdjacentOption(self.$activeOption,-1).attr('data-value');}
values=[];if(self.$activeItems.length){$tail=self.$control.children('.active:'+(direction>0?'last':'first'));caret=self.$control.children(':not(input)').index($tail);if(direction>0){caret++;}
for(i=0,n=self.$activeItems.length;i<n;i++){values.push($(self.$activeItems[i]).attr('data-value'));}
if(e){e.preventDefault();e.stopPropagation();}}else if((self.isFocused||self.settings.mode==='single')&&self.items.length){if(direction<0&&selection.start===0&&selection.length===0){values.push(self.items[self.caretPos-1]);}else if(direction>0&&selection.start===self.$control_input.val().length){values.push(self.items[self.caretPos]);}}
if(!values.length||(typeof self.settings.onDelete==='function'&&self.settings.onDelete.apply(self,[values])===false)){return false;}
if(typeof caret!=='undefined'){self.setCaret(caret);}
while(values.length){self.removeItem(values.pop());}
self.showInput();self.positionDropdown();self.refreshOptions(true);if(option_select){$option_select=self.getOption(option_select);if($option_select.length){self.setActiveOption($option_select);}}
return true;},advanceSelection:function(direction,e){var tail,selection,idx,valueLength,cursorAtEdge,$tail;var self=this;if(direction===0)return;if(self.rtl)direction*=-1;tail=direction>0?'last':'first';selection=getSelection(self.$control_input[0]);if(self.isFocused&&!self.isInputHidden){valueLength=self.$control_input.val().length;cursorAtEdge=direction<0?selection.start===0&&selection.length===0:selection.start===valueLength;if(cursorAtEdge&&!valueLength){self.advanceCaret(direction,e);}}else{$tail=self.$control.children('.active:'+tail);if($tail.length){idx=self.$control.children(':not(input)').index($tail);self.setActiveItem(null);self.setCaret(direction>0?idx+1:idx);}}},advanceCaret:function(direction,e){var self=this,fn,$adj;if(direction===0)return;fn=direction>0?'next':'prev';if(self.isShiftDown){$adj=self.$control_input[fn]();if($adj.length){self.hideInput();self.setActiveItem($adj);e&&e.preventDefault();}}else{self.setCaret(self.caretPos+direction);}},setCaret:function(i){var self=this;if(self.settings.mode==='single'){i=self.items.length;}else{i=Math.max(0,Math.min(self.items.length,i));}
if(!self.isPending){var j,n,fn,$children,$child;$children=self.$control.children(':not(input)');for(j=0,n=$children.length;j<n;j++){$child=$($children[j]).detach();if(j<i){self.$control_input.before($child);}else{self.$control.append($child);}}}
self.caretPos=i;},lock:function(){this.close();this.isLocked=true;this.refreshState();},unlock:function(){this.isLocked=false;this.refreshState();},disable:function(){var self=this;self.$input.prop('disabled',true);self.$control_input.prop('disabled',true).prop('tabindex',-1);self.isDisabled=true;self.lock();},enable:function(){var self=this;self.$input.prop('disabled',false);self.$control_input.prop('disabled',false).prop('tabindex',self.tabIndex);self.isDisabled=false;self.unlock();},destroy:function(){var self=this;var eventNS=self.eventNS;var revertSettings=self.revertSettings;self.trigger('destroy');self.off();self.$wrapper.remove();self.$dropdown.remove();self.$input.html('').append(revertSettings.$children).removeAttr('tabindex').removeClass('selectized').attr({tabindex:revertSettings.tabindex}).show();self.$control_input.removeData('grow');self.$input.removeData('selectize');if(--Selectize.count==0&&Selectize.$testInput){Selectize.$testInput.remove();Selectize.$testInput=undefined;}
$(window).off(eventNS);$(document).off(eventNS);$(document.body).off(eventNS);delete self.$input[0].selectize;},render:function(templateName,data){var value,id,label;var html='';var cache=false;var self=this;var regex_tag=/^[\t \r\n]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i;if(templateName==='option'||templateName==='item'){value=hash_key(data[self.settings.valueField]);cache=!!value;}
if(cache){if(!isset(self.renderCache[templateName])){self.renderCache[templateName]={};}
if(self.renderCache[templateName].hasOwnProperty(value)){return self.renderCache[templateName][value];}}
html=$(self.settings.render[templateName].apply(this,[data,escape_html]));if(templateName==='option'||templateName==='option_create'){if(!data[self.settings.disabledField]){html.attr('data-selectable','');}}
else if(templateName==='optgroup'){id=data[self.settings.optgroupValueField]||'';html.attr('data-group',id);if(data[self.settings.disabledField]){html.attr('data-disabled','');}}
if(templateName==='option'||templateName==='item'){html.attr('data-value',value||'');}
if(cache){self.renderCache[templateName][value]=html[0];}
return html[0];},clearCache:function(templateName){var self=this;if(typeof templateName==='undefined'){self.renderCache={};}else{delete self.renderCache[templateName];}},canCreate:function(input){var self=this;if(!self.settings.create)return false;var filter=self.settings.createFilter;return input.length&&(typeof filter!=='function'||filter.apply(self,[input]))&&(typeof filter!=='string'||new RegExp(filter).test(input))&&(!(filter instanceof RegExp)||filter.test(input));}});Selectize.count=0;Selectize.defaults={options:[],optgroups:[],plugins:[],delimiter:',',splitOn:null,persist:true,diacritics:true,create:false,createOnBlur:false,createFilter:null,highlight:true,openOnFocus:true,maxOptions:1000,maxItems:null,hideSelected:null,addPrecedence:false,selectOnTab:false,preload:false,allowEmptyOption:false,closeAfterSelect:false,scrollDuration:60,loadThrottle:300,loadingClass:'loading',dataAttr:'data-data',optgroupField:'optgroup',valueField:'value',labelField:'text',disabledField:'disabled',optgroupLabelField:'label',optgroupValueField:'value',lockOptgroupOrder:false,sortField:'$order',searchField:['text'],searchConjunction:'and',mode:null,wrapperClass:'selectize-control',inputClass:'selectize-input',dropdownClass:'selectize-dropdown',dropdownContentClass:'selectize-dropdown-content',dropdownParent:null,copyClassesToDropdown:true,render:{}};$.fn.selectize=function(settings_user){var defaults=$.fn.selectize.defaults;var settings=$.extend({},defaults,settings_user);var attr_data=settings.dataAttr;var field_label=settings.labelField;var field_value=settings.valueField;var field_disabled=settings.disabledField;var field_optgroup=settings.optgroupField;var field_optgroup_label=settings.optgroupLabelField;var field_optgroup_value=settings.optgroupValueField;var init_textbox=function($input,settings_element){var i,n,values,option;var data_raw=$input.attr(attr_data);if(!data_raw){var value=$.trim($input.val()||'');if(!settings.allowEmptyOption&&!value.length)return;values=value.split(settings.delimiter);for(i=0,n=values.length;i<n;i++){option={};option[field_label]=values[i];option[field_value]=values[i];settings_element.options.push(option);}
settings_element.items=values;}else{settings_element.options=JSON.parse(data_raw);for(i=0,n=settings_element.options.length;i<n;i++){settings_element.items.push(settings_element.options[i][field_value]);}}};var init_select=function($input,settings_element){var i,n,tagName,$children,order=0;var options=settings_element.options;var optionsMap={};var readData=function($el){var data=attr_data&&$el.attr(attr_data);if(typeof data==='string'&&data.length){return JSON.parse(data);}
return null;};var addOption=function($option,group){$option=$($option);var value=hash_key($option.val());if(!value&&!settings.allowEmptyOption)return;if(optionsMap.hasOwnProperty(value)){if(group){var arr=optionsMap[value][field_optgroup];if(!arr){optionsMap[value][field_optgroup]=group;}else if(!$.isArray(arr)){optionsMap[value][field_optgroup]=[arr,group];}else{arr.push(group);}}
return;}
var option=readData($option)||{};option[field_label]=option[field_label]||$option.text();option[field_value]=option[field_value]||value;option[field_disabled]=option[field_disabled]||$option.prop('disabled');option[field_optgroup]=option[field_optgroup]||group;optionsMap[value]=option;options.push(option);if($option.is(':selected')){settings_element.items.push(value);}};var addGroup=function($optgroup){var i,n,id,optgroup,$options;$optgroup=$($optgroup);id=$optgroup.attr('label');if(id){optgroup=readData($optgroup)||{};optgroup[field_optgroup_label]=id;optgroup[field_optgroup_value]=id;optgroup[field_disabled]=$optgroup.prop('disabled');settings_element.optgroups.push(optgroup);}
$options=$('option',$optgroup);for(i=0,n=$options.length;i<n;i++){addOption($options[i],id);}};settings_element.maxItems=$input.attr('multiple')?null:1;$children=$input.children();for(i=0,n=$children.length;i<n;i++){tagName=$children[i].tagName.toLowerCase();if(tagName==='optgroup'){addGroup($children[i]);}else if(tagName==='option'){addOption($children[i]);}}};return this.each(function(){if(this.selectize)return;var instance;var $input=$(this);var tag_name=this.tagName.toLowerCase();var placeholder=$input.attr('placeholder')||$input.attr('data-placeholder');if(!placeholder&&!settings.allowEmptyOption){placeholder=$input.children('option[value=""]').text();}
var settings_element={'placeholder':placeholder,'options':[],'optgroups':[],'items':[]};if(tag_name==='select'){init_select($input,settings_element);}else{init_textbox($input,settings_element);}
instance=new Selectize($input,$.extend(true,{},defaults,settings_element,settings_user));});};$.fn.selectize.defaults=Selectize.defaults;$.fn.selectize.support={validity:SUPPORTS_VALIDITY_API};Selectize.define('drag_drop',function(options){if(!$.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if(this.settings.mode!=='multi')return;var self=this;self.lock=(function(){var original=self.lock;return function(){var sortable=self.$control.data('sortable');if(sortable)sortable.disable();return original.apply(self,arguments);};})();self.unlock=(function(){var original=self.unlock;return function(){var sortable=self.$control.data('sortable');if(sortable)sortable.enable();return original.apply(self,arguments);};})();self.setup=(function(){var original=self.setup;return function(){original.apply(this,arguments);var $control=self.$control.sortable({items:'[data-value]',forcePlaceholderSize:true,disabled:self.isLocked,start:function(e,ui){ui.placeholder.css('width',ui.helper.css('width'));$control.css({overflow:'visible'});},stop:function(){$control.css({overflow:'hidden'});var active=self.$activeItems?self.$activeItems.slice():null;var values=[];$control.children('[data-value]').each(function(){values.push($(this).attr('data-value'));});self.setValue(values);self.setActiveItem(active);}});};})();});Selectize.define('dropdown_header',function(options){var self=this;options=$.extend({title:'Untitled',headerClass:'selectize-dropdown-header',titleRowClass:'selectize-dropdown-header-title',labelClass:'selectize-dropdown-header-label',closeClass:'selectize-dropdown-header-close',html:function(data){return('<div class="'+data.headerClass+'">'+'<div class="'+data.titleRowClass+'">'+'<span class="'+data.labelClass+'">'+data.title+'</span>'+'<a href="javascript:void(0)" class="'+data.closeClass+'">&times;</a>'+'</div>'+'</div>');}},options);self.setup=(function(){var original=self.setup;return function(){original.apply(self,arguments);self.$dropdown_header=$(options.html(options));self.$dropdown.prepend(self.$dropdown_header);};})();});Selectize.define('optgroup_columns',function(options){var self=this;options=$.extend({equalizeWidth:true,equalizeHeight:true},options);this.getAdjacentOption=function($option,direction){var $options=$option.closest('[data-group]').find('[data-selectable]');var index=$options.index($option)+direction;return index>=0&&index<$options.length?$options.eq(index):$();};this.onKeyDown=(function(){var original=self.onKeyDown;return function(e){var index,$option,$options,$optgroup;if(this.isOpen&&(e.keyCode===KEY_LEFT||e.keyCode===KEY_RIGHT)){self.ignoreHover=true;$optgroup=this.$activeOption.closest('[data-group]');index=$optgroup.find('[data-selectable]').index(this.$activeOption);if(e.keyCode===KEY_LEFT){$optgroup=$optgroup.prev('[data-group]');}else{$optgroup=$optgroup.next('[data-group]');}
$options=$optgroup.find('[data-selectable]');$option=$options.eq(Math.min($options.length-1,index));if($option.length){this.setActiveOption($option);}
return;}
return original.apply(this,arguments);};})();var getScrollbarWidth=function(){var div;var width=getScrollbarWidth.width;var doc=document;if(typeof width==='undefined'){div=doc.createElement('div');div.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>';div=div.firstChild;doc.body.appendChild(div);width=getScrollbarWidth.width=div.offsetWidth-div.clientWidth;doc.body.removeChild(div);}
return width;};var equalizeSizes=function(){var i,n,height_max,width,width_last,width_parent,$optgroups;$optgroups=$('[data-group]',self.$dropdown_content);n=$optgroups.length;if(!n||!self.$dropdown_content.width())return;if(options.equalizeHeight){height_max=0;for(i=0;i<n;i++){height_max=Math.max(height_max,$optgroups.eq(i).height());}
$optgroups.css({height:height_max});}
if(options.equalizeWidth){width_parent=self.$dropdown_content.innerWidth()-getScrollbarWidth();width=Math.round(width_parent/n);$optgroups.css({width:width});if(n>1){width_last=width_parent-width*(n-1);$optgroups.eq(n-1).css({width:width_last});}}};if(options.equalizeHeight||options.equalizeWidth){hook.after(this,'positionDropdown',equalizeSizes);hook.after(this,'refreshOptions',equalizeSizes);}});Selectize.define('remove_button',function(options){options=$.extend({label:'&times;',title:'Remove',className:'remove',append:true},options);var singleClose=function(thisRef,options){options.className='remove-single';var self=thisRef;var html='<a href="javascript:void(0)" class="'+options.className+'" tabindex="-1" title="'+escape_html(options.title)+'">'+options.label+'</a>';var append=function(html_container,html_element){return $('<span>').append(html_container).append(html_element);};thisRef.setup=(function(){var original=self.setup;return function(){if(options.append){var id=$(self.$input.context).attr('id');var selectizer=$('#'+id);var render_item=self.settings.render.item;self.settings.render.item=function(data){return append(render_item.apply(thisRef,arguments),html);};}
original.apply(thisRef,arguments);thisRef.$control.on('click','.'+options.className,function(e){e.preventDefault();if(self.isLocked)return;self.clear();});};})();};var multiClose=function(thisRef,options){var self=thisRef;var html='<a href="javascript:void(0)" class="'+options.className+'" tabindex="-1" title="'+escape_html(options.title)+'">'+options.label+'</a>';var append=function(html_container,html_element){var pos=html_container.search(/(<\/[^>]+>\s*)$/);return html_container.substring(0,pos)+html_element+html_container.substring(pos);};thisRef.setup=(function(){var original=self.setup;return function(){if(options.append){var render_item=self.settings.render.item;self.settings.render.item=function(data){return append(render_item.apply(thisRef,arguments),html);};}
original.apply(thisRef,arguments);thisRef.$control.on('click','.'+options.className,function(e){e.preventDefault();if(self.isLocked)return;var $item=$(e.currentTarget).parent();self.setActiveItem($item);if(self.deleteSelection()){self.setCaret(self.items.length);}});};})();};if(this.settings.mode==='single'){singleClose(this,options);return;}else{multiClose(this,options);}});Selectize.define('restore_on_backspace',function(options){var self=this;options.text=options.text||function(option){return option[this.settings.labelField];};this.onKeyDown=(function(){var original=self.onKeyDown;return function(e){var index,option;if(e.keyCode===KEY_BACKSPACE&&this.$control_input.val()===''&&!this.$activeItems.length){index=this.caretPos-1;if(index>=0&&index<this.items.length){option=this.options[this.items[index]];if(this.deleteSelection(e)){this.setTextboxValue(options.text.apply(this,[option]));this.refreshOptions(true);}
e.preventDefault();return;}}
return original.apply(this,arguments);};})();});return Selectize;}));
(function($){'use strict';$('[data-module="property-list-filter"]').each(function(){new CN.GridFilter($(this));});var multiSelectEl=$('.js-filter[multiple]').selectize();$(document).on('click','.selectize-input .item',function(e){var selectedValue=$(this).attr('data-value');multiSelectEl[0].selectize.removeItem(selectedValue);multiSelectEl[0].selectize.refreshItems();multiSelectEl[0].selectize.refreshOptions();});})(jQuery);
(function($){'use strict';function getParameterByName(name,url){if(!url){url=window.location.href;}
name=name.replace(/[\[\]]/g,"\\$&");var regex=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)"),results=regex.exec(url);if(!results)return null;if(!results[2])return'';return decodeURIComponent(results[2].replace(/\+/g," "));}
$('[data-module="grid-filter"]').each(function(){new CN.GridFilter($(this));});var filterGrid=getParameterByName('filter-grid');if(''!==filterGrid){var foundOption=false;$('[data-module="grid-filter"] .js-filter').each(function(){$.each($(this).children('option'),function(){if(filterGrid===$(this).val()){$(this).attr("selected","selected");foundOption=true;return;}});if(foundOption){$(this).trigger('change');return;}});}})(jQuery);
(function(){var Instafeed;Instafeed=(function(){function Instafeed(params,context){var option,value;this.options={target:'instafeed',get:'popular',resolution:'thumbnail',sortBy:'none',links:true,mock:false,useHttp:false};if(typeof params==='object'){for(option in params){value=params[option];this.options[option]=value;}}
this.context=context!=null?context:this;this.unique=this._genKey();}
Instafeed.prototype.hasNext=function(){return typeof this.context.nextUrl==='string'&&this.context.nextUrl.length>0;};Instafeed.prototype.next=function(){if(!this.hasNext()){return false;}
return this.run(this.context.nextUrl);};Instafeed.prototype.run=function(url){var header,instanceName,script;if(typeof this.options.clientId!=='string'){if(typeof this.options.accessToken!=='string'){throw new Error("Missing clientId or accessToken.");}}
if(typeof this.options.accessToken!=='string'){if(typeof this.options.clientId!=='string'){throw new Error("Missing clientId or accessToken.");}}
if((this.options.before!=null)&&typeof this.options.before==='function'){this.options.before.call(this);}
if(typeof document!=="undefined"&&document!==null){script=document.createElement('script');script.id='instafeed-fetcher';script.src=url||this._buildUrl();header=document.getElementsByTagName('head');header[0].appendChild(script);instanceName="instafeedCache"+this.unique;window[instanceName]=new Instafeed(this.options,this);window[instanceName].unique=this.unique;}
return true;};Instafeed.prototype.parse=function(response){var anchor,childNodeCount,childNodeIndex,childNodesArr,e,eMsg,fragment,header,htmlString,httpProtocol,i,image,imageObj,imageString,imageUrl,images,img,imgHeight,imgOrient,imgUrl,imgWidth,instanceName,j,k,len,len1,len2,node,parsedLimit,reverse,sortSettings,targetEl,tmpEl;if(typeof response!=='object'){if((this.options.error!=null)&&typeof this.options.error==='function'){this.options.error.call(this,'Invalid JSON data');return false;}else{throw new Error('Invalid JSON response');}}
if(response.meta.code!==200){if((this.options.error!=null)&&typeof this.options.error==='function'){this.options.error.call(this,response.meta.error_message);return false;}else{throw new Error("Error from Instagram: "+response.meta.error_message);}}
if(response.data.length===0){if((this.options.error!=null)&&typeof this.options.error==='function'){this.options.error.call(this,'No images were returned from Instagram');return false;}else{throw new Error('No images were returned from Instagram');}}
if((this.options.success!=null)&&typeof this.options.success==='function'){this.options.success.call(this,response);}
this.context.nextUrl='';if(response.pagination!=null){this.context.nextUrl=response.pagination.next_url;}
if(this.options.sortBy!=='none'){if(this.options.sortBy==='random'){sortSettings=['','random'];}else{sortSettings=this.options.sortBy.split('-');}
reverse=sortSettings[0]==='least'?true:false;switch(sortSettings[1]){case'random':response.data.sort(function(){return 0.5-Math.random();});break;case'recent':response.data=this._sortBy(response.data,'created_time',reverse);break;case'liked':response.data=this._sortBy(response.data,'likes.count',reverse);break;case'commented':response.data=this._sortBy(response.data,'comments.count',reverse);break;default:throw new Error("Invalid option for sortBy: '"+this.options.sortBy+"'.");}}
if((typeof document!=="undefined"&&document!==null)&&this.options.mock===false){images=response.data;parsedLimit=parseInt(this.options.limit,10);if((this.options.limit!=null)&&images.length>parsedLimit){images=images.slice(0,parsedLimit);}
fragment=document.createDocumentFragment();if((this.options.filter!=null)&&typeof this.options.filter==='function'){images=this._filter(images,this.options.filter);}
if((this.options.template!=null)&&typeof this.options.template==='string'){htmlString='';imageString='';imgUrl='';tmpEl=document.createElement('div');for(i=0,len=images.length;i<len;i++){image=images[i];imageObj=image.images[this.options.resolution];if(typeof imageObj!=='object'){eMsg="No image found for resolution: "+this.options.resolution+".";throw new Error(eMsg);}
imgWidth=imageObj.width;imgHeight=imageObj.height;imgOrient="square";if(imgWidth>imgHeight){imgOrient="landscape";}
if(imgWidth<imgHeight){imgOrient="portrait";}
imageUrl=imageObj.url;httpProtocol=window.location.protocol.indexOf("http")>=0;if(httpProtocol&&!this.options.useHttp){imageUrl=imageUrl.replace(/https?:\/\//,'//');}
imageString=this._makeTemplate(this.options.template,{model:image,id:image.id,link:image.link,type:image.type,image:imageUrl,width:imgWidth,height:imgHeight,orientation:imgOrient,caption:this._getObjectProperty(image,'caption.text'),likes:image.likes.count,comments:image.comments.count,location:this._getObjectProperty(image,'location.name')});htmlString+=imageString;}
tmpEl.innerHTML=htmlString;childNodesArr=[];childNodeIndex=0;childNodeCount=tmpEl.childNodes.length;while(childNodeIndex<childNodeCount){childNodesArr.push(tmpEl.childNodes[childNodeIndex]);childNodeIndex+=1;}
for(j=0,len1=childNodesArr.length;j<len1;j++){node=childNodesArr[j];fragment.appendChild(node);}}else{for(k=0,len2=images.length;k<len2;k++){image=images[k];img=document.createElement('img');imageObj=image.images[this.options.resolution];if(typeof imageObj!=='object'){eMsg="No image found for resolution: "+this.options.resolution+".";throw new Error(eMsg);}
imageUrl=imageObj.url;httpProtocol=window.location.protocol.indexOf("http")>=0;if(httpProtocol&&!this.options.useHttp){imageUrl=imageUrl.replace(/https?:\/\//,'//');}
img.src=imageUrl;if(this.options.links===true){anchor=document.createElement('a');anchor.href=image.link;anchor.appendChild(img);fragment.appendChild(anchor);}else{fragment.appendChild(img);}}}
targetEl=this.options.target;if(typeof targetEl==='string'){targetEl=document.getElementById(targetEl);}
if(targetEl==null){eMsg="No element with id=\""+this.options.target+"\" on page.";throw new Error(eMsg);}
targetEl.appendChild(fragment);header=document.getElementsByTagName('head')[0];header.removeChild(document.getElementById('instafeed-fetcher'));instanceName="instafeedCache"+this.unique;window[instanceName]=void 0;try{delete window[instanceName];}catch(_error){e=_error;}}
if((this.options.after!=null)&&typeof this.options.after==='function'){this.options.after.call(this);}
return true;};Instafeed.prototype._buildUrl=function(){var base,endpoint,final;base="https://api.instagram.com/v1";switch(this.options.get){case"popular":endpoint="media/popular";break;case"tagged":if(!this.options.tagName){throw new Error("No tag name specified. Use the 'tagName' option.");}
endpoint="tags/"+this.options.tagName+"/media/recent";break;case"location":if(!this.options.locationId){throw new Error("No location specified. Use the 'locationId' option.");}
endpoint="locations/"+this.options.locationId+"/media/recent";break;case"user":if(!this.options.userId){throw new Error("No user specified. Use the 'userId' option.");}
endpoint="users/"+this.options.userId+"/media/recent";break;default:throw new Error("Invalid option for get: '"+this.options.get+"'.");}
final=base+"/"+endpoint;if(this.options.accessToken!=null){final+="?access_token="+this.options.accessToken;}else{final+="?client_id="+this.options.clientId;}
if(this.options.limit!=null){final+="&count="+this.options.limit;}
final+="&callback=instafeedCache"+this.unique+".parse";return final;};Instafeed.prototype._genKey=function(){var S4;S4=function(){return(((1+Math.random())*0x10000)|0).toString(16).substring(1);};return""+(S4())+(S4())+(S4())+(S4());};Instafeed.prototype._makeTemplate=function(template,data){var output,pattern,ref,varName,varValue;pattern=/(?:\{{2})([\w\[\]\.]+)(?:\}{2})/;output=template;while(pattern.test(output)){varName=output.match(pattern)[1];varValue=(ref=this._getObjectProperty(data,varName))!=null?ref:'';output=output.replace(pattern,function(){return""+varValue;});}
return output;};Instafeed.prototype._getObjectProperty=function(object,property){var piece,pieces;property=property.replace(/\[(\w+)\]/g,'.$1');pieces=property.split('.');while(pieces.length){piece=pieces.shift();if((object!=null)&&piece in object){object=object[piece];}else{return null;}}
return object;};Instafeed.prototype._sortBy=function(data,property,reverse){var sorter;sorter=function(a,b){var valueA,valueB;valueA=this._getObjectProperty(a,property);valueB=this._getObjectProperty(b,property);if(reverse){if(valueA>valueB){return 1;}else{return-1;}}
if(valueA<valueB){return 1;}else{return-1;}};data.sort(sorter.bind(this));return data;};Instafeed.prototype._filter=function(images,filter){var filteredImages,fn,i,image,len;filteredImages=[];fn=function(image){if(filter(image)){return filteredImages.push(image);}};for(i=0,len=images.length;i<len;i++){image=images[i];fn(image);}
return filteredImages;};return Instafeed;})();(function(root,factory){if(typeof define==='function'&&define.amd){return define([],factory);}else if(typeof module==='object'&&module.exports){return module.exports=factory();}else{return root.Instafeed=factory();}})(this,function(){return Instafeed;});}).call(this);
(function($){'use strict';$('[data-module="instagram-posts"]').waypoint({handler:function(direction){var el=$(this.element);var feedEl=$(this.element).find('.js-instagram-posts');if(!el.hasClass('has-loaded')){var options=$(this.element).data('module-options');var defaultSettings={get:options.source,accessToken:options.accessToken,limit:options.limit,target:feedEl[0],resolution:'standard_resolution',template:'<li><a class="c-instagram-posts__thumbnail" href="{{link}}" target="_blank" style="background-image: url({{image}})"></a></li>'};var sourceSettings;switch(options.source){case'tagged':sourceSettings={tagName:options.tag};break;case'user':sourceSettings={userId:options.userId};break;case'location':sourceSettings={locationId:options.locationId};break;}
var feed=new Instafeed($.extend(defaultSettings,sourceSettings));feed.run();el.addClass('has-loaded');}},offset:'120%'});})(jQuery);
/*!
 * pickadate.js v3.5.6, 2015/04/20
 * By Amsul, http://amsul.ca
 * Hosted on http://amsul.github.io/pickadate.js
 * Licensed under MIT
 */
(function(factory){if(typeof define=='function'&&define.amd)
define('picker',['jquery'],factory)
else if(typeof exports=='object')
module.exports=factory(require('jquery'))
else this.Picker=factory(jQuery)}(function($){var $window=$(window)
var $document=$(document)
var $html=$(document.documentElement)
var supportsTransitions=document.documentElement.style.transition!=null
function PickerConstructor(ELEMENT,NAME,COMPONENT,OPTIONS){if(!ELEMENT)return PickerConstructor
var
IS_DEFAULT_THEME=false,STATE={id:ELEMENT.id||'P'+Math.abs(~~(Math.random()*new Date()))},SETTINGS=COMPONENT?$.extend(true,{},COMPONENT.defaults,OPTIONS):OPTIONS||{},CLASSES=$.extend({},PickerConstructor.klasses(),SETTINGS.klass),$ELEMENT=$(ELEMENT),PickerInstance=function(){return this.start()},P=PickerInstance.prototype={constructor:PickerInstance,$node:$ELEMENT,start:function(){if(STATE&&STATE.start)return P
STATE.methods={}
STATE.start=true
STATE.open=false
STATE.type=ELEMENT.type
ELEMENT.autofocus=ELEMENT==getActiveElement()
ELEMENT.readOnly=!SETTINGS.editable
ELEMENT.id=ELEMENT.id||STATE.id
if(ELEMENT.type!='text'){ELEMENT.type='text'}
P.component=new COMPONENT(P,SETTINGS)
P.$root=$('<div class="'+CLASSES.picker+'" id="'+ELEMENT.id+'_root" />')
prepareElementRoot()
P.$holder=$(createWrappedComponent()).appendTo(P.$root)
prepareElementHolder()
if(SETTINGS.formatSubmit){prepareElementHidden()}
prepareElement()
if(SETTINGS.containerHidden)$(SETTINGS.containerHidden).append(P._hidden)
else $ELEMENT.after(P._hidden)
if(SETTINGS.container)$(SETTINGS.container).append(P.$root)
else $ELEMENT.after(P.$root)
P.on({start:P.component.onStart,render:P.component.onRender,stop:P.component.onStop,open:P.component.onOpen,close:P.component.onClose,set:P.component.onSet}).on({start:SETTINGS.onStart,render:SETTINGS.onRender,stop:SETTINGS.onStop,open:SETTINGS.onOpen,close:SETTINGS.onClose,set:SETTINGS.onSet})
IS_DEFAULT_THEME=isUsingDefaultTheme(P.$holder[0])
if(ELEMENT.autofocus){P.open()}
return P.trigger('start').trigger('render')},render:function(entireComponent){if(entireComponent){P.$holder=$(createWrappedComponent())
prepareElementHolder()
P.$root.html(P.$holder)}
else P.$root.find('.'+CLASSES.box).html(P.component.nodes(STATE.open))
return P.trigger('render')},stop:function(){if(!STATE.start)return P
P.close()
if(P._hidden){P._hidden.parentNode.removeChild(P._hidden)}
P.$root.remove()
$ELEMENT.removeClass(CLASSES.input).removeData(NAME)
setTimeout(function(){$ELEMENT.off('.'+STATE.id)},0)
ELEMENT.type=STATE.type
ELEMENT.readOnly=false
P.trigger('stop')
STATE.methods={}
STATE.start=false
return P},open:function(dontGiveFocus){if(STATE.open)return P
$ELEMENT.addClass(CLASSES.active)
aria(ELEMENT,'expanded',true)
setTimeout(function(){P.$root.addClass(CLASSES.opened)
aria(P.$root[0],'hidden',false)},0)
if(dontGiveFocus!==false){STATE.open=true
if(IS_DEFAULT_THEME){$html.css('overflow','hidden').css('padding-right','+='+getScrollbarWidth())}
focusPickerOnceOpened()
$document.on('click.'+STATE.id+' focusin.'+STATE.id,function(event){var target=event.target
if(target!=ELEMENT&&target!=document&&event.which!=3){P.close(target===P.$holder[0])}}).on('keydown.'+STATE.id,function(event){var
keycode=event.keyCode,keycodeToMove=P.component.key[keycode],target=event.target
if(keycode==27){P.close(true)}
else if(target==P.$holder[0]&&(keycodeToMove||keycode==13)){event.preventDefault()
if(keycodeToMove){PickerConstructor._.trigger(P.component.key.go,P,[PickerConstructor._.trigger(keycodeToMove)])}
else if(!P.$root.find('.'+CLASSES.highlighted).hasClass(CLASSES.disabled)){P.set('select',P.component.item.highlight)
if(SETTINGS.closeOnSelect){P.close(true)}}}
else if($.contains(P.$root[0],target)&&keycode==13){event.preventDefault()
target.click()}})}
return P.trigger('open')},close:function(giveFocus){if(giveFocus){if(SETTINGS.editable){ELEMENT.focus()}
else{P.$holder.off('focus.toOpen').focus()
setTimeout(function(){P.$holder.on('focus.toOpen',handleFocusToOpenEvent)},0)}}
$ELEMENT.removeClass(CLASSES.active)
aria(ELEMENT,'expanded',false)
setTimeout(function(){P.$root.removeClass(CLASSES.opened+' '+CLASSES.focused)
aria(P.$root[0],'hidden',true)},0)
if(!STATE.open)return P
STATE.open=false
if(IS_DEFAULT_THEME){$html.css('overflow','').css('padding-right','-='+getScrollbarWidth())}
$document.off('.'+STATE.id)
return P.trigger('close')},clear:function(options){return P.set('clear',null,options)},set:function(thing,value,options){var thingItem,thingValue,thingIsObject=$.isPlainObject(thing),thingObject=thingIsObject?thing:{}
options=thingIsObject&&$.isPlainObject(value)?value:options||{}
if(thing){if(!thingIsObject){thingObject[thing]=value}
for(thingItem in thingObject){thingValue=thingObject[thingItem]
if(thingItem in P.component.item){if(thingValue===undefined)thingValue=null
P.component.set(thingItem,thingValue,options)}
if(thingItem=='select'||thingItem=='clear'){$ELEMENT.val(thingItem=='clear'?'':P.get(thingItem,SETTINGS.format)).trigger('change')}}
P.render()}
return options.muted?P:P.trigger('set',thingObject)},get:function(thing,format){thing=thing||'value'
if(STATE[thing]!=null){return STATE[thing]}
if(thing=='valueSubmit'){if(P._hidden){return P._hidden.value}
thing='value'}
if(thing=='value'){return ELEMENT.value}
if(thing in P.component.item){if(typeof format=='string'){var thingValue=P.component.get(thing)
return thingValue?PickerConstructor._.trigger(P.component.formats.toString,P.component,[format,thingValue]):''}
return P.component.get(thing)}},on:function(thing,method,internal){var thingName,thingMethod,thingIsObject=$.isPlainObject(thing),thingObject=thingIsObject?thing:{}
if(thing){if(!thingIsObject){thingObject[thing]=method}
for(thingName in thingObject){thingMethod=thingObject[thingName]
if(internal){thingName='_'+thingName}
STATE.methods[thingName]=STATE.methods[thingName]||[]
STATE.methods[thingName].push(thingMethod)}}
return P},off:function(){var i,thingName,names=arguments;for(i=0,namesCount=names.length;i<namesCount;i+=1){thingName=names[i]
if(thingName in STATE.methods){delete STATE.methods[thingName]}}
return P},trigger:function(name,data){var _trigger=function(name){var methodList=STATE.methods[name]
if(methodList){methodList.map(function(method){PickerConstructor._.trigger(method,P,[data])})}}
_trigger('_'+name)
_trigger(name)
return P}}
function createWrappedComponent(){return PickerConstructor._.node('div',PickerConstructor._.node('div',PickerConstructor._.node('div',PickerConstructor._.node('div',P.component.nodes(STATE.open),CLASSES.box),CLASSES.wrap),CLASSES.frame),CLASSES.holder,'tabindex="-1"')}
function prepareElement(){$ELEMENT.data(NAME,P).addClass(CLASSES.input).val($ELEMENT.data('value')?P.get('select',SETTINGS.format):ELEMENT.value)
if(!SETTINGS.editable){$ELEMENT.on('focus.'+STATE.id+' click.'+STATE.id,function(event){event.preventDefault()
P.open()}).on('keydown.'+STATE.id,handleKeydownEvent)}
aria(ELEMENT,{haspopup:true,expanded:false,readonly:false,owns:ELEMENT.id+'_root'})}
function prepareElementRoot(){aria(P.$root[0],'hidden',true)}
function prepareElementHolder(){P.$holder.on({keydown:handleKeydownEvent,'focus.toOpen':handleFocusToOpenEvent,blur:function(){$ELEMENT.removeClass(CLASSES.target)},focusin:function(event){P.$root.removeClass(CLASSES.focused)
event.stopPropagation()},'mousedown click':function(event){var target=event.target
if(target!=P.$holder[0]){event.stopPropagation()
if(event.type=='mousedown'&&!$(target).is('input, select, textarea, button, option')){event.preventDefault()
P.$holder[0].focus()}}}}).on('click','[data-pick], [data-nav], [data-clear], [data-close]',function(){var $target=$(this),targetData=$target.data(),targetDisabled=$target.hasClass(CLASSES.navDisabled)||$target.hasClass(CLASSES.disabled),activeElement=getActiveElement()
activeElement=activeElement&&(activeElement.type||activeElement.href)
if(targetDisabled||activeElement&&!$.contains(P.$root[0],activeElement)){P.$holder[0].focus()}
if(!targetDisabled&&targetData.nav){P.set('highlight',P.component.item.highlight,{nav:targetData.nav})}
else if(!targetDisabled&&'pick'in targetData){P.set('select',targetData.pick)
if(SETTINGS.closeOnSelect){P.close(true)}}
else if(targetData.clear){P.clear()
if(SETTINGS.closeOnClear){P.close(true)}}
else if(targetData.close){P.close(true)}})}
function prepareElementHidden(){var name
if(SETTINGS.hiddenName===true){name=ELEMENT.name
ELEMENT.name=''}
else{name=[typeof SETTINGS.hiddenPrefix=='string'?SETTINGS.hiddenPrefix:'',typeof SETTINGS.hiddenSuffix=='string'?SETTINGS.hiddenSuffix:'_submit']
name=name[0]+ELEMENT.name+name[1]}
P._hidden=$('<input '+'type=hidden '+'name="'+name+'"'+
($ELEMENT.data('value')||ELEMENT.value?' value="'+P.get('select',SETTINGS.formatSubmit)+'"':'')+'>')[0]
$ELEMENT.on('change.'+STATE.id,function(){P._hidden.value=ELEMENT.value?P.get('select',SETTINGS.formatSubmit):''})}
function focusPickerOnceOpened(){if(IS_DEFAULT_THEME&&supportsTransitions){P.$holder.find('.'+CLASSES.frame).one('transitionend',function(){P.$holder[0].focus()})}
else{P.$holder[0].focus()}}
function handleFocusToOpenEvent(event){event.stopPropagation()
$ELEMENT.addClass(CLASSES.target)
P.$root.addClass(CLASSES.focused)
P.open()}
function handleKeydownEvent(event){var keycode=event.keyCode,isKeycodeDelete=/^(8|46)$/.test(keycode)
if(keycode==27){P.close(true)
return false}
if(keycode==32||isKeycodeDelete||!STATE.open&&P.component.key[keycode]){event.preventDefault()
event.stopPropagation()
if(isKeycodeDelete){P.clear().close()}
else{P.open()}}}
return new PickerInstance()}
PickerConstructor.klasses=function(prefix){prefix=prefix||'picker'
return{picker:prefix,opened:prefix+'--opened',focused:prefix+'--focused',input:prefix+'__input',active:prefix+'__input--active',target:prefix+'__input--target',holder:prefix+'__holder',frame:prefix+'__frame',wrap:prefix+'__wrap',box:prefix+'__box'}}
function isUsingDefaultTheme(element){var theme,prop='position'
if(element.currentStyle){theme=element.currentStyle[prop]}
else if(window.getComputedStyle){theme=getComputedStyle(element)[prop]}
return theme=='fixed'}
function getScrollbarWidth(){if($html.height()<=$window.height()){return 0}
var $outer=$('<div style="visibility:hidden;width:100px" />').appendTo('body')
var widthWithoutScroll=$outer[0].offsetWidth
$outer.css('overflow','scroll')
var $inner=$('<div style="width:100%" />').appendTo($outer)
var widthWithScroll=$inner[0].offsetWidth
$outer.remove()
return widthWithoutScroll-widthWithScroll}
PickerConstructor._={group:function(groupObject){var
loopObjectScope,nodesList='',counter=PickerConstructor._.trigger(groupObject.min,groupObject)
for(;counter<=PickerConstructor._.trigger(groupObject.max,groupObject,[counter]);counter+=groupObject.i){loopObjectScope=PickerConstructor._.trigger(groupObject.item,groupObject,[counter])
nodesList+=PickerConstructor._.node(groupObject.node,loopObjectScope[0],loopObjectScope[1],loopObjectScope[2])}
return nodesList},node:function(wrapper,item,klass,attribute){if(!item)return''
item=$.isArray(item)?item.join(''):item
klass=klass?' class="'+klass+'"':''
attribute=attribute?' '+attribute:''
return'<'+wrapper+klass+attribute+'>'+item+'</'+wrapper+'>'},lead:function(number){return(number<10?'0':'')+number},trigger:function(callback,scope,args){return typeof callback=='function'?callback.apply(scope,args||[]):callback},digits:function(string){return(/\d/).test(string[1])?2:1},isDate:function(value){return{}.toString.call(value).indexOf('Date')>-1&&this.isInteger(value.getDate())},isInteger:function(value){return{}.toString.call(value).indexOf('Number')>-1&&value%1===0},ariaAttr:ariaAttr}
PickerConstructor.extend=function(name,Component){$.fn[name]=function(options,action){var componentData=this.data(name)
if(options=='picker'){return componentData}
if(componentData&&typeof options=='string'){return PickerConstructor._.trigger(componentData[options],componentData,[action])}
return this.each(function(){var $this=$(this)
if(!$this.data(name)){new PickerConstructor(this,name,Component,options)}})}
$.fn[name].defaults=Component.defaults}
function aria(element,attribute,value){if($.isPlainObject(attribute)){for(var key in attribute){ariaSet(element,key,attribute[key])}}
else{ariaSet(element,attribute,value)}}
function ariaSet(element,attribute,value){element.setAttribute((attribute=='role'?'':'aria-')+attribute,value)}
function ariaAttr(attribute,data){if(!$.isPlainObject(attribute)){attribute={attribute:data}}
data=''
for(var key in attribute){var attr=(key=='role'?'':'aria-')+key,attrVal=attribute[key]
data+=attrVal==null?'':attr+'="'+attribute[key]+'"'}
return data}
function getActiveElement(){try{return document.activeElement}catch(err){}}
return PickerConstructor}));
/*!
 * Date picker for pickadate.js v3.5.6
 * http://amsul.github.io/pickadate.js/date.htm
 */
(function(factory){if(typeof define=='function'&&define.amd)
define(['picker','jquery'],factory)
else if(typeof exports=='object')
module.exports=factory(require('./picker.js'),require('jquery'))
else factory(Picker,jQuery)}(function(Picker,$){var DAYS_IN_WEEK=7,WEEKS_IN_CALENDAR=6,_=Picker._
function DatePicker(picker,settings){var calendar=this,element=picker.$node[0],elementValue=element.value,elementDataValue=picker.$node.data('value'),valueString=elementDataValue||elementValue,formatString=elementDataValue?settings.formatSubmit:settings.format,isRTL=function(){return element.currentStyle?element.currentStyle.direction=='rtl':getComputedStyle(picker.$root[0]).direction=='rtl'}
calendar.settings=settings
calendar.$node=picker.$node
calendar.queue={min:'measure create',max:'measure create',now:'now create',select:'parse create validate',highlight:'parse navigate create validate',view:'parse create validate viewset',disable:'deactivate',enable:'activate'}
calendar.item={}
calendar.item.clear=null
calendar.item.disable=(settings.disable||[]).slice(0)
calendar.item.enable=-(function(collectionDisabled){return collectionDisabled[0]===true?collectionDisabled.shift():-1})(calendar.item.disable)
calendar.set('min',settings.min).set('max',settings.max).set('now')
if(valueString){calendar.set('select',valueString,{format:formatString,defaultValue:true})}
else{calendar.set('select',null).set('highlight',calendar.item.now)}
calendar.key={40:7,38:-7,39:function(){return isRTL()?-1:1},37:function(){return isRTL()?1:-1},go:function(timeChange){var highlightedObject=calendar.item.highlight,targetDate=new Date(highlightedObject.year,highlightedObject.month,highlightedObject.date+timeChange)
calendar.set('highlight',targetDate,{interval:timeChange})
this.render()}}
picker.on('render',function(){picker.$root.find('.'+settings.klass.selectMonth).on('change',function(){var value=this.value
if(value){picker.set('highlight',[picker.get('view').year,value,picker.get('highlight').date])
picker.$root.find('.'+settings.klass.selectMonth).trigger('focus')}})
picker.$root.find('.'+settings.klass.selectYear).on('change',function(){var value=this.value
if(value){picker.set('highlight',[value,picker.get('view').month,picker.get('highlight').date])
picker.$root.find('.'+settings.klass.selectYear).trigger('focus')}})},1).on('open',function(){var includeToday=''
if(calendar.disabled(calendar.get('now'))){includeToday=':not(.'+settings.klass.buttonToday+')'}
picker.$root.find('button'+includeToday+', select').attr('disabled',false)},1).on('close',function(){picker.$root.find('button, select').attr('disabled',true)},1)}
DatePicker.prototype.set=function(type,value,options){var calendar=this,calendarItem=calendar.item
if(value===null){if(type=='clear')type='select'
calendarItem[type]=value
return calendar}
calendarItem[(type=='enable'?'disable':type=='flip'?'enable':type)]=calendar.queue[type].split(' ').map(function(method){value=calendar[method](type,value,options)
return value}).pop()
if(type=='select'){calendar.set('highlight',calendarItem.select,options)}
else if(type=='highlight'){calendar.set('view',calendarItem.highlight,options)}
else if(type.match(/^(flip|min|max|disable|enable)$/)){if(calendarItem.select&&calendar.disabled(calendarItem.select)){calendar.set('select',calendarItem.select,options)}
if(calendarItem.highlight&&calendar.disabled(calendarItem.highlight)){calendar.set('highlight',calendarItem.highlight,options)}}
return calendar}
DatePicker.prototype.get=function(type){return this.item[type]}
DatePicker.prototype.create=function(type,value,options){var isInfiniteValue,calendar=this
value=value===undefined?type:value
if(value==-Infinity||value==Infinity){isInfiniteValue=value}
else if($.isPlainObject(value)&&_.isInteger(value.pick)){value=value.obj}
else if($.isArray(value)){value=new Date(value[0],value[1],value[2])
value=_.isDate(value)?value:calendar.create().obj}
else if(_.isInteger(value)||_.isDate(value)){value=calendar.normalize(new Date(value),options)}
else{value=calendar.now(type,value,options)}
return{year:isInfiniteValue||value.getFullYear(),month:isInfiniteValue||value.getMonth(),date:isInfiniteValue||value.getDate(),day:isInfiniteValue||value.getDay(),obj:isInfiniteValue||value,pick:isInfiniteValue||value.getTime()}}
DatePicker.prototype.createRange=function(from,to){var calendar=this,createDate=function(date){if(date===true||$.isArray(date)||_.isDate(date)){return calendar.create(date)}
return date}
if(!_.isInteger(from)){from=createDate(from)}
if(!_.isInteger(to)){to=createDate(to)}
if(_.isInteger(from)&&$.isPlainObject(to)){from=[to.year,to.month,to.date+from];}
else if(_.isInteger(to)&&$.isPlainObject(from)){to=[from.year,from.month,from.date+to];}
return{from:createDate(from),to:createDate(to)}}
DatePicker.prototype.withinRange=function(range,dateUnit){range=this.createRange(range.from,range.to)
return dateUnit.pick>=range.from.pick&&dateUnit.pick<=range.to.pick}
DatePicker.prototype.overlapRanges=function(one,two){var calendar=this
one=calendar.createRange(one.from,one.to)
two=calendar.createRange(two.from,two.to)
return calendar.withinRange(one,two.from)||calendar.withinRange(one,two.to)||calendar.withinRange(two,one.from)||calendar.withinRange(two,one.to)}
DatePicker.prototype.now=function(type,value,options){value=new Date()
if(options&&options.rel){value.setDate(value.getDate()+options.rel)}
return this.normalize(value,options)}
DatePicker.prototype.navigate=function(type,value,options){var targetDateObject,targetYear,targetMonth,targetDate,isTargetArray=$.isArray(value),isTargetObject=$.isPlainObject(value),viewsetObject=this.item.view
if(isTargetArray||isTargetObject){if(isTargetObject){targetYear=value.year
targetMonth=value.month
targetDate=value.date}
else{targetYear=+value[0]
targetMonth=+value[1]
targetDate=+value[2]}
if(options&&options.nav&&viewsetObject&&viewsetObject.month!==targetMonth){targetYear=viewsetObject.year
targetMonth=viewsetObject.month}
targetDateObject=new Date(targetYear,targetMonth+(options&&options.nav?options.nav:0),1)
targetYear=targetDateObject.getFullYear()
targetMonth=targetDateObject.getMonth()
while(new Date(targetYear,targetMonth,targetDate).getMonth()!==targetMonth){targetDate-=1}
value=[targetYear,targetMonth,targetDate]}
return value}
DatePicker.prototype.normalize=function(value){value.setHours(0,0,0,0)
return value}
DatePicker.prototype.measure=function(type,value){var calendar=this
if(!value){value=type=='min'?-Infinity:Infinity}
else if(typeof value=='string'){value=calendar.parse(type,value)}
else if(_.isInteger(value)){value=calendar.now(type,value,{rel:value})}
return value}
DatePicker.prototype.viewset=function(type,dateObject){return this.create([dateObject.year,dateObject.month,1])}
DatePicker.prototype.validate=function(type,dateObject,options){var calendar=this,originalDateObject=dateObject,interval=options&&options.interval?options.interval:1,isFlippedBase=calendar.item.enable===-1,hasEnabledBeforeTarget,hasEnabledAfterTarget,minLimitObject=calendar.item.min,maxLimitObject=calendar.item.max,reachedMin,reachedMax,hasEnabledWeekdays=isFlippedBase&&calendar.item.disable.filter(function(value){if($.isArray(value)){var dateTime=calendar.create(value).pick
if(dateTime<dateObject.pick)hasEnabledBeforeTarget=true
else if(dateTime>dateObject.pick)hasEnabledAfterTarget=true}
return _.isInteger(value)}).length
if(!options||(!options.nav&&!options.defaultValue))if((!isFlippedBase&&calendar.disabled(dateObject))||(isFlippedBase&&calendar.disabled(dateObject)&&(hasEnabledWeekdays||hasEnabledBeforeTarget||hasEnabledAfterTarget))||(!isFlippedBase&&(dateObject.pick<=minLimitObject.pick||dateObject.pick>=maxLimitObject.pick))){if(isFlippedBase&&!hasEnabledWeekdays&&((!hasEnabledAfterTarget&&interval>0)||(!hasEnabledBeforeTarget&&interval<0))){interval*=-1}
while(calendar.disabled(dateObject)){if(Math.abs(interval)>1&&(dateObject.month<originalDateObject.month||dateObject.month>originalDateObject.month)){dateObject=originalDateObject
interval=interval>0?1:-1}
if(dateObject.pick<=minLimitObject.pick){reachedMin=true
interval=1
dateObject=calendar.create([minLimitObject.year,minLimitObject.month,minLimitObject.date+(dateObject.pick===minLimitObject.pick?0:-1)])}
else if(dateObject.pick>=maxLimitObject.pick){reachedMax=true
interval=-1
dateObject=calendar.create([maxLimitObject.year,maxLimitObject.month,maxLimitObject.date+(dateObject.pick===maxLimitObject.pick?0:1)])}
if(reachedMin&&reachedMax){break}
dateObject=calendar.create([dateObject.year,dateObject.month,dateObject.date+interval])}}
return dateObject}
DatePicker.prototype.disabled=function(dateToVerify){var
calendar=this,isDisabledMatch=calendar.item.disable.filter(function(dateToDisable){if(_.isInteger(dateToDisable)){return dateToVerify.day===(calendar.settings.firstDay?dateToDisable:dateToDisable-1)%7}
if($.isArray(dateToDisable)||_.isDate(dateToDisable)){return dateToVerify.pick===calendar.create(dateToDisable).pick}
if($.isPlainObject(dateToDisable)){return calendar.withinRange(dateToDisable,dateToVerify)}})
isDisabledMatch=isDisabledMatch.length&&!isDisabledMatch.filter(function(dateToDisable){return $.isArray(dateToDisable)&&dateToDisable[3]=='inverted'||$.isPlainObject(dateToDisable)&&dateToDisable.inverted}).length
return calendar.item.enable===-1?!isDisabledMatch:isDisabledMatch||dateToVerify.pick<calendar.item.min.pick||dateToVerify.pick>calendar.item.max.pick}
DatePicker.prototype.parse=function(type,value,options){var calendar=this,parsingObject={}
if(!value||typeof value!='string'){return value}
if(!(options&&options.format)){options=options||{}
options.format=calendar.settings.format}
calendar.formats.toArray(options.format).map(function(label){var
formattingLabel=calendar.formats[label],formatLength=formattingLabel?_.trigger(formattingLabel,calendar,[value,parsingObject]):label.replace(/^!/,'').length
if(formattingLabel){parsingObject[label]=value.substr(0,formatLength)}
value=value.substr(formatLength)})
return[parsingObject.yyyy||parsingObject.yy,+(parsingObject.mm||parsingObject.m)-1,parsingObject.dd||parsingObject.d]}
DatePicker.prototype.formats=(function(){function getWordLengthFromCollection(string,collection,dateObject){var word=string.match(/[^\x00-\x7F]+|\w+/)[0]
if(!dateObject.mm&&!dateObject.m){dateObject.m=collection.indexOf(word)+1}
return word.length}
function getFirstWordLength(string){return string.match(/\w+/)[0].length}
return{d:function(string,dateObject){return string?_.digits(string):dateObject.date},dd:function(string,dateObject){return string?2:_.lead(dateObject.date)},ddd:function(string,dateObject){return string?getFirstWordLength(string):this.settings.weekdaysShort[dateObject.day]},dddd:function(string,dateObject){return string?getFirstWordLength(string):this.settings.weekdaysFull[dateObject.day]},m:function(string,dateObject){return string?_.digits(string):dateObject.month+1},mm:function(string,dateObject){return string?2:_.lead(dateObject.month+1)},mmm:function(string,dateObject){var collection=this.settings.monthsShort
return string?getWordLengthFromCollection(string,collection,dateObject):collection[dateObject.month]},mmmm:function(string,dateObject){var collection=this.settings.monthsFull
return string?getWordLengthFromCollection(string,collection,dateObject):collection[dateObject.month]},yy:function(string,dateObject){return string?2:(''+dateObject.year).slice(2)},yyyy:function(string,dateObject){return string?4:dateObject.year},toArray:function(formatString){return formatString.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g)},toString:function(formatString,itemObject){var calendar=this
return calendar.formats.toArray(formatString).map(function(label){return _.trigger(calendar.formats[label],calendar,[0,itemObject])||label.replace(/^!/,'')}).join('')}}})()
DatePicker.prototype.isDateExact=function(one,two){var calendar=this
if((_.isInteger(one)&&_.isInteger(two))||(typeof one=='boolean'&&typeof two=='boolean')){return one===two}
if((_.isDate(one)||$.isArray(one))&&(_.isDate(two)||$.isArray(two))){return calendar.create(one).pick===calendar.create(two).pick}
if($.isPlainObject(one)&&$.isPlainObject(two)){return calendar.isDateExact(one.from,two.from)&&calendar.isDateExact(one.to,two.to)}
return false}
DatePicker.prototype.isDateOverlap=function(one,two){var calendar=this,firstDay=calendar.settings.firstDay?1:0
if(_.isInteger(one)&&(_.isDate(two)||$.isArray(two))){one=one%7+firstDay
return one===calendar.create(two).day+1}
if(_.isInteger(two)&&(_.isDate(one)||$.isArray(one))){two=two%7+firstDay
return two===calendar.create(one).day+1}
if($.isPlainObject(one)&&$.isPlainObject(two)){return calendar.overlapRanges(one,two)}
return false}
DatePicker.prototype.flipEnable=function(val){var itemObject=this.item
itemObject.enable=val||(itemObject.enable==-1?1:-1)}
DatePicker.prototype.deactivate=function(type,datesToDisable){var calendar=this,disabledItems=calendar.item.disable.slice(0)
if(datesToDisable=='flip'){calendar.flipEnable()}
else if(datesToDisable===false){calendar.flipEnable(1)
disabledItems=[]}
else if(datesToDisable===true){calendar.flipEnable(-1)
disabledItems=[]}
else{datesToDisable.map(function(unitToDisable){var matchFound
for(var index=0;index<disabledItems.length;index+=1){if(calendar.isDateExact(unitToDisable,disabledItems[index])){matchFound=true
break}}
if(!matchFound){if(_.isInteger(unitToDisable)||_.isDate(unitToDisable)||$.isArray(unitToDisable)||($.isPlainObject(unitToDisable)&&unitToDisable.from&&unitToDisable.to)){disabledItems.push(unitToDisable)}}})}
return disabledItems}
DatePicker.prototype.activate=function(type,datesToEnable){var calendar=this,disabledItems=calendar.item.disable,disabledItemsCount=disabledItems.length
if(datesToEnable=='flip'){calendar.flipEnable()}
else if(datesToEnable===true){calendar.flipEnable(1)
disabledItems=[]}
else if(datesToEnable===false){calendar.flipEnable(-1)
disabledItems=[]}
else{datesToEnable.map(function(unitToEnable){var matchFound,disabledUnit,index,isExactRange
for(index=0;index<disabledItemsCount;index+=1){disabledUnit=disabledItems[index]
if(calendar.isDateExact(disabledUnit,unitToEnable)){matchFound=disabledItems[index]=null
isExactRange=true
break}
else if(calendar.isDateOverlap(disabledUnit,unitToEnable)){if($.isPlainObject(unitToEnable)){unitToEnable.inverted=true
matchFound=unitToEnable}
else if($.isArray(unitToEnable)){matchFound=unitToEnable
if(!matchFound[3])matchFound.push('inverted')}
else if(_.isDate(unitToEnable)){matchFound=[unitToEnable.getFullYear(),unitToEnable.getMonth(),unitToEnable.getDate(),'inverted']}
break}}
if(matchFound)for(index=0;index<disabledItemsCount;index+=1){if(calendar.isDateExact(disabledItems[index],unitToEnable)){disabledItems[index]=null
break}}
if(isExactRange)for(index=0;index<disabledItemsCount;index+=1){if(calendar.isDateOverlap(disabledItems[index],unitToEnable)){disabledItems[index]=null
break}}
if(matchFound){disabledItems.push(matchFound)}})}
return disabledItems.filter(function(val){return val!=null})}
DatePicker.prototype.nodes=function(isOpen){var
calendar=this,settings=calendar.settings,calendarItem=calendar.item,nowObject=calendarItem.now,selectedObject=calendarItem.select,highlightedObject=calendarItem.highlight,viewsetObject=calendarItem.view,disabledCollection=calendarItem.disable,minLimitObject=calendarItem.min,maxLimitObject=calendarItem.max,tableHead=(function(collection,fullCollection){if(settings.firstDay){collection.push(collection.shift())
fullCollection.push(fullCollection.shift())}
return _.node('thead',_.node('tr',_.group({min:0,max:DAYS_IN_WEEK-1,i:1,node:'th',item:function(counter){return[collection[counter],settings.klass.weekdays,'scope=col title="'+fullCollection[counter]+'"']}})))})((settings.showWeekdaysFull?settings.weekdaysFull:settings.weekdaysShort).slice(0),settings.weekdaysFull.slice(0)),createMonthNav=function(next){return _.node('div',' ',settings.klass['nav'+(next?'Next':'Prev')]+((next&&viewsetObject.year>=maxLimitObject.year&&viewsetObject.month>=maxLimitObject.month)||(!next&&viewsetObject.year<=minLimitObject.year&&viewsetObject.month<=minLimitObject.month)?' '+settings.klass.navDisabled:''),'data-nav='+(next||-1)+' '+
_.ariaAttr({role:'button',controls:calendar.$node[0].id+'_table'})+' '+'title="'+(next?settings.labelMonthNext:settings.labelMonthPrev)+'"')},createMonthLabel=function(){var monthsCollection=settings.showMonthsShort?settings.monthsShort:settings.monthsFull
if(settings.selectMonths){return _.node('select',_.group({min:0,max:11,i:1,node:'option',item:function(loopedMonth){return[monthsCollection[loopedMonth],0,'value='+loopedMonth+
(viewsetObject.month==loopedMonth?' selected':'')+
(((viewsetObject.year==minLimitObject.year&&loopedMonth<minLimitObject.month)||(viewsetObject.year==maxLimitObject.year&&loopedMonth>maxLimitObject.month))?' disabled':'')]}}),settings.klass.selectMonth,(isOpen?'':'disabled')+' '+
_.ariaAttr({controls:calendar.$node[0].id+'_table'})+' '+'title="'+settings.labelMonthSelect+'"')}
return _.node('div',monthsCollection[viewsetObject.month],settings.klass.month)},createYearLabel=function(){var focusedYear=viewsetObject.year,numberYears=settings.selectYears===true?5:~~(settings.selectYears/2)
if(numberYears){var
minYear=minLimitObject.year,maxYear=maxLimitObject.year,lowestYear=focusedYear-numberYears,highestYear=focusedYear+numberYears
if(minYear>lowestYear){highestYear+=minYear-lowestYear
lowestYear=minYear}
if(maxYear<highestYear){var availableYears=lowestYear-minYear,neededYears=highestYear-maxYear
lowestYear-=availableYears>neededYears?neededYears:availableYears
highestYear=maxYear}
return _.node('select',_.group({min:lowestYear,max:highestYear,i:1,node:'option',item:function(loopedYear){return[loopedYear,0,'value='+loopedYear+(focusedYear==loopedYear?' selected':'')]}}),settings.klass.selectYear,(isOpen?'':'disabled')+' '+_.ariaAttr({controls:calendar.$node[0].id+'_table'})+' '+'title="'+settings.labelYearSelect+'"')}
return _.node('div',focusedYear,settings.klass.year)}
return _.node('div',(settings.selectYears?createYearLabel()+createMonthLabel():createMonthLabel()+createYearLabel())+
createMonthNav()+createMonthNav(1),settings.klass.header)+_.node('table',tableHead+
_.node('tbody',_.group({min:0,max:WEEKS_IN_CALENDAR-1,i:1,node:'tr',item:function(rowCounter){var shiftDateBy=settings.firstDay&&calendar.create([viewsetObject.year,viewsetObject.month,1]).day===0?-7:0
return[_.group({min:DAYS_IN_WEEK*rowCounter-viewsetObject.day+shiftDateBy+1,max:function(){return this.min+DAYS_IN_WEEK-1},i:1,node:'td',item:function(targetDate){targetDate=calendar.create([viewsetObject.year,viewsetObject.month,targetDate+(settings.firstDay?1:0)])
var isSelected=selectedObject&&selectedObject.pick==targetDate.pick,isHighlighted=highlightedObject&&highlightedObject.pick==targetDate.pick,isDisabled=disabledCollection&&calendar.disabled(targetDate)||targetDate.pick<minLimitObject.pick||targetDate.pick>maxLimitObject.pick,formattedDate=_.trigger(calendar.formats.toString,calendar,[settings.format,targetDate])
return[_.node('div',targetDate.date,(function(klasses){klasses.push(viewsetObject.month==targetDate.month?settings.klass.infocus:settings.klass.outfocus)
if(nowObject.pick==targetDate.pick){klasses.push(settings.klass.now)}
if(isSelected){klasses.push(settings.klass.selected)}
if(isHighlighted){klasses.push(settings.klass.highlighted)}
if(isDisabled){klasses.push(settings.klass.disabled)}
return klasses.join(' ')})([settings.klass.day]),'data-pick='+targetDate.pick+' '+_.ariaAttr({role:'gridcell',label:formattedDate,selected:isSelected&&calendar.$node.val()===formattedDate?true:null,activedescendant:isHighlighted?true:null,disabled:isDisabled?true:null})),'',_.ariaAttr({role:'presentation'})]}})]}})),settings.klass.table,'id="'+calendar.$node[0].id+'_table'+'" '+_.ariaAttr({role:'grid',controls:calendar.$node[0].id,readonly:true}))+
_.node('div',_.node('button',settings.today,settings.klass.buttonToday,'type=button data-pick='+nowObject.pick+
(isOpen&&!calendar.disabled(nowObject)?'':' disabled')+' '+
_.ariaAttr({controls:calendar.$node[0].id}))+
_.node('button',settings.clear,settings.klass.buttonClear,'type=button data-clear=1'+
(isOpen?'':' disabled')+' '+
_.ariaAttr({controls:calendar.$node[0].id}))+
_.node('button',settings.close,settings.klass.buttonClose,'type=button data-close=true '+
(isOpen?'':' disabled')+' '+
_.ariaAttr({controls:calendar.$node[0].id})),settings.klass.footer)}
DatePicker.defaults=(function(prefix){return{labelMonthNext:'Next month',labelMonthPrev:'Previous month',labelMonthSelect:'Select a month',labelYearSelect:'Select a year',monthsFull:['January','February','March','April','May','June','July','August','September','October','November','December'],monthsShort:['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'],weekdaysFull:['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday'],weekdaysShort:['Sun','Mon','Tue','Wed','Thu','Fri','Sat'],today:'Today',clear:'Clear',close:'Close',closeOnSelect:true,closeOnClear:true,format:'d mmmm, yyyy',klass:{table:prefix+'table',header:prefix+'header',navPrev:prefix+'nav--prev',navNext:prefix+'nav--next',navDisabled:prefix+'nav--disabled',month:prefix+'month',year:prefix+'year',selectMonth:prefix+'select--month',selectYear:prefix+'select--year',weekdays:prefix+'weekday',day:prefix+'day',disabled:prefix+'day--disabled',selected:prefix+'day--selected',highlighted:prefix+'day--highlighted',now:prefix+'day--today',infocus:prefix+'day--infocus',outfocus:prefix+'day--outfocus',footer:prefix+'footer',buttonClear:prefix+'button--clear',buttonToday:prefix+'button--today',buttonClose:prefix+'button--close'}}})(Picker.klasses().picker+'__')
Picker.extend('pickadate',DatePicker)}));
var CN=CN||{};CN.BookingSelector=function(){this.elements={base:$("[data-booking-selector-form]"),selector:$("[data-booking-selector-form] [data-booking-selector]"),hiddenInputs:$("[data-booking-selector-form] .hidden-inputs")};this.data={};if("undefined"!==typeof ihotelierBookingLocations){this.data.locations=ihotelierBookingLocations;}
this.init();};CN.BookingSelector.prototype.init=function(){this.changeEvent();};CN.BookingSelector.prototype.changeEvent=function(){var $this=this;this.elements.selector.on('change',function(){var val=$(this).find('option:selected').val();$this.updateSelectedOption(val);var selectedLocation=$this.getSelectedLocation(val);if(selectedLocation){$this.elements.base.each(function(){var $self=$(this);$self.attr('action',selectedLocation.booking_url);$self.removeClass(function(index,className){var existingClass=className.match(/(^|\s)c-booking-bar--location\S+/g);if(existingClass){return existingClass.join(' ');}
return'';});$self.addClass('c-booking-bar--location-'+selectedLocation.original_key);});$this.elements.hiddenInputs.html('');$.each(selectedLocation.hidden_inputs,function(index,object){$this.elements.hiddenInputs.append('<input type="hidden" name="'+$(this)[0].name+'" value="'+$(this)[0].value+'">');});}});};CN.BookingSelector.prototype.updateSelectedOption=function($value){var $this=this;this.elements.selector.each(function(){$(this).find('option').removeAttr('selected');$(this).val($value);})};CN.BookingSelector.prototype.getSelectedLocation=function($value){var $this=this;var selected=false;if($this.data.locations){$.each($this.data.locations,function(index,object){if(object.identifier===$value){selected=object;return false;}});}
return selected;};
(function($){'use strict';if($('[data-booking-selector-form]').length>0){new CN.BookingSelector();}})(jQuery);
(function($){'use strict';$(document).on('cnInitMediaWidget',function(event,data){$('.c-media').each(function(){var mediaEl=$(this),videoEl=mediaEl.find('.c-media__video'),actionEl=mediaEl.find('.c-media__actions li'),galleryTriggerEl=mediaEl.find('[data-module="media-gallery-trigger"]');if(videoEl.length){new Plyr(videoEl[0]);}
actionEl.on('mouseenter mouseleave',function(){var imageId=$(this).data('image-id');var relatedImageEl=$('.c-media__image--'+imageId);if(relatedImageEl.length){relatedImageEl.toggleClass('is-active');}});if(galleryTriggerEl.length){new CN.ImageGallery(galleryTriggerEl);}});});$(document).trigger('cnInitMediaWidget');})(jQuery);
(function($){'use strict';function getParameterByName(name,url){if(!url){url=window.location.href;}
name=name.replace(/[\[\]]/g,"\\$&");var regex=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)"),results=regex.exec(url);if(!results)return null;if(!results[2])return'';return decodeURIComponent(results[2].replace(/\+/g," "));}
$('[data-module="media-grid-filter"]').each(function(){new CN.GridFilter($(this),{'item':'.c-media'});});var filterGrid=getParameterByName('filter-grid');if(''!==filterGrid){var foundOption=false;$('[data-module="media-grid-filter"] .js-filter').each(function(){$.each($(this).children('option'),function(){if(filterGrid===$(this).val()){$(this).attr("selected","selected");foundOption=true;return;}});if(foundOption){$(this).trigger('change');return;}});}})(jQuery);
(function($){$.easytabs=function(container,options){var plugin=this,$container=$(container),defaults={animate:true,panelActiveClass:"active",tabActiveClass:"active",defaultTab:"li:first-child",animationSpeed:"normal",tabs:"> ul > li",updateHash:true,cycle:false,collapsible:false,collapsedClass:"collapsed",collapsedByDefault:true,uiTabs:false,transitionIn:'fadeIn',transitionOut:'fadeOut',transitionInEasing:'swing',transitionOutEasing:'swing',transitionCollapse:'slideUp',transitionUncollapse:'slideDown',transitionCollapseEasing:'swing',transitionUncollapseEasing:'swing',containerClass:"",tabsClass:"",tabClass:"",panelClass:"",cache:true,event:'click',panelContext:$container},$defaultTab,$defaultTabLink,transitions,lastHash,skipUpdateToHash,animationSpeeds={fast:200,normal:400,slow:600},settings;plugin.init=function(){plugin.settings=settings=$.extend({},defaults,options);settings.bind_str=settings.event+".easytabs";if(settings.uiTabs){settings.tabActiveClass='ui-tabs-selected';settings.containerClass='ui-tabs ui-widget ui-widget-content ui-corner-all';settings.tabsClass='ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all';settings.tabClass='ui-state-default ui-corner-top';settings.panelClass='ui-tabs-panel ui-widget-content ui-corner-bottom';}
if(settings.collapsible&&options.defaultTab!==undefined&&options.collpasedByDefault===undefined){settings.collapsedByDefault=false;}
if(typeof(settings.animationSpeed)==='string'){settings.animationSpeed=animationSpeeds[settings.animationSpeed];}
$('a.anchor').remove().prependTo('body');$container.data('easytabs',{});plugin.setTransitions();plugin.getTabs();addClasses();setDefaultTab();bindToTabClicks();initHashChange();initCycle();$container.attr('data-easytabs',true);};plugin.setTransitions=function(){transitions=(settings.animate)?{show:settings.transitionIn,hide:settings.transitionOut,speed:settings.animationSpeed,collapse:settings.transitionCollapse,uncollapse:settings.transitionUncollapse,halfSpeed:settings.animationSpeed/2}:{show:"show",hide:"hide",speed:0,collapse:"hide",uncollapse:"show",halfSpeed:0};};plugin.getTabs=function(){var $matchingPanel;plugin.tabs=$container.find(settings.tabs),plugin.panels=$(),plugin.tabs.each(function(){var $tab=$(this),$a=$tab.children('a'),targetId=$tab.children('a').data('target');$tab.data('easytabs',{});if(targetId!==undefined&&targetId!==null){$tab.data('easytabs').ajax=$a.attr('href');}else{targetId=$a.attr('href');}
targetId=targetId.match(/#([^\?]+)/)[1];$matchingPanel=settings.panelContext.find("#"+targetId);if($matchingPanel.length){$matchingPanel.data('easytabs',{position:$matchingPanel.css('position'),visibility:$matchingPanel.css('visibility')});$matchingPanel.not(settings.panelActiveClass).hide();plugin.panels=plugin.panels.add($matchingPanel);$tab.data('easytabs').panel=$matchingPanel;}else{plugin.tabs=plugin.tabs.not($tab);if('console'in window){console.warn('Warning: tab without matching panel for selector \'#'+targetId+'\' removed from set');}}});};plugin.selectTab=function($clicked,callback){var url=window.location,hash=url.hash.match(/^[^\?]*/)[0],$targetPanel=$clicked.parent().data('easytabs').panel,ajaxUrl=$clicked.parent().data('easytabs').ajax;if(settings.collapsible&&!skipUpdateToHash&&($clicked.hasClass(settings.tabActiveClass)||$clicked.hasClass(settings.collapsedClass))){plugin.toggleTabCollapse($clicked,$targetPanel,ajaxUrl,callback);}else if(!$clicked.hasClass(settings.tabActiveClass)||!$targetPanel.hasClass(settings.panelActiveClass)){activateTab($clicked,$targetPanel,ajaxUrl,callback);}else if(!settings.cache){activateTab($clicked,$targetPanel,ajaxUrl,callback);}};plugin.toggleTabCollapse=function($clicked,$targetPanel,ajaxUrl,callback){plugin.panels.stop(true,true);if(fire($container,"easytabs:before",[$clicked,$targetPanel,settings])){plugin.tabs.filter("."+settings.tabActiveClass).removeClass(settings.tabActiveClass).children().removeClass(settings.tabActiveClass);if($clicked.hasClass(settings.collapsedClass)){if(ajaxUrl&&(!settings.cache||!$clicked.parent().data('easytabs').cached)){$container.trigger('easytabs:ajax:beforeSend',[$clicked,$targetPanel]);$targetPanel.load(ajaxUrl,function(response,status,xhr){$clicked.parent().data('easytabs').cached=true;$container.trigger('easytabs:ajax:complete',[$clicked,$targetPanel,response,status,xhr]);});}
$clicked.parent().removeClass(settings.collapsedClass).addClass(settings.tabActiveClass).children().removeClass(settings.collapsedClass).addClass(settings.tabActiveClass);$targetPanel.addClass(settings.panelActiveClass)
[transitions.uncollapse](transitions.speed,settings.transitionUncollapseEasing,function(){$container.trigger('easytabs:midTransition',[$clicked,$targetPanel,settings]);if(typeof callback=='function')callback();});}else{$clicked.addClass(settings.collapsedClass).parent().addClass(settings.collapsedClass);$targetPanel.removeClass(settings.panelActiveClass)
[transitions.collapse](transitions.speed,settings.transitionCollapseEasing,function(){$container.trigger("easytabs:midTransition",[$clicked,$targetPanel,settings]);if(typeof callback=='function')callback();});}}};plugin.matchTab=function(hash){return plugin.tabs.find("[href='"+hash+"'],[data-target='"+hash+"']").first();};plugin.matchInPanel=function(hash){return(hash&&plugin.validId(hash)?plugin.panels.filter(':has('+hash+')').first():[]);};plugin.validId=function(id){return id.substr(1).match(/^[A-Za-z][A-Za-z0-9\-_:\.]*$/);};plugin.selectTabFromHashChange=function(){var hash=window.location.hash.match(/^[^\?]*/)[0],$tab=plugin.matchTab(hash),$panel;if(settings.updateHash){if($tab.length){skipUpdateToHash=true;plugin.selectTab($tab);}else{$panel=plugin.matchInPanel(hash);if($panel.length){hash='#'+$panel.attr('id');$tab=plugin.matchTab(hash);skipUpdateToHash=true;plugin.selectTab($tab);}else if(!$defaultTab.hasClass(settings.tabActiveClass)&&!settings.cycle){if(hash===''||plugin.matchTab(lastHash).length||$container.closest(hash).length){skipUpdateToHash=true;plugin.selectTab($defaultTabLink);}}}}};plugin.cycleTabs=function(tabNumber){if(settings.cycle){tabNumber=tabNumber%plugin.tabs.length;$tab=$(plugin.tabs[tabNumber]).children("a").first();skipUpdateToHash=true;plugin.selectTab($tab,function(){setTimeout(function(){plugin.cycleTabs(tabNumber+1);},settings.cycle);});}};plugin.publicMethods={select:function(tabSelector){var $tab;if(($tab=plugin.tabs.filter(tabSelector)).length===0){if(($tab=plugin.tabs.find("a[href='"+tabSelector+"']")).length===0){if(($tab=plugin.tabs.find("a"+tabSelector)).length===0){if(($tab=plugin.tabs.find("[data-target='"+tabSelector+"']")).length===0){if(($tab=plugin.tabs.find("a[href$='"+tabSelector+"']")).length===0){$.error('Tab \''+tabSelector+'\' does not exist in tab set');}}}}}else{$tab=$tab.children("a").first();}
plugin.selectTab($tab);}};var fire=function(obj,name,data){var event=$.Event(name);obj.trigger(event,data);return event.result!==false;}
var addClasses=function(){$container.addClass(settings.containerClass);plugin.tabs.parent().addClass(settings.tabsClass);plugin.tabs.addClass(settings.tabClass);plugin.panels.addClass(settings.panelClass);};var setDefaultTab=function(){var hash=window.location.hash.match(/^[^\?]*/)[0],$selectedTab=plugin.matchTab(hash).parent(),$panel;if($selectedTab.length===1){$defaultTab=$selectedTab;settings.cycle=false;}else{$panel=plugin.matchInPanel(hash);if($panel.length){hash='#'+$panel.attr('id');$defaultTab=plugin.matchTab(hash).parent();}else{$defaultTab=plugin.tabs.parent().find(settings.defaultTab);if($defaultTab.length===0){$.error("The specified default tab ('"+settings.defaultTab+"') could not be found in the tab set ('"+settings.tabs+"') out of "+plugin.tabs.length+" tabs.");}}}
$defaultTabLink=$defaultTab.children("a").first();activateDefaultTab($selectedTab);};var activateDefaultTab=function($selectedTab){var defaultPanel,defaultAjaxUrl;if(settings.collapsible&&$selectedTab.length===0&&settings.collapsedByDefault){$defaultTab.addClass(settings.collapsedClass).children().addClass(settings.collapsedClass);}else{defaultPanel=$($defaultTab.data('easytabs').panel);defaultAjaxUrl=$defaultTab.data('easytabs').ajax;if(defaultAjaxUrl&&(!settings.cache||!$defaultTab.data('easytabs').cached)){$container.trigger('easytabs:ajax:beforeSend',[$defaultTabLink,defaultPanel]);defaultPanel.load(defaultAjaxUrl,function(response,status,xhr){$defaultTab.data('easytabs').cached=true;$container.trigger('easytabs:ajax:complete',[$defaultTabLink,defaultPanel,response,status,xhr]);});}
$defaultTab.data('easytabs').panel.show().addClass(settings.panelActiveClass);$defaultTab.addClass(settings.tabActiveClass).children().addClass(settings.tabActiveClass);}
$container.trigger("easytabs:initialised",[$defaultTabLink,defaultPanel]);};var bindToTabClicks=function(){plugin.tabs.children("a").bind(settings.bind_str,function(e){settings.cycle=false;skipUpdateToHash=false;plugin.selectTab($(this));e.preventDefault?e.preventDefault():e.returnValue=false;});};var activateTab=function($clicked,$targetPanel,ajaxUrl,callback){plugin.panels.stop(true,true);if(fire($container,"easytabs:before",[$clicked,$targetPanel,settings])){var $visiblePanel=plugin.panels.filter(":visible"),$panelContainer=$targetPanel.parent(),targetHeight,visibleHeight,heightDifference,showPanel,hash=window.location.hash.match(/^[^\?]*/)[0];if(settings.animate){targetHeight=getHeightForHidden($targetPanel);visibleHeight=$visiblePanel.length?setAndReturnHeight($visiblePanel):0;heightDifference=targetHeight-visibleHeight;}
lastHash=hash;showPanel=function(){$container.trigger("easytabs:midTransition",[$clicked,$targetPanel,settings]);if(settings.animate&&settings.transitionIn=='fadeIn'){if(heightDifference<0)
$panelContainer.animate({height:$panelContainer.height()+heightDifference},transitions.halfSpeed).css({'min-height':''});}
if(settings.updateHash&&!skipUpdateToHash){if(window.history.pushState){window.history.pushState(null,null,'#'+$targetPanel.attr('id'));}
else{window.location.hash='#'+$targetPanel.attr('id');}}else{skipUpdateToHash=false;}
$targetPanel
[transitions.show](transitions.speed,settings.transitionInEasing,function(){$panelContainer.css({height:'','min-height':''});$container.trigger("easytabs:after",[$clicked,$targetPanel,settings]);if(typeof callback=='function'){callback();}});};if(ajaxUrl&&(!settings.cache||!$clicked.parent().data('easytabs').cached)){$container.trigger('easytabs:ajax:beforeSend',[$clicked,$targetPanel]);$targetPanel.load(ajaxUrl,function(response,status,xhr){$clicked.parent().data('easytabs').cached=true;$container.trigger('easytabs:ajax:complete',[$clicked,$targetPanel,response,status,xhr]);});}
if(settings.animate&&settings.transitionOut=='fadeOut'){if(heightDifference>0){$panelContainer.animate({height:($panelContainer.height()+heightDifference)},transitions.halfSpeed);}else{$panelContainer.css({'min-height':$panelContainer.height()});}}
plugin.tabs.filter("."+settings.tabActiveClass).removeClass(settings.tabActiveClass).children().removeClass(settings.tabActiveClass);plugin.tabs.filter("."+settings.collapsedClass).removeClass(settings.collapsedClass).children().removeClass(settings.collapsedClass);$clicked.parent().addClass(settings.tabActiveClass).children().addClass(settings.tabActiveClass);plugin.panels.filter("."+settings.panelActiveClass).removeClass(settings.panelActiveClass);$targetPanel.addClass(settings.panelActiveClass);if($visiblePanel.length){$visiblePanel
[transitions.hide](transitions.speed,settings.transitionOutEasing,showPanel);}else{$targetPanel
[transitions.uncollapse](transitions.speed,settings.transitionUncollapseEasing,showPanel);}}};var getHeightForHidden=function($targetPanel){if($targetPanel.data('easytabs')&&$targetPanel.data('easytabs').lastHeight){return $targetPanel.data('easytabs').lastHeight;}
var display=$targetPanel.css('display'),outerCloak,height;try{outerCloak=$('<div></div>',{'position':'absolute','visibility':'hidden','overflow':'hidden'});}catch(e){outerCloak=$('<div></div>',{'visibility':'hidden','overflow':'hidden'});}
height=$targetPanel.wrap(outerCloak).css({'position':'relative','visibility':'hidden','display':'block'}).outerHeight();$targetPanel.unwrap();$targetPanel.css({position:$targetPanel.data('easytabs').position,visibility:$targetPanel.data('easytabs').visibility,display:display});$targetPanel.data('easytabs').lastHeight=height;return height;};var setAndReturnHeight=function($visiblePanel){var height=$visiblePanel.outerHeight();if($visiblePanel.data('easytabs')){$visiblePanel.data('easytabs').lastHeight=height;}else{$visiblePanel.data('easytabs',{lastHeight:height});}
return height;};var initHashChange=function(){if(typeof $(window).hashchange==='function'){$(window).hashchange(function(){plugin.selectTabFromHashChange();});}else if($.address&&typeof $.address.change==='function'){$.address.change(function(){plugin.selectTabFromHashChange();});}};var initCycle=function(){var tabNumber;if(settings.cycle){tabNumber=plugin.tabs.index($defaultTab);setTimeout(function(){plugin.cycleTabs(tabNumber+1);},settings.cycle);}};plugin.init();};$.fn.easytabs=function(options){var args=arguments;return this.each(function(){var $this=$(this),plugin=$this.data('easytabs');if(undefined===plugin){plugin=new $.easytabs(this,options);$this.data('easytabs',plugin);}
if(plugin.publicMethods[options]){return plugin.publicMethods[options](Array.prototype.slice.call(args,1));}});};})(jQuery);
(function($){'use strict';$(document).on('cnInitTabbedLayout',function(event,data){$('.js-layout-builder-tabbed').easytabs({tabActiveClass:'is-active',tabs:'.c-tabbed-content__tabs > li',animate:false,updateHash:false});});$(document).on('easytabs:before','.js-layout-builder-tabbed',function(event,$clicked,$targetPanel){$(this).removeClass('is-default-state');});$(document).trigger('cnInitTabbedLayout');$(document).on('ajaxModalHasLoaded',function(event,data){$(document).trigger('cnInitTabbedLayout');});})(jQuery);
(function($){'use strict';function getParameterByName(name,url){if(!url){url=window.location.href;}
name=name.replace(/[\[\]]/g,"\\$&");var regex=new RegExp("[?&]"+name+"(=([^&#]*)|&|#|$)"),results=regex.exec(url);if(!results)return null;if(!results[2])return'';return decodeURIComponent(results[2].replace(/\+/g," "));}
$('[data-module="cta-grid-filter"]').each(function(){new CN.GridFilter($(this),{'item':'.c-cta'});});var filterGrid=getParameterByName('filter-grid');if(filterGrid){var filterValues=filterGrid.split(',');$.each(filterValues,function(index,filterValue){var foundMatch=false;$('[data-module="cta-grid-filter"] .js-filter').each(function(){var filterChildren=$(this).children();var filterOptions=(filterChildren.length)?$(this).children('option'):$(this);$.each(filterOptions,function(){var filterOption=$(this);if(filterOption.val()===filterValue){filterOption.attr('selected','selected');filterOption.attr('checked','checked');foundMatch=true;return;}});if(foundMatch){$(this).trigger('change');return;}});});}})(jQuery);
/*!
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *       http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function InfoBox(opt_opts){opt_opts=opt_opts||{};google.maps.OverlayView.apply(this,arguments);this.content_=opt_opts.content||"";this.disableAutoPan_=opt_opts.disableAutoPan||false;this.maxWidth_=opt_opts.maxWidth||0;this.pixelOffset_=opt_opts.pixelOffset||new google.maps.Size(0,0);this.position_=opt_opts.position||new google.maps.LatLng(0,0);this.zIndex_=opt_opts.zIndex||null;this.boxClass_=opt_opts.boxClass||"infoBox";this.boxStyle_=opt_opts.boxStyle||{};this.closeBoxMargin_=opt_opts.closeBoxMargin||"2px";this.closeBoxURL_=opt_opts.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif";if(opt_opts.closeBoxURL===""){this.closeBoxURL_="";}
this.infoBoxClearance_=opt_opts.infoBoxClearance||new google.maps.Size(1,1);this.isHidden_=opt_opts.isHidden||false;this.alignBottom_=opt_opts.alignBottom||false;this.pane_=opt_opts.pane||"floatPane";this.enableEventPropagation_=opt_opts.enableEventPropagation||false;this.div_=null;this.closeListener_=null;this.eventListener1_=null;this.eventListener2_=null;this.eventListener3_=null;this.moveListener_=null;this.contextListener_=null;this.fixedWidthSet_=null;}
InfoBox.prototype=new google.maps.OverlayView();InfoBox.prototype.createInfoBoxDiv_=function(){var bw;var me=this;var cancelHandler=function(e){e.cancelBubble=true;if(e.stopPropagation){e.stopPropagation();}};var ignoreHandler=function(e){e.returnValue=false;if(e.preventDefault){e.preventDefault();}
if(!me.enableEventPropagation_){cancelHandler(e);}};if(!this.div_){this.div_=document.createElement("div");this.setBoxStyle_();if(typeof this.content_.nodeType==="undefined"){this.div_.innerHTML=this.getCloseBoxImg_()+this.content_;}else{this.div_.innerHTML=this.getCloseBoxImg_();this.div_.appendChild(this.content_);}
this.getPanes()[this.pane_].appendChild(this.div_);this.addClickHandler_();if(this.div_.style.width){this.fixedWidthSet_=true;}else{if(this.maxWidth_!==0&&this.div_.offsetWidth>this.maxWidth_){this.div_.style.width=this.maxWidth_;this.div_.style.overflow="auto";this.fixedWidthSet_=true;}else{bw=this.getBoxWidths_();this.div_.style.width=(this.div_.offsetWidth-bw.left-bw.right)+"px";this.fixedWidthSet_=false;}}
this.panBox_(this.disableAutoPan_);if(!this.enableEventPropagation_){this.eventListener1_=google.maps.event.addDomListener(this.div_,"mousedown",cancelHandler);this.eventListener2_=google.maps.event.addDomListener(this.div_,"click",cancelHandler);this.eventListener3_=google.maps.event.addDomListener(this.div_,"dblclick",cancelHandler);this.eventListener4_=google.maps.event.addDomListener(this.div_,"mouseover",function(e){this.style.cursor="default";});}
this.contextListener_=google.maps.event.addDomListener(this.div_,"contextmenu",ignoreHandler);google.maps.event.trigger(this,"domready");}};InfoBox.prototype.getCloseBoxImg_=function(){var img="";if(this.closeBoxURL_!==""){img="<img";img+=" src='"+this.closeBoxURL_+"'";img+=" align=right";img+=" style='";img+=" position: relative;";img+=" cursor: pointer;";img+=" margin: "+this.closeBoxMargin_+";";img+="'>";}
return img;};InfoBox.prototype.addClickHandler_=function(){var closeBox;if(this.closeBoxURL_!==""){closeBox=this.div_.firstChild;this.closeListener_=google.maps.event.addDomListener(closeBox,'click',this.getCloseClickHandler_());}else{this.closeListener_=null;}};InfoBox.prototype.getCloseClickHandler_=function(){var me=this;return function(e){e.cancelBubble=true;if(e.stopPropagation){e.stopPropagation();}
me.close();google.maps.event.trigger(me,"closeclick");};};InfoBox.prototype.panBox_=function(disablePan){var map;var bounds;var xOffset=0,yOffset=0;if(!disablePan){map=this.getMap();if(map instanceof google.maps.Map){if(!map.getBounds().contains(this.position_)){map.setCenter(this.position_);}
bounds=map.getBounds();var mapDiv=map.getDiv();var mapWidth=mapDiv.offsetWidth;var mapHeight=mapDiv.offsetHeight;var iwOffsetX=this.pixelOffset_.width;var iwOffsetY=this.pixelOffset_.height;var iwWidth=this.div_.offsetWidth;var iwHeight=this.div_.offsetHeight;var padX=this.infoBoxClearance_.width;var padY=this.infoBoxClearance_.height;var pixPosition=this.getProjection().fromLatLngToContainerPixel(this.position_);if(pixPosition.x<(-iwOffsetX+padX)){xOffset=pixPosition.x+iwOffsetX-padX;}else if((pixPosition.x+iwWidth+iwOffsetX+padX)>mapWidth){xOffset=pixPosition.x+iwWidth+iwOffsetX+padX-mapWidth;}
if(this.alignBottom_){if(pixPosition.y<(-iwOffsetY+padY+iwHeight)){yOffset=pixPosition.y+iwOffsetY-padY-iwHeight;}else if((pixPosition.y+iwOffsetY+padY)>mapHeight){yOffset=pixPosition.y+iwOffsetY+padY-mapHeight;}}else{if(pixPosition.y<(-iwOffsetY+padY)){yOffset=pixPosition.y+iwOffsetY-padY;}else if((pixPosition.y+iwHeight+iwOffsetY+padY)>mapHeight){yOffset=pixPosition.y+iwHeight+iwOffsetY+padY-mapHeight;}}
if(!(xOffset===0&&yOffset===0)){var c=map.getCenter();map.panBy(xOffset,yOffset);}}}};InfoBox.prototype.setBoxStyle_=function(){var i,boxStyle;if(this.div_){this.div_.className=this.boxClass_;this.div_.style.cssText="";boxStyle=this.boxStyle_;for(i in boxStyle){if(boxStyle.hasOwnProperty(i)){this.div_.style[i]=boxStyle[i];}}
if(typeof this.div_.style.opacity!=="undefined"&&this.div_.style.opacity!==""){this.div_.style.filter="alpha(opacity="+(this.div_.style.opacity*100)+")";}
this.div_.style.position="absolute";this.div_.style.visibility='hidden';if(this.zIndex_!==null){this.div_.style.zIndex=this.zIndex_;}}};InfoBox.prototype.getBoxWidths_=function(){var computedStyle;var bw={top:0,bottom:0,left:0,right:0};var box=this.div_;if(document.defaultView&&document.defaultView.getComputedStyle){computedStyle=box.ownerDocument.defaultView.getComputedStyle(box,"");if(computedStyle){bw.top=parseInt(computedStyle.borderTopWidth,10)||0;bw.bottom=parseInt(computedStyle.borderBottomWidth,10)||0;bw.left=parseInt(computedStyle.borderLeftWidth,10)||0;bw.right=parseInt(computedStyle.borderRightWidth,10)||0;}}else if(document.documentElement.currentStyle){if(box.currentStyle){bw.top=parseInt(box.currentStyle.borderTopWidth,10)||0;bw.bottom=parseInt(box.currentStyle.borderBottomWidth,10)||0;bw.left=parseInt(box.currentStyle.borderLeftWidth,10)||0;bw.right=parseInt(box.currentStyle.borderRightWidth,10)||0;}}
return bw;};InfoBox.prototype.onRemove=function(){if(this.div_){this.div_.parentNode.removeChild(this.div_);this.div_=null;}};InfoBox.prototype.draw=function(){this.createInfoBoxDiv_();var pixPosition=this.getProjection().fromLatLngToDivPixel(this.position_);this.div_.style.left=(pixPosition.x+this.pixelOffset_.width)+"px";if(this.alignBottom_){this.div_.style.bottom=-(pixPosition.y+this.pixelOffset_.height)+"px";}else{this.div_.style.top=(pixPosition.y+this.pixelOffset_.height)+"px";}
if(this.isHidden_){this.div_.style.visibility='hidden';}else{this.div_.style.visibility="visible";}};InfoBox.prototype.setOptions=function(opt_opts){if(typeof opt_opts.boxClass!=="undefined"){this.boxClass_=opt_opts.boxClass;this.setBoxStyle_();}
if(typeof opt_opts.boxStyle!=="undefined"){this.boxStyle_=opt_opts.boxStyle;this.setBoxStyle_();}
if(typeof opt_opts.content!=="undefined"){this.setContent(opt_opts.content);}
if(typeof opt_opts.disableAutoPan!=="undefined"){this.disableAutoPan_=opt_opts.disableAutoPan;}
if(typeof opt_opts.maxWidth!=="undefined"){this.maxWidth_=opt_opts.maxWidth;}
if(typeof opt_opts.pixelOffset!=="undefined"){this.pixelOffset_=opt_opts.pixelOffset;}
if(typeof opt_opts.alignBottom!=="undefined"){this.alignBottom_=opt_opts.alignBottom;}
if(typeof opt_opts.position!=="undefined"){this.setPosition(opt_opts.position);}
if(typeof opt_opts.zIndex!=="undefined"){this.setZIndex(opt_opts.zIndex);}
if(typeof opt_opts.closeBoxMargin!=="undefined"){this.closeBoxMargin_=opt_opts.closeBoxMargin;}
if(typeof opt_opts.closeBoxURL!=="undefined"){this.closeBoxURL_=opt_opts.closeBoxURL;}
if(typeof opt_opts.infoBoxClearance!=="undefined"){this.infoBoxClearance_=opt_opts.infoBoxClearance;}
if(typeof opt_opts.isHidden!=="undefined"){this.isHidden_=opt_opts.isHidden;}
if(typeof opt_opts.enableEventPropagation!=="undefined"){this.enableEventPropagation_=opt_opts.enableEventPropagation;}
if(this.div_){this.draw();}};InfoBox.prototype.setContent=function(content){this.content_=content;if(this.div_){if(this.closeListener_){google.maps.event.removeListener(this.closeListener_);this.closeListener_=null;}
if(!this.fixedWidthSet_){this.div_.style.width="";}
if(typeof content.nodeType==="undefined"){this.div_.innerHTML=this.getCloseBoxImg_()+content;}else{this.div_.innerHTML=this.getCloseBoxImg_();this.div_.appendChild(content);}
if(!this.fixedWidthSet_){this.div_.style.width=this.div_.offsetWidth+"px";if(typeof content.nodeType==="undefined"){this.div_.innerHTML=this.getCloseBoxImg_()+content;}else{this.div_.innerHTML=this.getCloseBoxImg_();this.div_.appendChild(content);}}
this.addClickHandler_();}
google.maps.event.trigger(this,"content_changed");};InfoBox.prototype.setPosition=function(latlng){this.position_=latlng;if(this.div_){this.draw();}
google.maps.event.trigger(this,"position_changed");};InfoBox.prototype.setZIndex=function(index){this.zIndex_=index;if(this.div_){this.div_.style.zIndex=index;}
google.maps.event.trigger(this,"zindex_changed");};InfoBox.prototype.getContent=function(){return this.content_;};InfoBox.prototype.getPosition=function(){return this.position_;};InfoBox.prototype.getZIndex=function(){return this.zIndex_;};InfoBox.prototype.show=function(){this.isHidden_=false;if(this.div_){this.div_.style.visibility="visible";}};InfoBox.prototype.hide=function(){this.isHidden_=true;if(this.div_){this.div_.style.visibility="hidden";}};InfoBox.prototype.open=function(map,anchor){var me=this;if(anchor){this.position_=anchor.getPosition();this.moveListener_=google.maps.event.addListener(anchor,"position_changed",function(){me.setPosition(this.getPosition());});}
this.setMap(map);if(this.div_){this.panBox_();}};InfoBox.prototype.close=function(){if(this.closeListener_){google.maps.event.removeListener(this.closeListener_);this.closeListener_=null;}
if(this.eventListener1_){google.maps.event.removeListener(this.eventListener1_);google.maps.event.removeListener(this.eventListener2_);google.maps.event.removeListener(this.eventListener3_);google.maps.event.removeListener(this.eventListener4_);this.eventListener1_=null;this.eventListener2_=null;this.eventListener3_=null;this.eventListener4_=null;}
if(this.moveListener_){google.maps.event.removeListener(this.moveListener_);this.moveListener_=null;}
if(this.contextListener_){google.maps.event.removeListener(this.contextListener_);this.contextListener_=null;}
this.setMap(null);};
var CN=CN||{};CN.Map=function(el){this.elements={component:el,canvas:el.find('.js-map-canvas'),filter:el.find('.js-map-filter')};this.options=this.elements.component.data('module-options');this.map={counter:2,zoom:14,centre:{address:{lat:0,lng:0},title:'',description:'',location:''},canvas:{},infoBox:{},markers:[],locations:[],};if('undefined'!==typeof map_style&&''!==map_style){this.map.styles=map_style;}else{this.map.styles=[{stylers:[]},{featureType:'road',elementType:'geometry',stylers:[{lightness:20},{visibility:'simplified'}]},{featureType:'road',elementType:'labels',stylers:[{visibility:'simplified'}]},{featureType:'poi',elementType:'labels',stylers:[{'visibility':'off'}]}];}
this.filters=[];this.marker={icon:{size:new google.maps.Size(80,80),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(20,20),scaledSize:new google.maps.Size(40,40)},shape:{coords:[0,0,0,40,40,40,40,0],type:'poly'}};this.directionsDisplay=null;this.init();};CN.Map.prototype.init=function(){var _this=this;var data=this.options.data;this.map.locations=data.locations;this.map.centre.address.lat=parseFloat(data.centre.centre_location.lat);this.map.centre.address.lng=parseFloat(data.centre.centre_location.lng);this.map.centre.title=data.centre.centre_heading;this.map.centre.description=data.centre.centre_description;this.map.centre.icon=data.centre.centre_icon;this.map.centre.location=data.centre.centre_location.location;this.map.centre.image=data.centre.centre_image;this.map.zoom=parseInt(data.centre.map_zoom);if(this.map.zoom>21){this.map.zoom=21;}else if(this.map.zoom<1){this.map.zoom=1;}
this.renderMap();this.elements.filter.on('change',function(e){e.preventDefault();var selected=$(this).find(':selected').val();_this.filterMap(selected);});};CN.Map.prototype.renderMap=function(){var _this=this;this.map.canvas=new google.maps.Map(this.elements.canvas.get(0),{zoom:_this.map.zoom,center:_this.map.centre.address,scrollwheel:false,mapTypeControlOptions:{mapTypeIds:[]}});this.map.infoBox=new InfoBox({content:'',pixelOffset:new google.maps.Size(40,-40),disableAutoPan:true,closeBoxMargin:'5px',infoBoxClearance:new google.maps.Size(1,1)});this.map.canvas.setOptions({styles:this.map.styles});google.maps.event.addListenerOnce(this.map.canvas,'idle',function(){_this.renderMarkers();if(_this.map.centre.title!==''){var centreIcon=_this.marker.icon;centreIcon.url=_this.map.centre.icon;var centreLocation={address:{lat:parseFloat(_this.map.centre.address.lat),lng:parseFloat(_this.map.centre.address.lng)},heading:_this.map.centre.title,location_description:_this.map.centre.description,location_image:_this.map.centre.image,icon:centreIcon.url};_this.pushMarker(centreLocation,centreIcon,false,9999);}});};CN.Map.prototype.pushMarker=function(location,icon,pushToArray,zIndex){var _this=this,latlng={lat:parseFloat(location.address.lat),lng:parseFloat(location.address.lng)},thisIcon=icon,markerSetup={position:latlng,map:this.map.canvas,icon:thisIcon,shape:this.marker.shape,title:location.heading,category:location.category,animation:google.maps.Animation.DROP};if(zIndex){markerSetup.zIndex=zIndex;}
var marker=new google.maps.Marker(markerSetup);google.maps.event.addListener(marker,'click',(function(location,thisIcon){return function(){var directionsButtonHtml='',directionsWalking='',directionsDriving='',locationIcon='',locationImage='';if(location.walking_instructions){directionsWalking='<p class="c-infobox__walking">'+location.walking_instructions+'</p>';}
if(location.driving_instructions){directionsDriving='<p class="c-infobox__driving">'+location.driving_instructions+'</p>';}
if(location.directions_url){directionsButtonHtml='<a href="'+location.directions_url+'" class="c-infobox__button" target="_blank">More info</a>';}
if(location.location_image){locationImage='<div class="c-infobox__image"><img src="'+location.location_image+'" alt="" /></div>';}
if(location.icon){locationIcon='<div class="c-infobox__icon"><img src="'+location.icon+'" alt="" /></div>';}
_this.map.infoBox.setContent('<div class="c-infobox">'+locationIcon+'<h3 class="c-infobox__heading">'+location.heading+'</h3>'+locationImage+'<p class="c-infobox__description">'+location.location_description+'</p>'+directionsWalking+directionsDriving+directionsButtonHtml+'</div>');_this.map.infoBox.open(_this.map.canvas,this);_this.map.canvas.panTo(latlng);}})(location,thisIcon));if(pushToArray!==false){_this.map.markers.push(marker);}};CN.Map.prototype.renderMarkers=function(filterKey){var _this=this;for(var i=_this.map.locations.length-1;i>=0;i--){var location=_this.map.locations[i],pushMarker=true;if(typeof(filterKey)!=='undefined'&&filterKey!==''){if(location.category!==filterKey){pushMarker=false;}}
var markerIcon=_this.marker.icon;if('undefined'!==typeof _this.options.categories&&'undefined'!==typeof location.category&&''!==location.category&&'undefined'!==typeof _this.options.categories[location.category]){markerIcon.url=_this.options.categories[location.category];location.icon=markerIcon.url;}else{markerIcon=null;}
if(pushMarker){_this.pushMarker(location,markerIcon,true);}};};CN.Map.prototype.filterMap=function(key){this.clearAllMarkers();this.renderMarkers(key);};CN.Map.prototype.clearAllMarkers=function(){var _this=this;$(this.map.markers).each(function(i){_this.map.markers[i].setMap(null);});this.map.markers=[];this.map.counter=0;};CN.Map.prototype.setupDirections=function(){var _this=this;this.directionsDisplay=new google.maps.DirectionsRenderer({map:_this.map.canvas});};CN.Map.prototype.requestDirections=function(request){if('undefined'===typeof request){return false;}
var _this=this;var directionsService=new google.maps.DirectionsService();directionsService.route(request,function(response,status){if(status==='OK'){_this.directionsDisplay.setDirections(response);}});};
(function($){'use strict';$(document).on('cnInitMap',function(event,data){var element=data&&data.element||document;$(element).find('[data-module="map"]').each(function(){new CN.Map($(this));});});$(document).trigger('cnInitMap');})(jQuery);
!function(a,b){"use strict";function c(){if(!e){e=!0;var a,c,d,f,g=-1!==navigator.appVersion.indexOf("MSIE 10"),h=!!navigator.userAgent.match(/Trident.*rv:11\./),i=b.querySelectorAll("iframe.wp-embedded-content");for(c=0;c<i.length;c++){if(d=i[c],!d.getAttribute("data-secret"))f=Math.random().toString(36).substr(2,10),d.src+="#?secret="+f,d.setAttribute("data-secret",f);if(g||h)a=d.cloneNode(!0),a.removeAttribute("security"),d.parentNode.replaceChild(a,d)}}}var d=!1,e=!1;if(b.querySelector)if(a.addEventListener)d=!0;if(a.wp=a.wp||{},!a.wp.receiveEmbedMessage)if(a.wp.receiveEmbedMessage=function(c){var d=c.data;if(d)if(d.secret||d.message||d.value)if(!/[^a-zA-Z0-9]/.test(d.secret)){var e,f,g,h,i,j=b.querySelectorAll('iframe[data-secret="'+d.secret+'"]'),k=b.querySelectorAll('blockquote[data-secret="'+d.secret+'"]');for(e=0;e<k.length;e++)k[e].style.display="none";for(e=0;e<j.length;e++)if(f=j[e],c.source===f.contentWindow){if(f.removeAttribute("style"),"height"===d.message){if(g=parseInt(d.value,10),g>1e3)g=1e3;else if(~~g<200)g=200;f.height=g}if("link"===d.message)if(h=b.createElement("a"),i=b.createElement("a"),h.href=f.getAttribute("src"),i.href=d.value,i.host===h.host)if(b.activeElement===f)a.top.location.href=d.value}else;}},d)a.addEventListener("message",a.wp.receiveEmbedMessage,!1),b.addEventListener("DOMContentLoaded",c,!1),a.addEventListener("load",c,!1)}(window,document);
jQuery(function(a){var d=a(panelsStyles.fullContainer);0===d.length&&(d=a("body"));function e(){var e=a(".siteorigin-panels-stretch.panel-row-style");e.each(function(){var e=a(this),t=e.data("stretch-type"),r="full-stretched-padded"===t?"":0;e.css({"margin-left":0,"margin-right":0,"padding-left":r,"padding-right":r});var i=e.offset().left-d.offset().left,n=d.outerWidth()-i-e.parent().outerWidth();e.css({"margin-left":-i,"margin-right":-n,"padding-left":"full"===t?i:r,"padding-right":"full"===t?n:r});var l=e.find("> .panel-grid-cell");"full-stretched"===t&&1===l.length&&l.css({"padding-left":0,"padding-right":0}),e.css({"border-left":r,"border-right":r})}),e.length&&a(window).trigger("panelsStretchRows")}a(window).on("resize load",e),e(),a("body").removeClass("siteorigin-panels-before-js")});
!function($){"use strict";var escape=/["\\\x00-\x1f\x7f-\x9f]/g,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},hasOwn=Object.prototype.hasOwnProperty;$.toJSON="object"==typeof JSON&&JSON.stringify?JSON.stringify:function(t){if(null===t)return"null";var e,r,n,o,i=$.type(t);if("undefined"!==i){if("number"===i||"boolean"===i)return String(t);if("string"===i)return $.quoteString(t);if("function"==typeof t.toJSON)return $.toJSON(t.toJSON());if("date"===i){var f=t.getUTCMonth()+1,u=t.getUTCDate(),s=t.getUTCFullYear(),a=t.getUTCHours(),l=t.getUTCMinutes(),c=t.getUTCSeconds(),p=t.getUTCMilliseconds();return f<10&&(f="0"+f),u<10&&(u="0"+u),a<10&&(a="0"+a),l<10&&(l="0"+l),c<10&&(c="0"+c),p<100&&(p="0"+p),p<10&&(p="0"+p),'"'+s+"-"+f+"-"+u+"T"+a+":"+l+":"+c+"."+p+'Z"'}if(e=[],$.isArray(t)){for(r=0;r<t.length;r++)e.push($.toJSON(t[r])||"null");return"["+e.join(",")+"]"}if("object"==typeof t){for(r in t)if(hasOwn.call(t,r)){if("number"===(i=typeof r))n='"'+r+'"';else{if("string"!==i)continue;n=$.quoteString(r)}"function"!==(i=typeof t[r])&&"undefined"!==i&&(o=$.toJSON(t[r]),e.push(n+":"+o))}return"{"+e.join(",")+"}"}}},$.evalJSON="object"==typeof JSON&&JSON.parse?JSON.parse:function(str){return eval("("+str+")")},$.secureEvalJSON="object"==typeof JSON&&JSON.parse?JSON.parse:function(str){var filtered=str.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"");if(/^[\],:{}\s]*$/.test(filtered))return eval("("+str+")");throw new SyntaxError("Error parsing JSON, source is not valid.")},$.quoteString=function(t){return t.match(escape)?'"'+t.replace(escape,function(t){var e=meta[t];return"string"==typeof e?e:(e=t.charCodeAt(),"\\u00"+Math.floor(e/16).toString(16)+(e%16).toString(16))})+'"':'"'+t+'"'}}(jQuery);
function gformBindFormatPricingFields(){jQuery(".ginput_amount, .ginput_donation_amount").off("change.gform").on("change.gform",function(){gformFormatPricingField(this)}),jQuery(".ginput_amount, .ginput_donation_amount").each(function(){gformFormatPricingField(this)})}function Currency(e){this.currency=e,this.toNumber=function(e){return this.isNumeric(e)?parseFloat(e):gformCleanNumber(e,this.currency.symbol_right,this.currency.symbol_left,this.currency.decimal_separator)},this.toMoney=function(e,r){if((r=r||!1)||(e=gformCleanNumber(e,this.currency.symbol_right,this.currency.symbol_left,this.currency.decimal_separator)),!1===e)return"";e+="",negative="","-"==e[0]&&(e=parseFloat(e.substr(1)),negative="-"),money=this.numberFormat(e,this.currency.decimals,this.currency.decimal_separator,this.currency.thousand_separator),"0.00"==money&&(negative="");var t=this.currency.symbol_left?this.currency.symbol_left+this.currency.symbol_padding:"",i=this.currency.symbol_right?this.currency.symbol_padding+this.currency.symbol_right:"";return money=negative+this.htmlDecode(t)+money+this.htmlDecode(i),money},this.numberFormat=function(e,r,t,i,n){n=void 0===n;e=(e+"").replace(",","").replace(" ","");var o,a,l,f=isFinite(+e)?+e:0,s=isFinite(+r)?Math.abs(r):0,c=void 0===i?",":i,d=void 0===t?".":t,u="";return 3<(u="0"==r?(f+=1e-10,(""+Math.round(f)).split(".")):-1==r?(""+f).split("."):(o=f+=1e-10,a=s,l=Math.pow(10,a),""+Math.round(o*l)/l).split("."))[0].length&&(u[0]=u[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,c)),n&&(u[1]||"").length<s&&(u[1]=u[1]||"",u[1]+=new Array(s-u[1].length+1).join("0")),u.join(d)},this.isNumeric=function(e){return gformIsNumber(e)},this.htmlDecode=function(e){var r,t,i=e,n=i.match(/&#[0-9]{1,5};/g);if(null!=n)for(var o=0;o<n.length;o++)i=-32768<=(r=(t=n[o]).substring(2,t.length-1))&&r<=65535?i.replace(t,String.fromCharCode(r)):i.replace(t,"");return i}}function gformCleanNumber(e,r,t,i){var n="",o="",a="",l=!1;e=(e=(e=(e+=" ").replace(/&.*?;/g,"")).replace(r,"")).replace(t,"");for(var f=0;f<e.length;f++)a=e.substr(f,1),0<=parseInt(a,10)&&parseInt(a,10)<=9||a==i?n+=a:"-"==a&&(l=!0);for(f=0;f<n.length;f++)"0"<=(a=n.substr(f,1))&&a<="9"?o+=a:a==i&&(o+=".");return l&&(o="-"+o),!!gformIsNumber(o)&&parseFloat(o)}function gformGetDecimalSeparator(e){var r;switch(e){case"currency":r=new Currency(gf_global.gf_currency_config).currency.decimal_separator;break;case"decimal_comma":r=",";break;default:r="."}return r}function gformIsNumber(e){return!isNaN(parseFloat(e))&&isFinite(e)}function gformIsNumeric(e,r){switch(r){case"decimal_dot":return new RegExp("^(-?[0-9]{1,3}(?:,?[0-9]{3})*(?:.[0-9]+)?)$").test(e);case"decimal_comma":return new RegExp("^(-?[0-9]{1,3}(?:.?[0-9]{3})*(?:,[0-9]+)?)$").test(e)}return!1}function gformDeleteUploadedFile(e,r,t){var i=jQuery("#field_"+e+"_"+r),n=jQuery(t).parent().index();i.find(".ginput_preview").eq(n).remove(),i.find('input[type="file"],.validation_message,#extensions_message_'+e+"_"+r).removeClass("gform_hidden"),i.find(".ginput_post_image_file").show(),i.find('input[type="text"]').val("");var o=jQuery("#gform_uploaded_files_"+e).val();if(o){var a=jQuery.secureEvalJSON(o);if(a){var l="input_"+r,f=i.find("#gform_multifile_upload_"+e+"_"+r);if(0<f.length){a[l].splice(n,1);var s=f.data("settings"),c=s.gf_vars.max_files;jQuery("#"+s.gf_vars.message_id).html(""),a[l].length<c&&gfMultiFileUploader.toggleDisabled(s,!1)}else a[l]=null;jQuery("#gform_uploaded_files_"+e).val(jQuery.toJSON(a))}}}void 0===jQuery.fn.prop&&(jQuery.fn.prop=jQuery.fn.attr),jQuery(document).ready(function(){jQuery(document).bind("gform_post_render",gformBindFormatPricingFields)});var _gformPriceFields=new Array,_anyProductSelected;function gformIsHidden(e){return"none"==e.parents(".gfield").not(".gfield_hidden_product").css("display")}function gformCalculateTotalPrice(e){if(_gformPriceFields[e]){var r=0;_anyProductSelected=!1;for(var t=0;t<_gformPriceFields[e].length;t++)r+=gformCalculateProductPrice(e,_gformPriceFields[e][t]);if(_anyProductSelected)r+=gformGetShippingPrice(e);window.gform_product_total&&(r=window.gform_product_total(e,r)),r=gform.applyFilters("gform_product_total",r,e);var i=jQuery(".ginput_total_"+e);if(0<i.length){var n=i.next().val(),o=gformFormatMoney(r,!0);n!=r&&i.next().val(r).change(),o!=i.first().text()&&i.html(o)}}}function gformGetShippingPrice(e){var r=jQuery(".gfield_shipping_"+e+' input[type="hidden"], .gfield_shipping_'+e+" select, .gfield_shipping_"+e+" input:checked"),t=0;return 1!=r.length||gformIsHidden(r)||(t=r.attr("type")&&"hidden"==r.attr("type").toLowerCase()?r.val():gformGetPrice(r.val())),gformToNumber(t)}function gformGetFieldId(e){var r=jQuery(e).attr("id").split("_");return r.length<=0?0:r[r.length-1]}function gformCalculateProductPrice(a,e){var r="_"+a+"_"+e;jQuery(".gfield_option"+r+", .gfield_shipping_"+a).find("select").each(function(){var e=jQuery(this),t=gformGetPrice(e.val()),i=e.attr("id").split("_")[2];e.children("option").each(function(){var e=jQuery(this),r=gformGetOptionLabel(e,e.val(),t,a,i);e.html(r)})}),jQuery(".gfield_option"+r).find(".gfield_checkbox").find("input:checkbox").each(function(){var e=jQuery(this),r=e.attr("id"),t=r.split("_")[2],i=r.replace("choice_","#label_"),n=jQuery(i),o=gformGetOptionLabel(n,e.val(),0,a,t);n.html(o)}),jQuery(".gfield_option"+r+", .gfield_shipping_"+a).find(".gfield_radio").each(function(){var n=0,e=jQuery(this),o=e.attr("id").split("_")[2],r=e.find("input:radio:checked").val();r&&(n=gformGetPrice(r)),e.find("input:radio").each(function(){var e=jQuery(this),r=e.attr("id").replace("choice_","#label_"),t=jQuery(r);if(t){var i=gformGetOptionLabel(t,e.val(),n,a,o);t.html(i)}})});var t=gformGetBasePrice(a,e),i=gformGetProductQuantity(a,e);return 0<i&&(jQuery(".gfield_option"+r).find("input:checked, select").each(function(){gformIsHidden(jQuery(this))||(t+=gformGetPrice(jQuery(this).val()))}),_anyProductSelected=!0),t=gformRoundPrice(t*=i)}function gformGetProductQuantity(e,r){if(!gformIsProductSelected(e,r))return 0;var t,i,n=jQuery("#ginput_quantity_"+e+"_"+r);if(gformIsHidden(n))return 0;0<n.length?t=n.val():(t=1,0<(n=jQuery(".gfield_quantity_"+e+"_"+r+" :input")).length&&(t=n.val(),i=gf_get_field_number_format(gf_get_input_id_by_html_id(n.attr("id")),e,"value")));return i||(i="currency"),(t=gformCleanNumber(t,"","",gformGetDecimalSeparator(i)))||(t=0),t}function gformIsProductSelected(e,r){var t="_"+e+"_"+r,i=jQuery("#ginput_base_price"+t+", .gfield_donation"+t+' input[type="text"], .gfield_product'+t+" .ginput_amount");return!(!i.val()||gformIsHidden(i))||!(!(i=jQuery(".gfield_product"+t+" select, .gfield_product"+t+" input:checked, .gfield_donation"+t+" select, .gfield_donation"+t+" input:checked")).val()||gformIsHidden(i))}function gformGetBasePrice(e,r){var t="_"+e+"_"+r,i=0,n=jQuery("#ginput_base_price"+t+", .gfield_donation"+t+' input[type="text"], .gfield_product'+t+" .ginput_amount");if(0<n.length)i=n.val(),gformIsHidden(n)&&(i=0);else{var o=(n=jQuery(".gfield_product"+t+" select, .gfield_product"+t+" input:checked, .gfield_donation"+t+" select, .gfield_donation"+t+" input:checked")).val();o&&(i=1<(o=o.split("|")).length?o[1]:0),gformIsHidden(n)&&(i=0)}return!1===(i=new Currency(gf_global.gf_currency_config).toNumber(i))?0:i}function gformFormatMoney(e,r){return gf_global.gf_currency_config?new Currency(gf_global.gf_currency_config).toMoney(e,r):e}function gformFormatPricingField(e){if(gf_global.gf_currency_config){var r=new Currency(gf_global.gf_currency_config).toMoney(jQuery(e).val());jQuery(e).val(r)}}function gformToNumber(e){return new Currency(gf_global.gf_currency_config).toNumber(e)}function gformGetPriceDifference(e,r){var t=parseFloat(r)-parseFloat(e);return price=gformFormatMoney(t,!0),0<t&&(price="+"+price),price}function gformGetOptionLabel(e,r,t,i,n){e=jQuery(e);var o=gformGetPrice(r),a=e.attr("price"),l=e.html().replace(/<span(.*)<\/span>/i,"").replace(a,""),f=gformGetPriceDifference(t,o);f=0==gformToNumber(f)?"":" "+f,e.attr("price",f);var s="option"==e[0].tagName.toLowerCase()?" "+f:"<span class='ginput_price'>"+f+"</span>",c=l+s;return window.gform_format_option_label&&(c=gform_format_option_label(c,l,s,t,o,i,n)),c}function gformGetProductIds(e,r){for(var t=jQuery(r).hasClass(e)?jQuery(r).attr("class").split(" "):jQuery(r).parents("."+e).attr("class").split(" "),i=0;i<t.length;i++)if(t[i].substr(0,e.length)==e&&t[i]!=e)return{formId:t[i].split("_")[2],productFieldId:t[i].split("_")[3]};return{formId:0,fieldId:0}}function gformGetPrice(e){var r=e.split("|"),t=new Currency(gf_global.gf_currency_config);return 1<r.length&&!1!==t.toNumber(r[1])?t.toNumber(r[1]):0}function gformRoundPrice(e){var r=new Currency(gf_global.gf_currency_config),t=r.numberFormat(e,r.currency.decimals,".","");return parseFloat(t)}function gformRegisterPriceField(e){_gformPriceFields[e.formId]||(_gformPriceFields[e.formId]=new Array);for(var r=0;r<_gformPriceFields[e.formId].length;r++)if(_gformPriceFields[e.formId][r]==e.productFieldId)return;_gformPriceFields[e.formId].push(e.productFieldId)}function gformInitPriceFields(){for(formId in jQuery(".gfield_price").each(function(){gformRegisterPriceField(gformGetProductIds("gfield_price",this)),jQuery(this).on("change",'input[type="text"], input[type="number"], select',function(){var e=gformGetProductIds("gfield_price",this);0==e.formId&&(e=gformGetProductIds("gfield_shipping",this)),jQuery(document).trigger("gform_price_change",[e,this]),gformCalculateTotalPrice(e.formId)}),jQuery(this).on("click",'input[type="radio"], input[type="checkbox"]',function(){var e=gformGetProductIds("gfield_price",this);0==e.formId&&(e=gformGetProductIds("gfield_shipping",this)),jQuery(document).trigger("gform_price_change",[e,this]),gformCalculateTotalPrice(e.formId)})}),_gformPriceFields)_gformPriceFields.hasOwnProperty(formId)&&gformCalculateTotalPrice(formId)}function gformShowPasswordStrength(e){var r=gformPasswordStrength(jQuery("#"+e).val(),jQuery("#"+e+"_2").val()),t=window.gf_text["password_"+r];jQuery("#"+e+"_strength").val(r),jQuery("#"+e+"_strength_indicator").removeClass("blank mismatch short good bad strong").addClass(r).html(t)}function gformPasswordStrength(e,r){var t,i=0;return e.length<=0?"blank":e!=r&&0<r.length?"mismatch":e.length<4?"short":(e.match(/[0-9]/)&&(i+=10),e.match(/[a-z]/)&&(i+=26),e.match(/[A-Z]/)&&(i+=26),e.match(/[^a-zA-Z0-9]/)&&(i+=31),(t=Math.log(Math.pow(i,e.length))/Math.LN2)<40?"bad":t<56?"good":"strong")}function gformToggleCheckboxes(e){var r=jQuery(e).parent(),t=r.find("label");$checkboxes=r.parent().find("li:not( .gchoice_select_all )"),$checkboxes.each(function(){jQuery('input[type="checkbox"]',this).prop("checked",e.checked).trigger("change"),"function"==typeof jQuery('input[type="checkbox"]',this)[0].onclick&&jQuery('input[type="checkbox"]',this)[0].onclick()}),e.checked?t.html(t.data("label-deselect")):t.html(t.data("label-select"))}function gformAddListItem(e,r){var t=jQuery(e);if(!t.hasClass("gfield_icon_disabled")){var i=t.parents(".gfield_list_group"),n=i.clone(),o=i.parents(".gfield_list_container"),a=n.find(":input:last").attr("tabindex");n.find("input, select, textarea").attr("tabindex",a).not(":checkbox, :radio").val(""),n.find(":checkbox, :radio").prop("checked",!1),n=gform.applyFilters("gform_list_item_pre_add",n,i),i.after(n),gformToggleIcons(o,r),gformAdjustClasses(o),gform.doAction("gform_list_post_item_add",n,o)}}function gformDeleteListItem(e,r){var t=jQuery(e).parents(".gfield_list_group"),i=t.parents(".gfield_list_container");t.remove(),gformToggleIcons(i,r),gformAdjustClasses(i),gform.doAction("gform_list_post_item_delete",i)}function gformAdjustClasses(e){e.find(".gfield_list_group").each(function(e){var r=(e+1)%2==0?"gfield_list_row_even":"gfield_list_row_odd";jQuery(this).removeClass("gfield_list_row_odd gfield_list_row_even").addClass(r)})}function gformToggleIcons(e,r){var t=e.find(".gfield_list_group").length,i=e.find(".add_list_item");e.find(".delete_list_item").css("visibility",1==t?"hidden":"visible"),0<r&&r<=t?(i.data("title",e.find(".add_list_item").attr("title")),i.addClass("gfield_icon_disabled").attr("title","")):0<r&&(i.removeClass("gfield_icon_disabled"),i.data("title")&&i.attr("title",i.data("title")))}function gformAddRepeaterItem(e,r){var t=jQuery(e);if(!t.hasClass("gfield_icon_disabled")){var i=t.closest(".gfield_repeater_item"),n=i.clone(),o=i.closest(".gfield_repeater_container"),a=n.find(":input:last").attr("tabindex");n.find('input[type!="hidden"], select, textarea').attr("tabindex",a).not(":checkbox, :radio").val(""),n.find(":checkbox, :radio").prop("checked",!1),n.find(".validation_message").remove(),n=gform.applyFilters("gform_repeater_item_pre_add",n,i),i.after(n),n.children(".gfield_repeater_cell").each(function(){var e=jQuery(this).find(".gfield_repeater_container").first();0<e.length&&(resetContainerItems=function(e){e.children(".gfield_repeater_items").children(".gfield_repeater_item").each(function(e){jQuery(this).children(".gfield_repeater_cell").each(function(){var e=jQuery(this).find(".gfield_repeater_container").first();0<e.length&&resetContainerItems(e)})}),e.children(".gfield_repeater_items").children(".gfield_repeater_item").not(":first").remove()},resetContainerItems(e))}),gformResetRepeaterAttributes(o),"function"==typeof gformInitDatepicker&&(o.find(".ui-datepicker-trigger").remove(),o.find(".hasDatepicker").removeClass("hasDatepicker"),gformInitDatepicker()),gformBindFormatPricingFields(),gformToggleRepeaterButtons(o,r),gform.doAction("gform_repeater_post_item_add",n,o)}}function gformDeleteRepeaterItem(e,r){var t=jQuery(e).closest(".gfield_repeater_item"),i=t.closest(".gfield_repeater_container");t.remove(),gformResetRepeaterAttributes(i),gformToggleRepeaterButtons(i,r),gform.doAction("gform_repeater_post_item_delete",i)}function gformResetRepeaterAttributes(e,p,h){var y=null;void 0===p&&(p=0),void 0===h&&(h=0),e.children(".gfield_repeater_items").children(".gfield_repeater_item").each(function(){jQuery(this).children(".gfield_repeater_cell").each(function(){var m=jQuery(this),e=jQuery(this).find(".gfield_repeater_container").first();0<e.length?gformResetRepeaterAttributes(e,p+1,h):jQuery(this).find("input, select, textarea, :checkbox, :radio").each(function(){var e=jQuery(this),r=e.attr("name");if(void 0!==r){var t=/^(input_[^\[]*)((\[[0-9]+\])+)/.exec(r);if(t){t[1];for(var i=t[2],n=/\[([0-9]+)\]/g,o=[],a=n.exec(i);null!=a;)o.push(a[1]),a=n.exec(i);for(var l=t[1],f="",s=(o=o.reverse()).length-1;0<=s;s--)s==p?(l+="["+h+"]",f+="-"+h):(l+="["+o[s]+"]",f+="-"+o[s]);var c=e.attr("id"),d=m.find("label[for='"+c+"']");if(c){var u=c.match(/((choice|input)_[0-9|_]*)-/);u&&u[2]&&(f=u[1]+f,d.attr("for",f),e.attr("id",f))}var g=r.replace(t[0],l),_=jQuery('input[name="'+g+'"]').is(":checked");e.is(":radio")&&e.is(":checked")&&r!==g&&_&&(null!==y&&y.prop("checked",!0),e.prop("checked",!1),y=e),e.attr("name",g)}}})}),0===p&&h++}),null!==y&&(y.prop("checked",!0),y=null)}function gformToggleRepeaterButtons(e){var r=e.closest(".gfield_repeater_wrapper").data("max_items"),t=e.children(".gfield_repeater_items").children(".gfield_repeater_item").length,i=e.children(".gfield_repeater_items").children(".gfield_repeater_item").children(".gfield_repeater_buttons"),n=i.children(".add_repeater_item");i.children(".remove_repeater_item").css("visibility",1==t?"hidden":"visible"),0<r&&r<=t?(n.data("title",i.children(".add_repeater_item").attr("title")),n.addClass("gfield_icon_disabled").attr("title","")):0<r&&(n.removeClass("gfield_icon_disabled"),n.data("title")&&n.attr("title",n.data("title"))),e.children(".gfield_repeater_items").children(".gfield_repeater_item").children(".gfield_repeater_cell").each(function(e){var r=jQuery(this).find(".gfield_repeater_container").first();0<r.length&&gformToggleRepeaterButtons(r)})}function gformMatchCard(e){var r=gformFindCardType(jQuery("#"+e).val()),t=jQuery("#"+e).parents(".gfield").find(".gform_card_icon_container");r?(jQuery(t).find(".gform_card_icon").removeClass("gform_card_icon_selected").addClass("gform_card_icon_inactive"),jQuery(t).find(".gform_card_icon_"+r).removeClass("gform_card_icon_inactive").addClass("gform_card_icon_selected")):jQuery(t).find(".gform_card_icon").removeClass("gform_card_icon_selected gform_card_icon_inactive")}function gformFindCardType(e){if(e.length<4)return!1;var r=window.gf_cc_rules,t=new Array;for(type in r)if(r.hasOwnProperty(type))for(i in r[type])if(r[type].hasOwnProperty(i)&&0===r[type][i].indexOf(e.substring(0,r[type][i].length))){t[t.length]=type;break}return 1==t.length&&t[0].toLowerCase()}function gformToggleCreditCard(){jQuery("#gform_payment_method_creditcard").is(":checked")?jQuery(".gform_card_fields_container").slideDown():jQuery(".gform_card_fields_container").slideUp()}function gformInitChosenFields(e,t){return jQuery(e).each(function(){var e=jQuery(this);if("rtl"==jQuery("html").attr("dir")&&e.addClass("chosen-rtl chzn-rtl"),e.is(":visible")&&0==e.siblings(".chosen-container").length){var r=gform.applyFilters("gform_chosen_options",{no_results_text:t},e);e.chosen(r)}})}function gformInitCurrencyFormatFields(e){jQuery(e).each(function(){jQuery(this).val(gformFormatMoney(jQuery(this).val()))}).change(function(e){jQuery(this).val(gformFormatMoney(jQuery(this).val()))})}var GFMergeTag=function(){GFMergeTag.getMergeTagValue=function(e,r,t){void 0===t&&(t=""),t=t.replace(":","");var i,n=parseInt(r,10),o=jQuery("#field_"+e+"_"+n),a=n==r?'input[name^="input_'+n+'"]':'input[name="input_'+r+'"]',l=o.find(a+', select[name^="input_'+r+'"], textarea[name="input_'+r+'"]');if(!(!window.gf_check_field_rule||"show"==gf_check_field_rule(e,n,!0,"")))return"";var f=gform.applyFilters("gform_value_merge_tag_"+e+"_"+n,!1,l,t);if(!1!==f)return f;switch(f="",t){case"label":return o.find(".gfield_label").text();case"qty":if(o.hasClass("gfield_price"))return!1===(i=gformGetProductQuantity(e,n))||""===i?0:i}if("checkbox"!==l.prop("type")&&"radio"!==l.prop("type")||(l=l.filter(":checked")),1===l.length){if(!l.is("select")&&"radio"!==l.prop("type")&&"checkbox"!==l.prop("type")||""!==t)void 0===i&&(i=l.val());else if((i=l.is("select")?l.find("option:selected"):l.next("label").clone()).find("span").remove(),1===i.length)i=i.text();else{for(var s=[],c=0;c<i.length;c++)s[c]=jQuery(i[c]).text();i=s}f=jQuery.isArray(i)?i.join(", "):"string"==typeof i?GFMergeTag.formatValue(i,t):""}else if(1<l.length){i=[];for(c=0;c<l.length;c++)if("checkbox"===l.prop("type")&&""===t){var d=jQuery(l[c]).next("label").clone();d.find("span").remove(),i[c]=GFMergeTag.formatValue(d.text(),t),d.remove()}else i[c]=GFMergeTag.formatValue(jQuery(l[c]).val(),t);f=i.join(", ")}return f},GFMergeTag.replaceMergeTags=function(e,r){var t=GFMergeTag.parseMergeTags(r);for(i in t)if(t.hasOwnProperty(i)){var n=t[i][1],o=(parseInt(n,10),null==t[i][3]?"":t[i][3].replace(":","")),a=GFMergeTag.getMergeTagValue(e,n,o);r=r.replace(t[i][0],a)}return r},GFMergeTag.formatValue=function(e,r){var t="";switch(t=1<(e=e.split("|")).length&&("price"===r||"currency"===r)?gformToNumber(e[1]):e[0],r){case"price":t=!1===(t=gformToNumber(t))?"":t;break;case"currency":t=!1===(t=gformFormatMoney(t,!1))?"":t;break;case"numeric":return!1===(t=gformToNumber(t))?0:t}return t},GFMergeTag.parseMergeTags=function(e,r){void 0===r&&(r=/{[^{]*?:(\d+(\.\d+)?)(:(.*?))?}/i);for(var t=[];r.test(e);){var i=t.length;t[i]=r.exec(e),e=e.replace(""+t[i][0],"")}return t}};new GFMergeTag;var GFCalc=function(formId,formulaFields){this.formId=formId,this.formulaFields=formulaFields,this.exprPatt=/^[0-9 -/*\(\)]+$/i,this.isCalculating={},this.init=function(e,r){var t=this;jQuery(document).bind("gform_post_conditional_logic",function(){t.runCalcs(e,r)});for(var i=0;i<r.length;i++){var n=jQuery.extend({},r[i]);this.runCalc(n,e),this.bindCalcEvents(n,e)}},this.runCalc=function(formulaField,formId){var calcObj=this,field=jQuery("#field_"+formId+"_"+formulaField.field_id),formulaInput=field.hasClass("gfield_price")?jQuery("#ginput_base_price_"+formId+"_"+formulaField.field_id):jQuery("#input_"+formId+"_"+formulaField.field_id),previous_val=formulaInput.val(),formula=gform.applyFilters("gform_calculation_formula",formulaField.formula,formulaField,formId,calcObj),expr=calcObj.replaceFieldTags(formId,formula,formulaField).replace(/(\r\n|\n|\r)/gm,""),result="";if(calcObj.exprPatt.test(expr))try{result=eval(expr)}catch(e){}isFinite(result)||(result=0),window.gform_calculation_result&&(result=window.gform_calculation_result(result,formulaField,formId,calcObj),window.console&&console.log('"gform_calculation_result" function is deprecated since version 1.8! Use "gform_calculation_result" JS hook instead.')),result=gform.applyFilters("gform_calculation_result",result,formulaField,formId,calcObj);var formattedResult=gform.applyFilters("gform_calculation_format_result",!1,result,formulaField,formId,calcObj),numberFormat=gf_get_field_number_format(formulaField.field_id,formId);if(!1!==formattedResult)result=formattedResult;else if(field.hasClass("gfield_price")||"currency"==numberFormat)result=gformFormatMoney(result||0,!0);else{var decimalSeparator=".",thousandSeparator=",";"decimal_comma"==numberFormat&&(decimalSeparator=",",thousandSeparator="."),result=gformFormatNumber(result,gformIsNumber(formulaField.rounding)?formulaField.rounding:-1,decimalSeparator,thousandSeparator)}result!=previous_val&&(field.hasClass("gfield_price")?(jQuery("#input_"+formId+"_"+formulaField.field_id).text(result),formulaInput.val(result).trigger("change"),gformCalculateTotalPrice(formId)):formulaInput.val(result).trigger("change"))},this.runCalcs=function(e,r){for(var t=0;t<r.length;t++){var i=jQuery.extend({},r[t]);this.runCalc(i,e)}},this.bindCalcEvents=function(e,r){var t=this,i=e.field_id,n=GFMergeTag.parseMergeTags(e.formula);for(var o in t.isCalculating[i]=!1,n)if(n.hasOwnProperty(o)){var a=n[o][1],l=parseInt(a,10),f=jQuery("#field_"+r+"_"+l).find('input[name="input_'+a+'"], select[name="input_'+a+'"]');"checkbox"==f.prop("type")||"radio"==f.prop("type")?jQuery(f).click(function(){t.bindCalcEvent(a,e,r,0)}):f.is("select")||"hidden"==f.prop("type")?jQuery(f).change(function(){t.bindCalcEvent(a,e,r,0)}):jQuery(f).keydown(function(){t.bindCalcEvent(a,e,r)}).change(function(){t.bindCalcEvent(a,e,r,0)}),gform.doAction("gform_post_calculation_events",n[o],e,r,t)}},this.bindCalcEvent=function(e,r,t,i){var n=this,o=r.field_id;i=null==i?345:i,n.isCalculating[o][e]&&clearTimeout(n.isCalculating[o][e]),n.isCalculating[o][e]=window.setTimeout(function(){n.runCalc(r,t)},i)},this.replaceFieldTags=function(e,r,t){var n=GFMergeTag.parseMergeTags(r);for(i in n)if(n.hasOwnProperty(i)){var o=n[i][1],a=parseInt(o,10),l="value";if(n[i][3])l=n[i][3];else{var f=jQuery(".gfield_price input[name=input_"+a+"]").is("input[type=radio]"),s=0<jQuery(".gfield_price select[name=input_"+a+"]").length,c=jQuery('.gfield_price input[name="input_'+o+'"]').is("input[type=checkbox]");(s||f||c)&&(l="price")}var d=!window.gf_check_field_rule||"show"==gf_check_field_rule(e,a,!0,""),u=d?GFMergeTag.getMergeTagValue(e,o,l):0;u=gform.applyFilters("gform_merge_tag_value_pre_calculation",u,n[i],d,t,e),u=this.cleanNumber(u,e,a,t),r=r.replace(n[i][0],u)}return r},this.cleanNumber=function(e,r,t,i){var n=gf_get_field_number_format(t,r);return n||(n=gf_get_field_number_format(i.field_id,r)),(e=gformCleanNumber(e,"","",gformGetDecimalSeparator(n)))||(e=0),e},this.init(formId,formulaFields)};function gformFormatNumber(e,r,t,i){void 0===t&&(t=window.gf_global?new Currency(gf_global.gf_currency_config).currency.decimal_separator:".");void 0===i&&(i=window.gf_global?new Currency(gf_global.gf_currency_config).currency.thousand_separator:",");return(new Currency).numberFormat(e,r,t,i,!1)}function gformToNumber(e){return new Currency(gf_global.gf_currency_config).toNumber(e)}function getMatchGroups(e,r){for(var t=new Array;r.test(e);){var i=t.length;t[i]=r.exec(e),e=e.replace(""+t[i][0],"")}return t}function gf_get_field_number_format(e,r,t){var i=rgars(window,"gf_global/number_formats/{0}/{1}".format(r,e)),n=!1;return""===i?n:n=void 0===t?!1!==i.price?i.price:i.value:i[t]}var gform={hooks:{action:{},filter:{}},addAction:function(e,r,t,i){gform.addHook("action",e,r,t,i)},addFilter:function(e,r,t,i){gform.addHook("filter",e,r,t,i)},doAction:function(e){gform.doHook("action",e,arguments)},applyFilters:function(e){return gform.doHook("filter",e,arguments)},removeAction:function(e,r){gform.removeHook("action",e,r)},removeFilter:function(e,r,t){gform.removeHook("filter",e,r,t)},addHook:function(e,r,t,i,n){null==gform.hooks[e][r]&&(gform.hooks[e][r]=[]);var o=gform.hooks[e][r];null==n&&(n=r+"_"+o.length),null==i&&(i=10),gform.hooks[e][r].push({tag:n,callable:t,priority:i})},doHook:function(e,r,t){if(t=Array.prototype.slice.call(t,1),null!=gform.hooks[e][r]){var i,n=gform.hooks[e][r];n.sort(function(e,r){return e.priority-r.priority});for(var o=0;o<n.length;o++)"function"!=typeof(i=n[o].callable)&&(i=window[i]),"action"==e?i.apply(null,t):t[0]=i.apply(null,t)}if("filter"==e)return t[0]},removeHook:function(e,r,t,i){if(null!=gform.hooks[e][r])for(var n=gform.hooks[e][r],o=n.length-1;0<=o;o--)null!=i&&i!=n[o].tag||null!=t&&t!=n[o].priority||n.splice(o,1)}},__gf_keyup_timeout;function renderRecaptcha(){jQuery(".ginput_recaptcha").each(function(){var r=jQuery(this),e={sitekey:r.data("sitekey"),theme:r.data("theme"),tabindex:r.data("tabindex")};if(r.is(":empty")){r.data("stoken")&&(e.stoken=r.data("stoken"));var t=!1;"invisible"==r.data("size")&&(t=function(e){e&&r.closest("form").submit()}),(t=gform.applyFilters("gform_recaptcha_callback",t,r))&&(e.callback=t),r.data("widget-id",grecaptcha.render(this.id,e)),e.tabindex&&r.find("iframe").attr("tabindex",e.tabindex),gform.doAction("gform_post_recaptcha_render",r)}})}function gformValidateFileSize(e,r){var t;if(t=0<jQuery(e).closest("div").siblings(".validation_message").length?jQuery(e).closest("div").siblings(".validation_message"):jQuery(e).siblings(".validation_message"),window.FileReader&&window.File&&window.FileList&&window.Blob){var i=e.files[0];i&&i.size>r?t.text(i.name+" - "+gform_gravityforms.strings.file_exceeds_limit):t.text("")}}function gformInitSpinner(e,r){jQuery("#gform_"+e).submit(function(){gformAddSpinner(e,r)})}function gformAddSpinner(e,r){(void 0!==r&&r||(r=gform.applyFilters("gform_spinner_url",gf_global.spinnerUrl,e)),0==jQuery("#gform_ajax_spinner_"+e).length)&&gform.applyFilters("gform_spinner_target_elem",jQuery("#gform_submit_button_"+e+", #gform_wrapper_"+e+" .gform_next_button, #gform_send_resume_link_button_"+e),e).after('<img id="gform_ajax_spinner_'+e+'"  class="gform_ajax_spinner" src="'+r+'" alt="" />')}function gf_raw_input_change(e,r){clearTimeout(__gf_keyup_timeout);var t=jQuery(r),i=t.attr("id"),n=gf_get_input_id_by_html_id(i),o=gf_get_form_id_by_html_id(i),a=gform.applyFilters("gform_field_meta_raw_input_change",{fieldId:n,formId:o},t,e);if(n=a.fieldId,o=a.formId,n){var l=t.is(":checkbox")||t.is(":radio")||t.is("select"),f=!l||t.is("textarea");("keyup"!=e.type||f)&&("change"!=e.type||l||f)&&("keyup"==e.type?__gf_keyup_timeout=setTimeout(function(){gf_input_change(this,o,n)},300):gf_input_change(this,o,n))}}function gf_get_input_id_by_html_id(e){var r=gf_get_ids_by_html_id(e),t=r[2];return r[3]&&(t+="."+r[3]),t}function gf_get_form_id_by_html_id(e){return gf_get_ids_by_html_id(e)[1]}function gf_get_ids_by_html_id(e){return!!e&&e.split("_")}function gf_input_change(e,r,t){gform.doAction("gform_input_change",e,r,t)}function gformExtractFieldId(e){var r=parseInt(e.toString().split(".")[0],10);return r||e}function gformExtractInputIndex(e){var r=parseInt(e.toString().split(".")[1],10);return r||!1}if(function(d,b){d.uploaders={};var j="undefined"!=typeof gform_gravityforms?gform_gravityforms.strings:{},F="undefined"!=typeof gform_gravityforms?gform_gravityforms.vars.images_url:"";function i(e){var m,i,r=b(e).data("settings"),t=new plupload.Uploader(r);function p(e,r){b("#"+e).prepend("<li>"+Q(r)+"</li>")}function h(){var e;return e=void 0===(e=b("#gform_uploaded_files_"+m).val())||""===e?{}:b.parseJSON(e)}function y(e){var r=h(),t=v(e);return void 0===r[t]&&(r[t]=[]),r[t]}function c(e){return y(e).length}function v(e){return"input_"+e}function n(e){e.preventDefault()}m=t.settings.multipart_params.form_id,(d.uploaders[r.container]=t).bind("Init",function(e,r){e.features.dragdrop||b(".gform_drop_instructions").hide();var t=e.settings.multipart_params.field_id,i=parseInt(e.settings.gf_vars.max_files,10),n=c(t);0<i&&i<=n&&d.toggleDisabled(e.settings,!0)}),d.toggleDisabled=function(e,r){("string"==typeof e.browse_button?b("#"+e.browse_button):b(e.browse_button)).prop("disabled",r)},t.init(),t.bind("BeforeUpload",function(e,r){e.settings.multipart_params.original_filename=r.name}),t.bind("FilesAdded",function(o,e){var a,l=parseInt(o.settings.gf_vars.max_files,10),f=c(o.settings.multipart_params.field_id),s=o.settings.gf_vars.disallowed_extensions;if(0<l&&l<=f)b.each(e,function(e,r){o.removeFile(r)});else{b.each(e,function(e,r){if(a=r.name.split(".").pop(),-1<b.inArray(a,s))return p(o.settings.gf_vars.message_id,r.name+" - "+j.illegal_extension),void o.removeFile(r);if(r.status==plupload.FAILED||0<l&&l<=f)o.removeFile(r);else{var t=void 0!==r.size?plupload.formatSize(r.size):j.in_progress,i="$this=jQuery(this); var uploader = gfMultiFileUploader.uploaders."+o.settings.container.id+";uploader.stop();uploader.removeFile(uploader.getFile('"+r.id+"'));$this.after('"+j.cancelled+"'); uploader.start();$this.remove();",n='<div id="{0}" class="ginput_preview">{1} ({2}) <b></b> <a href="javascript:void(0)" title="{3}" onclick="{4}" onkeypress="{4}">{5}</a></div>';n=gform.applyFilters("gform_file_upload_status_markup",n,r,t,j,i,o).format(r.id,Q(r.name),t,j.cancel_upload,i,j.cancel),b("#"+o.settings.filelist).prepend(n),f++}}),o.refresh();var r="input:hidden[name='gform_unique_id']",t=b("form#gform_"+m+" "+r);0==t.length&&(t=b(r)),""===(i=t.val())&&(i="xxxxxxxx".replace(/[xy]/g,function(e){var r=16*Math.random()|0,t="x"==e?r:3&r|8;return t.toString(16)}),t.val(i)),0<l&&l<=f&&(d.toggleDisabled(o.settings,!0),p(o.settings.gf_vars.message_id,j.max_reached)),o.settings.multipart_params.gform_unique_id=i,o.start()}}),t.bind("UploadProgress",function(e,r){var t=r.percent+"%";b("#"+r.id+" b").html(t)}),t.bind("Error",function(e,r){if(r.code===plupload.FILE_EXTENSION_ERROR){var t=void 0!==e.settings.filters.mime_types?e.settings.filters.mime_types[0].extensions:e.settings.filters[0].extensions;p(e.settings.gf_vars.message_id,r.file.name+" - "+j.invalid_file_extension+" "+t)}else if(r.code===plupload.FILE_SIZE_ERROR)p(e.settings.gf_vars.message_id,r.file.name+" - "+j.file_exceeds_limit);else{var i="Error: "+r.code+", Message: "+r.message+(r.file?", File: "+r.file.name:"");p(e.settings.gf_vars.message_id,i)}b("#"+r.file.id).html(""),e.refresh()}),t.bind("ChunkUploaded",function(e,r,t){var i=b.secureEvalJSON(t.response);"error"==i.status&&(e.removeFile(r),p(e.settings.gf_vars.message_id,r.name+" - "+i.error.message),b("#"+r.id).html(""))}),t.bind("FileUploaded",function(e,r,t){if(e.getFile(r.id)){var i=b.secureEvalJSON(t.response);if("error"==i.status)return p(e.settings.gf_vars.message_id,r.name+" - "+i.error.message),void b("#"+r.id).html("");var n,o,a,l,f,s,c,d,u="<strong>"+Q(r.name)+"</strong>",g=e.settings.multipart_params.form_id,_=e.settings.multipart_params.field_id;u="<img class='gform_delete' src='"+F+"/delete.png' onclick='gformDeleteUploadedFile("+g+","+_+", this);' onkeypress='gformDeleteUploadedFile("+g+","+_+", this);' alt='"+j.delete_file+"' title='"+j.delete_file+"' /> "+u,u=gform.applyFilters("gform_file_upload_markup",u,r,e,j,F),b("#"+r.id).html(u),100==r.percent&&(i.status&&"ok"==i.status?(n=_,o=i.data,(a=y(n)).unshift(o),l=n,f=a,s=h(),c=b("#gform_uploaded_files_"+m),d=v(l),s[d]=f,c.val(b.toJSON(s))):p(e.settings.gf_vars.message_id,j.unknown_error+": "+r.name))}}),b("#"+r.drop_element).on({dragenter:n,dragover:n})}function Q(e){return b("<div/>").text(e).html()}b(document).bind("gform_post_render",function(e,r){b("form#gform_"+r+" .gform_fileupload_multifile").each(function(){i(this)});var t=b("form#gform_"+r);0<t.length&&t.submit(function(){var t=!1;if(b.each(d.uploaders,function(e,r){if(0<r.total.queued)return!(t=!0)}),t)return alert(j.currently_uploading),window["gf_submitting_"+r]=!1,b("#gform_ajax_spinner_"+r).remove(),!1})}),b(document).bind("gform_post_conditional_logic",function(e,r,t,i){i||b.each(d.uploaders,function(e,r){r.refresh()})}),b(document).ready(function(){"undefined"!=typeof adminpage&&"toplevel_page_gf_edit_forms"===adminpage||"undefined"==typeof plupload?b(".gform_button_select_files").prop("disabled",!0):"undefined"!=typeof adminpage&&-1<adminpage.indexOf("_page_gf_entries")&&b(".gform_fileupload_multifile").each(function(){i(this)})}),d.setup=function(e){i(e)}}(window.gfMultiFileUploader=window.gfMultiFileUploader||{},jQuery),jQuery(document).on("change keyup",".gfield input, .gfield select, .gfield textarea",function(e){gf_raw_input_change(e,this)}),jQuery(document).on("submit.gravityforms",".gform_wrapper form",function(e){var r,t=jQuery(this).closest(".gform_wrapper"),i=t.attr("id").split("_")[2],n=0<t.find(".gform_page").length,o=parseInt(t.find('input[name^="gform_source_page_number_"]').val(),10),a=parseInt(t.find('input[name^="gform_target_page_number_"]').val(),10),l=0===a,f=!l&&o<a,s="1"===jQuery("#gform_save_"+i).val();if(n){var c=f?"next":"submit";r=t.find(".gform_page:visible").find('.gform_page_footer [id^="gform_'+c+'_button_"]')}else r=t.find("#gform_submit_button_"+i);var d=!r.is(":visible");if(!s&&(l||f)&&d)window["gf_submitting_"+i]=!1,t.find(".gform_ajax_spinner").remove(),e.preventDefault();else if(l||l){var u=t.find(".ginput_recaptcha");if(0!==u.length&&"invisible"===u.data("size")){var g=t.find('input[name="g-recaptcha-response"]');0===g.length&&(g=u.find(".g-recaptcha-response")),g.val()||(grecaptcha.execute(u.data("widget-id")),e.preventDefault())}}}),!window.rgars)function rgars(e,r){for(var t=r.split("/"),i=e,n=0;n<t.length;n++)i=rgar(i,t[n]);return i}if(!window.rgar)function rgar(e,r){return void 0!==e[r]?e[r]:""}String.prototype.format=function(){var t=arguments;return this.replace(/{(\d+)}/g,function(e,r){return void 0!==t[r]?t[r]:e})};